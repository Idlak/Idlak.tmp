<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: OnlineProcessPitch Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classkaldi_1_1OnlineProcessPitch.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classkaldi_1_1OnlineProcessPitch-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">OnlineProcessPitch Class Reference<div class="ingroups"><a class="el" href="group__feat.html">FeatureExtraction</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This online-feature class implements post processing of pitch features.  
 <a href="classkaldi_1_1OnlineProcessPitch.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="pitch-functions_8h_source.html">pitch-functions.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for OnlineProcessPitch:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1OnlineProcessPitch__inherit__graph.png" border="0" usemap="#OnlineProcessPitch_inherit__map" alt="Inheritance graph"/></div>
<map name="OnlineProcessPitch_inherit__map" id="OnlineProcessPitch_inherit__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for OnlineProcessPitch:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1OnlineProcessPitch__coll__graph.png" border="0" usemap="#OnlineProcessPitch_coll__map" alt="Collaboration graph"/></div>
<map name="OnlineProcessPitch_coll__map" id="OnlineProcessPitch_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1OnlineProcessPitch_1_1NormalizationStats.html">NormalizationStats</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1a121442e95f6b43f46a61cefffb2252"><td class="memItemLeft" align="right" valign="top">virtual int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#a1a121442e95f6b43f46a61cefffb2252">Dim</a> () const</td></tr>
<tr class="separator:a1a121442e95f6b43f46a61cefffb2252"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09424857e2822aa52300244882a1307b"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#a09424857e2822aa52300244882a1307b">IsLastFrame</a> (int32 frame) const</td></tr>
<tr class="memdesc:a09424857e2822aa52300244882a1307b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if this is the last frame.  <a href="#a09424857e2822aa52300244882a1307b">More...</a><br /></td></tr>
<tr class="separator:a09424857e2822aa52300244882a1307b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7f952bcbfcdeb496dad5dff0ebc74fc"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#ae7f952bcbfcdeb496dad5dff0ebc74fc">FrameShiftInSeconds</a> () const</td></tr>
<tr class="separator:ae7f952bcbfcdeb496dad5dff0ebc74fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a816b68dc299cc3ed745ba1f3036bc3cd"><td class="memItemLeft" align="right" valign="top">virtual int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#a816b68dc299cc3ed745ba1f3036bc3cd">NumFramesReady</a> () const</td></tr>
<tr class="memdesc:a816b68dc299cc3ed745ba1f3036bc3cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the feature dimension.  <a href="#a816b68dc299cc3ed745ba1f3036bc3cd">More...</a><br /></td></tr>
<tr class="separator:a816b68dc299cc3ed745ba1f3036bc3cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeef84368a0238c6c170d37e2c6b07dc"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#afeef84368a0238c6c170d37e2c6b07dc">GetFrame</a> (int32 frame, <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *feat)</td></tr>
<tr class="memdesc:afeef84368a0238c6c170d37e2c6b07dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the feature vector for this frame.  <a href="#afeef84368a0238c6c170d37e2c6b07dc">More...</a><br /></td></tr>
<tr class="separator:afeef84368a0238c6c170d37e2c6b07dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68d114d813fce4b7cc05752e56371452"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#a68d114d813fce4b7cc05752e56371452">~OnlineProcessPitch</a> ()</td></tr>
<tr class="separator:a68d114d813fce4b7cc05752e56371452"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8e34ca1f9e7fb93c6dc3f8f336e249d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#aa8e34ca1f9e7fb93c6dc3f8f336e249d">OnlineProcessPitch</a> (const <a class="el" href="structkaldi_1_1ProcessPitchOptions.html">ProcessPitchOptions</a> &amp;opts, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html">OnlineFeatureInterface</a> *src)</td></tr>
<tr class="memdesc:aa8e34ca1f9e7fb93c6dc3f8f336e249d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Note on the implementation of <a class="el" href="classkaldi_1_1OnlineProcessPitch.html" title="This online-feature class implements post processing of pitch features. ">OnlineProcessPitch</a>: the <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html" title="OnlineFeatureInterface is an interface for online feature processing (it is also usable in the offlin...">OnlineFeatureInterface</a> allows random access to features (i.e.  <a href="#aa8e34ca1f9e7fb93c6dc3f8f336e249d">More...</a><br /></td></tr>
<tr class="separator:aa8e34ca1f9e7fb93c6dc3f8f336e249d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classkaldi_1_1OnlineFeatureInterface"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classkaldi_1_1OnlineFeatureInterface')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html">OnlineFeatureInterface</a></td></tr>
<tr class="memitem:a6909b3bbd5e5f0434831f294b12fcb4b inherit pub_methods_classkaldi_1_1OnlineFeatureInterface"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a6909b3bbd5e5f0434831f294b12fcb4b">~OnlineFeatureInterface</a> ()</td></tr>
<tr class="memdesc:a6909b3bbd5e5f0434831f294b12fcb4b inherit pub_methods_classkaldi_1_1OnlineFeatureInterface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor.  <a href="classkaldi_1_1OnlineFeatureInterface.html#a6909b3bbd5e5f0434831f294b12fcb4b">More...</a><br /></td></tr>
<tr class="separator:a6909b3bbd5e5f0434831f294b12fcb4b inherit pub_methods_classkaldi_1_1OnlineFeatureInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a726ca809ffd3d67ab4b8476646f26635"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="classkaldi_1_1OnlineProcessPitch.html#a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb">kRawFeatureDim</a> = 2
 }</td></tr>
<tr class="separator:a726ca809ffd3d67ab4b8476646f26635"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:afac7fbf84c3322047a05d0a480b4f00e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#afac7fbf84c3322047a05d0a480b4f00e">GetPovFeature</a> (int32 frame) const</td></tr>
<tr class="memdesc:afac7fbf84c3322047a05d0a480b4f00e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes and returns the POV feature for this frame.  <a href="#afac7fbf84c3322047a05d0a480b4f00e">More...</a><br /></td></tr>
<tr class="separator:afac7fbf84c3322047a05d0a480b4f00e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac5187dacca1ac502f5d28b363a36c17"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#aac5187dacca1ac502f5d28b363a36c17">GetDeltaPitchFeature</a> (int32 frame)</td></tr>
<tr class="memdesc:aac5187dacca1ac502f5d28b363a36c17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes and returns the delta-log-pitch feature for this frame.  <a href="#aac5187dacca1ac502f5d28b363a36c17">More...</a><br /></td></tr>
<tr class="separator:aac5187dacca1ac502f5d28b363a36c17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a579a4a8a5a89fee79278a57e367bd9b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#a579a4a8a5a89fee79278a57e367bd9b9">GetRawLogPitchFeature</a> (int32 frame) const</td></tr>
<tr class="memdesc:a579a4a8a5a89fee79278a57e367bd9b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes and returns the raw log-pitch feature for this frame.  <a href="#a579a4a8a5a89fee79278a57e367bd9b9">More...</a><br /></td></tr>
<tr class="separator:a579a4a8a5a89fee79278a57e367bd9b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2d58d278610850ea7e44676765f98ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#aa2d58d278610850ea7e44676765f98ba">GetNormalizedLogPitchFeature</a> (int32 frame)</td></tr>
<tr class="memdesc:aa2d58d278610850ea7e44676765f98ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes and returns the mean-subtracted log-pitch feature for this frame.  <a href="#aa2d58d278610850ea7e44676765f98ba">More...</a><br /></td></tr>
<tr class="separator:aa2d58d278610850ea7e44676765f98ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb7a11950141a57799ce945641f9d0af"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#abb7a11950141a57799ce945641f9d0af">GetNormalizationWindow</a> (int32 frame, int32 src_frames_ready, int32 *window_begin, int32 *window_end) const</td></tr>
<tr class="memdesc:abb7a11950141a57799ce945641f9d0af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the normalization window sizes.  <a href="#abb7a11950141a57799ce945641f9d0af">More...</a><br /></td></tr>
<tr class="separator:abb7a11950141a57799ce945641f9d0af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01c224f01c12dfbdea0dfea73694bcbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#a01c224f01c12dfbdea0dfea73694bcbe">UpdateNormalizationStats</a> (int32 frame)</td></tr>
<tr class="memdesc:a01c224f01c12dfbdea0dfea73694bcbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes sure the entry in normalization_stats_ for this frame is up to date; called from GetNormalizedLogPitchFeature.  <a href="#a01c224f01c12dfbdea0dfea73694bcbe">More...</a><br /></td></tr>
<tr class="separator:a01c224f01c12dfbdea0dfea73694bcbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac35466749a33e82c59bcd5268f32c110"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structkaldi_1_1ProcessPitchOptions.html">ProcessPitchOptions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a></td></tr>
<tr class="separator:ac35466749a33e82c59bcd5268f32c110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a322065dc5fc38765ec548e481e1fc29d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1OnlineFeatureInterface.html">OnlineFeatureInterface</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a></td></tr>
<tr class="separator:a322065dc5fc38765ec548e481e1fc29d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08031ac0ce0b0973ed948e43ebd706be"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#a08031ac0ce0b0973ed948e43ebd706be">dim_</a></td></tr>
<tr class="separator:a08031ac0ce0b0973ed948e43ebd706be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23e05ffa3dfcab1f3e05bfee82e8a94e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#a23e05ffa3dfcab1f3e05bfee82e8a94e">delta_feature_noise_</a></td></tr>
<tr class="separator:a23e05ffa3dfcab1f3e05bfee82e8a94e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2395877dff3eb67bea3c3f6822c44597"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structkaldi_1_1OnlineProcessPitch_1_1NormalizationStats.html">NormalizationStats</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html#a2395877dff3eb67bea3c3f6822c44597">normalization_stats_</a></td></tr>
<tr class="separator:a2395877dff3eb67bea3c3f6822c44597"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This online-feature class implements post processing of pitch features. </p>
<p>Inputs are original 2 dims (nccf, pitch). It can produce various kinds of outputs, using the default options it will be (pov-feature, normalized-log-pitch, delta-log-pitch). </p>

<p class="definition">Definition at line <a class="el" href="pitch-functions_8h_source.html#l00332">332</a> of file <a class="el" href="pitch-functions_8h_source.html">pitch-functions.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a726ca809ffd3d67ab4b8476646f26635"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a726ca809ffd3d67ab4b8476646f26635">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb"></a>kRawFeatureDim&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="pitch-functions_8h_source.html#l00359">359</a> of file <a class="el" href="pitch-functions_8h_source.html">pitch-functions.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;{ <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb">kRawFeatureDim</a> = 2};  <span class="comment">// anonymous enum to define a constant.</span></div><div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb">kaldi::OnlineProcessPitch::kRawFeatureDim</a></div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00359">pitch-functions.h:359</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a68d114d813fce4b7cc05752e56371452"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68d114d813fce4b7cc05752e56371452">&#9670;&nbsp;</a></span>~OnlineProcessPitch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual ~<a class="el" href="classkaldi_1_1OnlineProcessPitch.html">OnlineProcessPitch</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pitch-functions_8h_source.html#l00352">352</a> of file <a class="el" href="pitch-functions_8h_source.html">pitch-functions.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;{  }</div></div><!-- fragment -->
</div>
</div>
<a id="aa8e34ca1f9e7fb93c6dc3f8f336e249d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8e34ca1f9e7fb93c6dc3f8f336e249d">&#9670;&nbsp;</a></span>OnlineProcessPitch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html">OnlineProcessPitch</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1ProcessPitchOptions.html">ProcessPitchOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1OnlineFeatureInterface.html">OnlineFeatureInterface</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Note on the implementation of <a class="el" href="classkaldi_1_1OnlineProcessPitch.html" title="This online-feature class implements post processing of pitch features. ">OnlineProcessPitch</a>: the <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html" title="OnlineFeatureInterface is an interface for online feature processing (it is also usable in the offlin...">OnlineFeatureInterface</a> allows random access to features (i.e. </p>
<p>not necessarily sequential order), so we need to support that. But we don't need to support it very efficiently, and our implementation is most efficient if frames are accessed in sequential order.</p>
<p>Also note: we have to be a bit careful in this implementation because the input features may change. That is: if we call src_-&gt;GetFrame(t, &amp;vec) from <a class="el" href="classkaldi_1_1OnlineProcessPitch.html#afeef84368a0238c6c170d37e2c6b07dc" title="Gets the feature vector for this frame. ">GetFrame()</a>, we can't guarantee that a later call to src_-&gt;GetFrame(t, &amp;vec) from another <a class="el" href="classkaldi_1_1OnlineProcessPitch.html#afeef84368a0238c6c170d37e2c6b07dc" title="Gets the feature vector for this frame. ">GetFrame()</a> will return the same value. In fact, while designing this class we used some knowledge of how the <a class="el" href="classkaldi_1_1OnlinePitchFeature.html">OnlinePitchFeature</a> class works to minimize the amount of re-querying we had to do. </p>

<p class="definition">Definition at line <a class="el" href="pitch-functions_8cc_source.html#l01398">1398</a> of file <a class="el" href="pitch-functions_8cc_source.html">pitch-functions.cc</a>.</p>

<p class="reference">References <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a1e6abebbe836e85e2eac912470f2a9e8">OnlineFeatureInterface::Dim()</a>, <a class="el" href="pitch-functions_8h_source.html#l00365">OnlineProcessPitch::dim_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, and <a class="el" href="pitch-functions_8h_source.html#l00359">OnlineProcessPitch::kRawFeatureDim</a>.</p>
<div class="fragment"><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                                :</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>(opts), <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>(src),</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a08031ac0ce0b0973ed948e43ebd706be">dim_</a> ((opts.add_pov_feature ? 1 : 0)</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;          + (opts.add_normalized_log_pitch ? 1 : 0)</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;          + (opts.add_delta_pitch ? 1 : 0)</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;          + (opts.add_raw_log_pitch ? 1 : 0)) {</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a08031ac0ce0b0973ed948e43ebd706be">dim_</a> &gt; 0 &amp;&amp;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;               <span class="stringliteral">&quot; At least one of the pitch features should be chosen. &quot;</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;               <span class="stringliteral">&quot;Check your post-process-pitch options.&quot;</span>);</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(src-&gt;Dim() == <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb">kRawFeatureDim</a> &amp;&amp;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;               <span class="stringliteral">&quot;Input feature must be pitch feature (should have dimension 2)&quot;</span>);</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;}</div><div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_ac35466749a33e82c59bcd5268f32c110"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">kaldi::OnlineProcessPitch::opts_</a></div><div class="ttdeci">ProcessPitchOptions opts_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00363">pitch-functions.h:363</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a08031ac0ce0b0973ed948e43ebd706be"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a08031ac0ce0b0973ed948e43ebd706be">kaldi::OnlineProcessPitch::dim_</a></div><div class="ttdeci">int32 dim_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00365">pitch-functions.h:365</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb">kaldi::OnlineProcessPitch::kRawFeatureDim</a></div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00359">pitch-functions.h:359</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a322065dc5fc38765ec548e481e1fc29d"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">kaldi::OnlineProcessPitch::src_</a></div><div class="ttdeci">OnlineFeatureInterface * src_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00364">pitch-functions.h:364</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1a121442e95f6b43f46a61cefffb2252"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a121442e95f6b43f46a61cefffb2252">&#9670;&nbsp;</a></span>Dim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int32 Dim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a1e6abebbe836e85e2eac912470f2a9e8">OnlineFeatureInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="pitch-functions_8h_source.html#l00334">334</a> of file <a class="el" href="pitch-functions_8h_source.html">pitch-functions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="pitch-functions_8cc_source.html#l01597">kaldi::ComputeAndProcessKaldiPitch()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01581">kaldi::ProcessPitch()</a>, <a class="el" href="pitch-functions-test_8cc_source.html#l00219">kaldi::UnitTestDelay()</a>, and <a class="el" href="pitch-functions-test_8cc_source.html#l00154">kaldi::UnitTestPieces()</a>.</p>
<div class="fragment"><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a08031ac0ce0b0973ed948e43ebd706be">dim_</a>; }</div><div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a08031ac0ce0b0973ed948e43ebd706be"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a08031ac0ce0b0973ed948e43ebd706be">kaldi::OnlineProcessPitch::dim_</a></div><div class="ttdeci">int32 dim_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00365">pitch-functions.h:365</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae7f952bcbfcdeb496dad5dff0ebc74fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7f952bcbfcdeb496dad5dff0ebc74fc">&#9670;&nbsp;</a></span>FrameShiftInSeconds()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> FrameShiftInSeconds </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a81fe3a217e16fbe4c2e680c34051bc8b">OnlineFeatureInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="pitch-functions_8h_source.html#l00344">344</a> of file <a class="el" href="pitch-functions_8h_source.html">pitch-functions.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                                                {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a81fe3a217e16fbe4c2e680c34051bc8b">FrameShiftInSeconds</a>();</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  }</div><div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a81fe3a217e16fbe4c2e680c34051bc8b"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a81fe3a217e16fbe4c2e680c34051bc8b">kaldi::OnlineFeatureInterface::FrameShiftInSeconds</a></div><div class="ttdeci">virtual BaseFloat FrameShiftInSeconds() const =0</div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a322065dc5fc38765ec548e481e1fc29d"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">kaldi::OnlineProcessPitch::src_</a></div><div class="ttdeci">OnlineFeatureInterface * src_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00364">pitch-functions.h:364</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aac5187dacca1ac502f5d28b363a36c17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac5187dacca1ac502f5d28b363a36c17">&#9670;&nbsp;</a></span>GetDeltaPitchFeature()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> GetDeltaPitchFeature </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Computes and returns the delta-log-pitch feature for this frame. </p>
<p>Called from <a class="el" href="classkaldi_1_1OnlineProcessPitch.html#afeef84368a0238c6c170d37e2c6b07dc" title="Gets the feature vector for this frame. ">GetFrame()</a>. </p>

<p class="definition">Definition at line <a class="el" href="pitch-functions_8cc_source.html#l01439">1439</a> of file <a class="el" href="pitch-functions_8cc_source.html">pitch-functions.cc</a>.</p>

<p class="reference">References <a class="el" href="feature-functions_8cc_source.html#l00160">kaldi::ComputeDeltas()</a>, <a class="el" href="pitch-functions_8h_source.html#l00379">OnlineProcessPitch::delta_feature_noise_</a>, <a class="el" href="pitch-functions_8h_source.html#l00221">ProcessPitchOptions::delta_pitch_noise_stddev</a>, <a class="el" href="pitch-functions_8h_source.html#l00220">ProcessPitchOptions::delta_pitch_scale</a>, <a class="el" href="pitch-functions_8h_source.html#l00227">ProcessPitchOptions::delta_window</a>, <a class="el" href="pitch-functions_8cc_source.html#l01468">OnlineProcessPitch::GetRawLogPitchFeature()</a>, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">OnlineFeatureInterface::NumFramesReady()</a>, <a class="el" href="pitch-functions_8h_source.html#l00363">OnlineProcessPitch::opts_</a>, <a class="el" href="feature-functions_8h_source.html#l00049">DeltaFeaturesOptions::order</a>, <a class="el" href="kaldi-math_8h_source.html#l00155">kaldi::RandGauss()</a>, <a class="el" href="pitch-functions_8h_source.html#l00364">OnlineProcessPitch::src_</a>, and <a class="el" href="feature-functions_8h_source.html#l00050">DeltaFeaturesOptions::window</a>.</p>

<p class="reference">Referenced by <a class="el" href="pitch-functions_8cc_source.html#l01414">OnlineProcessPitch::GetFrame()</a>.</p>
<div class="fragment"><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                                                              {</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  <span class="comment">// Rather than computing the delta pitch directly in code here,</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <span class="comment">// which might seem easier, we accumulate a small window of features</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  <span class="comment">// and call ComputeDeltas.  This might seem like overkill; the reason</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="comment">// we do it this way is to ensure that the end effects (at file</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <span class="comment">// beginning and end) are handled in a consistent way.</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  int32 context = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a17543b9e1065561216aa63412d6eca47">delta_window</a>;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  int32 start_frame = std::max(0, frame - context),</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      end_frame = std::min(frame + context + 1, <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">NumFramesReady</a>()),</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      frames_in_window = end_frame - start_frame;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  Matrix&lt;BaseFloat&gt; feats(frames_in_window, 1),</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      delta_feats;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="keywordflow">for</span> (int32 f = start_frame; f &lt; end_frame; f++)</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    feats(f - start_frame, 0) = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a579a4a8a5a89fee79278a57e367bd9b9">GetRawLogPitchFeature</a>(f);</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  DeltaFeaturesOptions delta_opts;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  delta_opts.order = 1;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  delta_opts.window = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a17543b9e1065561216aa63412d6eca47">delta_window</a>;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <a class="code" href="group__feat.html#ga2b867a4f7a70bcbdc3ac09e125e0ec76">ComputeDeltas</a>(delta_opts, feats, &amp;delta_feats);</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a23e05ffa3dfcab1f3e05bfee82e8a94e">delta_feature_noise_</a>.size() &lt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(frame)) {</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a23e05ffa3dfcab1f3e05bfee82e8a94e">delta_feature_noise_</a>.push_back(<a class="code" href="namespacekaldi.html#a3871a9c94a69d8807ea4c1d94e2d4ab9">RandGauss</a>() *</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                                   <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a6d10e2291fdd5555fcd0cdac22780213">delta_pitch_noise_stddev</a>);</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  }</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="comment">// note: delta_feats will have two columns, second contains deltas.</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <span class="keywordflow">return</span> (delta_feats(frame - start_frame, 1) + <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a23e05ffa3dfcab1f3e05bfee82e8a94e">delta_feature_noise_</a>[frame]) *</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;      <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#ae1ed8edd9e182833058bca3a6eda303e">delta_pitch_scale</a>;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;}</div><div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a23e05ffa3dfcab1f3e05bfee82e8a94e"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a23e05ffa3dfcab1f3e05bfee82e8a94e">kaldi::OnlineProcessPitch::delta_feature_noise_</a></div><div class="ttdeci">std::vector&lt; BaseFloat &gt; delta_feature_noise_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00379">pitch-functions.h:379</a></div></div>
<div class="ttc" id="namespacekaldi_html_a3871a9c94a69d8807ea4c1d94e2d4ab9"><div class="ttname"><a href="namespacekaldi.html#a3871a9c94a69d8807ea4c1d94e2d4ab9">kaldi::RandGauss</a></div><div class="ttdeci">float RandGauss(struct RandomState *state=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00155">kaldi-math.h:155</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_ac35466749a33e82c59bcd5268f32c110"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">kaldi::OnlineProcessPitch::opts_</a></div><div class="ttdeci">ProcessPitchOptions opts_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00363">pitch-functions.h:363</a></div></div>
<div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_a6d10e2291fdd5555fcd0cdac22780213"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#a6d10e2291fdd5555fcd0cdac22780213">kaldi::ProcessPitchOptions::delta_pitch_noise_stddev</a></div><div class="ttdeci">BaseFloat delta_pitch_noise_stddev</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00221">pitch-functions.h:221</a></div></div>
<div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_ae1ed8edd9e182833058bca3a6eda303e"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#ae1ed8edd9e182833058bca3a6eda303e">kaldi::ProcessPitchOptions::delta_pitch_scale</a></div><div class="ttdeci">BaseFloat delta_pitch_scale</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00220">pitch-functions.h:220</a></div></div>
<div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_a17543b9e1065561216aa63412d6eca47"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#a17543b9e1065561216aa63412d6eca47">kaldi::ProcessPitchOptions::delta_window</a></div><div class="ttdeci">int32 delta_window</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00227">pitch-functions.h:227</a></div></div>
<div class="ttc" id="group__feat_html_ga2b867a4f7a70bcbdc3ac09e125e0ec76"><div class="ttname"><a href="group__feat.html#ga2b867a4f7a70bcbdc3ac09e125e0ec76">kaldi::ComputeDeltas</a></div><div class="ttdeci">void ComputeDeltas(const DeltaFeaturesOptions &amp;delta_opts, const MatrixBase&lt; BaseFloat &gt; &amp;input_features, Matrix&lt; BaseFloat &gt; *output_features)</div><div class="ttdef"><b>Definition:</b> <a href="feature-functions_8cc_source.html#l00160">feature-functions.cc:160</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a322065dc5fc38765ec548e481e1fc29d"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">kaldi::OnlineProcessPitch::src_</a></div><div class="ttdeci">OnlineFeatureInterface * src_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00364">pitch-functions.h:364</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a6d4812ed73de799c457bea7f483f3593"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">kaldi::OnlineFeatureInterface::NumFramesReady</a></div><div class="ttdeci">virtual int32 NumFramesReady() const =0</div><div class="ttdoc">returns the feature dimension. </div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a579a4a8a5a89fee79278a57e367bd9b9"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a579a4a8a5a89fee79278a57e367bd9b9">kaldi::OnlineProcessPitch::GetRawLogPitchFeature</a></div><div class="ttdeci">BaseFloat GetRawLogPitchFeature(int32 frame) const</div><div class="ttdoc">Computes and returns the raw log-pitch feature for this frame. </div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8cc_source.html#l01468">pitch-functions.cc:1468</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afeef84368a0238c6c170d37e2c6b07dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeef84368a0238c6c170d37e2c6b07dc">&#9670;&nbsp;</a></span>GetFrame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GetFrame </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td>
          <td class="paramname"><em>feat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the feature vector for this frame. </p>
<p>Before calling this for a given frame, it is assumed that you called <a class="el" href="classkaldi_1_1OnlineProcessPitch.html#a816b68dc299cc3ed745ba1f3036bc3cd" title="returns the feature dimension. ">NumFramesReady()</a> and it returned a number greater than "frame". Otherwise this call will likely crash with an assert failure. This function is not declared const, in case there is some kind of caching going on, but most of the time it shouldn't modify the class. </p>

<p>Implements <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">OnlineFeatureInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="pitch-functions_8cc_source.html#l01414">1414</a> of file <a class="el" href="pitch-functions_8cc_source.html">pitch-functions.cc</a>.</p>

<p class="reference">References <a class="el" href="pitch-functions_8h_source.html#l00232">ProcessPitchOptions::add_delta_pitch</a>, <a class="el" href="pitch-functions_8h_source.html#l00231">ProcessPitchOptions::add_normalized_log_pitch</a>, <a class="el" href="pitch-functions_8h_source.html#l00230">ProcessPitchOptions::add_pov_feature</a>, <a class="el" href="pitch-functions_8h_source.html#l00233">ProcessPitchOptions::add_raw_log_pitch</a>, <a class="el" href="pitch-functions_8h_source.html#l00228">ProcessPitchOptions::delay</a>, <a class="el" href="kaldi-vector_8h_source.html#l00063">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="pitch-functions_8h_source.html#l00365">OnlineProcessPitch::dim_</a>, <a class="el" href="pitch-functions_8cc_source.html#l01439">OnlineProcessPitch::GetDeltaPitchFeature()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01476">OnlineProcessPitch::GetNormalizedLogPitchFeature()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01431">OnlineProcessPitch::GetPovFeature()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01468">OnlineProcessPitch::GetRawLogPitchFeature()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="pitch-functions_8cc_source.html#l01569">OnlineProcessPitch::NumFramesReady()</a>, and <a class="el" href="pitch-functions_8h_source.html#l00363">OnlineProcessPitch::opts_</a>.</p>

<p class="reference">Referenced by <a class="el" href="pitch-functions_8cc_source.html#l01597">kaldi::ComputeAndProcessKaldiPitch()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01581">kaldi::ProcessPitch()</a>, <a class="el" href="pitch-functions-test_8cc_source.html#l00219">kaldi::UnitTestDelay()</a>, and <a class="el" href="pitch-functions-test_8cc_source.html#l00154">kaldi::UnitTestPieces()</a>.</p>
<div class="fragment"><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                                                               {</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  int32 frame_delayed = frame &lt; <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a6a8020f43c4a2a8d6db264d454c05429">delay</a> ? 0 : frame - <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a6a8020f43c4a2a8d6db264d454c05429">delay</a>;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(feat-&gt;Dim() == <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a08031ac0ce0b0973ed948e43ebd706be">dim_</a> &amp;&amp;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;               frame_delayed &lt; <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a816b68dc299cc3ed745ba1f3036bc3cd">NumFramesReady</a>());</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  int32 index = 0;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a6833c7fc2d9a22bfa62d25a5d1242877">add_pov_feature</a>)</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    (*feat)(index++) = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#afac7fbf84c3322047a05d0a480b4f00e">GetPovFeature</a>(frame_delayed);</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#acd73bb311ca335a2a4cafe6c3746653a">add_normalized_log_pitch</a>)</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    (*feat)(index++) = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#aa2d58d278610850ea7e44676765f98ba">GetNormalizedLogPitchFeature</a>(frame_delayed);</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a2777526fb339d3c10311cc677b244296">add_delta_pitch</a>)</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    (*feat)(index++) = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#aac5187dacca1ac502f5d28b363a36c17">GetDeltaPitchFeature</a>(frame_delayed);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#aef1c9187500989c08723aec1db998cc4">add_raw_log_pitch</a>)</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    (*feat)(index++) = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a579a4a8a5a89fee79278a57e367bd9b9">GetRawLogPitchFeature</a>(frame_delayed);</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(index == <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a08031ac0ce0b0973ed948e43ebd706be">dim_</a>);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;}</div><div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_a6833c7fc2d9a22bfa62d25a5d1242877"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#a6833c7fc2d9a22bfa62d25a5d1242877">kaldi::ProcessPitchOptions::add_pov_feature</a></div><div class="ttdeci">bool add_pov_feature</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00230">pitch-functions.h:230</a></div></div>
<div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_a2777526fb339d3c10311cc677b244296"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#a2777526fb339d3c10311cc677b244296">kaldi::ProcessPitchOptions::add_delta_pitch</a></div><div class="ttdeci">bool add_delta_pitch</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00232">pitch-functions.h:232</a></div></div>
<div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_acd73bb311ca335a2a4cafe6c3746653a"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#acd73bb311ca335a2a4cafe6c3746653a">kaldi::ProcessPitchOptions::add_normalized_log_pitch</a></div><div class="ttdeci">bool add_normalized_log_pitch</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00231">pitch-functions.h:231</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_ac35466749a33e82c59bcd5268f32c110"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">kaldi::OnlineProcessPitch::opts_</a></div><div class="ttdeci">ProcessPitchOptions opts_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00363">pitch-functions.h:363</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_afac7fbf84c3322047a05d0a480b4f00e"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#afac7fbf84c3322047a05d0a480b4f00e">kaldi::OnlineProcessPitch::GetPovFeature</a></div><div class="ttdeci">BaseFloat GetPovFeature(int32 frame) const</div><div class="ttdoc">Computes and returns the POV feature for this frame. </div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8cc_source.html#l01431">pitch-functions.cc:1431</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a816b68dc299cc3ed745ba1f3036bc3cd"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a816b68dc299cc3ed745ba1f3036bc3cd">kaldi::OnlineProcessPitch::NumFramesReady</a></div><div class="ttdeci">virtual int32 NumFramesReady() const</div><div class="ttdoc">returns the feature dimension. </div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8cc_source.html#l01569">pitch-functions.cc:1569</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a08031ac0ce0b0973ed948e43ebd706be"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a08031ac0ce0b0973ed948e43ebd706be">kaldi::OnlineProcessPitch::dim_</a></div><div class="ttdeci">int32 dim_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00365">pitch-functions.h:365</a></div></div>
<div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_aef1c9187500989c08723aec1db998cc4"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#aef1c9187500989c08723aec1db998cc4">kaldi::ProcessPitchOptions::add_raw_log_pitch</a></div><div class="ttdeci">bool add_raw_log_pitch</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00233">pitch-functions.h:233</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_aa2d58d278610850ea7e44676765f98ba"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#aa2d58d278610850ea7e44676765f98ba">kaldi::OnlineProcessPitch::GetNormalizedLogPitchFeature</a></div><div class="ttdeci">BaseFloat GetNormalizedLogPitchFeature(int32 frame)</div><div class="ttdoc">Computes and returns the mean-subtracted log-pitch feature for this frame. </div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8cc_source.html#l01476">pitch-functions.cc:1476</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_aac5187dacca1ac502f5d28b363a36c17"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#aac5187dacca1ac502f5d28b363a36c17">kaldi::OnlineProcessPitch::GetDeltaPitchFeature</a></div><div class="ttdeci">BaseFloat GetDeltaPitchFeature(int32 frame)</div><div class="ttdoc">Computes and returns the delta-log-pitch feature for this frame. </div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8cc_source.html#l01439">pitch-functions.cc:1439</a></div></div>
<div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_a6a8020f43c4a2a8d6db264d454c05429"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#a6a8020f43c4a2a8d6db264d454c05429">kaldi::ProcessPitchOptions::delay</a></div><div class="ttdeci">int32 delay</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00228">pitch-functions.h:228</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a579a4a8a5a89fee79278a57e367bd9b9"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a579a4a8a5a89fee79278a57e367bd9b9">kaldi::OnlineProcessPitch::GetRawLogPitchFeature</a></div><div class="ttdeci">BaseFloat GetRawLogPitchFeature(int32 frame) const</div><div class="ttdoc">Computes and returns the raw log-pitch feature for this frame. </div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8cc_source.html#l01468">pitch-functions.cc:1468</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abb7a11950141a57799ce945641f9d0af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb7a11950141a57799ce945641f9d0af">&#9670;&nbsp;</a></span>GetNormalizationWindow()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GetNormalizationWindow </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>src_frames_ready</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32 *&#160;</td>
          <td class="paramname"><em>window_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32 *&#160;</td>
          <td class="paramname"><em>window_end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Computes the normalization window sizes. </p>

<p class="definition">Definition at line <a class="el" href="pitch-functions_8cc_source.html#l01487">1487</a> of file <a class="el" href="pitch-functions_8cc_source.html">pitch-functions.cc</a>.</p>

<p class="reference">References <a class="el" href="pitch-functions_8h_source.html#l00222">ProcessPitchOptions::normalization_left_context</a>, <a class="el" href="pitch-functions_8h_source.html#l00224">ProcessPitchOptions::normalization_right_context</a>, and <a class="el" href="pitch-functions_8h_source.html#l00363">OnlineProcessPitch::opts_</a>.</p>

<p class="reference">Referenced by <a class="el" href="pitch-functions_8cc_source.html#l01502">OnlineProcessPitch::UpdateNormalizationStats()</a>.</p>
<div class="fragment"><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                                                                         {</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  int32 left_context = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a23ebdfa874d934a19a743e8516cd2a36">normalization_left_context</a>;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  int32 right_context = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a48793ed9dc78ef49a5fdaacdba3a68b1">normalization_right_context</a>;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  *window_begin = std::max(0, t - left_context);</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  *window_end = std::min(t + right_context + 1, src_frames_ready);</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;}</div><div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_ac35466749a33e82c59bcd5268f32c110"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">kaldi::OnlineProcessPitch::opts_</a></div><div class="ttdeci">ProcessPitchOptions opts_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00363">pitch-functions.h:363</a></div></div>
<div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_a48793ed9dc78ef49a5fdaacdba3a68b1"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#a48793ed9dc78ef49a5fdaacdba3a68b1">kaldi::ProcessPitchOptions::normalization_right_context</a></div><div class="ttdeci">int32 normalization_right_context</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00224">pitch-functions.h:224</a></div></div>
<div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_a23ebdfa874d934a19a743e8516cd2a36"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#a23ebdfa874d934a19a743e8516cd2a36">kaldi::ProcessPitchOptions::normalization_left_context</a></div><div class="ttdeci">int32 normalization_left_context</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00222">pitch-functions.h:222</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa2d58d278610850ea7e44676765f98ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2d58d278610850ea7e44676765f98ba">&#9670;&nbsp;</a></span>GetNormalizedLogPitchFeature()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> GetNormalizedLogPitchFeature </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Computes and returns the mean-subtracted log-pitch feature for this frame. </p>
<p>Called from <a class="el" href="classkaldi_1_1OnlineProcessPitch.html#afeef84368a0238c6c170d37e2c6b07dc" title="Gets the feature vector for this frame. ">GetFrame()</a>. </p>

<p class="definition">Definition at line <a class="el" href="pitch-functions_8cc_source.html#l01476">1476</a> of file <a class="el" href="pitch-functions_8cc_source.html">pitch-functions.cc</a>.</p>

<p class="reference">References <a class="el" href="pitch-functions_8cc_source.html#l01468">OnlineProcessPitch::GetRawLogPitchFeature()</a>, <a class="el" href="pitch-functions_8h_source.html#l00381">OnlineProcessPitch::normalization_stats_</a>, <a class="el" href="pitch-functions_8h_source.html#l00363">OnlineProcessPitch::opts_</a>, <a class="el" href="pitch-functions_8h_source.html#l00213">ProcessPitchOptions::pitch_scale</a>, and <a class="el" href="pitch-functions_8cc_source.html#l01502">OnlineProcessPitch::UpdateNormalizationStats()</a>.</p>

<p class="reference">Referenced by <a class="el" href="pitch-functions_8cc_source.html#l01414">OnlineProcessPitch::GetFrame()</a>.</p>
<div class="fragment"><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;                                                                      {</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a01c224f01c12dfbdea0dfea73694bcbe">UpdateNormalizationStats</a>(frame);</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> log_pitch = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a579a4a8a5a89fee79278a57e367bd9b9">GetRawLogPitchFeature</a>(frame),</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      avg_log_pitch = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a2395877dff3eb67bea3c3f6822c44597">normalization_stats_</a>[frame].sum_log_pitch_pov /</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a2395877dff3eb67bea3c3f6822c44597">normalization_stats_</a>[frame].sum_pov,</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;      normalized_log_pitch = log_pitch - avg_log_pitch;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="keywordflow">return</span> normalized_log_pitch * <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#aedb692c15575fc8ae41e49c7fd585eaf">pitch_scale</a>;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;}</div><div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_ac35466749a33e82c59bcd5268f32c110"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">kaldi::OnlineProcessPitch::opts_</a></div><div class="ttdeci">ProcessPitchOptions opts_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00363">pitch-functions.h:363</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a2395877dff3eb67bea3c3f6822c44597"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a2395877dff3eb67bea3c3f6822c44597">kaldi::OnlineProcessPitch::normalization_stats_</a></div><div class="ttdeci">std::vector&lt; NormalizationStats &gt; normalization_stats_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00381">pitch-functions.h:381</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a01c224f01c12dfbdea0dfea73694bcbe"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a01c224f01c12dfbdea0dfea73694bcbe">kaldi::OnlineProcessPitch::UpdateNormalizationStats</a></div><div class="ttdeci">void UpdateNormalizationStats(int32 frame)</div><div class="ttdoc">Makes sure the entry in normalization_stats_ for this frame is up to date; called from GetNormalizedL...</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8cc_source.html#l01502">pitch-functions.cc:1502</a></div></div>
<div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_aedb692c15575fc8ae41e49c7fd585eaf"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#aedb692c15575fc8ae41e49c7fd585eaf">kaldi::ProcessPitchOptions::pitch_scale</a></div><div class="ttdeci">BaseFloat pitch_scale</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00213">pitch-functions.h:213</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a579a4a8a5a89fee79278a57e367bd9b9"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a579a4a8a5a89fee79278a57e367bd9b9">kaldi::OnlineProcessPitch::GetRawLogPitchFeature</a></div><div class="ttdeci">BaseFloat GetRawLogPitchFeature(int32 frame) const</div><div class="ttdoc">Computes and returns the raw log-pitch feature for this frame. </div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8cc_source.html#l01468">pitch-functions.cc:1468</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afac7fbf84c3322047a05d0a480b4f00e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afac7fbf84c3322047a05d0a480b4f00e">&#9670;&nbsp;</a></span>GetPovFeature()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> GetPovFeature </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Computes and returns the POV feature for this frame. </p>
<p>Called from <a class="el" href="classkaldi_1_1OnlineProcessPitch.html#afeef84368a0238c6c170d37e2c6b07dc" title="Gets the feature vector for this frame. ">GetFrame()</a>. </p>

<p class="definition">Definition at line <a class="el" href="pitch-functions_8cc_source.html#l01431">1431</a> of file <a class="el" href="pitch-functions_8cc_source.html">pitch-functions.cc</a>.</p>

<p class="reference">References <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">OnlineFeatureInterface::GetFrame()</a>, <a class="el" href="pitch-functions_8h_source.html#l00359">OnlineProcessPitch::kRawFeatureDim</a>, <a class="el" href="pitch-functions_8cc_source.html#l00044">kaldi::NccfToPovFeature()</a>, <a class="el" href="pitch-functions_8h_source.html#l00363">OnlineProcessPitch::opts_</a>, <a class="el" href="pitch-functions_8h_source.html#l00216">ProcessPitchOptions::pov_offset</a>, <a class="el" href="pitch-functions_8h_source.html#l00215">ProcessPitchOptions::pov_scale</a>, and <a class="el" href="pitch-functions_8h_source.html#l00364">OnlineProcessPitch::src_</a>.</p>

<p class="reference">Referenced by <a class="el" href="pitch-functions_8cc_source.html#l01414">OnlineProcessPitch::GetFrame()</a>.</p>
<div class="fragment"><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                                                             {</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  Vector&lt;BaseFloat&gt; tmp(<a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb">kRawFeatureDim</a>);</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">GetFrame</a>(frame, &amp;tmp);  <span class="comment">// (NCCF, pitch) from pitch extractor</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> nccf = tmp(0);</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a4c4c76c62665418497865e52f48d1fd0">pov_scale</a> * <a class="code" href="namespacekaldi.html#a37b77deb946e5a072b29ccd9f503de81">NccfToPovFeature</a>(nccf)</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      + <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a9d111f76dc7444b5e1684bcbf2536ea4">pov_offset</a>;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_a37b77deb946e5a072b29ccd9f503de81"><div class="ttname"><a href="namespacekaldi.html#a37b77deb946e5a072b29ccd9f503de81">kaldi::NccfToPovFeature</a></div><div class="ttdeci">BaseFloat NccfToPovFeature(BaseFloat n)</div><div class="ttdoc">This function processes the NCCF n to a POV feature f by applying the formula f = (1...</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8cc_source.html#l00044">pitch-functions.cc:44</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a7ee271dbb4707753e1ee4b0aa45eae37"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">kaldi::OnlineFeatureInterface::GetFrame</a></div><div class="ttdeci">virtual void GetFrame(int32 frame, VectorBase&lt; BaseFloat &gt; *feat)=0</div><div class="ttdoc">Gets the feature vector for this frame. </div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_ac35466749a33e82c59bcd5268f32c110"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">kaldi::OnlineProcessPitch::opts_</a></div><div class="ttdeci">ProcessPitchOptions opts_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00363">pitch-functions.h:363</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_a9d111f76dc7444b5e1684bcbf2536ea4"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#a9d111f76dc7444b5e1684bcbf2536ea4">kaldi::ProcessPitchOptions::pov_offset</a></div><div class="ttdeci">BaseFloat pov_offset</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00216">pitch-functions.h:216</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb">kaldi::OnlineProcessPitch::kRawFeatureDim</a></div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00359">pitch-functions.h:359</a></div></div>
<div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_a4c4c76c62665418497865e52f48d1fd0"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#a4c4c76c62665418497865e52f48d1fd0">kaldi::ProcessPitchOptions::pov_scale</a></div><div class="ttdeci">BaseFloat pov_scale</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00215">pitch-functions.h:215</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a322065dc5fc38765ec548e481e1fc29d"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">kaldi::OnlineProcessPitch::src_</a></div><div class="ttdeci">OnlineFeatureInterface * src_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00364">pitch-functions.h:364</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a579a4a8a5a89fee79278a57e367bd9b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a579a4a8a5a89fee79278a57e367bd9b9">&#9670;&nbsp;</a></span>GetRawLogPitchFeature()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> GetRawLogPitchFeature </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Computes and returns the raw log-pitch feature for this frame. </p>
<p>Called from <a class="el" href="classkaldi_1_1OnlineProcessPitch.html#afeef84368a0238c6c170d37e2c6b07dc" title="Gets the feature vector for this frame. ">GetFrame()</a>. </p>

<p class="definition">Definition at line <a class="el" href="pitch-functions_8cc_source.html#l01468">1468</a> of file <a class="el" href="pitch-functions_8cc_source.html">pitch-functions.cc</a>.</p>

<p class="reference">References <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">OnlineFeatureInterface::GetFrame()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="pitch-functions_8h_source.html#l00359">OnlineProcessPitch::kRawFeatureDim</a>, <a class="el" href="kaldi-math_8h_source.html#l00100">kaldi::Log()</a>, and <a class="el" href="pitch-functions_8h_source.html#l00364">OnlineProcessPitch::src_</a>.</p>

<p class="reference">Referenced by <a class="el" href="pitch-functions_8cc_source.html#l01439">OnlineProcessPitch::GetDeltaPitchFeature()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01414">OnlineProcessPitch::GetFrame()</a>, and <a class="el" href="pitch-functions_8cc_source.html#l01476">OnlineProcessPitch::GetNormalizedLogPitchFeature()</a>.</p>
<div class="fragment"><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                                                                     {</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  Vector&lt;BaseFloat&gt; tmp(<a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb">kRawFeatureDim</a>);</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">GetFrame</a>(frame, &amp;tmp);</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> pitch = tmp(1);</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(pitch &gt; 0);</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacekaldi.html#af75c4606b108091c348102660de63180">Log</a>(pitch);</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;}</div><div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a7ee271dbb4707753e1ee4b0aa45eae37"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">kaldi::OnlineFeatureInterface::GetFrame</a></div><div class="ttdeci">virtual void GetFrame(int32 frame, VectorBase&lt; BaseFloat &gt; *feat)=0</div><div class="ttdoc">Gets the feature vector for this frame. </div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="namespacekaldi_html_af75c4606b108091c348102660de63180"><div class="ttname"><a href="namespacekaldi.html#af75c4606b108091c348102660de63180">kaldi::Log</a></div><div class="ttdeci">double Log(double x)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00100">kaldi-math.h:100</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb">kaldi::OnlineProcessPitch::kRawFeatureDim</a></div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00359">pitch-functions.h:359</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a322065dc5fc38765ec548e481e1fc29d"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">kaldi::OnlineProcessPitch::src_</a></div><div class="ttdeci">OnlineFeatureInterface * src_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00364">pitch-functions.h:364</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a09424857e2822aa52300244882a1307b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09424857e2822aa52300244882a1307b">&#9670;&nbsp;</a></span>IsLastFrame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classbool.html">bool</a> IsLastFrame </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if this is the last frame. </p>
<p>Frame indices are zero-based, so the first frame is zero. IsLastFrame(-1) will return false, unless the file is empty (which is a case that I'm not sure all the code will handle, so be careful). This function may return false for some frame if we haven't yet decided to terminate decoding, but later true if we decide to terminate decoding. This function exists mainly to correctly handle end effects in feature extraction, and is not a mechanism to determine how many frames are in the decodable object (as it used to be, and for backward compatibility, still is, in the Decodable interface). </p>

<p>Implements <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">OnlineFeatureInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="pitch-functions_8h_source.html#l00336">336</a> of file <a class="el" href="pitch-functions_8h_source.html">pitch-functions.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                                              {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">if</span> (frame &lt;= -1)</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">IsLastFrame</a>(-1);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (frame &lt; <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a6a8020f43c4a2a8d6db264d454c05429">delay</a>)</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">IsLastFrame</a>(-1) == <span class="keyword">true</span> ? false : <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">IsLastFrame</a>(0);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">IsLastFrame</a>(frame - <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a6a8020f43c4a2a8d6db264d454c05429">delay</a>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  }</div><div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_ac35466749a33e82c59bcd5268f32c110"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">kaldi::OnlineProcessPitch::opts_</a></div><div class="ttdeci">ProcessPitchOptions opts_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00363">pitch-functions.h:363</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a9e2dede1c20fce727f2666fe45a06ab3"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">kaldi::OnlineFeatureInterface::IsLastFrame</a></div><div class="ttdeci">virtual bool IsLastFrame(int32 frame) const =0</div><div class="ttdoc">Returns true if this is the last frame. </div></div>
<div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_a6a8020f43c4a2a8d6db264d454c05429"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#a6a8020f43c4a2a8d6db264d454c05429">kaldi::ProcessPitchOptions::delay</a></div><div class="ttdeci">int32 delay</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00228">pitch-functions.h:228</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a322065dc5fc38765ec548e481e1fc29d"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">kaldi::OnlineProcessPitch::src_</a></div><div class="ttdeci">OnlineFeatureInterface * src_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00364">pitch-functions.h:364</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a816b68dc299cc3ed745ba1f3036bc3cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a816b68dc299cc3ed745ba1f3036bc3cd">&#9670;&nbsp;</a></span>NumFramesReady()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 NumFramesReady </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>returns the feature dimension. </p>
<p>Returns the total number of frames, since the start of the utterance, that are now available. In an online-decoding context, this will likely increase with time as more data becomes available. </p>

<p>Implements <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">OnlineFeatureInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="pitch-functions_8cc_source.html#l01569">1569</a> of file <a class="el" href="pitch-functions_8cc_source.html">pitch-functions.cc</a>.</p>

<p class="reference">References <a class="el" href="pitch-functions_8h_source.html#l00228">ProcessPitchOptions::delay</a>, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">OnlineFeatureInterface::IsLastFrame()</a>, <a class="el" href="pitch-functions_8h_source.html#l00224">ProcessPitchOptions::normalization_right_context</a>, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">OnlineFeatureInterface::NumFramesReady()</a>, <a class="el" href="pitch-functions_8h_source.html#l00363">OnlineProcessPitch::opts_</a>, and <a class="el" href="pitch-functions_8h_source.html#l00364">OnlineProcessPitch::src_</a>.</p>

<p class="reference">Referenced by <a class="el" href="pitch-functions_8cc_source.html#l01597">kaldi::ComputeAndProcessKaldiPitch()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01414">OnlineProcessPitch::GetFrame()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01581">kaldi::ProcessPitch()</a>, and <a class="el" href="pitch-functions-test_8cc_source.html#l00219">kaldi::UnitTestDelay()</a>.</p>
<div class="fragment"><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                                               {</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  int32 src_frames_ready = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">NumFramesReady</a>();</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <span class="keywordflow">if</span> (src_frames_ready == 0) {</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">IsLastFrame</a>(src_frames_ready - 1)) {</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <span class="keywordflow">return</span> src_frames_ready + <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a6a8020f43c4a2a8d6db264d454c05429">delay</a>;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">return</span> std::max(0, src_frames_ready -</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a48793ed9dc78ef49a5fdaacdba3a68b1">normalization_right_context</a> + <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">opts_</a>.<a class="code" href="structkaldi_1_1ProcessPitchOptions.html#a6a8020f43c4a2a8d6db264d454c05429">delay</a>);</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  }</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;}</div><div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_ac35466749a33e82c59bcd5268f32c110"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#ac35466749a33e82c59bcd5268f32c110">kaldi::OnlineProcessPitch::opts_</a></div><div class="ttdeci">ProcessPitchOptions opts_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00363">pitch-functions.h:363</a></div></div>
<div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_a48793ed9dc78ef49a5fdaacdba3a68b1"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#a48793ed9dc78ef49a5fdaacdba3a68b1">kaldi::ProcessPitchOptions::normalization_right_context</a></div><div class="ttdeci">int32 normalization_right_context</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00224">pitch-functions.h:224</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a9e2dede1c20fce727f2666fe45a06ab3"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">kaldi::OnlineFeatureInterface::IsLastFrame</a></div><div class="ttdeci">virtual bool IsLastFrame(int32 frame) const =0</div><div class="ttdoc">Returns true if this is the last frame. </div></div>
<div class="ttc" id="structkaldi_1_1ProcessPitchOptions_html_a6a8020f43c4a2a8d6db264d454c05429"><div class="ttname"><a href="structkaldi_1_1ProcessPitchOptions.html#a6a8020f43c4a2a8d6db264d454c05429">kaldi::ProcessPitchOptions::delay</a></div><div class="ttdeci">int32 delay</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00228">pitch-functions.h:228</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a322065dc5fc38765ec548e481e1fc29d"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">kaldi::OnlineProcessPitch::src_</a></div><div class="ttdeci">OnlineFeatureInterface * src_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00364">pitch-functions.h:364</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a6d4812ed73de799c457bea7f483f3593"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">kaldi::OnlineFeatureInterface::NumFramesReady</a></div><div class="ttdeci">virtual int32 NumFramesReady() const =0</div><div class="ttdoc">returns the feature dimension. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a01c224f01c12dfbdea0dfea73694bcbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01c224f01c12dfbdea0dfea73694bcbe">&#9670;&nbsp;</a></span>UpdateNormalizationStats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UpdateNormalizationStats </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Makes sure the entry in normalization_stats_ for this frame is up to date; called from GetNormalizedLogPitchFeature. </p>

<p class="definition">Definition at line <a class="el" href="pitch-functions_8cc_source.html#l01502">1502</a> of file <a class="el" href="pitch-functions_8cc_source.html">pitch-functions.cc</a>.</p>

<p class="reference">References <a class="el" href="pitch-functions_8h_source.html#l00368">OnlineProcessPitch::NormalizationStats::cur_num_frames</a>, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">OnlineFeatureInterface::GetFrame()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01487">OnlineProcessPitch::GetNormalizationWindow()</a>, <a class="el" href="pitch-functions_8h_source.html#l00370">OnlineProcessPitch::NormalizationStats::input_finished</a>, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">OnlineFeatureInterface::IsLastFrame()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="pitch-functions_8h_source.html#l00359">OnlineProcessPitch::kRawFeatureDim</a>, <a class="el" href="kaldi-math_8h_source.html#l00100">kaldi::Log()</a>, <a class="el" href="pitch-functions_8cc_source.html#l00078">kaldi::NccfToPov()</a>, <a class="el" href="pitch-functions_8h_source.html#l00381">OnlineProcessPitch::normalization_stats_</a>, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">OnlineFeatureInterface::NumFramesReady()</a>, <a class="el" href="pitch-functions_8h_source.html#l00364">OnlineProcessPitch::src_</a>, <a class="el" href="pitch-functions_8h_source.html#l00373">OnlineProcessPitch::NormalizationStats::sum_log_pitch_pov</a>, and <a class="el" href="pitch-functions_8h_source.html#l00372">OnlineProcessPitch::NormalizationStats::sum_pov</a>.</p>

<p class="reference">Referenced by <a class="el" href="pitch-functions_8cc_source.html#l01476">OnlineProcessPitch::GetNormalizedLogPitchFeature()</a>.</p>
<div class="fragment"><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                                                             {</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(frame &gt;= 0);</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a2395877dff3eb67bea3c3f6822c44597">normalization_stats_</a>.size() &lt;= frame)</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a2395877dff3eb67bea3c3f6822c44597">normalization_stats_</a>.resize(frame + 1);</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  int32 cur_num_frames = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">NumFramesReady</a>();</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  <span class="keywordtype">bool</span> input_finished = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">IsLastFrame</a>(cur_num_frames - 1);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  NormalizationStats &amp;this_stats = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a2395877dff3eb67bea3c3f6822c44597">normalization_stats_</a>[frame];</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  <span class="keywordflow">if</span> (this_stats.cur_num_frames == cur_num_frames &amp;&amp;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      this_stats.input_finished == input_finished) {</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <span class="comment">// Stats are fully up-to-date.</span></div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  }</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  int32 this_window_begin, this_window_end;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#abb7a11950141a57799ce945641f9d0af">GetNormalizationWindow</a>(frame, cur_num_frames,</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                         &amp;this_window_begin, &amp;this_window_end);</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <span class="keywordflow">if</span> (frame &gt; 0) {</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="keyword">const</span> NormalizationStats &amp;prev_stats = <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a2395877dff3eb67bea3c3f6822c44597">normalization_stats_</a>[frame - 1];</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">if</span> (prev_stats.cur_num_frames == cur_num_frames &amp;&amp;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        prev_stats.input_finished == input_finished) {</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      <span class="comment">// we&#39;ll derive this_stats efficiently from prev_stats.</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      <span class="comment">// Checking that cur_num_frames and input_finished have not changed</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      <span class="comment">// ensures that the underlying features will not have changed.</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      this_stats = prev_stats;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      int32 prev_window_begin, prev_window_end;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#abb7a11950141a57799ce945641f9d0af">GetNormalizationWindow</a>(frame - 1, cur_num_frames,</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                             &amp;prev_window_begin, &amp;prev_window_end);</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      <span class="keywordflow">if</span> (this_window_begin != prev_window_begin) {</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(this_window_begin == prev_window_begin + 1);</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        Vector&lt;BaseFloat&gt; tmp(<a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb">kRawFeatureDim</a>);</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">GetFrame</a>(prev_window_begin, &amp;tmp);</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> accurate_pov = <a class="code" href="namespacekaldi.html#ab10a8cc06cbfe354591a5ad381311ff3">NccfToPov</a>(tmp(0)),</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;            log_pitch = <a class="code" href="namespacekaldi.html#af75c4606b108091c348102660de63180">Log</a>(tmp(1));</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        this_stats.sum_pov -= accurate_pov;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        this_stats.sum_log_pitch_pov -= accurate_pov * log_pitch;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      }</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      <span class="keywordflow">if</span> (this_window_end != prev_window_end) {</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(this_window_end == prev_window_end + 1);</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        Vector&lt;BaseFloat&gt; tmp(<a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb">kRawFeatureDim</a>);</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">GetFrame</a>(prev_window_end, &amp;tmp);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> accurate_pov = <a class="code" href="namespacekaldi.html#ab10a8cc06cbfe354591a5ad381311ff3">NccfToPov</a>(tmp(0)),</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;            log_pitch = <a class="code" href="namespacekaldi.html#af75c4606b108091c348102660de63180">Log</a>(tmp(1));</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        this_stats.sum_pov += accurate_pov;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        this_stats.sum_log_pitch_pov += accurate_pov * log_pitch;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      }</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    }</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  }</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="comment">// The way we do it here is not the most efficient way to do it;</span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="comment">// we&#39;ll see if it becomes a problem.  The issue is we have to redo</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <span class="comment">// this computation from scratch each time we process a new chunk, which</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="comment">// may be a little inefficient if the chunk-size is very small.</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  this_stats.cur_num_frames = cur_num_frames;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  this_stats.input_finished = input_finished;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  this_stats.sum_pov = 0.0;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  this_stats.sum_log_pitch_pov = 0.0;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  Vector&lt;BaseFloat&gt; tmp(<a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb">kRawFeatureDim</a>);</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <span class="keywordflow">for</span> (int32 f = this_window_begin; f &lt; this_window_end; f++) {</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <a class="code" href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">src_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">GetFrame</a>(f, &amp;tmp);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> accurate_pov = <a class="code" href="namespacekaldi.html#ab10a8cc06cbfe354591a5ad381311ff3">NccfToPov</a>(tmp(0)),</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;        log_pitch = <a class="code" href="namespacekaldi.html#af75c4606b108091c348102660de63180">Log</a>(tmp(1));</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    this_stats.sum_pov += accurate_pov;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    this_stats.sum_log_pitch_pov += accurate_pov * log_pitch;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  }</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;}</div><div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a7ee271dbb4707753e1ee4b0aa45eae37"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">kaldi::OnlineFeatureInterface::GetFrame</a></div><div class="ttdeci">virtual void GetFrame(int32 frame, VectorBase&lt; BaseFloat &gt; *feat)=0</div><div class="ttdoc">Gets the feature vector for this frame. </div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="namespacekaldi_html_af75c4606b108091c348102660de63180"><div class="ttname"><a href="namespacekaldi.html#af75c4606b108091c348102660de63180">kaldi::Log</a></div><div class="ttdeci">double Log(double x)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00100">kaldi-math.h:100</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a2395877dff3eb67bea3c3f6822c44597"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a2395877dff3eb67bea3c3f6822c44597">kaldi::OnlineProcessPitch::normalization_stats_</a></div><div class="ttdeci">std::vector&lt; NormalizationStats &gt; normalization_stats_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00381">pitch-functions.h:381</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a9e2dede1c20fce727f2666fe45a06ab3"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">kaldi::OnlineFeatureInterface::IsLastFrame</a></div><div class="ttdeci">virtual bool IsLastFrame(int32 frame) const =0</div><div class="ttdoc">Returns true if this is the last frame. </div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_abb7a11950141a57799ce945641f9d0af"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#abb7a11950141a57799ce945641f9d0af">kaldi::OnlineProcessPitch::GetNormalizationWindow</a></div><div class="ttdeci">void GetNormalizationWindow(int32 frame, int32 src_frames_ready, int32 *window_begin, int32 *window_end) const</div><div class="ttdoc">Computes the normalization window sizes. </div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8cc_source.html#l01487">pitch-functions.cc:1487</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab10a8cc06cbfe354591a5ad381311ff3"><div class="ttname"><a href="namespacekaldi.html#ab10a8cc06cbfe354591a5ad381311ff3">kaldi::NccfToPov</a></div><div class="ttdeci">BaseFloat NccfToPov(BaseFloat n)</div><div class="ttdoc">This function processes the NCCF n to a reasonably accurate probability of voicing p by applying the ...</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8cc_source.html#l00078">pitch-functions.cc:78</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a726ca809ffd3d67ab4b8476646f26635a0264511825dd7a34895cc4ca2d865edb">kaldi::OnlineProcessPitch::kRawFeatureDim</a></div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00359">pitch-functions.h:359</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineProcessPitch_html_a322065dc5fc38765ec548e481e1fc29d"><div class="ttname"><a href="classkaldi_1_1OnlineProcessPitch.html#a322065dc5fc38765ec548e481e1fc29d">kaldi::OnlineProcessPitch::src_</a></div><div class="ttdeci">OnlineFeatureInterface * src_</div><div class="ttdef"><b>Definition:</b> <a href="pitch-functions_8h_source.html#l00364">pitch-functions.h:364</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a6d4812ed73de799c457bea7f483f3593"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">kaldi::OnlineFeatureInterface::NumFramesReady</a></div><div class="ttdeci">virtual int32 NumFramesReady() const =0</div><div class="ttdoc">returns the feature dimension. </div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a23e05ffa3dfcab1f3e05bfee82e8a94e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23e05ffa3dfcab1f3e05bfee82e8a94e">&#9670;&nbsp;</a></span>delta_feature_noise_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; delta_feature_noise_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pitch-functions_8h_source.html#l00379">379</a> of file <a class="el" href="pitch-functions_8h_source.html">pitch-functions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="pitch-functions_8cc_source.html#l01439">OnlineProcessPitch::GetDeltaPitchFeature()</a>.</p>

</div>
</div>
<a id="a08031ac0ce0b0973ed948e43ebd706be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08031ac0ce0b0973ed948e43ebd706be">&#9670;&nbsp;</a></span>dim_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 dim_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pitch-functions_8h_source.html#l00365">365</a> of file <a class="el" href="pitch-functions_8h_source.html">pitch-functions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="pitch-functions_8cc_source.html#l01414">OnlineProcessPitch::GetFrame()</a>, and <a class="el" href="pitch-functions_8cc_source.html#l01398">OnlineProcessPitch::OnlineProcessPitch()</a>.</p>

</div>
</div>
<a id="a2395877dff3eb67bea3c3f6822c44597"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2395877dff3eb67bea3c3f6822c44597">&#9670;&nbsp;</a></span>normalization_stats_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structkaldi_1_1OnlineProcessPitch_1_1NormalizationStats.html">NormalizationStats</a>&gt; normalization_stats_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pitch-functions_8h_source.html#l00381">381</a> of file <a class="el" href="pitch-functions_8h_source.html">pitch-functions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="pitch-functions_8cc_source.html#l01476">OnlineProcessPitch::GetNormalizedLogPitchFeature()</a>, and <a class="el" href="pitch-functions_8cc_source.html#l01502">OnlineProcessPitch::UpdateNormalizationStats()</a>.</p>

</div>
</div>
<a id="ac35466749a33e82c59bcd5268f32c110"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac35466749a33e82c59bcd5268f32c110">&#9670;&nbsp;</a></span>opts_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structkaldi_1_1ProcessPitchOptions.html">ProcessPitchOptions</a> opts_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pitch-functions_8h_source.html#l00363">363</a> of file <a class="el" href="pitch-functions_8h_source.html">pitch-functions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="pitch-functions_8cc_source.html#l01439">OnlineProcessPitch::GetDeltaPitchFeature()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01414">OnlineProcessPitch::GetFrame()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01487">OnlineProcessPitch::GetNormalizationWindow()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01476">OnlineProcessPitch::GetNormalizedLogPitchFeature()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01431">OnlineProcessPitch::GetPovFeature()</a>, and <a class="el" href="pitch-functions_8cc_source.html#l01569">OnlineProcessPitch::NumFramesReady()</a>.</p>

</div>
</div>
<a id="a322065dc5fc38765ec548e481e1fc29d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a322065dc5fc38765ec548e481e1fc29d">&#9670;&nbsp;</a></span>src_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1OnlineFeatureInterface.html">OnlineFeatureInterface</a>* src_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="pitch-functions_8h_source.html#l00364">364</a> of file <a class="el" href="pitch-functions_8h_source.html">pitch-functions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="pitch-functions_8cc_source.html#l01439">OnlineProcessPitch::GetDeltaPitchFeature()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01431">OnlineProcessPitch::GetPovFeature()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01468">OnlineProcessPitch::GetRawLogPitchFeature()</a>, <a class="el" href="pitch-functions_8cc_source.html#l01569">OnlineProcessPitch::NumFramesReady()</a>, and <a class="el" href="pitch-functions_8cc_source.html#l01502">OnlineProcessPitch::UpdateNormalizationStats()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>feat/<a class="el" href="pitch-functions_8h_source.html">pitch-functions.h</a></li>
<li>feat/<a class="el" href="pitch-functions_8cc_source.html">pitch-functions.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekaldi.html">kaldi</a></li><li class="navelem"><a class="el" href="classkaldi_1_1OnlineProcessPitch.html">OnlineProcessPitch</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
