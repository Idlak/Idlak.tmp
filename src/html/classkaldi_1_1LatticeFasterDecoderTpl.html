<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: LatticeFasterDecoderTpl&lt; FST, Token &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classkaldi_1_1LatticeFasterDecoderTpl.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classkaldi_1_1LatticeFasterDecoderTpl-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">LatticeFasterDecoderTpl&lt; FST, Token &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This is the "normal" lattice-generating decoder.  
 <a href="classkaldi_1_1LatticeFasterDecoderTpl.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for LatticeFasterDecoderTpl&lt; FST, Token &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1LatticeFasterDecoderTpl__coll__graph.png" border="0" usemap="#LatticeFasterDecoderTpl_3_01FST_00_01Token_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="LatticeFasterDecoderTpl_3_01FST_00_01Token_01_4_coll__map" id="LatticeFasterDecoderTpl_3_01FST_00_01Token_01_4_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1LatticeFasterDecoderTpl_1_1TokenList.html">TokenList</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a5847f7be225935530cfc03fa176af15c"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a5847f7be225935530cfc03fa176af15c">Arc</a> = typename FST::Arc</td></tr>
<tr class="separator:a5847f7be225935530cfc03fa176af15c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85a02632976ca270a5ca1633798e2ba3"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a85a02632976ca270a5ca1633798e2ba3">Label</a> = typename Arc::Label</td></tr>
<tr class="separator:a85a02632976ca270a5ca1633798e2ba3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ea5dad35d7cc8bdd784c6aff3755f4b"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a> = typename Arc::StateId</td></tr>
<tr class="separator:a1ea5dad35d7cc8bdd784c6aff3755f4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a217833759d6c6ae1e2c1fd85c486d6ba"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a217833759d6c6ae1e2c1fd85c486d6ba">Weight</a> = typename Arc::Weight</td></tr>
<tr class="separator:a217833759d6c6ae1e2c1fd85c486d6ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc9c72ea2574bb131efc94e2e7d1e12d"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">ForwardLinkT</a> = <a class="el" href="structkaldi_1_1decoder_1_1ForwardLink.html">decoder::ForwardLink</a>&lt; Token &gt;</td></tr>
<tr class="separator:abc9c72ea2574bb131efc94e2e7d1e12d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a708f5bd28504609eda9942046b3df46d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a708f5bd28504609eda9942046b3df46d">LatticeFasterDecoderTpl</a> (const FST &amp;fst, const <a class="el" href="structkaldi_1_1LatticeFasterDecoderConfig.html">LatticeFasterDecoderConfig</a> &amp;config)</td></tr>
<tr class="separator:a708f5bd28504609eda9942046b3df46d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61c06919a02b68550f3d9d5bfe3d39af"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a61c06919a02b68550f3d9d5bfe3d39af">LatticeFasterDecoderTpl</a> (const <a class="el" href="structkaldi_1_1LatticeFasterDecoderConfig.html">LatticeFasterDecoderConfig</a> &amp;config, FST *fst)</td></tr>
<tr class="separator:a61c06919a02b68550f3d9d5bfe3d39af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a726ecfe0e3dda45db44cd44818fceaba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a726ecfe0e3dda45db44cd44818fceaba">SetOptions</a> (const <a class="el" href="structkaldi_1_1LatticeFasterDecoderConfig.html">LatticeFasterDecoderConfig</a> &amp;config)</td></tr>
<tr class="separator:a726ecfe0e3dda45db44cd44818fceaba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b84c75104d243bc60551b236dacfbb5"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structkaldi_1_1LatticeFasterDecoderConfig.html">LatticeFasterDecoderConfig</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9b84c75104d243bc60551b236dacfbb5">GetOptions</a> () const</td></tr>
<tr class="separator:a9b84c75104d243bc60551b236dacfbb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a767f21e6bc31bc9fffe87f2d6f8f2e2d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a767f21e6bc31bc9fffe87f2d6f8f2e2d">~LatticeFasterDecoderTpl</a> ()</td></tr>
<tr class="separator:a767f21e6bc31bc9fffe87f2d6f8f2e2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac78620c576a40d3bdb14dc87b2a754a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac78620c576a40d3bdb14dc87b2a754a5">Decode</a> (<a class="el" href="classkaldi_1_1DecodableInterface.html">DecodableInterface</a> *decodable)</td></tr>
<tr class="memdesc:ac78620c576a40d3bdb14dc87b2a754a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decodes until there are no more frames left in the "decodable" object.  <a href="#ac78620c576a40d3bdb14dc87b2a754a5">More...</a><br /></td></tr>
<tr class="separator:ac78620c576a40d3bdb14dc87b2a754a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad50a1511ad065870482b9af71818b4ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad50a1511ad065870482b9af71818b4ef">ReachedFinal</a> () const</td></tr>
<tr class="memdesc:ad50a1511ad065870482b9af71818b4ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">says whether a final-state was active on the last frame.  <a href="#ad50a1511ad065870482b9af71818b4ef">More...</a><br /></td></tr>
<tr class="separator:ad50a1511ad065870482b9af71818b4ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a254a3f70b7023d6b9821de6527181d9f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a254a3f70b7023d6b9821de6527181d9f">GetBestPath</a> (<a class="el" href="namespacekaldi.html#a4c9e4132556649881ca6f29dd13e2742">Lattice</a> *ofst, <a class="el" href="classbool.html">bool</a> use_final_probs=true) const</td></tr>
<tr class="memdesc:a254a3f70b7023d6b9821de6527181d9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outputs an FST corresponding to the single best path through the lattice.  <a href="#a254a3f70b7023d6b9821de6527181d9f">More...</a><br /></td></tr>
<tr class="separator:a254a3f70b7023d6b9821de6527181d9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab28d134a214f038246237fd0b89e9d97"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ab28d134a214f038246237fd0b89e9d97">GetRawLattice</a> (<a class="el" href="namespacekaldi.html#a4c9e4132556649881ca6f29dd13e2742">Lattice</a> *ofst, <a class="el" href="classbool.html">bool</a> use_final_probs=true) const</td></tr>
<tr class="memdesc:ab28d134a214f038246237fd0b89e9d97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outputs an FST corresponding to the raw, state-level tracebacks.  <a href="#ab28d134a214f038246237fd0b89e9d97">More...</a><br /></td></tr>
<tr class="separator:ab28d134a214f038246237fd0b89e9d97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a561fd25bc9b3a678dea5f3cf1463f8cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a561fd25bc9b3a678dea5f3cf1463f8cb">GetLattice</a> (<a class="el" href="namespacekaldi.html#aeba2c05d999bd2f794db8919ac816bb3">CompactLattice</a> *ofst, <a class="el" href="classbool.html">bool</a> use_final_probs=true) const</td></tr>
<tr class="memdesc:a561fd25bc9b3a678dea5f3cf1463f8cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">[Deprecated, users should now use GetRawLattice and determinize it themselves, e.g.  <a href="#a561fd25bc9b3a678dea5f3cf1463f8cb">More...</a><br /></td></tr>
<tr class="separator:a561fd25bc9b3a678dea5f3cf1463f8cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad43c69eb4374e3a67d4cd91696a5d6e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad43c69eb4374e3a67d4cd91696a5d6e9">InitDecoding</a> ()</td></tr>
<tr class="memdesc:ad43c69eb4374e3a67d4cd91696a5d6e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">InitDecoding initializes the decoding, and should only be used if you intend to call <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a375a5c2ebd730748ed1da740a4a23692" title="This will decode until there are no more frames ready in the decodable object. ">AdvanceDecoding()</a>.  <a href="#ad43c69eb4374e3a67d4cd91696a5d6e9">More...</a><br /></td></tr>
<tr class="separator:ad43c69eb4374e3a67d4cd91696a5d6e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a375a5c2ebd730748ed1da740a4a23692"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a375a5c2ebd730748ed1da740a4a23692">AdvanceDecoding</a> (<a class="el" href="classkaldi_1_1DecodableInterface.html">DecodableInterface</a> *decodable, int32 max_num_frames=-1)</td></tr>
<tr class="memdesc:a375a5c2ebd730748ed1da740a4a23692"><td class="mdescLeft">&#160;</td><td class="mdescRight">This will decode until there are no more frames ready in the decodable object.  <a href="#a375a5c2ebd730748ed1da740a4a23692">More...</a><br /></td></tr>
<tr class="separator:a375a5c2ebd730748ed1da740a4a23692"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a363a350323c7c881be0a0fc089d2b555"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a363a350323c7c881be0a0fc089d2b555">FinalizeDecoding</a> ()</td></tr>
<tr class="memdesc:a363a350323c7c881be0a0fc089d2b555"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function may be optionally called after <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a375a5c2ebd730748ed1da740a4a23692" title="This will decode until there are no more frames ready in the decodable object. ">AdvanceDecoding()</a>, when you do not plan to decode any further.  <a href="#a363a350323c7c881be0a0fc089d2b555">More...</a><br /></td></tr>
<tr class="separator:a363a350323c7c881be0a0fc089d2b555"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab79c2c25990723951176c948ba1adc3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aab79c2c25990723951176c948ba1adc3">FinalRelativeCost</a> () const</td></tr>
<tr class="memdesc:aab79c2c25990723951176c948ba1adc3"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aab79c2c25990723951176c948ba1adc3" title="FinalRelativeCost() serves the same purpose as ReachedFinal(), but gives more information. ">FinalRelativeCost()</a> serves the same purpose as <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad50a1511ad065870482b9af71818b4ef" title="says whether a final-state was active on the last frame. ">ReachedFinal()</a>, but gives more information.  <a href="#aab79c2c25990723951176c948ba1adc3">More...</a><br /></td></tr>
<tr class="separator:aab79c2c25990723951176c948ba1adc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa030f3b26871bfec31b5e59cac3ba76d"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a> () const</td></tr>
<tr class="separator:aa030f3b26871bfec31b5e59cac3ba76d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:a164961b9a08c87a7d99a873922d2dc14"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> = typename <a class="el" href="classkaldi_1_1HashList.html">HashList</a>&lt; <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a>, Token * &gt;::<a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a></td></tr>
<tr class="separator:a164961b9a08c87a7d99a873922d2dc14"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a4d06555f3445c7a2e23b2aa30926830a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a4d06555f3445c7a2e23b2aa30926830a">PossiblyResizeHash</a> (<a class="el" href="classsize__t.html">size_t</a> num_toks)</td></tr>
<tr class="separator:a4d06555f3445c7a2e23b2aa30926830a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac84e3ba7f817a1f76c4485d3c77cdb1"><td class="memItemLeft" align="right" valign="top">Token *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aac84e3ba7f817a1f76c4485d3c77cdb1">FindOrAddToken</a> (<a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a> state, int32 frame_plus_one, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> tot_cost, Token *backpointer, <a class="el" href="classbool.html">bool</a> *changed)</td></tr>
<tr class="separator:aac84e3ba7f817a1f76c4485d3c77cdb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec5d179a75df610a6d9350a4749f82b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aec5d179a75df610a6d9350a4749f82b9">PruneForwardLinks</a> (int32 frame_plus_one, <a class="el" href="classbool.html">bool</a> *extra_costs_changed, <a class="el" href="classbool.html">bool</a> *links_pruned, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> delta)</td></tr>
<tr class="separator:aec5d179a75df610a6d9350a4749f82b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abac1d9b6331d75273f079182a8995d19"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abac1d9b6331d75273f079182a8995d19">ComputeFinalCosts</a> (unordered_map&lt; Token *, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *final_costs, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> *final_relative_cost, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> *final_best_cost) const</td></tr>
<tr class="separator:abac1d9b6331d75273f079182a8995d19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a860ae70828a0cd0382b81cc3558a2a02"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a860ae70828a0cd0382b81cc3558a2a02">PruneForwardLinksFinal</a> ()</td></tr>
<tr class="separator:a860ae70828a0cd0382b81cc3558a2a02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a101529bc846dc648fd5406d718dc450b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a101529bc846dc648fd5406d718dc450b">PruneTokensForFrame</a> (int32 frame_plus_one)</td></tr>
<tr class="separator:a101529bc846dc648fd5406d718dc450b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93dce8f102ac41f19dc657dd9026a811"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a93dce8f102ac41f19dc657dd9026a811">PruneActiveTokens</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> delta)</td></tr>
<tr class="separator:a93dce8f102ac41f19dc657dd9026a811"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d1b3d918472e26fcb513f6b2a0d5644"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a0d1b3d918472e26fcb513f6b2a0d5644">GetCutoff</a> (<a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> *list_head, <a class="el" href="classsize__t.html">size_t</a> *tok_count, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> *adaptive_beam, <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> **best_elem)</td></tr>
<tr class="memdesc:a0d1b3d918472e26fcb513f6b2a0d5644"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the weight cutoff. Also counts the active tokens.  <a href="#a0d1b3d918472e26fcb513f6b2a0d5644">More...</a><br /></td></tr>
<tr class="separator:a0d1b3d918472e26fcb513f6b2a0d5644"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f1056788a421354e1217d03cd7186ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9f1056788a421354e1217d03cd7186ff">ProcessEmitting</a> (<a class="el" href="classkaldi_1_1DecodableInterface.html">DecodableInterface</a> *decodable)</td></tr>
<tr class="memdesc:a9f1056788a421354e1217d03cd7186ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes emitting arcs for one frame.  <a href="#a9f1056788a421354e1217d03cd7186ff">More...</a><br /></td></tr>
<tr class="separator:a9f1056788a421354e1217d03cd7186ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae19877053b3834116aedaae3519572b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ae19877053b3834116aedaae3519572b1">ProcessNonemitting</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> cost_cutoff)</td></tr>
<tr class="memdesc:ae19877053b3834116aedaae3519572b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes nonemitting (epsilon) arcs for one frame.  <a href="#ae19877053b3834116aedaae3519572b1">More...</a><br /></td></tr>
<tr class="separator:ae19877053b3834116aedaae3519572b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46348242a858ece22690aae433fc4537"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a46348242a858ece22690aae433fc4537">DeleteElems</a> (<a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> *list)</td></tr>
<tr class="separator:a46348242a858ece22690aae433fc4537"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae09bece0bb8eb98a4bf14a74351f2558"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ae09bece0bb8eb98a4bf14a74351f2558">ClearActiveTokens</a> ()</td></tr>
<tr class="separator:ae09bece0bb8eb98a4bf14a74351f2558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4365a675042e46be0d88b9720e6b1ba5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a4365a675042e46be0d88b9720e6b1ba5">KALDI_DISALLOW_COPY_AND_ASSIGN</a> (<a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html">LatticeFasterDecoderTpl</a>)</td></tr>
<tr class="separator:a4365a675042e46be0d88b9720e6b1ba5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:ada13538cc5608db62cf3192e31bbb62f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ada13538cc5608db62cf3192e31bbb62f">DeleteForwardLinks</a> (Token *tok)</td></tr>
<tr class="separator:ada13538cc5608db62cf3192e31bbb62f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a581391ba9af6c7522f51d3880fa3904d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a581391ba9af6c7522f51d3880fa3904d">TopSortTokens</a> (Token *tok_list, std::vector&lt; Token *&gt; *topsorted_list)</td></tr>
<tr class="separator:a581391ba9af6c7522f51d3880fa3904d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ac20d544a2a34069c8407b433092488b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1HashList.html">HashList</a>&lt; <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a>, Token * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a></td></tr>
<tr class="separator:ac20d544a2a34069c8407b433092488b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a559a7c781b217933b6b2aaf9c15be0d0"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structkaldi_1_1LatticeFasterDecoderTpl_1_1TokenList.html">TokenList</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a></td></tr>
<tr class="separator:a559a7c781b217933b6b2aaf9c15be0d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33f6a2d227b84ba09ec8821e214a325a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a33f6a2d227b84ba09ec8821e214a325a">queue_</a></td></tr>
<tr class="separator:a33f6a2d227b84ba09ec8821e214a325a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bb29e04bc49f194902c10f5718ef2e7"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a></td></tr>
<tr class="separator:a7bb29e04bc49f194902c10f5718ef2e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbb9ff57e1e9d27c3f04c6e95c75c015"><td class="memItemLeft" align="right" valign="top">const FST *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">fst_</a></td></tr>
<tr class="separator:acbb9ff57e1e9d27c3f04c6e95c75c015"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56cb3ce3508dd8e8b6a6eb41510a29c8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a56cb3ce3508dd8e8b6a6eb41510a29c8">delete_fst_</a></td></tr>
<tr class="separator:a56cb3ce3508dd8e8b6a6eb41510a29c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58a4df3a6c191ed69a294d43c2c545aa"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a58a4df3a6c191ed69a294d43c2c545aa">cost_offsets_</a></td></tr>
<tr class="separator:a58a4df3a6c191ed69a294d43c2c545aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9af57d7482fe6f2e90149ae4c5082f7e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structkaldi_1_1LatticeFasterDecoderConfig.html">LatticeFasterDecoderConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a></td></tr>
<tr class="separator:a9af57d7482fe6f2e90149ae4c5082f7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21115816f8d2258f49f4934d2d9d83a7"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a></td></tr>
<tr class="separator:a21115816f8d2258f49f4934d2d9d83a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd4660a81d0a829a6920416d202a7041"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abd4660a81d0a829a6920416d202a7041">warned_</a></td></tr>
<tr class="separator:abd4660a81d0a829a6920416d202a7041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad15b222ead591bfc30e26feb230484bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a></td></tr>
<tr class="memdesc:ad15b222ead591bfc30e26feb230484bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">decoding_finalized_ is true if someone called <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a363a350323c7c881be0a0fc089d2b555" title="This function may be optionally called after AdvanceDecoding(), when you do not plan to decode any fu...">FinalizeDecoding()</a>.  <a href="#ad15b222ead591bfc30e26feb230484bf">More...</a><br /></td></tr>
<tr class="separator:ad15b222ead591bfc30e26feb230484bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40bc4ede3f47b67f9c1920c5c7de4370"><td class="memItemLeft" align="right" valign="top">unordered_map&lt; Token *, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a40bc4ede3f47b67f9c1920c5c7de4370">final_costs_</a></td></tr>
<tr class="memdesc:a40bc4ede3f47b67f9c1920c5c7de4370"><td class="mdescLeft">&#160;</td><td class="mdescRight">For the meaning of the next 3 variables, see the comment for decoding_finalized_ above., and <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abac1d9b6331d75273f079182a8995d19">ComputeFinalCosts()</a>.  <a href="#a40bc4ede3f47b67f9c1920c5c7de4370">More...</a><br /></td></tr>
<tr class="separator:a40bc4ede3f47b67f9c1920c5c7de4370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac89f0cc0de0da3c074f79341f3611b30"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac89f0cc0de0da3c074f79341f3611b30">final_relative_cost_</a></td></tr>
<tr class="separator:ac89f0cc0de0da3c074f79341f3611b30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49eb722260aa57b473caac342187b63c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a49eb722260aa57b473caac342187b63c">final_best_cost_</a></td></tr>
<tr class="separator:a49eb722260aa57b473caac342187b63c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename FST, typename Token = decoder::StdToken&gt;<br />
class kaldi::LatticeFasterDecoderTpl&lt; FST, Token &gt;</h3>

<p>This is the "normal" lattice-generating decoder. </p>
<p>See <a class="el" href="lattices.html#lattices_generation">Lattice generation</a> <a class="el" href="decoders.html#decoders_faster">FasterDecoder: a more optimized decoder</a> and <a class="el" href="decoders.html#decoders_simple">SimpleDecoder: the simplest possible decoder</a> for more information.</p>
<p>The decoder is templated on the FST type and the token type. The token type will normally be StdToken, but also may be BackpointerToken which is to support quick lookup of the current best path (see <a class="el" href="lattice-faster-online-decoder_8h.html">lattice-faster-online-decoder.h</a>)</p>
<p>The FST you invoke this decoder with is expected to equal Fst::Fst&lt;fst::StdArc&gt;, a.k.a. StdFst, or GrammarFst. If you invoke it with FST == StdFst and it notices that the actual FST type is fst::VectorFst&lt;fst::StdArc&gt; or fst::ConstFst&lt;fst::StdArc&gt;, the decoder object will internally cast itself to one that is templated on those more specific types; this is an optimization for speed. </p>

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00226">226</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a5847f7be225935530cfc03fa176af15c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5847f7be225935530cfc03fa176af15c">&#9670;&nbsp;</a></span>Arc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a5847f7be225935530cfc03fa176af15c">Arc</a> =  typename FST::Arc</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00228">228</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="a164961b9a08c87a7d99a873922d2dc14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a164961b9a08c87a7d99a873922d2dc14">&#9670;&nbsp;</a></span>Elem</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> =  typename <a class="el" href="classkaldi_1_1HashList.html">HashList</a>&lt;<a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a>, Token*&gt;::<a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00362">362</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="abc9c72ea2574bb131efc94e2e7d1e12d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc9c72ea2574bb131efc94e2e7d1e12d">&#9670;&nbsp;</a></span>ForwardLinkT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">ForwardLinkT</a> =  <a class="el" href="structkaldi_1_1decoder_1_1ForwardLink.html">decoder::ForwardLink</a>&lt;Token&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00232">232</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="a85a02632976ca270a5ca1633798e2ba3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85a02632976ca270a5ca1633798e2ba3">&#9670;&nbsp;</a></span>Label</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a85a02632976ca270a5ca1633798e2ba3">Label</a> =  typename Arc::Label</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00229">229</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="a1ea5dad35d7cc8bdd784c6aff3755f4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ea5dad35d7cc8bdd784c6aff3755f4b">&#9670;&nbsp;</a></span>StateId</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a> =  typename Arc::StateId</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00230">230</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="a217833759d6c6ae1e2c1fd85c486d6ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a217833759d6c6ae1e2c1fd85c486d6ba">&#9670;&nbsp;</a></span>Weight</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a217833759d6c6ae1e2c1fd85c486d6ba">Weight</a> =  typename Arc::Weight</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00231">231</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a708f5bd28504609eda9942046b3df46d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a708f5bd28504609eda9942046b3df46d">&#9670;&nbsp;</a></span>LatticeFasterDecoderTpl() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html">LatticeFasterDecoderTpl</a> </td>
          <td>(</td>
          <td class="paramtype">const FST &amp;&#160;</td>
          <td class="paramname"><em>fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1LatticeFasterDecoderConfig.html">LatticeFasterDecoderConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00030">30</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                                             :</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">fst_</a>(&amp;<a class="code" href="namespacefst.html">fst</a>), <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a56cb3ce3508dd8e8b6a6eb41510a29c8">delete_fst_</a>(<span class="keyword">false</span>), <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>(config), <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>(0) {</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  config.Check();</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#abd46a2cac53ce74147c1bc7742b0d7a4">SetSize</a>(1000);  <span class="comment">// just so on the first frame we do something reasonable.</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a56cb3ce3508dd8e8b6a6eb41510a29c8"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a56cb3ce3508dd8e8b6a6eb41510a29c8">kaldi::LatticeFasterDecoderTpl::delete_fst_</a></div><div class="ttdeci">bool delete_fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00473">lattice-faster-decoder.h:473</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a9af57d7482fe6f2e90149ae4c5082f7e"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">kaldi::LatticeFasterDecoderTpl::config_</a></div><div class="ttdeci">LatticeFasterDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00479">lattice-faster-decoder.h:479</a></div></div>
<div class="ttc" id="classkaldi_1_1HashList_html_abd46a2cac53ce74147c1bc7742b0d7a4"><div class="ttname"><a href="classkaldi_1_1HashList.html#abd46a2cac53ce74147c1bc7742b0d7a4">kaldi::HashList::SetSize</a></div><div class="ttdeci">void SetSize(size_t sz)</div><div class="ttdoc">SetSize tells the object how many hash buckets to allocate (should typically be at least twice the nu...</div><div class="ttdef"><b>Definition:</b> <a href="hash-list-inl_8h_source.html#l00037">hash-list-inl.h:37</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_acbb9ff57e1e9d27c3f04c6e95c75c015"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">kaldi::LatticeFasterDecoderTpl::fst_</a></div><div class="ttdeci">const FST * fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00470">lattice-faster-decoder.h:470</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeFasterDecoderTpl::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00480">lattice-faster-decoder.h:480</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ac20d544a2a34069c8407b433092488b5"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">kaldi::LatticeFasterDecoderTpl::toks_</a></div><div class="ttdeci">HashList&lt; StateId, Token * &gt; toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00461">lattice-faster-decoder.h:461</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a61c06919a02b68550f3d9d5bfe3d39af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61c06919a02b68550f3d9d5bfe3d39af">&#9670;&nbsp;</a></span>LatticeFasterDecoderTpl() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html">LatticeFasterDecoderTpl</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1LatticeFasterDecoderConfig.html">LatticeFasterDecoderConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FST *&#160;</td>
          <td class="paramname"><em>fst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00040">40</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                                                       :</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">fst_</a>(<a class="code" href="namespacefst.html">fst</a>), <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a56cb3ce3508dd8e8b6a6eb41510a29c8">delete_fst_</a>(<span class="keyword">true</span>), <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>(config), <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>(0) {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  config.Check();</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#abd46a2cac53ce74147c1bc7742b0d7a4">SetSize</a>(1000);  <span class="comment">// just so on the first frame we do something reasonable.</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a56cb3ce3508dd8e8b6a6eb41510a29c8"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a56cb3ce3508dd8e8b6a6eb41510a29c8">kaldi::LatticeFasterDecoderTpl::delete_fst_</a></div><div class="ttdeci">bool delete_fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00473">lattice-faster-decoder.h:473</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a9af57d7482fe6f2e90149ae4c5082f7e"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">kaldi::LatticeFasterDecoderTpl::config_</a></div><div class="ttdeci">LatticeFasterDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00479">lattice-faster-decoder.h:479</a></div></div>
<div class="ttc" id="classkaldi_1_1HashList_html_abd46a2cac53ce74147c1bc7742b0d7a4"><div class="ttname"><a href="classkaldi_1_1HashList.html#abd46a2cac53ce74147c1bc7742b0d7a4">kaldi::HashList::SetSize</a></div><div class="ttdeci">void SetSize(size_t sz)</div><div class="ttdoc">SetSize tells the object how many hash buckets to allocate (should typically be at least twice the nu...</div><div class="ttdef"><b>Definition:</b> <a href="hash-list-inl_8h_source.html#l00037">hash-list-inl.h:37</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_acbb9ff57e1e9d27c3f04c6e95c75c015"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">kaldi::LatticeFasterDecoderTpl::fst_</a></div><div class="ttdeci">const FST * fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00470">lattice-faster-decoder.h:470</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeFasterDecoderTpl::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00480">lattice-faster-decoder.h:480</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ac20d544a2a34069c8407b433092488b5"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">kaldi::LatticeFasterDecoderTpl::toks_</a></div><div class="ttdeci">HashList&lt; StateId, Token * &gt; toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00461">lattice-faster-decoder.h:461</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a767f21e6bc31bc9fffe87f2d6f8f2e2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a767f21e6bc31bc9fffe87f2d6f8f2e2d">&#9670;&nbsp;</a></span>~LatticeFasterDecoderTpl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html">LatticeFasterDecoderTpl</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00049">49</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                                                              {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a46348242a858ece22690aae433fc4537">DeleteElems</a>(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#a6e96a0d63c84e36b1b706385b8075e8a">Clear</a>());</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ae09bece0bb8eb98a4bf14a74351f2558">ClearActiveTokens</a>();</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a56cb3ce3508dd8e8b6a6eb41510a29c8">delete_fst_</a>) <span class="keyword">delete</span> &amp;(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">fst_</a>);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a56cb3ce3508dd8e8b6a6eb41510a29c8"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a56cb3ce3508dd8e8b6a6eb41510a29c8">kaldi::LatticeFasterDecoderTpl::delete_fst_</a></div><div class="ttdeci">bool delete_fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00473">lattice-faster-decoder.h:473</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ae09bece0bb8eb98a4bf14a74351f2558"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ae09bece0bb8eb98a4bf14a74351f2558">kaldi::LatticeFasterDecoderTpl::ClearActiveTokens</a></div><div class="ttdeci">void ClearActiveTokens()</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00911">lattice-faster-decoder.cc:911</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_acbb9ff57e1e9d27c3f04c6e95c75c015"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">kaldi::LatticeFasterDecoderTpl::fst_</a></div><div class="ttdeci">const FST * fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00470">lattice-faster-decoder.h:470</a></div></div>
<div class="ttc" id="classkaldi_1_1HashList_html_a6e96a0d63c84e36b1b706385b8075e8a"><div class="ttname"><a href="classkaldi_1_1HashList.html#a6e96a0d63c84e36b1b706385b8075e8a">kaldi::HashList::Clear</a></div><div class="ttdeci">Elem * Clear()</div><div class="ttdoc">Clears the hash and gives the head of the current list to the user; ownership is transferred to the u...</div><div class="ttdef"><b>Definition:</b> <a href="hash-list-inl_8h_source.html#l00046">hash-list-inl.h:46</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a46348242a858ece22690aae433fc4537"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a46348242a858ece22690aae433fc4537">kaldi::LatticeFasterDecoderTpl::DeleteElems</a></div><div class="ttdeci">void DeleteElems(Elem *list)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00903">lattice-faster-decoder.cc:903</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ac20d544a2a34069c8407b433092488b5"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">kaldi::LatticeFasterDecoderTpl::toks_</a></div><div class="ttdeci">HashList&lt; StateId, Token * &gt; toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00461">lattice-faster-decoder.h:461</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a375a5c2ebd730748ed1da740a4a23692"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a375a5c2ebd730748ed1da740a4a23692">&#9670;&nbsp;</a></span>AdvanceDecoding()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AdvanceDecoding </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1DecodableInterface.html">DecodableInterface</a> *&#160;</td>
          <td class="paramname"><em>decodable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>max_num_frames</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This will decode until there are no more frames ready in the decodable object. </p>
<p>You can keep calling it each time more frames become available. If max_num_frames is specified, it specifies the maximum number of frames the function will decode before returning. </p>

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00593">593</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="lattice-faster-decoder_8cc_source.html#l00593">LatticeFasterDecoderTpl&lt; FST, decoder::BackpointerToken &gt;::AdvanceDecoding()</a>.</p>
<div class="fragment"><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                                                                      {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keywordflow">if</span> (std::is_same&lt;FST, fst::Fst&lt;fst::StdArc&gt; &gt;::value) {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="comment">// if the type &#39;FST&#39; is the FST base-class, then see if the FST type of fst_</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="comment">// is actually VectorFst or ConstFst.  If so, call the AdvanceDecoding()</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="comment">// function after casting *this to the more specific type.</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">fst_</a>-&gt;Type() == <span class="stringliteral">&quot;const&quot;</span>) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      LatticeFasterDecoderTpl&lt;fst::ConstFst&lt;fst::StdArc&gt;, Token&gt; *this_cast =</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;          <span class="keyword">reinterpret_cast&lt;</span>LatticeFasterDecoderTpl&lt;fst::ConstFst&lt;fst::StdArc&gt;, Token<span class="keyword">&gt;</span>* &gt;(<span class="keyword">this</span>);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      this_cast-&gt;AdvanceDecoding(decodable, max_num_frames);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">fst_</a>-&gt;Type() == <span class="stringliteral">&quot;vector&quot;</span>) {</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      LatticeFasterDecoderTpl&lt;fst::VectorFst&lt;fst::StdArc&gt;, Token&gt; *this_cast =</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;          <span class="keyword">reinterpret_cast&lt;</span>LatticeFasterDecoderTpl&lt;fst::VectorFst&lt;fst::StdArc&gt;, Token<span class="keyword">&gt;</span>* &gt;(<span class="keyword">this</span>);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      this_cast-&gt;AdvanceDecoding(decodable, max_num_frames);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    }</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  }</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.empty() &amp;&amp; !<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a> &amp;&amp;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;               <span class="stringliteral">&quot;You must call InitDecoding() before AdvanceDecoding&quot;</span>);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  int32 num_frames_ready = decodable-&gt;NumFramesReady();</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="comment">// num_frames_ready must be &gt;= num_frames_decoded, or else</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="comment">// the number of frames ready must have decreased (which doesn&#39;t</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// make sense) or the decodable object changed between calls</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// (which isn&#39;t allowed).</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(num_frames_ready &gt;= <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a>());</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  int32 target_frames_decoded = num_frames_ready;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="keywordflow">if</span> (max_num_frames &gt;= 0)</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    target_frames_decoded = std::min(target_frames_decoded,</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                                     <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a>() + max_num_frames);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a>() &lt; target_frames_decoded) {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a>() % <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#adc7cb2df42057c368ac36be78f4f57dd">prune_interval</a> == 0) {</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a93dce8f102ac41f19dc657dd9026a811">PruneActiveTokens</a>(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">lattice_beam</a> * <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#abaa74d02c4779b36819d3ec6c91385c9">prune_scale</a>);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> cost_cutoff = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9f1056788a421354e1217d03cd7186ff">ProcessEmitting</a>(decodable);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ae19877053b3834116aedaae3519572b1">ProcessNonemitting</a>(cost_cutoff);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;}</div><div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_adc7cb2df42057c368ac36be78f4f57dd"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#adc7cb2df42057c368ac36be78f4f57dd">kaldi::LatticeFasterDecoderConfig::prune_interval</a></div><div class="ttdeci">int32 prune_interval</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00043">lattice-faster-decoder.h:43</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_abf32d733b7437195b42a4d867fd5784b"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">kaldi::LatticeFasterDecoderConfig::lattice_beam</a></div><div class="ttdeci">BaseFloat lattice_beam</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00042">lattice-faster-decoder.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a9af57d7482fe6f2e90149ae4c5082f7e"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">kaldi::LatticeFasterDecoderTpl::config_</a></div><div class="ttdeci">LatticeFasterDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00479">lattice-faster-decoder.h:479</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a93dce8f102ac41f19dc657dd9026a811"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a93dce8f102ac41f19dc657dd9026a811">kaldi::LatticeFasterDecoderTpl::PruneActiveTokens</a></div><div class="ttdeci">void PruneActiveTokens(BaseFloat delta)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00519">lattice-faster-decoder.cc:519</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_aa030f3b26871bfec31b5e59cac3ba76d"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">kaldi::LatticeFasterDecoderTpl::NumFramesDecoded</a></div><div class="ttdeci">int32 NumFramesDecoded() const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00342">lattice-faster-decoder.h:342</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_acbb9ff57e1e9d27c3f04c6e95c75c015"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">kaldi::LatticeFasterDecoderTpl::fst_</a></div><div class="ttdeci">const FST * fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00470">lattice-faster-decoder.h:470</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeFasterDecoderTpl::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00463">lattice-faster-decoder.h:463</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ad15b222ead591bfc30e26feb230484bf"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad15b222ead591bfc30e26feb230484bf">kaldi::LatticeFasterDecoderTpl::decoding_finalized_</a></div><div class="ttdeci">bool decoding_finalized_</div><div class="ttdoc">decoding_finalized_ is true if someone called FinalizeDecoding(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00490">lattice-faster-decoder.h:490</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ae19877053b3834116aedaae3519572b1"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ae19877053b3834116aedaae3519572b1">kaldi::LatticeFasterDecoderTpl::ProcessNonemitting</a></div><div class="ttdeci">void ProcessNonemitting(BaseFloat cost_cutoff)</div><div class="ttdoc">Processes nonemitting (epsilon) arcs for one frame. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00833">lattice-faster-decoder.cc:833</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_abaa74d02c4779b36819d3ec6c91385c9"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#abaa74d02c4779b36819d3ec6c91385c9">kaldi::LatticeFasterDecoderConfig::prune_scale</a></div><div class="ttdeci">BaseFloat prune_scale</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00048">lattice-faster-decoder.h:48</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a9f1056788a421354e1217d03cd7186ff"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9f1056788a421354e1217d03cd7186ff">kaldi::LatticeFasterDecoderTpl::ProcessEmitting</a></div><div class="ttdeci">BaseFloat ProcessEmitting(DecodableInterface *decodable)</div><div class="ttdoc">Processes emitting arcs for one frame. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00727">lattice-faster-decoder.cc:727</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae09bece0bb8eb98a4bf14a74351f2558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae09bece0bb8eb98a4bf14a74351f2558">&#9670;&nbsp;</a></span>ClearActiveTokens()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ClearActiveTokens </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00911">911</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                                                            { <span class="comment">// a cleanup routine, at utt end/begin</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="comment">// Delete all tokens alive on this frame, and any forward</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="comment">// links they may have.</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">for</span> (Token *tok = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].toks; tok != NULL; ) {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ada13538cc5608db62cf3192e31bbb62f">DeleteForwardLinks</a>(tok);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      Token *next_tok = tok-&gt;next;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <span class="keyword">delete</span> tok;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>--;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      tok = next_tok;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    }</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  }</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.clear();</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a> == 0);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeFasterDecoderTpl::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00463">lattice-faster-decoder.h:463</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ada13538cc5608db62cf3192e31bbb62f"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ada13538cc5608db62cf3192e31bbb62f">kaldi::LatticeFasterDecoderTpl::DeleteForwardLinks</a></div><div class="ttdeci">static void DeleteForwardLinks(Token *tok)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00821">lattice-faster-decoder.cc:821</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeFasterDecoderTpl::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00480">lattice-faster-decoder.h:480</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abac1d9b6331d75273f079182a8995d19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abac1d9b6331d75273f079182a8995d19">&#9670;&nbsp;</a></span>ComputeFinalCosts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ComputeFinalCosts </td>
          <td>(</td>
          <td class="paramtype">unordered_map&lt; Token *, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td>
          <td class="paramname"><em>final_costs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> *&#160;</td>
          <td class="paramname"><em>final_relative_cost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> *&#160;</td>
          <td class="paramname"><em>final_best_cost</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00549">549</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                                      {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a>);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordflow">if</span> (final_costs != NULL)</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    final_costs-&gt;clear();</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keyword">const</span> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> *final_toks = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#a036029a98ac0e696a3eb0f99996e9e07">GetList</a>();</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> infinity = std::numeric_limits&lt;BaseFloat&gt;::infinity();</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> best_cost = infinity,</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      best_cost_with_final = infinity;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="keywordflow">while</span> (final_toks != NULL) {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a> state = final_toks-&gt;key;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    Token *tok = final_toks-&gt;val;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keyword">const</span> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> *next = final_toks-&gt;tail;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> final_cost = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">fst_</a>-&gt;Final(state).Value();</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> cost = tok-&gt;tot_cost,</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        cost_with_final = cost + final_cost;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    best_cost = std::min(cost, best_cost);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    best_cost_with_final = std::min(cost_with_final, best_cost_with_final);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">if</span> (final_costs != NULL &amp;&amp; final_cost != infinity)</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      (*final_costs)[tok] = final_cost;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    final_toks = next;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  }</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordflow">if</span> (final_relative_cost != NULL) {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">if</span> (best_cost == infinity &amp;&amp; best_cost_with_final == infinity) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="comment">// Likely this will only happen if there are no tokens surviving.</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="comment">// This seems the least bad way to handle it.</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      *final_relative_cost = infinity;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      *final_relative_cost = best_cost_with_final - best_cost;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    }</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  }</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="keywordflow">if</span> (final_best_cost != NULL) {</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">if</span> (best_cost_with_final != infinity) { <span class="comment">// final-state exists.</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      *final_best_cost = best_cost_with_final;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// no final-state exists.</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      *final_best_cost = best_cost;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  }</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1HashList_html_a036029a98ac0e696a3eb0f99996e9e07"><div class="ttname"><a href="classkaldi_1_1HashList.html#a036029a98ac0e696a3eb0f99996e9e07">kaldi::HashList::GetList</a></div><div class="ttdeci">const Elem * GetList() const</div><div class="ttdoc">Gives the head of the current list to the user. </div><div class="ttdef"><b>Definition:</b> <a href="hash-list-inl_8h_source.html#l00061">hash-list-inl.h:61</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_acbb9ff57e1e9d27c3f04c6e95c75c015"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">kaldi::LatticeFasterDecoderTpl::fst_</a></div><div class="ttdeci">const FST * fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00470">lattice-faster-decoder.h:470</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ad15b222ead591bfc30e26feb230484bf"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad15b222ead591bfc30e26feb230484bf">kaldi::LatticeFasterDecoderTpl::decoding_finalized_</a></div><div class="ttdeci">bool decoding_finalized_</div><div class="ttdoc">decoding_finalized_ is true if someone called FinalizeDecoding(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00490">lattice-faster-decoder.h:490</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a164961b9a08c87a7d99a873922d2dc14"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">kaldi::LatticeFasterDecoderTpl::Elem</a></div><div class="ttdeci">typename HashList&lt; StateId, Token * &gt;::Elem Elem</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00362">lattice-faster-decoder.h:362</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ac20d544a2a34069c8407b433092488b5"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">kaldi::LatticeFasterDecoderTpl::toks_</a></div><div class="ttdeci">HashList&lt; StateId, Token * &gt; toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00461">lattice-faster-decoder.h:461</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a1ea5dad35d7cc8bdd784c6aff3755f4b"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">kaldi::LatticeFasterDecoderTpl::StateId</a></div><div class="ttdeci">typename Arc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00230">lattice-faster-decoder.h:230</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac78620c576a40d3bdb14dc87b2a754a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac78620c576a40d3bdb14dc87b2a754a5">&#9670;&nbsp;</a></span>Decode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> Decode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1DecodableInterface.html">DecodableInterface</a> *&#160;</td>
          <td class="paramname"><em>decodable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decodes until there are no more frames left in the "decodable" object. </p>
<p>note, this may block waiting for input if the "decodable" object blocks. Returns true if any kind of traceback is available (not necessarily from a final state). </p>

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00079">79</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="decoder-wrappers_8cc_source.html#l00201">kaldi::DecodeUtteranceLatticeFaster()</a>, and <a class="el" href="decoder-wrappers_8cc_source.html#l00064">DecodeUtteranceLatticeFasterClass::operator()()</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                                                                              {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad43c69eb4374e3a67d4cd91696a5d6e9">InitDecoding</a>();</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="comment">// We use 1-based indexing for frames in this decoder (if you view it in</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="comment">// terms of features), but note that the decodable object uses zero-based</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="comment">// numbering, which we have to correct for when we call it.</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordflow">while</span> (!decodable-&gt;IsLastFrame(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a>() - 1)) {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a>() % <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#adc7cb2df42057c368ac36be78f4f57dd">prune_interval</a> == 0)</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a93dce8f102ac41f19dc657dd9026a811">PruneActiveTokens</a>(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">lattice_beam</a> * <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#abaa74d02c4779b36819d3ec6c91385c9">prune_scale</a>);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> cost_cutoff = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9f1056788a421354e1217d03cd7186ff">ProcessEmitting</a>(decodable);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ae19877053b3834116aedaae3519572b1">ProcessNonemitting</a>(cost_cutoff);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a363a350323c7c881be0a0fc089d2b555">FinalizeDecoding</a>();</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// Returns true if we have any kind of traceback available (not necessarily</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// to the end state; query ReachedFinal() for that).</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">return</span> !<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.empty() &amp;&amp; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.back().toks != NULL;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div><div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_adc7cb2df42057c368ac36be78f4f57dd"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#adc7cb2df42057c368ac36be78f4f57dd">kaldi::LatticeFasterDecoderConfig::prune_interval</a></div><div class="ttdeci">int32 prune_interval</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00043">lattice-faster-decoder.h:43</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_abf32d733b7437195b42a4d867fd5784b"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">kaldi::LatticeFasterDecoderConfig::lattice_beam</a></div><div class="ttdeci">BaseFloat lattice_beam</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00042">lattice-faster-decoder.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a9af57d7482fe6f2e90149ae4c5082f7e"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">kaldi::LatticeFasterDecoderTpl::config_</a></div><div class="ttdeci">LatticeFasterDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00479">lattice-faster-decoder.h:479</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a363a350323c7c881be0a0fc089d2b555"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a363a350323c7c881be0a0fc089d2b555">kaldi::LatticeFasterDecoderTpl::FinalizeDecoding</a></div><div class="ttdeci">void FinalizeDecoding()</div><div class="ttdoc">This function may be optionally called after AdvanceDecoding(), when you do not plan to decode any fu...</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00638">lattice-faster-decoder.cc:638</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a93dce8f102ac41f19dc657dd9026a811"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a93dce8f102ac41f19dc657dd9026a811">kaldi::LatticeFasterDecoderTpl::PruneActiveTokens</a></div><div class="ttdeci">void PruneActiveTokens(BaseFloat delta)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00519">lattice-faster-decoder.cc:519</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ad43c69eb4374e3a67d4cd91696a5d6e9"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad43c69eb4374e3a67d4cd91696a5d6e9">kaldi::LatticeFasterDecoderTpl::InitDecoding</a></div><div class="ttdeci">void InitDecoding()</div><div class="ttdoc">InitDecoding initializes the decoding, and should only be used if you intend to call AdvanceDecoding(...</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00056">lattice-faster-decoder.cc:56</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_aa030f3b26871bfec31b5e59cac3ba76d"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">kaldi::LatticeFasterDecoderTpl::NumFramesDecoded</a></div><div class="ttdeci">int32 NumFramesDecoded() const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00342">lattice-faster-decoder.h:342</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeFasterDecoderTpl::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00463">lattice-faster-decoder.h:463</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ae19877053b3834116aedaae3519572b1"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ae19877053b3834116aedaae3519572b1">kaldi::LatticeFasterDecoderTpl::ProcessNonemitting</a></div><div class="ttdeci">void ProcessNonemitting(BaseFloat cost_cutoff)</div><div class="ttdoc">Processes nonemitting (epsilon) arcs for one frame. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00833">lattice-faster-decoder.cc:833</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_abaa74d02c4779b36819d3ec6c91385c9"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#abaa74d02c4779b36819d3ec6c91385c9">kaldi::LatticeFasterDecoderConfig::prune_scale</a></div><div class="ttdeci">BaseFloat prune_scale</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00048">lattice-faster-decoder.h:48</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a9f1056788a421354e1217d03cd7186ff"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9f1056788a421354e1217d03cd7186ff">kaldi::LatticeFasterDecoderTpl::ProcessEmitting</a></div><div class="ttdeci">BaseFloat ProcessEmitting(DecodableInterface *decodable)</div><div class="ttdoc">Processes emitting arcs for one frame. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00727">lattice-faster-decoder.cc:727</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a46348242a858ece22690aae433fc4537"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46348242a858ece22690aae433fc4537">&#9670;&nbsp;</a></span>DeleteElems()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DeleteElems </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> *&#160;</td>
          <td class="paramname"><em>list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00903">903</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                                                                {</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> *e = list, *e_tail; e != NULL; e = e_tail) {</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    e_tail = e-&gt;tail;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#a3d539454b5c65049a003819c6ebb00fa">Delete</a>(e);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  }</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a164961b9a08c87a7d99a873922d2dc14"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">kaldi::LatticeFasterDecoderTpl::Elem</a></div><div class="ttdeci">typename HashList&lt; StateId, Token * &gt;::Elem Elem</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00362">lattice-faster-decoder.h:362</a></div></div>
<div class="ttc" id="classkaldi_1_1HashList_html_a3d539454b5c65049a003819c6ebb00fa"><div class="ttname"><a href="classkaldi_1_1HashList.html#a3d539454b5c65049a003819c6ebb00fa">kaldi::HashList::Delete</a></div><div class="ttdeci">void Delete(Elem *e)</div><div class="ttdoc">Think of this like delete(). </div><div class="ttdef"><b>Definition:</b> <a href="hash-list-inl_8h_source.html#l00066">hash-list-inl.h:66</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ac20d544a2a34069c8407b433092488b5"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">kaldi::LatticeFasterDecoderTpl::toks_</a></div><div class="ttdeci">HashList&lt; StateId, Token * &gt; toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00461">lattice-faster-decoder.h:461</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ada13538cc5608db62cf3192e31bbb62f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada13538cc5608db62cf3192e31bbb62f">&#9670;&nbsp;</a></span>DeleteForwardLinks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DeleteForwardLinks </td>
          <td>(</td>
          <td class="paramtype">Token *&#160;</td>
          <td class="paramname"><em>tok</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00821">821</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                                                                       {</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">ForwardLinkT</a> *l = tok-&gt;links, *m;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="keywordflow">while</span> (l != NULL) {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    m = l-&gt;next;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keyword">delete</span> l;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    l = m;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  }</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  tok-&gt;links = NULL;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_abc9c72ea2574bb131efc94e2e7d1e12d"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">kaldi::LatticeFasterDecoderTpl::ForwardLinkT</a></div><div class="ttdeci">decoder::ForwardLink&lt; Token &gt; ForwardLinkT</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00232">lattice-faster-decoder.h:232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a363a350323c7c881be0a0fc089d2b555"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a363a350323c7c881be0a0fc089d2b555">&#9670;&nbsp;</a></span>FinalizeDecoding()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FinalizeDecoding </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function may be optionally called after <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a375a5c2ebd730748ed1da740a4a23692" title="This will decode until there are no more frames ready in the decodable object. ">AdvanceDecoding()</a>, when you do not plan to decode any further. </p>
<p>It does an extra pruning step that will help to prune the lattices output by GetLattice and (particularly) GetRawLattice more accurately, particularly toward the end of the utterance. It does this by using the final-probs in pruning (if any final-state survived); it also does a final pruning step that visits all states (the pruning that is done during decoding may fail to prune states that are within kPruningScale = 0.1 outside of the beam). If you call this, you cannot call AdvanceDecoding again (it will fail), and you cannot call <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a561fd25bc9b3a678dea5f3cf1463f8cb" title="[Deprecated, users should now use GetRawLattice and determinize it themselves, e.g. ">GetLattice()</a> and related functions with use_final_probs = false. Used to be called PruneActiveTokensFinal(). </p>

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00638">638</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                                                           {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  int32 final_frame_plus_one = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a>();</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  int32 num_toks_begin = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="comment">// PruneForwardLinksFinal() prunes final frame (with final-probs), and</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="comment">// sets decoding_finalized_.</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a860ae70828a0cd0382b81cc3558a2a02">PruneForwardLinksFinal</a>();</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">for</span> (int32 f = final_frame_plus_one - 1; f &gt;= 0; f--) {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordtype">bool</span> b1, b2; <span class="comment">// values not used.</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> dontcare = 0.0; <span class="comment">// delta of zero means we must always update</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aec5d179a75df610a6d9350a4749f82b9">PruneForwardLinks</a>(f, &amp;b1, &amp;b2, dontcare);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a101529bc846dc648fd5406d718dc450b">PruneTokensForFrame</a>(f + 1);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a101529bc846dc648fd5406d718dc450b">PruneTokensForFrame</a>(0);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(4) &lt;&lt; <span class="stringliteral">&quot;pruned tokens from &quot;</span> &lt;&lt; num_toks_begin</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_aec5d179a75df610a6d9350a4749f82b9"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#aec5d179a75df610a6d9350a4749f82b9">kaldi::LatticeFasterDecoderTpl::PruneForwardLinks</a></div><div class="ttdeci">void PruneForwardLinks(int32 frame_plus_one, bool *extra_costs_changed, bool *links_pruned, BaseFloat delta)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00312">lattice-faster-decoder.cc:312</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a101529bc846dc648fd5406d718dc450b"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a101529bc846dc648fd5406d718dc450b">kaldi::LatticeFasterDecoderTpl::PruneTokensForFrame</a></div><div class="ttdeci">void PruneTokensForFrame(int32 frame_plus_one)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00492">lattice-faster-decoder.cc:492</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_aa030f3b26871bfec31b5e59cac3ba76d"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">kaldi::LatticeFasterDecoderTpl::NumFramesDecoded</a></div><div class="ttdeci">int32 NumFramesDecoded() const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00342">lattice-faster-decoder.h:342</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a860ae70828a0cd0382b81cc3558a2a02"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a860ae70828a0cd0382b81cc3558a2a02">kaldi::LatticeFasterDecoderTpl::PruneForwardLinksFinal</a></div><div class="ttdeci">void PruneForwardLinksFinal()</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00389">lattice-faster-decoder.cc:389</a></div></div>
<div class="ttc" id="group__error__group_html_ga16c81ec6ff3ba04c6ff96fdaed9d854e"><div class="ttname"><a href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a></div><div class="ttdeci">#define KALDI_VLOG(v)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00135">kaldi-error.h:135</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeFasterDecoderTpl::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00480">lattice-faster-decoder.h:480</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab79c2c25990723951176c948ba1adc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab79c2c25990723951176c948ba1adc3">&#9670;&nbsp;</a></span>FinalRelativeCost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> FinalRelativeCost </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aab79c2c25990723951176c948ba1adc3" title="FinalRelativeCost() serves the same purpose as ReachedFinal(), but gives more information. ">FinalRelativeCost()</a> serves the same purpose as <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad50a1511ad065870482b9af71818b4ef" title="says whether a final-state was active on the last frame. ">ReachedFinal()</a>, but gives more information. </p>
<p>It returns the difference between the best (final-cost plus cost) of any token on the final frame, and the best cost of any token on the final frame. If it is infinity it means no final-states were present on the final frame. It will usually be nonnegative. If it not too positive (e.g. &lt; 5 is my first guess, but this is not tested) you can take it as a good indication that we reached the final-state with reasonable likelihood. </p>

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00474">474</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                                                                       {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a>) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> relative_cost;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abac1d9b6331d75273f079182a8995d19">ComputeFinalCosts</a>(NULL, &amp;relative_cost, NULL);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">return</span> relative_cost;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="comment">// we&#39;re not allowed to call that function if FinalizeDecoding() has</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">// been called; return a cached value.</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac89f0cc0de0da3c074f79341f3611b30">final_relative_cost_</a>;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  }</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ac89f0cc0de0da3c074f79341f3611b30"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac89f0cc0de0da3c074f79341f3611b30">kaldi::LatticeFasterDecoderTpl::final_relative_cost_</a></div><div class="ttdeci">BaseFloat final_relative_cost_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00494">lattice-faster-decoder.h:494</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_abac1d9b6331d75273f079182a8995d19"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#abac1d9b6331d75273f079182a8995d19">kaldi::LatticeFasterDecoderTpl::ComputeFinalCosts</a></div><div class="ttdeci">void ComputeFinalCosts(unordered_map&lt; Token *, BaseFloat &gt; *final_costs, BaseFloat *final_relative_cost, BaseFloat *final_best_cost) const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00549">lattice-faster-decoder.cc:549</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ad15b222ead591bfc30e26feb230484bf"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad15b222ead591bfc30e26feb230484bf">kaldi::LatticeFasterDecoderTpl::decoding_finalized_</a></div><div class="ttdeci">bool decoding_finalized_</div><div class="ttdoc">decoding_finalized_ is true if someone called FinalizeDecoding(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00490">lattice-faster-decoder.h:490</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aac84e3ba7f817a1f76c4485d3c77cdb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac84e3ba7f817a1f76c4485d3c77cdb1">&#9670;&nbsp;</a></span>FindOrAddToken()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Token * FindOrAddToken </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>frame_plus_one</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>tot_cost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Token *&#160;</td>
          <td class="paramname"><em>backpointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>changed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00266">266</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                         {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="comment">// Returns the Token pointer.  Sets &quot;changed&quot; (if non-NULL) to true</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">// if the token was newly created or the cost changed.</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(frame_plus_one &lt; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size());</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  Token *&amp;toks = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[frame_plus_one].toks;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> *e_found = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#a70c43943e2107ed8c90d41ab8912667c">Find</a>(state);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordflow">if</span> (e_found == NULL) {  <span class="comment">// no such token presently.</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> extra_cost = 0.0;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// tokens on the currently final frame have zero extra_cost</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// as any of them could end up</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">// on the winning path.</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    Token *new_tok = <span class="keyword">new</span> Token (tot_cost, extra_cost, NULL, toks, backpointer);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// NULL: no forward links yet</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    toks = new_tok;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>++;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#a9c4c6d256148e698538a3219d266da11">Insert</a>(state, new_tok);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">if</span> (changed) *changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">return</span> new_tok;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    Token *tok = e_found-&gt;val;  <span class="comment">// There is an existing Token for this state.</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">if</span> (tok-&gt;tot_cost &gt; tot_cost) {  <span class="comment">// replace old token</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      tok-&gt;tot_cost = tot_cost;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="comment">// SetBackpointer() just does tok-&gt;backpointer = backpointer in</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="comment">// the case where Token == BackpointerToken, else nothing.</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      tok-&gt;SetBackpointer(backpointer);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="comment">// we don&#39;t allocate a new token, the old stays linked in active_toks_</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="comment">// we only replace the tot_cost</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="comment">// in the current frame, there are no forward links (and no extra_cost)</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="comment">// only in ProcessNonemitting we have to delete forward links</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="comment">// in case we visit a state for the second time</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="comment">// those forward links, that lead to this replaced token before:</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="comment">// they remain and will hopefully be pruned later (PruneForwardLinks...)</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordflow">if</span> (changed) *changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">if</span> (changed) *changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">return</span> tok;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div><div class="ttc" id="classkaldi_1_1HashList_html_a9c4c6d256148e698538a3219d266da11"><div class="ttname"><a href="classkaldi_1_1HashList.html#a9c4c6d256148e698538a3219d266da11">kaldi::HashList::Insert</a></div><div class="ttdeci">void Insert(I key, T val)</div><div class="ttdoc">Insert inserts a new element into the hashtable/stored list. </div><div class="ttdef"><b>Definition:</b> <a href="hash-list-inl_8h_source.html#l00126">hash-list-inl.h:126</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeFasterDecoderTpl::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00463">lattice-faster-decoder.h:463</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeFasterDecoderTpl::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00480">lattice-faster-decoder.h:480</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a164961b9a08c87a7d99a873922d2dc14"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">kaldi::LatticeFasterDecoderTpl::Elem</a></div><div class="ttdeci">typename HashList&lt; StateId, Token * &gt;::Elem Elem</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00362">lattice-faster-decoder.h:362</a></div></div>
<div class="ttc" id="classkaldi_1_1HashList_html_a70c43943e2107ed8c90d41ab8912667c"><div class="ttname"><a href="classkaldi_1_1HashList.html#a70c43943e2107ed8c90d41ab8912667c">kaldi::HashList::Find</a></div><div class="ttdeci">Elem * Find(I key)</div><div class="ttdoc">Find tries to find this element in the current list using the hashtable. </div><div class="ttdef"><b>Definition:</b> <a href="hash-list-inl_8h_source.html#l00072">hash-list-inl.h:72</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ac20d544a2a34069c8407b433092488b5"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">kaldi::LatticeFasterDecoderTpl::toks_</a></div><div class="ttdeci">HashList&lt; StateId, Token * &gt; toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00461">lattice-faster-decoder.h:461</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a254a3f70b7023d6b9821de6527181d9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a254a3f70b7023d6b9821de6527181d9f">&#9670;&nbsp;</a></span>GetBestPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> GetBestPath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#a4c9e4132556649881ca6f29dd13e2742">Lattice</a> *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>use_final_probs</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Outputs an FST corresponding to the single best path through the lattice. </p>
<p>Returns true if result is nonempty (using the return status is deprecated, it will become void). If "use_final_probs" is true AND we reached the final-state of the graph then it will include those as final-probs, else it will treat all final-probs as one. Note: this just calls <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ab28d134a214f038246237fd0b89e9d97" title="Outputs an FST corresponding to the raw, state-level tracebacks. ">GetRawLattice()</a> and figures out the shortest path. </p>

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00102">102</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="decoder-wrappers_8cc_source.html#l00201">kaldi::DecodeUtteranceLatticeFaster()</a>, and <a class="el" href="decoder-wrappers_8cc_source.html#l00116">DecodeUtteranceLatticeFasterClass::~DecodeUtteranceLatticeFasterClass()</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                                                                   {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <a class="code" href="namespacekaldi.html#a4c9e4132556649881ca6f29dd13e2742">Lattice</a> raw_lat;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ab28d134a214f038246237fd0b89e9d97">GetRawLattice</a>(&amp;raw_lat, use_final_probs);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  ShortestPath(raw_lat, olat);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">return</span> (olat-&gt;NumStates() != 0);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ab28d134a214f038246237fd0b89e9d97"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ab28d134a214f038246237fd0b89e9d97">kaldi::LatticeFasterDecoderTpl::GetRawLattice</a></div><div class="ttdeci">bool GetRawLattice(Lattice *ofst, bool use_final_probs=true) const</div><div class="ttdoc">Outputs an FST corresponding to the raw, state-level tracebacks. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00113">lattice-faster-decoder.cc:113</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4c9e4132556649881ca6f29dd13e2742"><div class="ttname"><a href="namespacekaldi.html#a4c9e4132556649881ca6f29dd13e2742">kaldi::Lattice</a></div><div class="ttdeci">fst::VectorFst&lt; LatticeArc &gt; Lattice</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-lattice_8h_source.html#l00044">kaldi-lattice.h:44</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0d1b3d918472e26fcb513f6b2a0d5644"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d1b3d918472e26fcb513f6b2a0d5644">&#9670;&nbsp;</a></span>GetCutoff()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> GetCutoff </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> *&#160;</td>
          <td class="paramname"><em>list_head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsize__t.html">size_t</a> *&#160;</td>
          <td class="paramname"><em>tok_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> *&#160;</td>
          <td class="paramname"><em>adaptive_beam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> **&#160;</td>
          <td class="paramname"><em>best_elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the weight cutoff. Also counts the active tokens. </p>

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00657">657</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                                                                                      {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> best_weight = std::numeric_limits&lt;BaseFloat&gt;::infinity();</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="comment">// positive == high cost == bad.</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="arpa-file-parser-test_8cc.html#a951345011b75d2e8d9bfc18ca63510d2">count</a> = 0;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#a9249bb63cf8c984ea8d10a7a23d22bef">max_active</a> == std::numeric_limits&lt;int32&gt;::max() &amp;&amp;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#a2c115a98cb8a211ec1cab16d5dd45447">min_active</a> == 0) {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> *e = list_head; e != NULL; e = e-&gt;tail, count++) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> w = <span class="keyword">static_cast&lt;</span><a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a><span class="keyword">&gt;</span>(e-&gt;val-&gt;tot_cost);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="keywordflow">if</span> (w &lt; best_weight) {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        best_weight = w;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <span class="keywordflow">if</span> (best_elem) *best_elem = e;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      }</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    }</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span> (tok_count != NULL) *tok_count = <a class="code" href="arpa-file-parser-test_8cc.html#a951345011b75d2e8d9bfc18ca63510d2">count</a>;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">if</span> (adaptive_beam != NULL) *adaptive_beam = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#aac27eaf00599707440629f2f6a274e02">beam</a>;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">return</span> best_weight + <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#aac27eaf00599707440629f2f6a274e02">beam</a>;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a>.clear();</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> *e = list_head; e != NULL; e = e-&gt;tail, count++) {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> w = e-&gt;val-&gt;tot_cost;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a>.push_back(w);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="keywordflow">if</span> (w &lt; best_weight) {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        best_weight = w;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">if</span> (best_elem) *best_elem = e;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    }</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">if</span> (tok_count != NULL) *tok_count = <a class="code" href="arpa-file-parser-test_8cc.html#a951345011b75d2e8d9bfc18ca63510d2">count</a>;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> beam_cutoff = best_weight + <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#aac27eaf00599707440629f2f6a274e02">beam</a>,</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        min_active_cutoff = std::numeric_limits&lt;BaseFloat&gt;::infinity(),</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        max_active_cutoff = std::numeric_limits&lt;BaseFloat&gt;::infinity();</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(6) &lt;&lt; <span class="stringliteral">&quot;Number of tokens active on frame &quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a>()</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a>.size();</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a>.size() &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#a9249bb63cf8c984ea8d10a7a23d22bef">max_active</a>)) {</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      std::nth_element(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a>.begin(),</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                       <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a>.begin() + <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#a9249bb63cf8c984ea8d10a7a23d22bef">max_active</a>,</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                       <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a>.end());</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      max_active_cutoff = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a>[<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#a9249bb63cf8c984ea8d10a7a23d22bef">max_active</a>];</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">if</span> (max_active_cutoff &lt; beam_cutoff) { <span class="comment">// max_active is tighter than beam.</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      <span class="keywordflow">if</span> (adaptive_beam)</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        *adaptive_beam = max_active_cutoff - best_weight + <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#aeba4456707a8c461884f8207ab387d78">beam_delta</a>;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <span class="keywordflow">return</span> max_active_cutoff;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    }</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a>.size() &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#a2c115a98cb8a211ec1cab16d5dd45447">min_active</a>)) {</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#a2c115a98cb8a211ec1cab16d5dd45447">min_active</a> == 0) min_active_cutoff = best_weight;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        std::nth_element(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a>.begin(),</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                         <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a>.begin() + <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#a2c115a98cb8a211ec1cab16d5dd45447">min_active</a>,</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                         <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a>.size() &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#a9249bb63cf8c984ea8d10a7a23d22bef">max_active</a>) ?</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                         <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a>.begin() + <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#a9249bb63cf8c984ea8d10a7a23d22bef">max_active</a> :</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                         <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a>.end());</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        min_active_cutoff = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">tmp_array_</a>[<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#a2c115a98cb8a211ec1cab16d5dd45447">min_active</a>];</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      }</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">if</span> (min_active_cutoff &gt; beam_cutoff) { <span class="comment">// min_active is looser than beam.</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordflow">if</span> (adaptive_beam)</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        *adaptive_beam = min_active_cutoff - best_weight + <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#aeba4456707a8c461884f8207ab387d78">beam_delta</a>;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="keywordflow">return</span> min_active_cutoff;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      *adaptive_beam = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#aac27eaf00599707440629f2f6a274e02">beam</a>;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <span class="keywordflow">return</span> beam_cutoff;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    }</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  }</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a9af57d7482fe6f2e90149ae4c5082f7e"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">kaldi::LatticeFasterDecoderTpl::config_</a></div><div class="ttdeci">LatticeFasterDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00479">lattice-faster-decoder.h:479</a></div></div>
<div class="ttc" id="arpa-file-parser-test_8cc_html_a951345011b75d2e8d9bfc18ca63510d2"><div class="ttname"><a href="arpa-file-parser-test_8cc.html#a951345011b75d2e8d9bfc18ca63510d2">count</a></div><div class="ttdeci">const size_t count</div><div class="ttdef"><b>Definition:</b> <a href="arpa-file-parser-test_8cc_source.html#l00066">arpa-file-parser-test.cc:66</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_aa030f3b26871bfec31b5e59cac3ba76d"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">kaldi::LatticeFasterDecoderTpl::NumFramesDecoded</a></div><div class="ttdeci">int32 NumFramesDecoded() const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00342">lattice-faster-decoder.h:342</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a7bb29e04bc49f194902c10f5718ef2e7"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a7bb29e04bc49f194902c10f5718ef2e7">kaldi::LatticeFasterDecoderTpl::tmp_array_</a></div><div class="ttdeci">std::vector&lt; BaseFloat &gt; tmp_array_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00467">lattice-faster-decoder.h:467</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_aeba4456707a8c461884f8207ab387d78"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#aeba4456707a8c461884f8207ab387d78">kaldi::LatticeFasterDecoderConfig::beam_delta</a></div><div class="ttdeci">BaseFloat beam_delta</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00046">lattice-faster-decoder.h:46</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_aac27eaf00599707440629f2f6a274e02"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#aac27eaf00599707440629f2f6a274e02">kaldi::LatticeFasterDecoderConfig::beam</a></div><div class="ttdeci">BaseFloat beam</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00039">lattice-faster-decoder.h:39</a></div></div>
<div class="ttc" id="group__error__group_html_ga16c81ec6ff3ba04c6ff96fdaed9d854e"><div class="ttname"><a href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a></div><div class="ttdeci">#define KALDI_VLOG(v)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00135">kaldi-error.h:135</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_a9249bb63cf8c984ea8d10a7a23d22bef"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#a9249bb63cf8c984ea8d10a7a23d22bef">kaldi::LatticeFasterDecoderConfig::max_active</a></div><div class="ttdeci">int32 max_active</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00040">lattice-faster-decoder.h:40</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a164961b9a08c87a7d99a873922d2dc14"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">kaldi::LatticeFasterDecoderTpl::Elem</a></div><div class="ttdeci">typename HashList&lt; StateId, Token * &gt;::Elem Elem</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00362">lattice-faster-decoder.h:362</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_a2c115a98cb8a211ec1cab16d5dd45447"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#a2c115a98cb8a211ec1cab16d5dd45447">kaldi::LatticeFasterDecoderConfig::min_active</a></div><div class="ttdeci">int32 min_active</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00041">lattice-faster-decoder.h:41</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a561fd25bc9b3a678dea5f3cf1463f8cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a561fd25bc9b3a678dea5f3cf1463f8cb">&#9670;&nbsp;</a></span>GetLattice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> GetLattice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aeba2c05d999bd2f794db8919ac816bb3">CompactLattice</a> *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>use_final_probs</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>[Deprecated, users should now use GetRawLattice and determinize it themselves, e.g. </p>
<p>using DeterminizeLatticePhonePrunedWrapper]. Outputs an FST corresponding to the lattice-determinized lattice (one path per word sequence). Returns true if result is nonempty. If "use_final_probs" is true AND we reached the final-state of the graph then it will include those as final-probs, else it will treat all final-probs as one. </p>

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00203">203</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                                                                       {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <a class="code" href="namespacekaldi.html#a4c9e4132556649881ca6f29dd13e2742">Lattice</a> raw_fst;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ab28d134a214f038246237fd0b89e9d97">GetRawLattice</a>(&amp;raw_fst, use_final_probs);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  Invert(&amp;raw_fst);  <span class="comment">// make it so word labels are on the input.</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="comment">// (in phase where we get backward-costs).</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  fst::ILabelCompare&lt;LatticeArc&gt; ilabel_comp;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  ArcSort(&amp;raw_fst, ilabel_comp);  <span class="comment">// sort on ilabel; makes</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="comment">// lattice-determinization more efficient.</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <a class="code" href="structfst_1_1DeterminizeLatticePrunedOptions.html">fst::DeterminizeLatticePrunedOptions</a> lat_opts;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  lat_opts.<a class="code" href="structfst_1_1DeterminizeLatticePrunedOptions.html#a7b483d0949bb8cb9cfd932aa3b06485f">max_mem</a> = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#a9314f648d808c374edbc3c2c3b6156a1">det_opts</a>.<a class="code" href="structfst_1_1DeterminizeLatticePhonePrunedOptions.html#a7b483d0949bb8cb9cfd932aa3b06485f">max_mem</a>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <a class="code" href="group__fst__extensions.html#gae37d77a64fdc7c92ad2c44ece0b74f9a">DeterminizeLatticePruned</a>(raw_fst, <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">lattice_beam</a>, ofst, lat_opts);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  raw_fst.DeleteStates();  <span class="comment">// Free memory-- raw_fst no longer needed.</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  Connect(ofst);  <span class="comment">// Remove unreachable states... there might be</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">// a small number of these, in some cases.</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="comment">// Note: if something went wrong and the raw lattice was empty,</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="comment">// we should still get to this point in the code without warnings or failures.</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">return</span> (ofst-&gt;NumStates() != 0);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div><div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_abf32d733b7437195b42a4d867fd5784b"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">kaldi::LatticeFasterDecoderConfig::lattice_beam</a></div><div class="ttdeci">BaseFloat lattice_beam</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00042">lattice-faster-decoder.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ab28d134a214f038246237fd0b89e9d97"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ab28d134a214f038246237fd0b89e9d97">kaldi::LatticeFasterDecoderTpl::GetRawLattice</a></div><div class="ttdeci">bool GetRawLattice(Lattice *ofst, bool use_final_probs=true) const</div><div class="ttdoc">Outputs an FST corresponding to the raw, state-level tracebacks. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00113">lattice-faster-decoder.cc:113</a></div></div>
<div class="ttc" id="group__fst__extensions_html_gae37d77a64fdc7c92ad2c44ece0b74f9a"><div class="ttname"><a href="group__fst__extensions.html#gae37d77a64fdc7c92ad2c44ece0b74f9a">fst::DeterminizeLatticePruned</a></div><div class="ttdeci">bool DeterminizeLatticePruned(const ExpandedFst&lt; ArcTpl&lt; Weight &gt; &gt; &amp;ifst, double beam, MutableFst&lt; ArcTpl&lt; CompactLatticeWeightTpl&lt; Weight, IntType &gt; &gt; &gt; *ofst, DeterminizeLatticePrunedOptions opts)</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-pruned_8cc_source.html#l01193">determinize-lattice-pruned.cc:1193</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a9af57d7482fe6f2e90149ae4c5082f7e"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">kaldi::LatticeFasterDecoderTpl::config_</a></div><div class="ttdeci">LatticeFasterDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00479">lattice-faster-decoder.h:479</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4c9e4132556649881ca6f29dd13e2742"><div class="ttname"><a href="namespacekaldi.html#a4c9e4132556649881ca6f29dd13e2742">kaldi::Lattice</a></div><div class="ttdeci">fst::VectorFst&lt; LatticeArc &gt; Lattice</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-lattice_8h_source.html#l00044">kaldi-lattice.h:44</a></div></div>
<div class="ttc" id="structfst_1_1DeterminizeLatticePhonePrunedOptions_html_a7b483d0949bb8cb9cfd932aa3b06485f"><div class="ttname"><a href="structfst_1_1DeterminizeLatticePhonePrunedOptions.html#a7b483d0949bb8cb9cfd932aa3b06485f">fst::DeterminizeLatticePhonePrunedOptions::max_mem</a></div><div class="ttdeci">int max_mem</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-pruned_8h_source.html#l00150">determinize-lattice-pruned.h:150</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_a9314f648d808c374edbc3c2c3b6156a1"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#a9314f648d808c374edbc3c2c3b6156a1">kaldi::LatticeFasterDecoderConfig::det_opts</a></div><div class="ttdeci">fst::DeterminizeLatticePhonePrunedOptions det_opts</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00054">lattice-faster-decoder.h:54</a></div></div>
<div class="ttc" id="structfst_1_1DeterminizeLatticePrunedOptions_html_a7b483d0949bb8cb9cfd932aa3b06485f"><div class="ttname"><a href="structfst_1_1DeterminizeLatticePrunedOptions.html#a7b483d0949bb8cb9cfd932aa3b06485f">fst::DeterminizeLatticePrunedOptions::max_mem</a></div><div class="ttdeci">int max_mem</div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-pruned_8h_source.html#l00114">determinize-lattice-pruned.h:114</a></div></div>
<div class="ttc" id="structfst_1_1DeterminizeLatticePrunedOptions_html"><div class="ttname"><a href="structfst_1_1DeterminizeLatticePrunedOptions.html">fst::DeterminizeLatticePrunedOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="determinize-lattice-pruned_8h_source.html#l00112">determinize-lattice-pruned.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9b84c75104d243bc60551b236dacfbb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b84c75104d243bc60551b236dacfbb5">&#9670;&nbsp;</a></span>GetOptions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structkaldi_1_1LatticeFasterDecoderConfig.html">LatticeFasterDecoderConfig</a>&amp; GetOptions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00249">249</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="decoder-wrappers_8cc_source.html#l00201">kaldi::DecodeUtteranceLatticeFaster()</a>, and <a class="el" href="decoder-wrappers_8cc_source.html#l00064">DecodeUtteranceLatticeFasterClass::operator()()</a>.</p>
<div class="fragment"><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                                       {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  }</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a9af57d7482fe6f2e90149ae4c5082f7e"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">kaldi::LatticeFasterDecoderTpl::config_</a></div><div class="ttdeci">LatticeFasterDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00479">lattice-faster-decoder.h:479</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab28d134a214f038246237fd0b89e9d97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab28d134a214f038246237fd0b89e9d97">&#9670;&nbsp;</a></span>GetRawLattice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> GetRawLattice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#a4c9e4132556649881ca6f29dd13e2742">Lattice</a> *&#160;</td>
          <td class="paramname"><em>ofst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>use_final_probs</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Outputs an FST corresponding to the raw, state-level tracebacks. </p>
<p>Returns true if result is nonempty. If "use_final_probs" is true AND we reached the final-state of the graph then it will include those as final-probs, else it will treat all final-probs as one. The raw lattice will be topologically sorted.</p>
<p>See also GetRawLatticePruned in <a class="el" href="lattice-faster-online-decoder_8h.html">lattice-faster-online-decoder.h</a>, which also supports a pruning beam, in case for some reason you want it pruned tighter than the regular lattice beam. We could put that here in future needed. </p>

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00113">113</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="decoder-wrappers_8cc_source.html#l00201">kaldi::DecodeUtteranceLatticeFaster()</a>, and <a class="el" href="decoder-wrappers_8cc_source.html#l00064">DecodeUtteranceLatticeFasterClass::operator()()</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                                {</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacekaldi.html#a417e37822095c5adb9680fa07dffea8d">LatticeArc</a> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a5847f7be225935530cfc03fa176af15c">Arc</a>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">Arc::StateId</a> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">Arc::Weight</a> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a217833759d6c6ae1e2c1fd85c486d6ba">Weight</a>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">Arc::Label</a> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a85a02632976ca270a5ca1633798e2ba3">Label</a>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="comment">// Note: you can&#39;t use the old interface (Decode()) if you want to</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="comment">// get the lattice with use_final_probs = false.  You&#39;d have to do</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">// InitDecoding() and then AdvanceDecoding().</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a> &amp;&amp; !use_final_probs)</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;You cannot call FinalizeDecoding() and then call &quot;</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;GetRawLattice() with use_final_probs == false&quot;</span>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  unordered_map&lt;Token*, BaseFloat&gt; final_costs_local;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keyword">const</span> unordered_map&lt;Token*, BaseFloat&gt; &amp;final_costs =</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a> ? <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a40bc4ede3f47b67f9c1920c5c7de4370">final_costs_</a> : final_costs_local);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a> &amp;&amp; use_final_probs)</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abac1d9b6331d75273f079182a8995d19">ComputeFinalCosts</a>(&amp;final_costs_local, NULL, NULL);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  ofst-&gt;DeleteStates();</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="comment">// num-frames plus one (since frames are one-based, and we have</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="comment">// an extra frame for the start-state).</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  int32 num_frames = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size() - 1;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(num_frames &gt; 0);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keyword">const</span> int32 bucket_count = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>/2 + 3;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  unordered_map&lt;Token*, StateId&gt; tok_map(bucket_count);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="comment">// First create all states.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  std::vector&lt;Token*&gt; token_list;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">for</span> (int32 f = 0; f &lt;= num_frames; f++) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f].toks == NULL) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;GetRawLattice: no tokens active on frame &quot;</span> &lt;&lt; f</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;: not producing lattice.\n&quot;</span>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a581391ba9af6c7522f51d3880fa3904d">TopSortTokens</a>(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f].toks, &amp;token_list);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; token_list.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <span class="keywordflow">if</span> (token_list[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] != NULL)</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        tok_map[token_list[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]] = ofst-&gt;AddState();</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  }</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">// The next statement sets the start state of the output FST.  Because we</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="comment">// topologically sorted the tokens, state zero must be the start-state.</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  ofst-&gt;SetStart(0);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(4) &lt;&lt; <span class="stringliteral">&quot;init:&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>/2 + 3 &lt;&lt; <span class="stringliteral">&quot; buckets:&quot;</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                &lt;&lt; tok_map.bucket_count() &lt;&lt; <span class="stringliteral">&quot; load:&quot;</span> &lt;&lt; tok_map.load_factor()</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                &lt;&lt; <span class="stringliteral">&quot; max:&quot;</span> &lt;&lt; tok_map.max_load_factor();</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="comment">// Now create all arcs.</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordflow">for</span> (int32 f = 0; f &lt;= num_frames; f++) {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">for</span> (Token *tok = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f].toks; tok != NULL; tok = tok-&gt;next) {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      StateId cur_state = tok_map[tok];</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">ForwardLinkT</a> *l = tok-&gt;links;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;           l != NULL;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;           l = l-&gt;next) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keyword">typename</span> unordered_map&lt;Token*, StateId&gt;::const_iterator</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            iter = tok_map.find(l-&gt;next_tok);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        StateId nextstate = iter-&gt;second;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(iter != tok_map.end());</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> cost_offset = 0.0;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span> (l-&gt;ilabel != 0) {  <span class="comment">// emitting..</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;          <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(f &gt;= 0 &amp;&amp; f &lt; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a58a4df3a6c191ed69a294d43c2c545aa">cost_offsets_</a>.size());</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;          cost_offset = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a58a4df3a6c191ed69a294d43c2c545aa">cost_offsets_</a>[f];</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        Arc arc(l-&gt;ilabel, l-&gt;olabel,</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                Weight(l-&gt;graph_cost, l-&gt;acoustic_cost - cost_offset),</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                nextstate);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        ofst-&gt;AddArc(cur_state, arc);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="keywordflow">if</span> (f == num_frames) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">if</span> (use_final_probs &amp;&amp; !final_costs.empty()) {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;          <span class="keyword">typename</span> unordered_map&lt;Token*, BaseFloat&gt;::const_iterator</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;              iter = final_costs.find(tok);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;          <span class="keywordflow">if</span> (iter != final_costs.end())</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            ofst-&gt;SetFinal(cur_state, <a class="code" href="namespacekaldi.html#abaecf581813bcc7e2738d8de233061aa">LatticeWeight</a>(iter-&gt;second, 0));</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;          ofst-&gt;SetFinal(cur_state, <a class="code" href="classfst_1_1LatticeWeightTpl.html#a5421f358cae61e1da1ebab7b0a1294c6">LatticeWeight::One</a>());</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">return</span> (ofst-&gt;NumStates() &gt; 0);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div><div class="ttc" id="namespacefst_html_ae38f9e2cc96a39ff2953a2846c2538db"><div class="ttname"><a href="namespacefst.html#ae38f9e2cc96a39ff2953a2846c2538db">fst::StateId</a></div><div class="ttdeci">fst::StdArc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00055">deterministic-fst-test.cc:55</a></div></div>
<div class="ttc" id="namespacekaldi_html_a417e37822095c5adb9680fa07dffea8d"><div class="ttname"><a href="namespacekaldi.html#a417e37822095c5adb9680fa07dffea8d">kaldi::LatticeArc</a></div><div class="ttdeci">fst::ArcTpl&lt; LatticeWeight &gt; LatticeArc</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-lattice_8h_source.html#l00040">kaldi-lattice.h:40</a></div></div>
<div class="ttc" id="classfst_1_1LatticeWeightTpl_html_a5421f358cae61e1da1ebab7b0a1294c6"><div class="ttname"><a href="classfst_1_1LatticeWeightTpl.html#a5421f358cae61e1da1ebab7b0a1294c6">fst::LatticeWeightTpl&lt; BaseFloat &gt;::One</a></div><div class="ttdeci">static const LatticeWeightTpl One()</div><div class="ttdef"><b>Definition:</b> <a href="lattice-weight_8h_source.html#l00081">lattice-weight.h:81</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a5847f7be225935530cfc03fa176af15c"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a5847f7be225935530cfc03fa176af15c">kaldi::LatticeFasterDecoderTpl::Arc</a></div><div class="ttdeci">typename FST::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00228">lattice-faster-decoder.h:228</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a217833759d6c6ae1e2c1fd85c486d6ba"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a217833759d6c6ae1e2c1fd85c486d6ba">kaldi::LatticeFasterDecoderTpl::Weight</a></div><div class="ttdeci">typename Arc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00231">lattice-faster-decoder.h:231</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a85a02632976ca270a5ca1633798e2ba3"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a85a02632976ca270a5ca1633798e2ba3">kaldi::LatticeFasterDecoderTpl::Label</a></div><div class="ttdeci">typename Arc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00229">lattice-faster-decoder.h:229</a></div></div>
<div class="ttc" id="namespacekaldi_html_abaecf581813bcc7e2738d8de233061aa"><div class="ttname"><a href="namespacekaldi.html#abaecf581813bcc7e2738d8de233061aa">kaldi::LatticeWeight</a></div><div class="ttdeci">fst::LatticeWeightTpl&lt; BaseFloat &gt; LatticeWeight</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-lattice_8h_source.html#l00032">kaldi-lattice.h:32</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_abc9c72ea2574bb131efc94e2e7d1e12d"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">kaldi::LatticeFasterDecoderTpl::ForwardLinkT</a></div><div class="ttdeci">decoder::ForwardLink&lt; Token &gt; ForwardLinkT</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00232">lattice-faster-decoder.h:232</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a40bc4ede3f47b67f9c1920c5c7de4370"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a40bc4ede3f47b67f9c1920c5c7de4370">kaldi::LatticeFasterDecoderTpl::final_costs_</a></div><div class="ttdeci">unordered_map&lt; Token *, BaseFloat &gt; final_costs_</div><div class="ttdoc">For the meaning of the next 3 variables, see the comment for decoding_finalized_ above., and ComputeFinalCosts(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00493">lattice-faster-decoder.h:493</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="namespacefst_html_a006b00477e4d9250474e76e1ec61bb3f"><div class="ttname"><a href="namespacefst.html#a006b00477e4d9250474e76e1ec61bb3f">fst::Label</a></div><div class="ttdeci">fst::StdArc::Label Label</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00054">deterministic-fst-test.cc:54</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeFasterDecoderTpl::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00463">lattice-faster-decoder.h:463</a></div></div>
<div class="ttc" id="namespacefst_html_a2fdd196e46607f0d35b13369d9f9970d"><div class="ttname"><a href="namespacefst.html#a2fdd196e46607f0d35b13369d9f9970d">fst::Weight</a></div><div class="ttdeci">fst::StdArc::Weight Weight</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00057">deterministic-fst-test.cc:57</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a581391ba9af6c7522f51d3880fa3904d"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a581391ba9af6c7522f51d3880fa3904d">kaldi::LatticeFasterDecoderTpl::TopSortTokens</a></div><div class="ttdeci">static void TopSortTokens(Token *tok_list, std::vector&lt; Token *&gt; *topsorted_list)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00929">lattice-faster-decoder.cc:929</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_abac1d9b6331d75273f079182a8995d19"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#abac1d9b6331d75273f079182a8995d19">kaldi::LatticeFasterDecoderTpl::ComputeFinalCosts</a></div><div class="ttdeci">void ComputeFinalCosts(unordered_map&lt; Token *, BaseFloat &gt; *final_costs, BaseFloat *final_relative_cost, BaseFloat *final_best_cost) const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00549">lattice-faster-decoder.cc:549</a></div></div>
<div class="ttc" id="group__error__group_html_ga16c81ec6ff3ba04c6ff96fdaed9d854e"><div class="ttname"><a href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a></div><div class="ttdeci">#define KALDI_VLOG(v)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00135">kaldi-error.h:135</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ad15b222ead591bfc30e26feb230484bf"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad15b222ead591bfc30e26feb230484bf">kaldi::LatticeFasterDecoderTpl::decoding_finalized_</a></div><div class="ttdeci">bool decoding_finalized_</div><div class="ttdoc">decoding_finalized_ is true if someone called FinalizeDecoding(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00490">lattice-faster-decoder.h:490</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeFasterDecoderTpl::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00480">lattice-faster-decoder.h:480</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a58a4df3a6c191ed69a294d43c2c545aa"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a58a4df3a6c191ed69a294d43c2c545aa">kaldi::LatticeFasterDecoderTpl::cost_offsets_</a></div><div class="ttdeci">std::vector&lt; BaseFloat &gt; cost_offsets_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00475">lattice-faster-decoder.h:475</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a1ea5dad35d7cc8bdd784c6aff3755f4b"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">kaldi::LatticeFasterDecoderTpl::StateId</a></div><div class="ttdeci">typename Arc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00230">lattice-faster-decoder.h:230</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad43c69eb4374e3a67d4cd91696a5d6e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad43c69eb4374e3a67d4cd91696a5d6e9">&#9670;&nbsp;</a></span>InitDecoding()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitDecoding </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>InitDecoding initializes the decoding, and should only be used if you intend to call <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a375a5c2ebd730748ed1da740a4a23692" title="This will decode until there are no more frames ready in the decodable object. ">AdvanceDecoding()</a>. </p>
<p>If you call <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac78620c576a40d3bdb14dc87b2a754a5" title="Decodes until there are no more frames left in the &quot;decodable&quot; object. ">Decode()</a>, you don't need to call this. You can also call InitDecoding if you have already decoded an utterance and want to start with a new utterance. </p>

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00056">56</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                                                       {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="comment">// clean up from last time:</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a46348242a858ece22690aae433fc4537">DeleteElems</a>(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#a6e96a0d63c84e36b1b706385b8075e8a">Clear</a>());</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a58a4df3a6c191ed69a294d43c2c545aa">cost_offsets_</a>.clear();</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ae09bece0bb8eb98a4bf14a74351f2558">ClearActiveTokens</a>();</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abd4660a81d0a829a6920416d202a7041">warned_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a> = 0;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a40bc4ede3f47b67f9c1920c5c7de4370">final_costs_</a>.clear();</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a> start_state = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">fst_</a>-&gt;Start();</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(start_state != fst::kNoStateId);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.resize(1);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  Token *start_tok = <span class="keyword">new</span> Token(0.0, 0.0, NULL, NULL, NULL);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[0].toks = start_tok;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#a9c4c6d256148e698538a3219d266da11">Insert</a>(start_state, start_tok);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>++;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ae19877053b3834116aedaae3519572b1">ProcessNonemitting</a>(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#aac27eaf00599707440629f2f6a274e02">beam</a>);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a9af57d7482fe6f2e90149ae4c5082f7e"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">kaldi::LatticeFasterDecoderTpl::config_</a></div><div class="ttdeci">LatticeFasterDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00479">lattice-faster-decoder.h:479</a></div></div>
<div class="ttc" id="classkaldi_1_1HashList_html_a9c4c6d256148e698538a3219d266da11"><div class="ttname"><a href="classkaldi_1_1HashList.html#a9c4c6d256148e698538a3219d266da11">kaldi::HashList::Insert</a></div><div class="ttdeci">void Insert(I key, T val)</div><div class="ttdoc">Insert inserts a new element into the hashtable/stored list. </div><div class="ttdef"><b>Definition:</b> <a href="hash-list-inl_8h_source.html#l00126">hash-list-inl.h:126</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ae09bece0bb8eb98a4bf14a74351f2558"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ae09bece0bb8eb98a4bf14a74351f2558">kaldi::LatticeFasterDecoderTpl::ClearActiveTokens</a></div><div class="ttdeci">void ClearActiveTokens()</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00911">lattice-faster-decoder.cc:911</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a40bc4ede3f47b67f9c1920c5c7de4370"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a40bc4ede3f47b67f9c1920c5c7de4370">kaldi::LatticeFasterDecoderTpl::final_costs_</a></div><div class="ttdeci">unordered_map&lt; Token *, BaseFloat &gt; final_costs_</div><div class="ttdoc">For the meaning of the next 3 variables, see the comment for decoding_finalized_ above., and ComputeFinalCosts(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00493">lattice-faster-decoder.h:493</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_acbb9ff57e1e9d27c3f04c6e95c75c015"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">kaldi::LatticeFasterDecoderTpl::fst_</a></div><div class="ttdeci">const FST * fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00470">lattice-faster-decoder.h:470</a></div></div>
<div class="ttc" id="classkaldi_1_1HashList_html_a6e96a0d63c84e36b1b706385b8075e8a"><div class="ttname"><a href="classkaldi_1_1HashList.html#a6e96a0d63c84e36b1b706385b8075e8a">kaldi::HashList::Clear</a></div><div class="ttdeci">Elem * Clear()</div><div class="ttdoc">Clears the hash and gives the head of the current list to the user; ownership is transferred to the u...</div><div class="ttdef"><b>Definition:</b> <a href="hash-list-inl_8h_source.html#l00046">hash-list-inl.h:46</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeFasterDecoderTpl::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00463">lattice-faster-decoder.h:463</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_aac27eaf00599707440629f2f6a274e02"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#aac27eaf00599707440629f2f6a274e02">kaldi::LatticeFasterDecoderConfig::beam</a></div><div class="ttdeci">BaseFloat beam</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00039">lattice-faster-decoder.h:39</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_abd4660a81d0a829a6920416d202a7041"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#abd4660a81d0a829a6920416d202a7041">kaldi::LatticeFasterDecoderTpl::warned_</a></div><div class="ttdeci">bool warned_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00481">lattice-faster-decoder.h:481</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ad15b222ead591bfc30e26feb230484bf"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad15b222ead591bfc30e26feb230484bf">kaldi::LatticeFasterDecoderTpl::decoding_finalized_</a></div><div class="ttdeci">bool decoding_finalized_</div><div class="ttdoc">decoding_finalized_ is true if someone called FinalizeDecoding(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00490">lattice-faster-decoder.h:490</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeFasterDecoderTpl::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00480">lattice-faster-decoder.h:480</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a58a4df3a6c191ed69a294d43c2c545aa"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a58a4df3a6c191ed69a294d43c2c545aa">kaldi::LatticeFasterDecoderTpl::cost_offsets_</a></div><div class="ttdeci">std::vector&lt; BaseFloat &gt; cost_offsets_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00475">lattice-faster-decoder.h:475</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a46348242a858ece22690aae433fc4537"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a46348242a858ece22690aae433fc4537">kaldi::LatticeFasterDecoderTpl::DeleteElems</a></div><div class="ttdeci">void DeleteElems(Elem *list)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00903">lattice-faster-decoder.cc:903</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ae19877053b3834116aedaae3519572b1"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ae19877053b3834116aedaae3519572b1">kaldi::LatticeFasterDecoderTpl::ProcessNonemitting</a></div><div class="ttdeci">void ProcessNonemitting(BaseFloat cost_cutoff)</div><div class="ttdoc">Processes nonemitting (epsilon) arcs for one frame. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00833">lattice-faster-decoder.cc:833</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ac20d544a2a34069c8407b433092488b5"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">kaldi::LatticeFasterDecoderTpl::toks_</a></div><div class="ttdeci">HashList&lt; StateId, Token * &gt; toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00461">lattice-faster-decoder.h:461</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a1ea5dad35d7cc8bdd784c6aff3755f4b"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">kaldi::LatticeFasterDecoderTpl::StateId</a></div><div class="ttdeci">typename Arc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00230">lattice-faster-decoder.h:230</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4365a675042e46be0d88b9720e6b1ba5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4365a675042e46be0d88b9720e6b1ba5">&#9670;&nbsp;</a></span>KALDI_DISALLOW_COPY_AND_ASSIGN()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">KALDI_DISALLOW_COPY_AND_ASSIGN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html">LatticeFasterDecoderTpl</a>&lt; FST, Token &gt;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa030f3b26871bfec31b5e59cac3ba76d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa030f3b26871bfec31b5e59cac3ba76d">&#9670;&nbsp;</a></span>NumFramesDecoded()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 NumFramesDecoded </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00342">342</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size() - 1; }</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeFasterDecoderTpl::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00463">lattice-faster-decoder.h:463</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d06555f3445c7a2e23b2aa30926830a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d06555f3445c7a2e23b2aa30926830a">&#9670;&nbsp;</a></span>PossiblyResizeHash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PossiblyResizeHash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsize__t.html">size_t</a>&#160;</td>
          <td class="paramname"><em>num_toks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00226">226</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                                                                            {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordtype">size_t</span> new_sz = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a><span class="keyword">&gt;</span>(num_toks)</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                                      * <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#a7e5b1953c2c931b680b23519875eeb7f">hash_ratio</a>);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordflow">if</span> (new_sz &gt; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#a7b470b21b5807f0a9162bef72aebfef9">Size</a>()) {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#abd46a2cac53ce74147c1bc7742b0d7a4">SetSize</a>(new_sz);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a9af57d7482fe6f2e90149ae4c5082f7e"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">kaldi::LatticeFasterDecoderTpl::config_</a></div><div class="ttdeci">LatticeFasterDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00479">lattice-faster-decoder.h:479</a></div></div>
<div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_a7e5b1953c2c931b680b23519875eeb7f"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#a7e5b1953c2c931b680b23519875eeb7f">kaldi::LatticeFasterDecoderConfig::hash_ratio</a></div><div class="ttdeci">BaseFloat hash_ratio</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00047">lattice-faster-decoder.h:47</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1HashList_html_abd46a2cac53ce74147c1bc7742b0d7a4"><div class="ttname"><a href="classkaldi_1_1HashList.html#abd46a2cac53ce74147c1bc7742b0d7a4">kaldi::HashList::SetSize</a></div><div class="ttdeci">void SetSize(size_t sz)</div><div class="ttdoc">SetSize tells the object how many hash buckets to allocate (should typically be at least twice the nu...</div><div class="ttdef"><b>Definition:</b> <a href="hash-list-inl_8h_source.html#l00037">hash-list-inl.h:37</a></div></div>
<div class="ttc" id="classkaldi_1_1HashList_html_a7b470b21b5807f0a9162bef72aebfef9"><div class="ttname"><a href="classkaldi_1_1HashList.html#a7b470b21b5807f0a9162bef72aebfef9">kaldi::HashList::Size</a></div><div class="ttdeci">size_t Size()</div><div class="ttdoc">Returns current number of hash buckets. </div><div class="ttdef"><b>Definition:</b> <a href="hash-list_8h_source.html#l00115">hash-list.h:115</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ac20d544a2a34069c8407b433092488b5"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">kaldi::LatticeFasterDecoderTpl::toks_</a></div><div class="ttdeci">HashList&lt; StateId, Token * &gt; toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00461">lattice-faster-decoder.h:461</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9f1056788a421354e1217d03cd7186ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f1056788a421354e1217d03cd7186ff">&#9670;&nbsp;</a></span>ProcessEmitting()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> ProcessEmitting </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1DecodableInterface.html">DecodableInterface</a> *&#160;</td>
          <td class="paramname"><em>decodable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Processes emitting arcs for one frame. </p>
<p>Propagates from prev_toks_ to cur_toks_. Returns the cost cutoff for subsequent <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ae19877053b3834116aedaae3519572b1" title="Processes nonemitting (epsilon) arcs for one frame. ">ProcessNonemitting()</a> to use. </p>

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00727">727</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                                   {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size() &gt; 0);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  int32 frame = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size() - 1; <span class="comment">// frame is the frame-index</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                                         <span class="comment">// (zero-based) used to get likelihoods</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                                         <span class="comment">// from the decodable object.</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.resize(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size() + 1);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> *final_toks = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#a6e96a0d63c84e36b1b706385b8075e8a">Clear</a>(); <span class="comment">// analogous to swapping prev_toks_ / cur_toks_</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                                   <span class="comment">// in simple-decoder.h.   Removes the Elems from</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                                   <span class="comment">// being indexed in the hash in toks_.</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> *best_elem = NULL;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> adaptive_beam;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keywordtype">size_t</span> tok_cnt;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> cur_cutoff = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a0d1b3d918472e26fcb513f6b2a0d5644">GetCutoff</a>(final_toks, &amp;tok_cnt, &amp;adaptive_beam, &amp;best_elem);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(6) &lt;&lt; <span class="stringliteral">&quot;Adaptive beam on frame &quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a>() &lt;&lt; <span class="stringliteral">&quot; is &quot;</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                &lt;&lt; adaptive_beam;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a4d06555f3445c7a2e23b2aa30926830a">PossiblyResizeHash</a>(tok_cnt);  <span class="comment">// This makes sure the hash is always big enough.</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> next_cutoff = std::numeric_limits&lt;BaseFloat&gt;::infinity();</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="comment">// pruning &quot;online&quot; before having seen all tokens</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> cost_offset = 0.0; <span class="comment">// Used to keep probabilities in a good</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                               <span class="comment">// dynamic range.</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="comment">// First process the best token to get a hopefully</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// reasonably tight bound on the next cutoff.  The only</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="comment">// products of the next block are &quot;next_cutoff&quot; and &quot;cost_offset&quot;.</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="keywordflow">if</span> (best_elem) {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a> state = best_elem-&gt;key;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    Token *tok = best_elem-&gt;val;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    cost_offset = - tok-&gt;tot_cost;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">for</span> (fst::ArcIterator&lt;FST&gt; aiter(*<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">fst_</a>, state);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;         !aiter.Done();</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;         aiter.Next()) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="keyword">const</span> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a5847f7be225935530cfc03fa176af15c">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <span class="keywordflow">if</span> (arc.ilabel != 0) {  <span class="comment">// propagate..</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> new_weight = arc.weight.Value() + cost_offset -</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            decodable-&gt;LogLikelihood(frame, arc.ilabel) + tok-&gt;tot_cost;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordflow">if</span> (new_weight + adaptive_beam &lt; next_cutoff)</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;          next_cutoff = new_weight + adaptive_beam;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    }</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  }</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="comment">// Store the offset on the acoustic likelihoods that we&#39;re applying.</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="comment">// Could just do cost_offsets_.push_back(cost_offset), but we</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="comment">// do it this way as it&#39;s more robust to future code changes.</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a58a4df3a6c191ed69a294d43c2c545aa">cost_offsets_</a>.resize(frame + 1, 0.0);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a58a4df3a6c191ed69a294d43c2c545aa">cost_offsets_</a>[frame] = cost_offset;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="comment">// the tokens are now owned here, in final_toks, and the hash is empty.</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="comment">// &#39;owned&#39; is a complex thing here; the point is we need to call DeleteElem</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="comment">// on each elem &#39;e&#39; to let toks_ know we&#39;re done with them.</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> *e = final_toks, *e_tail; e != NULL; e = e_tail) {</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="comment">// loop this way because we delete &quot;e&quot; as we go.</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a> state = e-&gt;key;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    Token *tok = e-&gt;val;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordflow">if</span> (tok-&gt;tot_cost &lt;= cur_cutoff) {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="keywordflow">for</span> (fst::ArcIterator&lt;FST&gt; aiter(*<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">fst_</a>, state);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;           !aiter.Done();</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;           aiter.Next()) {</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <span class="keyword">const</span> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a5847f7be225935530cfc03fa176af15c">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="keywordflow">if</span> (arc.ilabel != 0) {  <span class="comment">// propagate..</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;          <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> ac_cost = cost_offset -</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;              decodable-&gt;LogLikelihood(frame, arc.ilabel),</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;              graph_cost = arc.weight.Value(),</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;              cur_cost = tok-&gt;tot_cost,</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;              tot_cost = cur_cost + ac_cost + graph_cost;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;          <span class="keywordflow">if</span> (tot_cost &gt; next_cutoff) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tot_cost + adaptive_beam &lt; next_cutoff)</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            next_cutoff = tot_cost + adaptive_beam; <span class="comment">// prune by best current token</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;          <span class="comment">// Note: the frame indexes into active_toks_ are one-based,</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;          <span class="comment">// hence the + 1.</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;          Token *next_tok = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aac84e3ba7f817a1f76c4485d3c77cdb1">FindOrAddToken</a>(arc.nextstate,</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                                           frame + 1, tot_cost, tok, NULL);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;          <span class="comment">// NULL: no change indicator needed</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;          <span class="comment">// Add ForwardLink from tok to next_tok (put on head of list tok-&gt;links)</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;          tok-&gt;links = <span class="keyword">new</span> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">ForwardLinkT</a>(next_tok, arc.ilabel, arc.olabel,</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                                        graph_cost, ac_cost, tok-&gt;links);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        }</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      } <span class="comment">// for all arcs</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    }</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    e_tail = e-&gt;tail;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#a3d539454b5c65049a003819c6ebb00fa">Delete</a>(e); <span class="comment">// delete Elem</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  }</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="keywordflow">return</span> next_cutoff;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a5847f7be225935530cfc03fa176af15c"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a5847f7be225935530cfc03fa176af15c">kaldi::LatticeFasterDecoderTpl::Arc</a></div><div class="ttdeci">typename FST::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00228">lattice-faster-decoder.h:228</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a4d06555f3445c7a2e23b2aa30926830a"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a4d06555f3445c7a2e23b2aa30926830a">kaldi::LatticeFasterDecoderTpl::PossiblyResizeHash</a></div><div class="ttdeci">void PossiblyResizeHash(size_t num_toks)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00226">lattice-faster-decoder.cc:226</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_abc9c72ea2574bb131efc94e2e7d1e12d"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">kaldi::LatticeFasterDecoderTpl::ForwardLinkT</a></div><div class="ttdeci">decoder::ForwardLink&lt; Token &gt; ForwardLinkT</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00232">lattice-faster-decoder.h:232</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_aa030f3b26871bfec31b5e59cac3ba76d"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">kaldi::LatticeFasterDecoderTpl::NumFramesDecoded</a></div><div class="ttdeci">int32 NumFramesDecoded() const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00342">lattice-faster-decoder.h:342</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_acbb9ff57e1e9d27c3f04c6e95c75c015"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">kaldi::LatticeFasterDecoderTpl::fst_</a></div><div class="ttdeci">const FST * fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00470">lattice-faster-decoder.h:470</a></div></div>
<div class="ttc" id="classkaldi_1_1HashList_html_a6e96a0d63c84e36b1b706385b8075e8a"><div class="ttname"><a href="classkaldi_1_1HashList.html#a6e96a0d63c84e36b1b706385b8075e8a">kaldi::HashList::Clear</a></div><div class="ttdeci">Elem * Clear()</div><div class="ttdoc">Clears the hash and gives the head of the current list to the user; ownership is transferred to the u...</div><div class="ttdef"><b>Definition:</b> <a href="hash-list-inl_8h_source.html#l00046">hash-list-inl.h:46</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeFasterDecoderTpl::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00463">lattice-faster-decoder.h:463</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a0d1b3d918472e26fcb513f6b2a0d5644"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a0d1b3d918472e26fcb513f6b2a0d5644">kaldi::LatticeFasterDecoderTpl::GetCutoff</a></div><div class="ttdeci">BaseFloat GetCutoff(Elem *list_head, size_t *tok_count, BaseFloat *adaptive_beam, Elem **best_elem)</div><div class="ttdoc">Gets the weight cutoff. Also counts the active tokens. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00657">lattice-faster-decoder.cc:657</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="group__error__group_html_ga16c81ec6ff3ba04c6ff96fdaed9d854e"><div class="ttname"><a href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a></div><div class="ttdeci">#define KALDI_VLOG(v)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00135">kaldi-error.h:135</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a164961b9a08c87a7d99a873922d2dc14"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">kaldi::LatticeFasterDecoderTpl::Elem</a></div><div class="ttdeci">typename HashList&lt; StateId, Token * &gt;::Elem Elem</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00362">lattice-faster-decoder.h:362</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a58a4df3a6c191ed69a294d43c2c545aa"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a58a4df3a6c191ed69a294d43c2c545aa">kaldi::LatticeFasterDecoderTpl::cost_offsets_</a></div><div class="ttdeci">std::vector&lt; BaseFloat &gt; cost_offsets_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00475">lattice-faster-decoder.h:475</a></div></div>
<div class="ttc" id="classkaldi_1_1HashList_html_a3d539454b5c65049a003819c6ebb00fa"><div class="ttname"><a href="classkaldi_1_1HashList.html#a3d539454b5c65049a003819c6ebb00fa">kaldi::HashList::Delete</a></div><div class="ttdeci">void Delete(Elem *e)</div><div class="ttdoc">Think of this like delete(). </div><div class="ttdef"><b>Definition:</b> <a href="hash-list-inl_8h_source.html#l00066">hash-list-inl.h:66</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_aac84e3ba7f817a1f76c4485d3c77cdb1"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#aac84e3ba7f817a1f76c4485d3c77cdb1">kaldi::LatticeFasterDecoderTpl::FindOrAddToken</a></div><div class="ttdeci">Token * FindOrAddToken(StateId state, int32 frame_plus_one, BaseFloat tot_cost, Token *backpointer, bool *changed)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00266">lattice-faster-decoder.cc:266</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ac20d544a2a34069c8407b433092488b5"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">kaldi::LatticeFasterDecoderTpl::toks_</a></div><div class="ttdeci">HashList&lt; StateId, Token * &gt; toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00461">lattice-faster-decoder.h:461</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a1ea5dad35d7cc8bdd784c6aff3755f4b"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">kaldi::LatticeFasterDecoderTpl::StateId</a></div><div class="ttdeci">typename Arc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00230">lattice-faster-decoder.h:230</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae19877053b3834116aedaae3519572b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae19877053b3834116aedaae3519572b1">&#9670;&nbsp;</a></span>ProcessNonemitting()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ProcessNonemitting </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>cost_cutoff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Processes nonemitting (epsilon) arcs for one frame. </p>
<p>Called after <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9f1056788a421354e1217d03cd7186ff" title="Processes emitting arcs for one frame. ">ProcessEmitting()</a> on each frame. The cost cutoff is computed by the preceding <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9f1056788a421354e1217d03cd7186ff" title="Processes emitting arcs for one frame. ">ProcessEmitting()</a>. </p>

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00833">833</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                                                                             {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.empty());</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  int32 frame = <span class="keyword">static_cast&lt;</span>int32<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size()) - 2;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="comment">// Note: &quot;frame&quot; is the time-index we just processed, or -1 if</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="comment">// we are processing the nonemitting transitions before the</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="comment">// first frame (called from InitDecoding()).</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="comment">// Processes nonemitting arcs for one frame.  Propagates within toks_.</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="comment">// Note-- this queue structure is is not very optimal as</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="comment">// it may cause us to process states unnecessarily (e.g. more than once),</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="comment">// but in the baseline code, turning this vector into a set to fix this</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="comment">// problem did not improve overall speed.</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a33f6a2d227b84ba09ec8821e214a325a">queue_</a>.empty());</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#a036029a98ac0e696a3eb0f99996e9e07">GetList</a>() == NULL) {</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abd4660a81d0a829a6920416d202a7041">warned_</a>) {</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;Error, no surviving tokens: frame is &quot;</span> &lt;&lt; frame;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abd4660a81d0a829a6920416d202a7041">warned_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    }</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  }</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">Elem</a> *e = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#a036029a98ac0e696a3eb0f99996e9e07">GetList</a>(); e != NULL;  e = e-&gt;tail) {</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a> state = e-&gt;key;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">fst_</a>-&gt;NumInputEpsilons(state) != 0)</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a33f6a2d227b84ba09ec8821e214a325a">queue_</a>.push_back(state);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  }</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordflow">while</span> (!<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a33f6a2d227b84ba09ec8821e214a325a">queue_</a>.empty()) {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a> state = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a33f6a2d227b84ba09ec8821e214a325a">queue_</a>.back();</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a33f6a2d227b84ba09ec8821e214a325a">queue_</a>.pop_back();</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    Token *tok = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#a70c43943e2107ed8c90d41ab8912667c">Find</a>(state)-&gt;val;  <span class="comment">// would segfault if state not in toks_ but this can&#39;t happen.</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> cur_cost = tok-&gt;tot_cost;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">if</span> (cur_cost &gt; cutoff) <span class="comment">// Don&#39;t bother processing successors.</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="comment">// If &quot;tok&quot; has any existing forward links, delete them,</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="comment">// because we&#39;re about to regenerate them.  This is a kind</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="comment">// of non-optimality (remember, this is the simple decoder),</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="comment">// but since most states are emitting it&#39;s not a huge issue.</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ada13538cc5608db62cf3192e31bbb62f">DeleteForwardLinks</a>(tok); <span class="comment">// necessary when re-visiting</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    tok-&gt;links = NULL;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordflow">for</span> (fst::ArcIterator&lt;FST&gt; aiter(*<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">fst_</a>, state);</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;         !aiter.Done();</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;         aiter.Next()) {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="keyword">const</span> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a5847f7be225935530cfc03fa176af15c">Arc</a> &amp;arc = aiter.Value();</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <span class="keywordflow">if</span> (arc.ilabel == 0) {  <span class="comment">// propagate nonemitting only...</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> graph_cost = arc.weight.Value(),</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            tot_cost = cur_cost + graph_cost;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="keywordflow">if</span> (tot_cost &lt; cutoff) {</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;          <span class="keywordtype">bool</span> changed;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;          Token *new_tok = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aac84e3ba7f817a1f76c4485d3c77cdb1">FindOrAddToken</a>(arc.nextstate, frame + 1, tot_cost,</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                                          tok, &amp;changed);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;          tok-&gt;links = <span class="keyword">new</span> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">ForwardLinkT</a>(new_tok, 0, arc.olabel,</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                                        graph_cost, 0, tok-&gt;links);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;          <span class="comment">// &quot;changed&quot; tells us whether the new token has a different</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;          <span class="comment">// cost from before, or is new [if so, add into queue].</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;          <span class="keywordflow">if</span> (changed &amp;&amp; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">fst_</a>-&gt;NumInputEpsilons(arc.nextstate) != 0)</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a33f6a2d227b84ba09ec8821e214a325a">queue_</a>.push_back(arc.nextstate);</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    } <span class="comment">// for all arcs</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  } <span class="comment">// while queue not empty</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a5847f7be225935530cfc03fa176af15c"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a5847f7be225935530cfc03fa176af15c">kaldi::LatticeFasterDecoderTpl::Arc</a></div><div class="ttdeci">typename FST::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00228">lattice-faster-decoder.h:228</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_abc9c72ea2574bb131efc94e2e7d1e12d"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">kaldi::LatticeFasterDecoderTpl::ForwardLinkT</a></div><div class="ttdeci">decoder::ForwardLink&lt; Token &gt; ForwardLinkT</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00232">lattice-faster-decoder.h:232</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1HashList_html_a036029a98ac0e696a3eb0f99996e9e07"><div class="ttname"><a href="classkaldi_1_1HashList.html#a036029a98ac0e696a3eb0f99996e9e07">kaldi::HashList::GetList</a></div><div class="ttdeci">const Elem * GetList() const</div><div class="ttdoc">Gives the head of the current list to the user. </div><div class="ttdef"><b>Definition:</b> <a href="hash-list-inl_8h_source.html#l00061">hash-list-inl.h:61</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_acbb9ff57e1e9d27c3f04c6e95c75c015"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#acbb9ff57e1e9d27c3f04c6e95c75c015">kaldi::LatticeFasterDecoderTpl::fst_</a></div><div class="ttdeci">const FST * fst_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00470">lattice-faster-decoder.h:470</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeFasterDecoderTpl::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00463">lattice-faster-decoder.h:463</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ada13538cc5608db62cf3192e31bbb62f"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ada13538cc5608db62cf3192e31bbb62f">kaldi::LatticeFasterDecoderTpl::DeleteForwardLinks</a></div><div class="ttdeci">static void DeleteForwardLinks(Token *tok)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00821">lattice-faster-decoder.cc:821</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_abd4660a81d0a829a6920416d202a7041"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#abd4660a81d0a829a6920416d202a7041">kaldi::LatticeFasterDecoderTpl::warned_</a></div><div class="ttdeci">bool warned_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00481">lattice-faster-decoder.h:481</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a164961b9a08c87a7d99a873922d2dc14"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a164961b9a08c87a7d99a873922d2dc14">kaldi::LatticeFasterDecoderTpl::Elem</a></div><div class="ttdeci">typename HashList&lt; StateId, Token * &gt;::Elem Elem</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00362">lattice-faster-decoder.h:362</a></div></div>
<div class="ttc" id="classkaldi_1_1HashList_html_a70c43943e2107ed8c90d41ab8912667c"><div class="ttname"><a href="classkaldi_1_1HashList.html#a70c43943e2107ed8c90d41ab8912667c">kaldi::HashList::Find</a></div><div class="ttdeci">Elem * Find(I key)</div><div class="ttdoc">Find tries to find this element in the current list using the hashtable. </div><div class="ttdef"><b>Definition:</b> <a href="hash-list-inl_8h_source.html#l00072">hash-list-inl.h:72</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_aac84e3ba7f817a1f76c4485d3c77cdb1"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#aac84e3ba7f817a1f76c4485d3c77cdb1">kaldi::LatticeFasterDecoderTpl::FindOrAddToken</a></div><div class="ttdeci">Token * FindOrAddToken(StateId state, int32 frame_plus_one, BaseFloat tot_cost, Token *backpointer, bool *changed)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00266">lattice-faster-decoder.cc:266</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a33f6a2d227b84ba09ec8821e214a325a"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a33f6a2d227b84ba09ec8821e214a325a">kaldi::LatticeFasterDecoderTpl::queue_</a></div><div class="ttdeci">std::vector&lt; StateId &gt; queue_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00466">lattice-faster-decoder.h:466</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ac20d544a2a34069c8407b433092488b5"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">kaldi::LatticeFasterDecoderTpl::toks_</a></div><div class="ttdeci">HashList&lt; StateId, Token * &gt; toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00461">lattice-faster-decoder.h:461</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a1ea5dad35d7cc8bdd784c6aff3755f4b"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">kaldi::LatticeFasterDecoderTpl::StateId</a></div><div class="ttdeci">typename Arc::StateId StateId</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00230">lattice-faster-decoder.h:230</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a93dce8f102ac41f19dc657dd9026a811"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93dce8f102ac41f19dc657dd9026a811">&#9670;&nbsp;</a></span>PruneActiveTokens()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PruneActiveTokens </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>delta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00519">519</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                                                                           {</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  int32 cur_frame_plus_one = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">NumFramesDecoded</a>();</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  int32 num_toks_begin = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// The index &quot;f&quot; below represents a &quot;frame plus one&quot;, i.e. you&#39;d have to subtract</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="comment">// one to get the corresponding index for the decodable object.</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordflow">for</span> (int32 f = cur_frame_plus_one - 1; f &gt;= 0; f--) {</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="comment">// Reason why we need to prune forward links in this situation:</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="comment">// (1) we have never pruned them (new TokenList)</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="comment">// (2) we have not yet pruned the forward links to the next f,</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="comment">// after any of those tokens have changed their extra_cost.</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f].must_prune_forward_links) {</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="keywordtype">bool</span> extra_costs_changed = <span class="keyword">false</span>, links_pruned = <span class="keyword">false</span>;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aec5d179a75df610a6d9350a4749f82b9">PruneForwardLinks</a>(f, &amp;extra_costs_changed, &amp;links_pruned, delta);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="keywordflow">if</span> (extra_costs_changed &amp;&amp; f &gt; 0) <span class="comment">// any token has changed extra_cost</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f-1].must_prune_forward_links = <span class="keyword">true</span>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <span class="keywordflow">if</span> (links_pruned) <span class="comment">// any link was pruned</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f].must_prune_tokens = <span class="keyword">true</span>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f].must_prune_forward_links = <span class="keyword">false</span>; <span class="comment">// job done</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    }</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> (f+1 &lt; cur_frame_plus_one &amp;&amp;      <span class="comment">// except for last f (no forward links)</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f+1].must_prune_tokens) {</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a101529bc846dc648fd5406d718dc450b">PruneTokensForFrame</a>(f+1);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[f+1].must_prune_tokens = <span class="keyword">false</span>;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    }</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  }</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(4) &lt;&lt; <span class="stringliteral">&quot;PruneActiveTokens: pruned tokens from &quot;</span> &lt;&lt; num_toks_begin</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_aec5d179a75df610a6d9350a4749f82b9"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#aec5d179a75df610a6d9350a4749f82b9">kaldi::LatticeFasterDecoderTpl::PruneForwardLinks</a></div><div class="ttdeci">void PruneForwardLinks(int32 frame_plus_one, bool *extra_costs_changed, bool *links_pruned, BaseFloat delta)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00312">lattice-faster-decoder.cc:312</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a101529bc846dc648fd5406d718dc450b"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a101529bc846dc648fd5406d718dc450b">kaldi::LatticeFasterDecoderTpl::PruneTokensForFrame</a></div><div class="ttdeci">void PruneTokensForFrame(int32 frame_plus_one)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00492">lattice-faster-decoder.cc:492</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_aa030f3b26871bfec31b5e59cac3ba76d"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#aa030f3b26871bfec31b5e59cac3ba76d">kaldi::LatticeFasterDecoderTpl::NumFramesDecoded</a></div><div class="ttdeci">int32 NumFramesDecoded() const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00342">lattice-faster-decoder.h:342</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeFasterDecoderTpl::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00463">lattice-faster-decoder.h:463</a></div></div>
<div class="ttc" id="group__error__group_html_ga16c81ec6ff3ba04c6ff96fdaed9d854e"><div class="ttname"><a href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a></div><div class="ttdeci">#define KALDI_VLOG(v)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00135">kaldi-error.h:135</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeFasterDecoderTpl::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00480">lattice-faster-decoder.h:480</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aec5d179a75df610a6d9350a4749f82b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec5d179a75df610a6d9350a4749f82b9">&#9670;&nbsp;</a></span>PruneForwardLinks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PruneForwardLinks </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>frame_plus_one</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>extra_costs_changed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>links_pruned</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>delta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00312">312</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                                         {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">// delta is the amount by which the extra_costs must change</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="comment">// If delta is larger,  we&#39;ll tend to go back less far</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">//    toward the beginning of the file.</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="comment">// extra_costs_changed is set to true if extra_cost was changed for any token</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// links_pruned is set to true if any link in any token was pruned</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  *extra_costs_changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  *links_pruned = <span class="keyword">false</span>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(frame_plus_one &gt;= 0 &amp;&amp; frame_plus_one &lt; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size());</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[frame_plus_one].toks == NULL) {  <span class="comment">// empty list; should not happen.</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abd4660a81d0a829a6920416d202a7041">warned_</a>) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;No tokens alive [doing pruning].. warning first &quot;</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;          <span class="stringliteral">&quot;time only for each utterance\n&quot;</span>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abd4660a81d0a829a6920416d202a7041">warned_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="comment">// We have to iterate until there is no more change, because the links</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="comment">// are not guaranteed to be in topological order.</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordtype">bool</span> changed = <span class="keyword">true</span>;  <span class="comment">// difference new minus old extra cost &gt;= delta ?</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">while</span> (changed) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">for</span> (Token *tok = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[frame_plus_one].toks;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;         tok != NULL; tok = tok-&gt;next) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">ForwardLinkT</a> *link, *prev_link = NULL;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="comment">// will recompute tok_extra_cost for tok.</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> tok_extra_cost = std::numeric_limits&lt;BaseFloat&gt;::infinity();</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="comment">// tok_extra_cost is the best (min) of link_extra_cost of outgoing links</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="keywordflow">for</span> (link = tok-&gt;links; link != NULL; ) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="comment">// See if we need to excise this link...</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        Token *next_tok = link-&gt;next_tok;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> link_extra_cost = next_tok-&gt;extra_cost +</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            ((tok-&gt;tot_cost + link-&gt;acoustic_cost + link-&gt;graph_cost)</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;             - next_tok-&gt;tot_cost);  <span class="comment">// difference in brackets is &gt;= 0</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="comment">// link_exta_cost is the difference in score between the best paths</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="comment">// through link source state and through link destination state</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(link_extra_cost == link_extra_cost);  <span class="comment">// check for NaN</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">if</span> (link_extra_cost &gt; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">lattice_beam</a>) {  <span class="comment">// excise link</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;          <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">ForwardLinkT</a> *next_link = link-&gt;next;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;          <span class="keywordflow">if</span> (prev_link != NULL) prev_link-&gt;next = next_link;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;          <span class="keywordflow">else</span> tok-&gt;links = next_link;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;          <span class="keyword">delete</span> link;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;          link = next_link;  <span class="comment">// advance link but leave prev_link the same.</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;          *links_pruned = <span class="keyword">true</span>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        } <span class="keywordflow">else</span> {   <span class="comment">// keep the link and update the tok_extra_cost if needed.</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;          <span class="keywordflow">if</span> (link_extra_cost &lt; 0.0) {  <span class="comment">// this is just a precaution.</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="keywordflow">if</span> (link_extra_cost &lt; -0.01)</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;              <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;Negative extra_cost: &quot;</span> &lt;&lt; link_extra_cost;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            link_extra_cost = 0.0;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;          }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;          <span class="keywordflow">if</span> (link_extra_cost &lt; tok_extra_cost)</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            tok_extra_cost = link_extra_cost;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;          prev_link = link;  <span class="comment">// move to next link</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;          link = link-&gt;next;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      }  <span class="comment">// for all outgoing links</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">if</span> (fabs(tok_extra_cost - tok-&gt;extra_cost) &gt; delta)</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        changed = <span class="keyword">true</span>;   <span class="comment">// difference new minus old is bigger than delta</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      tok-&gt;extra_cost = tok_extra_cost;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="comment">// will be +infinity or &lt;= lattice_beam_.</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="comment">// infinity indicates, that no forward link survived pruning</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    }  <span class="comment">// for all Token on active_toks_[frame]</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span> (changed) *extra_costs_changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">// Note: it&#39;s theoretically possible that aggressive compiler</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="comment">// optimizations could cause an infinite loop here for small delta and</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment">// high-dynamic-range scores.</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  } <span class="comment">// while changed</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;}</div><div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_abf32d733b7437195b42a4d867fd5784b"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">kaldi::LatticeFasterDecoderConfig::lattice_beam</a></div><div class="ttdeci">BaseFloat lattice_beam</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00042">lattice-faster-decoder.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a9af57d7482fe6f2e90149ae4c5082f7e"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">kaldi::LatticeFasterDecoderTpl::config_</a></div><div class="ttdeci">LatticeFasterDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00479">lattice-faster-decoder.h:479</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_abc9c72ea2574bb131efc94e2e7d1e12d"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">kaldi::LatticeFasterDecoderTpl::ForwardLinkT</a></div><div class="ttdeci">decoder::ForwardLink&lt; Token &gt; ForwardLinkT</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00232">lattice-faster-decoder.h:232</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeFasterDecoderTpl::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00463">lattice-faster-decoder.h:463</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_abd4660a81d0a829a6920416d202a7041"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#abd4660a81d0a829a6920416d202a7041">kaldi::LatticeFasterDecoderTpl::warned_</a></div><div class="ttdeci">bool warned_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00481">lattice-faster-decoder.h:481</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a860ae70828a0cd0382b81cc3558a2a02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a860ae70828a0cd0382b81cc3558a2a02">&#9670;&nbsp;</a></span>PruneForwardLinksFinal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PruneForwardLinksFinal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00389">389</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                                                                 {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.empty());</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  int32 frame_plus_one = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size() - 1;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[frame_plus_one].toks == NULL)  <span class="comment">// empty list; should not happen.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;No tokens alive at end of file&quot;</span>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> unordered_map&lt;Token*, BaseFloat&gt;::const_iterator IterType;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abac1d9b6331d75273f079182a8995d19">ComputeFinalCosts</a>(&amp;<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a40bc4ede3f47b67f9c1920c5c7de4370">final_costs_</a>, &amp;<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac89f0cc0de0da3c074f79341f3611b30">final_relative_cost_</a>, &amp;<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a49eb722260aa57b473caac342187b63c">final_best_cost_</a>);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad15b222ead591bfc30e26feb230484bf">decoding_finalized_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="comment">// We call DeleteElems() as a nicety, not because it&#39;s really necessary;</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">// otherwise there would be a time, after calling PruneTokensForFrame() on the</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// final frame, when toks_.GetList() or toks_.Clear() would contain pointers</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// to nonexistent tokens.</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a46348242a858ece22690aae433fc4537">DeleteElems</a>(<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">toks_</a>.<a class="code" href="classkaldi_1_1HashList.html#a6e96a0d63c84e36b1b706385b8075e8a">Clear</a>());</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="comment">// Now go through tokens on this frame, pruning forward links...  may have to</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">// iterate a few times until there is no more change, because the list is not</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">// in topological order.  This is a modified version of the code in</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">// PruneForwardLinks, but here we also take account of the final-probs.</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordtype">bool</span> changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> delta = 1.0e-05;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">while</span> (changed) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">for</span> (Token *tok = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[frame_plus_one].toks;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;         tok != NULL; tok = tok-&gt;next) {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">ForwardLinkT</a> *link, *prev_link = NULL;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="comment">// will recompute tok_extra_cost.  It has a term in it that corresponds</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="comment">// to the &quot;final-prob&quot;, so instead of initializing tok_extra_cost to infinity</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="comment">// below we set it to the difference between the (score+final_prob) of this token,</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="comment">// and the best such (score+final_prob).</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> final_cost;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a40bc4ede3f47b67f9c1920c5c7de4370">final_costs_</a>.empty()) {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        final_cost = 0.0;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        IterType iter = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a40bc4ede3f47b67f9c1920c5c7de4370">final_costs_</a>.find(tok);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">if</span> (iter != <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a40bc4ede3f47b67f9c1920c5c7de4370">final_costs_</a>.end())</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;          final_cost = iter-&gt;second;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;          final_cost = std::numeric_limits&lt;BaseFloat&gt;::infinity();</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> tok_extra_cost = tok-&gt;tot_cost + final_cost - <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a49eb722260aa57b473caac342187b63c">final_best_cost_</a>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="comment">// tok_extra_cost will be a &quot;min&quot; over either directly being final, or</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="comment">// being indirectly final through other links, and the loop below may</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <span class="comment">// decrease its value:</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <span class="keywordflow">for</span> (link = tok-&gt;links; link != NULL; ) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="comment">// See if we need to excise this link...</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        Token *next_tok = link-&gt;next_tok;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> link_extra_cost = next_tok-&gt;extra_cost +</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            ((tok-&gt;tot_cost + link-&gt;acoustic_cost + link-&gt;graph_cost)</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;             - next_tok-&gt;tot_cost);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">if</span> (link_extra_cost &gt; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">lattice_beam</a>) {  <span class="comment">// excise link</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">ForwardLinkT</a> *next_link = link-&gt;next;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;          <span class="keywordflow">if</span> (prev_link != NULL) prev_link-&gt;next = next_link;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          <span class="keywordflow">else</span> tok-&gt;links = next_link;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;          <span class="keyword">delete</span> link;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;          link = next_link; <span class="comment">// advance link but leave prev_link the same.</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">// keep the link and update the tok_extra_cost if needed.</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;          <span class="keywordflow">if</span> (link_extra_cost &lt; 0.0) { <span class="comment">// this is just a precaution.</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="keywordflow">if</span> (link_extra_cost &lt; -0.01)</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;              <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;Negative extra_cost: &quot;</span> &lt;&lt; link_extra_cost;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            link_extra_cost = 0.0;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;          }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;          <span class="keywordflow">if</span> (link_extra_cost &lt; tok_extra_cost)</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            tok_extra_cost = link_extra_cost;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;          prev_link = link;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;          link = link-&gt;next;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      }</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="comment">// prune away tokens worse than lattice_beam above best path.  This step</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="comment">// was not necessary in the non-final case because then, this case</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="comment">// showed up as having no forward links.  Here, the tok_extra_cost has</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="comment">// an extra component relating to the final-prob.</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="keywordflow">if</span> (tok_extra_cost &gt; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a>.<a class="code" href="structkaldi_1_1LatticeFasterDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">lattice_beam</a>)</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        tok_extra_cost = std::numeric_limits&lt;BaseFloat&gt;::infinity();</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="comment">// to be pruned in PruneTokensForFrame</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">ApproxEqual</a>(tok-&gt;extra_cost, tok_extra_cost, delta))</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      tok-&gt;extra_cost = tok_extra_cost; <span class="comment">// will be +infinity or &lt;= lattice_beam_.</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  } <span class="comment">// while changed</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div><div class="ttc" id="structkaldi_1_1LatticeFasterDecoderConfig_html_abf32d733b7437195b42a4d867fd5784b"><div class="ttname"><a href="structkaldi_1_1LatticeFasterDecoderConfig.html#abf32d733b7437195b42a4d867fd5784b">kaldi::LatticeFasterDecoderConfig::lattice_beam</a></div><div class="ttdeci">BaseFloat lattice_beam</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00042">lattice-faster-decoder.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a9af57d7482fe6f2e90149ae4c5082f7e"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">kaldi::LatticeFasterDecoderTpl::config_</a></div><div class="ttdeci">LatticeFasterDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00479">lattice-faster-decoder.h:479</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_abc9c72ea2574bb131efc94e2e7d1e12d"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">kaldi::LatticeFasterDecoderTpl::ForwardLinkT</a></div><div class="ttdeci">decoder::ForwardLink&lt; Token &gt; ForwardLinkT</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00232">lattice-faster-decoder.h:232</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ac89f0cc0de0da3c074f79341f3611b30"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac89f0cc0de0da3c074f79341f3611b30">kaldi::LatticeFasterDecoderTpl::final_relative_cost_</a></div><div class="ttdeci">BaseFloat final_relative_cost_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00494">lattice-faster-decoder.h:494</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a40bc4ede3f47b67f9c1920c5c7de4370"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a40bc4ede3f47b67f9c1920c5c7de4370">kaldi::LatticeFasterDecoderTpl::final_costs_</a></div><div class="ttdeci">unordered_map&lt; Token *, BaseFloat &gt; final_costs_</div><div class="ttdoc">For the meaning of the next 3 variables, see the comment for decoding_finalized_ above., and ComputeFinalCosts(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00493">lattice-faster-decoder.h:493</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="classkaldi_1_1HashList_html_a6e96a0d63c84e36b1b706385b8075e8a"><div class="ttname"><a href="classkaldi_1_1HashList.html#a6e96a0d63c84e36b1b706385b8075e8a">kaldi::HashList::Clear</a></div><div class="ttdeci">Elem * Clear()</div><div class="ttdoc">Clears the hash and gives the head of the current list to the user; ownership is transferred to the u...</div><div class="ttdef"><b>Definition:</b> <a href="hash-list-inl_8h_source.html#l00046">hash-list-inl.h:46</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeFasterDecoderTpl::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00463">lattice-faster-decoder.h:463</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_abac1d9b6331d75273f079182a8995d19"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#abac1d9b6331d75273f079182a8995d19">kaldi::LatticeFasterDecoderTpl::ComputeFinalCosts</a></div><div class="ttdeci">void ComputeFinalCosts(unordered_map&lt; Token *, BaseFloat &gt; *final_costs, BaseFloat *final_relative_cost, BaseFloat *final_best_cost) const</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00549">lattice-faster-decoder.cc:549</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ad15b222ead591bfc30e26feb230484bf"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ad15b222ead591bfc30e26feb230484bf">kaldi::LatticeFasterDecoderTpl::decoding_finalized_</a></div><div class="ttdeci">bool decoding_finalized_</div><div class="ttdoc">decoding_finalized_ is true if someone called FinalizeDecoding(). </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00490">lattice-faster-decoder.h:490</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a46348242a858ece22690aae433fc4537"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a46348242a858ece22690aae433fc4537">kaldi::LatticeFasterDecoderTpl::DeleteElems</a></div><div class="ttdeci">void DeleteElems(Elem *list)</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00903">lattice-faster-decoder.cc:903</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a49eb722260aa57b473caac342187b63c"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a49eb722260aa57b473caac342187b63c">kaldi::LatticeFasterDecoderTpl::final_best_cost_</a></div><div class="ttdeci">BaseFloat final_best_cost_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00495">lattice-faster-decoder.h:495</a></div></div>
<div class="ttc" id="namespacekaldi_html_a99dcbb9fdaa6c980ba67941d45adf017"><div class="ttname"><a href="namespacekaldi.html#a99dcbb9fdaa6c980ba67941d45adf017">kaldi::ApproxEqual</a></div><div class="ttdeci">static bool ApproxEqual(float a, float b, float relative_tolerance=0.001)</div><div class="ttdoc">return abs(a - b) &lt;= relative_tolerance * (abs(a)+abs(b)). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00264">kaldi-math.h:264</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_ac20d544a2a34069c8407b433092488b5"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#ac20d544a2a34069c8407b433092488b5">kaldi::LatticeFasterDecoderTpl::toks_</a></div><div class="ttdeci">HashList&lt; StateId, Token * &gt; toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00461">lattice-faster-decoder.h:461</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a101529bc846dc648fd5406d718dc450b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a101529bc846dc648fd5406d718dc450b">&#9670;&nbsp;</a></span>PruneTokensForFrame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PruneTokensForFrame </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>frame_plus_one</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00492">492</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                                                                                  {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(frame_plus_one &gt;= 0 &amp;&amp; frame_plus_one &lt; <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>.size());</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  Token *&amp;toks = <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">active_toks_</a>[frame_plus_one].toks;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">if</span> (toks == NULL)</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;No tokens alive [doing pruning]&quot;</span>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  Token *tok, *next_tok, *prev_tok = NULL;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keywordflow">for</span> (tok = toks; tok != NULL; tok = next_tok) {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    next_tok = tok-&gt;next;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">if</span> (tok-&gt;extra_cost == std::numeric_limits&lt;BaseFloat&gt;::infinity()) {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="comment">// token is unreachable from end of graph; (no forward links survived)</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="comment">// excise tok from list and delete tok.</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">if</span> (prev_tok != NULL) prev_tok-&gt;next = tok-&gt;next;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordflow">else</span> toks = tok-&gt;next;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="keyword">delete</span> tok;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">num_toks_</a>--;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    } <span class="keywordflow">else</span> {  <span class="comment">// fetch next Token</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      prev_tok = tok;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  }</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;}</div><div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a559a7c781b217933b6b2aaf9c15be0d0"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a559a7c781b217933b6b2aaf9c15be0d0">kaldi::LatticeFasterDecoderTpl::active_toks_</a></div><div class="ttdeci">std::vector&lt; TokenList &gt; active_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00463">lattice-faster-decoder.h:463</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a21115816f8d2258f49f4934d2d9d83a7"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a21115816f8d2258f49f4934d2d9d83a7">kaldi::LatticeFasterDecoderTpl::num_toks_</a></div><div class="ttdeci">int32 num_toks_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00480">lattice-faster-decoder.h:480</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad50a1511ad065870482b9af71818b4ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad50a1511ad065870482b9af71818b4ef">&#9670;&nbsp;</a></span>ReachedFinal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> ReachedFinal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>says whether a final-state was active on the last frame. </p>
<p>If it was not, the lattice (or traceback) will end with states that are not final-states. </p>

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00264">264</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="decoder-wrappers_8cc_source.html#l00201">kaldi::DecodeUtteranceLatticeFaster()</a>, and <a class="el" href="decoder-wrappers_8cc_source.html#l00064">DecodeUtteranceLatticeFasterClass::operator()()</a>.</p>
<div class="fragment"><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                            {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#aab79c2c25990723951176c948ba1adc3">FinalRelativeCost</a>() != std::numeric_limits&lt;BaseFloat&gt;::infinity();</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  }</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_aab79c2c25990723951176c948ba1adc3"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#aab79c2c25990723951176c948ba1adc3">kaldi::LatticeFasterDecoderTpl::FinalRelativeCost</a></div><div class="ttdeci">BaseFloat FinalRelativeCost() const</div><div class="ttdoc">FinalRelativeCost() serves the same purpose as ReachedFinal(), but gives more information. </div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8cc_source.html#l00474">lattice-faster-decoder.cc:474</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a726ecfe0e3dda45db44cd44818fceaba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a726ecfe0e3dda45db44cd44818fceaba">&#9670;&nbsp;</a></span>SetOptions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SetOptions </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1LatticeFasterDecoderConfig.html">LatticeFasterDecoderConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00245">245</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                                            {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">config_</a> = config;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_a9af57d7482fe6f2e90149ae4c5082f7e"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#a9af57d7482fe6f2e90149ae4c5082f7e">kaldi::LatticeFasterDecoderTpl::config_</a></div><div class="ttdeci">LatticeFasterDecoderConfig config_</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00479">lattice-faster-decoder.h:479</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a581391ba9af6c7522f51d3880fa3904d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a581391ba9af6c7522f51d3880fa3904d">&#9670;&nbsp;</a></span>TopSortTokens()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TopSortTokens </td>
          <td>(</td>
          <td class="paramtype">Token *&#160;</td>
          <td class="paramname"><em>tok_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; Token *&gt; *&#160;</td>
          <td class="paramname"><em>topsorted_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8cc_source.html#l00929">929</a> of file <a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                                                        {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  unordered_map&lt;Token*, int32&gt; token2pos;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> unordered_map&lt;Token*, int32&gt;::iterator IterType;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  int32 num_toks = 0;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="keywordflow">for</span> (Token *tok = tok_list; tok != NULL; tok = tok-&gt;next)</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    num_toks++;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  int32 cur_pos = 0;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="comment">// We assign the tokens numbers num_toks - 1, ... , 2, 1, 0.</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="comment">// This is likely to be in closer to topological order than</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="comment">// if we had given them ascending order, because of the way</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="comment">// new tokens are put at the front of the list.</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="keywordflow">for</span> (Token *tok = tok_list; tok != NULL; tok = tok-&gt;next)</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    token2pos[tok] = num_toks - ++cur_pos;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  unordered_set&lt;Token*&gt; reprocess;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="keywordflow">for</span> (IterType iter = token2pos.begin(); iter != token2pos.end(); ++iter) {</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    Token *tok = iter-&gt;first;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    int32 pos = iter-&gt;second;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">ForwardLinkT</a> *link = tok-&gt;links; link != NULL; link = link-&gt;next) {</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      <span class="keywordflow">if</span> (link-&gt;ilabel == 0) {</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        <span class="comment">// We only need to consider epsilon links, since non-epsilon links</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="comment">// transition between frames and this function only needs to sort a list</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <span class="comment">// of tokens from a single frame.</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        IterType following_iter = token2pos.find(link-&gt;next_tok);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordflow">if</span> (following_iter != token2pos.end()) { <span class="comment">// another token on this frame,</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                                                 <span class="comment">// so must consider it.</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;          int32 next_pos = following_iter-&gt;second;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;          <span class="keywordflow">if</span> (next_pos &lt; pos) { <span class="comment">// reassign the position of the next Token.</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            following_iter-&gt;second = cur_pos++;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            reprocess.insert(link-&gt;next_tok);</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;          }</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        }</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      }</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    }</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="comment">// In case we had previously assigned this token to be reprocessed, we can</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="comment">// erase it from that set because it&#39;s &quot;happy now&quot; (we just processed it).</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    reprocess.erase(tok);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  }</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="keywordtype">size_t</span> max_loop = 1000000, loop_count; <span class="comment">// max_loop is to detect epsilon cycles.</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="keywordflow">for</span> (loop_count = 0;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;       !reprocess.empty() &amp;&amp; loop_count &lt; max_loop; ++loop_count) {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    std::vector&lt;Token*&gt; reprocess_vec;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">typename</span> unordered_set&lt;Token*&gt;::iterator iter = reprocess.begin();</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;         iter != reprocess.end(); ++iter)</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      reprocess_vec.push_back(*iter);</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    reprocess.clear();</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">typename</span> std::vector&lt;Token*&gt;::iterator iter = reprocess_vec.begin();</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;         iter != reprocess_vec.end(); ++iter) {</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      Token *tok = *iter;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      int32 pos = token2pos[tok];</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      <span class="comment">// Repeat the processing we did above (for comments, see above).</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">ForwardLinkT</a> *link = tok-&gt;links; link != NULL; link = link-&gt;next) {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        <span class="keywordflow">if</span> (link-&gt;ilabel == 0) {</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;          IterType following_iter = token2pos.find(link-&gt;next_tok);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;          <span class="keywordflow">if</span> (following_iter != token2pos.end()) {</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            int32 next_pos = following_iter-&gt;second;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            <span class="keywordflow">if</span> (next_pos &lt; pos) {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;              following_iter-&gt;second = cur_pos++;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;              reprocess.insert(link-&gt;next_tok);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            }</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;          }</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        }</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    }</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  }</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(loop_count &lt; max_loop &amp;&amp; <span class="stringliteral">&quot;Epsilon loops exist in your decoding &quot;</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;               <span class="stringliteral">&quot;graph (this is not allowed!)&quot;</span>);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  topsorted_list-&gt;clear();</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  topsorted_list-&gt;resize(cur_pos, NULL);  <span class="comment">// create a list with NULLs in between.</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="keywordflow">for</span> (IterType iter = token2pos.begin(); iter != token2pos.end(); ++iter)</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    (*topsorted_list)[iter-&gt;second] = iter-&gt;first;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;}</div><div class="ttc" id="classkaldi_1_1LatticeFasterDecoderTpl_html_abc9c72ea2574bb131efc94e2e7d1e12d"><div class="ttname"><a href="classkaldi_1_1LatticeFasterDecoderTpl.html#abc9c72ea2574bb131efc94e2e7d1e12d">kaldi::LatticeFasterDecoderTpl::ForwardLinkT</a></div><div class="ttdeci">decoder::ForwardLink&lt; Token &gt; ForwardLinkT</div><div class="ttdef"><b>Definition:</b> <a href="lattice-faster-decoder_8h_source.html#l00232">lattice-faster-decoder.h:232</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a559a7c781b217933b6b2aaf9c15be0d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a559a7c781b217933b6b2aaf9c15be0d0">&#9670;&nbsp;</a></span>active_toks_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structkaldi_1_1LatticeFasterDecoderTpl_1_1TokenList.html">TokenList</a>&gt; active_toks_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00463">463</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="a9af57d7482fe6f2e90149ae4c5082f7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9af57d7482fe6f2e90149ae4c5082f7e">&#9670;&nbsp;</a></span>config_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structkaldi_1_1LatticeFasterDecoderConfig.html">LatticeFasterDecoderConfig</a> config_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00479">479</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="a58a4df3a6c191ed69a294d43c2c545aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58a4df3a6c191ed69a294d43c2c545aa">&#9670;&nbsp;</a></span>cost_offsets_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; cost_offsets_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00475">475</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="ad15b222ead591bfc30e26feb230484bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad15b222ead591bfc30e26feb230484bf">&#9670;&nbsp;</a></span>decoding_finalized_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> decoding_finalized_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>decoding_finalized_ is true if someone called <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a363a350323c7c881be0a0fc089d2b555" title="This function may be optionally called after AdvanceDecoding(), when you do not plan to decode any fu...">FinalizeDecoding()</a>. </p>
<p>[note, calling this is optional]. If true, it's forbidden to decode more. Also, if this is set, then the output of <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abac1d9b6331d75273f079182a8995d19">ComputeFinalCosts()</a> is in the next three variables. The reason we need to do this is that after <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a363a350323c7c881be0a0fc089d2b555" title="This function may be optionally called after AdvanceDecoding(), when you do not plan to decode any fu...">FinalizeDecoding()</a> calls <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a101529bc846dc648fd5406d718dc450b">PruneTokensForFrame()</a> for the final frame, some of the tokens on the last frame are freed, so we free the list from toks_ to avoid having dangling pointers hanging around. </p>

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00490">490</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="a56cb3ce3508dd8e8b6a6eb41510a29c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56cb3ce3508dd8e8b6a6eb41510a29c8">&#9670;&nbsp;</a></span>delete_fst_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> delete_fst_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00473">473</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="a49eb722260aa57b473caac342187b63c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49eb722260aa57b473caac342187b63c">&#9670;&nbsp;</a></span>final_best_cost_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> final_best_cost_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00495">495</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="a40bc4ede3f47b67f9c1920c5c7de4370"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40bc4ede3f47b67f9c1920c5c7de4370">&#9670;&nbsp;</a></span>final_costs_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unordered_map&lt;Token*, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; final_costs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For the meaning of the next 3 variables, see the comment for decoding_finalized_ above., and <a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#abac1d9b6331d75273f079182a8995d19">ComputeFinalCosts()</a>. </p>

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00493">493</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="ac89f0cc0de0da3c074f79341f3611b30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac89f0cc0de0da3c074f79341f3611b30">&#9670;&nbsp;</a></span>final_relative_cost_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> final_relative_cost_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00494">494</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="acbb9ff57e1e9d27c3f04c6e95c75c015"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbb9ff57e1e9d27c3f04c6e95c75c015">&#9670;&nbsp;</a></span>fst_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const FST* fst_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00470">470</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="a21115816f8d2258f49f4934d2d9d83a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21115816f8d2258f49f4934d2d9d83a7">&#9670;&nbsp;</a></span>num_toks_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 num_toks_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00480">480</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="a33f6a2d227b84ba09ec8821e214a325a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33f6a2d227b84ba09ec8821e214a325a">&#9670;&nbsp;</a></span>queue_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a>&gt; queue_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00466">466</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="a7bb29e04bc49f194902c10f5718ef2e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bb29e04bc49f194902c10f5718ef2e7">&#9670;&nbsp;</a></span>tmp_array_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; tmp_array_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00467">467</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="ac20d544a2a34069c8407b433092488b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac20d544a2a34069c8407b433092488b5">&#9670;&nbsp;</a></span>toks_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1HashList.html">HashList</a>&lt;<a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html#a1ea5dad35d7cc8bdd784c6aff3755f4b">StateId</a>, Token*&gt; toks_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00461">461</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<a id="abd4660a81d0a829a6920416d202a7041"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd4660a81d0a829a6920416d202a7041">&#9670;&nbsp;</a></span>warned_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> warned_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lattice-faster-decoder_8h_source.html#l00481">481</a> of file <a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>decoder/<a class="el" href="lattice-faster-decoder_8h_source.html">lattice-faster-decoder.h</a></li>
<li>decoder/<a class="el" href="lattice-faster-decoder_8cc_source.html">lattice-faster-decoder.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekaldi.html">kaldi</a></li><li class="navelem"><a class="el" href="classkaldi_1_1LatticeFasterDecoderTpl.html">LatticeFasterDecoderTpl</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
