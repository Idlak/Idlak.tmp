<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: CompositeComponent Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classkaldi_1_1nnet3_1_1CompositeComponent.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classkaldi_1_1nnet3_1_1CompositeComponent-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CompositeComponent Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html" title="CompositeComponent is a component representing a sequence of [simple] components. ...">CompositeComponent</a> is a component representing a sequence of [simple] components.  
 <a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="nnet-simple-component_8h_source.html">nnet-simple-component.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CompositeComponent:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1nnet3_1_1CompositeComponent__inherit__graph.png" border="0" usemap="#CompositeComponent_inherit__map" alt="Inheritance graph"/></div>
<map name="CompositeComponent_inherit__map" id="CompositeComponent_inherit__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for CompositeComponent:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1nnet3_1_1CompositeComponent__coll__graph.png" border="0" usemap="#CompositeComponent_coll__map" alt="Collaboration graph"/></div>
<map name="CompositeComponent_coll__map" id="CompositeComponent_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa5083adaff49881915d61ebf045e96db"><td class="memItemLeft" align="right" valign="top">virtual int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa5083adaff49881915d61ebf045e96db">InputDim</a> () const</td></tr>
<tr class="memdesc:aa5083adaff49881915d61ebf045e96db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns input-dimension of this component.  <a href="#aa5083adaff49881915d61ebf045e96db">More...</a><br /></td></tr>
<tr class="separator:aa5083adaff49881915d61ebf045e96db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af97474cce492a0b8305e8ec2c798509b"><td class="memItemLeft" align="right" valign="top">virtual int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#af97474cce492a0b8305e8ec2c798509b">OutputDim</a> () const</td></tr>
<tr class="memdesc:af97474cce492a0b8305e8ec2c798509b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns output-dimension of this component.  <a href="#af97474cce492a0b8305e8ec2c798509b">More...</a><br /></td></tr>
<tr class="separator:af97474cce492a0b8305e8ec2c798509b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a245d65d566725422b859c99bff7623f8"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a245d65d566725422b859c99bff7623f8">Info</a> () const</td></tr>
<tr class="memdesc:a245d65d566725422b859c99bff7623f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns some text-form information about this component, for diagnostics.  <a href="#a245d65d566725422b859c99bff7623f8">More...</a><br /></td></tr>
<tr class="separator:a245d65d566725422b859c99bff7623f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4f5c35427c2657c50173313e99e3f01"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ac4f5c35427c2657c50173313e99e3f01">InitFromConfig</a> (<a class="el" href="classkaldi_1_1nnet3_1_1ConfigLine.html">ConfigLine</a> *cfl)</td></tr>
<tr class="memdesc:ac4f5c35427c2657c50173313e99e3f01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize, from a <a class="el" href="classkaldi_1_1nnet3_1_1ConfigLine.html" title="This class is responsible for parsing input like hi-there xx=yyy a=b c empty= f-oo=Append(bar, sss) ba_z=123 bing=&#39;a b c&#39; baz=&quot;a b c d=&#39;a b&#39; e&quot; and giving you access to the fields, in this case. ">ConfigLine</a> object.  <a href="#ac4f5c35427c2657c50173313e99e3f01">More...</a><br /></td></tr>
<tr class="separator:ac4f5c35427c2657c50173313e99e3f01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f11a4fb3396dda21cae55e81f23c750"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a1f11a4fb3396dda21cae55e81f23c750">Copy</a> () const</td></tr>
<tr class="memdesc:a1f11a4fb3396dda21cae55e81f23c750"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies component (deep copy).  <a href="#a1f11a4fb3396dda21cae55e81f23c750">More...</a><br /></td></tr>
<tr class="separator:a1f11a4fb3396dda21cae55e81f23c750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae4dcf2378af33e3384b938680e25d07"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aae4dcf2378af33e3384b938680e25d07">CompositeComponent</a> ()</td></tr>
<tr class="separator:aae4dcf2378af33e3384b938680e25d07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a436b6225464df079a21f198b8ebcfd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a2a436b6225464df079a21f198b8ebcfd">Init</a> (const std::vector&lt; <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *&gt; &amp;components, int32 max_rows_process)</td></tr>
<tr class="separator:a2a436b6225464df079a21f198b8ebcfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2d951f58073f362411ee482aa469975"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#af2d951f58073f362411ee482aa469975">Type</a> () const</td></tr>
<tr class="memdesc:af2d951f58073f362411ee482aa469975"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a string such as "SigmoidComponent", describing the type of the object.  <a href="#af2d951f58073f362411ee482aa469975">More...</a><br /></td></tr>
<tr class="separator:af2d951f58073f362411ee482aa469975"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab17c0c589e9e60ab186972b0fdf835a0"><td class="memItemLeft" align="right" valign="top">virtual int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a> () const</td></tr>
<tr class="memdesc:ab17c0c589e9e60ab186972b0fdf835a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return bitmask of the component's properties.  <a href="#ab17c0c589e9e60ab186972b0fdf835a0">More...</a><br /></td></tr>
<tr class="separator:ab17c0c589e9e60ab186972b0fdf835a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f1f1b05a170bd81a544caefe1acb040"><td class="memItemLeft" align="right" valign="top">virtual void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a8f1f1b05a170bd81a544caefe1acb040">Propagate</a> (const <a class="el" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a> *indexes, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;in, <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *out) const</td></tr>
<tr class="memdesc:a8f1f1b05a170bd81a544caefe1acb040"><td class="mdescLeft">&#160;</td><td class="mdescRight">Propagate function.  <a href="#a8f1f1b05a170bd81a544caefe1acb040">More...</a><br /></td></tr>
<tr class="separator:a8f1f1b05a170bd81a544caefe1acb040"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e993d522e4e85b5dc5e331f2ff84023"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a3e993d522e4e85b5dc5e331f2ff84023">Backprop</a> (const std::string &amp;debug_info, const <a class="el" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a> *indexes, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;in_value, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;out_deriv, void *memo, <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *to_update, <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *in_deriv) const</td></tr>
<tr class="memdesc:a3e993d522e4e85b5dc5e331f2ff84023"><td class="mdescLeft">&#160;</td><td class="mdescRight">Backprop function; depending on which of the arguments 'to_update' and 'in_deriv' are non-NULL, this can compute input-data derivatives and/or perform model update.  <a href="#a3e993d522e4e85b5dc5e331f2ff84023">More...</a><br /></td></tr>
<tr class="separator:a3e993d522e4e85b5dc5e331f2ff84023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfee972431c5488d69a56fc1114c7cdc"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#abfee972431c5488d69a56fc1114c7cdc">ZeroStats</a> ()</td></tr>
<tr class="memdesc:abfee972431c5488d69a56fc1114c7cdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Components that provide an implementation of StoreStats should also provide an implementation of <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#abfee972431c5488d69a56fc1114c7cdc" title="Components that provide an implementation of StoreStats should also provide an implementation of Zero...">ZeroStats()</a>, to set those stats to zero.  <a href="#abfee972431c5488d69a56fc1114c7cdc">More...</a><br /></td></tr>
<tr class="separator:abfee972431c5488d69a56fc1114c7cdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e7d2790fc7e94fe9780ccc937de1270"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a8e7d2790fc7e94fe9780ccc937de1270">Read</a> (std::istream &amp;is, <a class="el" href="classbool.html">bool</a> binary)</td></tr>
<tr class="memdesc:a8e7d2790fc7e94fe9780ccc937de1270"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read function (used after we know the type of the <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a>); accepts input that is missing the token that describes the component type, in case it has already been consumed.  <a href="#a8e7d2790fc7e94fe9780ccc937de1270">More...</a><br /></td></tr>
<tr class="separator:a8e7d2790fc7e94fe9780ccc937de1270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68f354fd5f096134162f01719096e6fc"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a68f354fd5f096134162f01719096e6fc">Write</a> (std::ostream &amp;os, <a class="el" href="classbool.html">bool</a> binary) const</td></tr>
<tr class="memdesc:a68f354fd5f096134162f01719096e6fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write component to stream.  <a href="#a68f354fd5f096134162f01719096e6fc">More...</a><br /></td></tr>
<tr class="separator:a68f354fd5f096134162f01719096e6fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad585cf712432af84b9629ba430350d8"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aad585cf712432af84b9629ba430350d8">SetUnderlyingLearningRate</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> lrate)</td></tr>
<tr class="memdesc:aad585cf712432af84b9629ba430350d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the learning rate of gradient descent- gets multiplied by learning_rate_factor_.  <a href="#aad585cf712432af84b9629ba430350d8">More...</a><br /></td></tr>
<tr class="separator:aad585cf712432af84b9629ba430350d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fc4193e519744ccd6a1624d31419d83"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a3fc4193e519744ccd6a1624d31419d83">SetActualLearningRate</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> lrate)</td></tr>
<tr class="memdesc:a3fc4193e519744ccd6a1624d31419d83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the learning rate directly, bypassing learning_rate_factor_.  <a href="#a3fc4193e519744ccd6a1624d31419d83">More...</a><br /></td></tr>
<tr class="separator:a3fc4193e519744ccd6a1624d31419d83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a494285f709381c37bd3726b31d7fe50f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a494285f709381c37bd3726b31d7fe50f">SetAsGradient</a> ()</td></tr>
<tr class="memdesc:a494285f709381c37bd3726b31d7fe50f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets is_gradient_ to true and sets learning_rate_ to 1, ignoring learning_rate_factor_.  <a href="#a494285f709381c37bd3726b31d7fe50f">More...</a><br /></td></tr>
<tr class="separator:a494285f709381c37bd3726b31d7fe50f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a4fc4a0524ae8957baf45b8cb168843"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a5a4fc4a0524ae8957baf45b8cb168843">Scale</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> scale)</td></tr>
<tr class="memdesc:a5a4fc4a0524ae8957baf45b8cb168843"><td class="mdescLeft">&#160;</td><td class="mdescRight">This virtual function when called on &ndash; an <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a> scales the parameters by "scale" when called by an <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a>.  <a href="#a5a4fc4a0524ae8957baf45b8cb168843">More...</a><br /></td></tr>
<tr class="separator:a5a4fc4a0524ae8957baf45b8cb168843"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb3e97b46276e3c9f4f696c2bef3943"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#acdb3e97b46276e3c9f4f696c2bef3943">Add</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> alpha, const <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> &amp;other)</td></tr>
<tr class="memdesc:acdb3e97b46276e3c9f4f696c2bef3943"><td class="mdescLeft">&#160;</td><td class="mdescRight">This virtual function when called by &ndash; an <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a> adds the parameters of another updatable component, times some constant, to the current parameters.  <a href="#acdb3e97b46276e3c9f4f696c2bef3943">More...</a><br /></td></tr>
<tr class="separator:acdb3e97b46276e3c9f4f696c2bef3943"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69a59272c763dc9372ad7d0671a87dad"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a69a59272c763dc9372ad7d0671a87dad">PerturbParams</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> stddev)</td></tr>
<tr class="memdesc:a69a59272c763dc9372ad7d0671a87dad"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is to be used in testing.  <a href="#a69a59272c763dc9372ad7d0671a87dad">More...</a><br /></td></tr>
<tr class="separator:a69a59272c763dc9372ad7d0671a87dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87b95e5c043a8221ad58b2512b2d81c9"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a87b95e5c043a8221ad58b2512b2d81c9">DotProduct</a> (const <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html">UpdatableComponent</a> &amp;other) const</td></tr>
<tr class="memdesc:a87b95e5c043a8221ad58b2512b2d81c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes dot-product between parameters of two instances of a <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a>.  <a href="#a87b95e5c043a8221ad58b2512b2d81c9">More...</a><br /></td></tr>
<tr class="separator:a87b95e5c043a8221ad58b2512b2d81c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ff16fe9504cbce1089af9cd84386405"><td class="memItemLeft" align="right" valign="top">virtual int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a1ff16fe9504cbce1089af9cd84386405">NumParameters</a> () const</td></tr>
<tr class="memdesc:a1ff16fe9504cbce1089af9cd84386405"><td class="mdescLeft">&#160;</td><td class="mdescRight">The following new virtual function returns the total dimension of the parameters in this class.  <a href="#a1ff16fe9504cbce1089af9cd84386405">More...</a><br /></td></tr>
<tr class="separator:a1ff16fe9504cbce1089af9cd84386405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa4edb6094210608b8d3923f312f5a75"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#afa4edb6094210608b8d3923f312f5a75">Vectorize</a> (<a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *params) const</td></tr>
<tr class="memdesc:afa4edb6094210608b8d3923f312f5a75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns the parameters into vector form.  <a href="#afa4edb6094210608b8d3923f312f5a75">More...</a><br /></td></tr>
<tr class="separator:afa4edb6094210608b8d3923f312f5a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8619ba84ef93f98fa42dbcd11011e3a3"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a8619ba84ef93f98fa42dbcd11011e3a3">UnVectorize</a> (const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;params)</td></tr>
<tr class="memdesc:a8619ba84ef93f98fa42dbcd11011e3a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts the parameters from vector form.  <a href="#a8619ba84ef93f98fa42dbcd11011e3a3">More...</a><br /></td></tr>
<tr class="separator:a8619ba84ef93f98fa42dbcd11011e3a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32206a7478069f9e3e86e698bf526e30"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a32206a7478069f9e3e86e698bf526e30">FreezeNaturalGradient</a> (<a class="el" href="classbool.html">bool</a> freeze)</td></tr>
<tr class="memdesc:a32206a7478069f9e3e86e698bf526e30"><td class="mdescLeft">&#160;</td><td class="mdescRight">virtual  <a href="#a32206a7478069f9e3e86e698bf526e30">More...</a><br /></td></tr>
<tr class="separator:a32206a7478069f9e3e86e698bf526e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15b5336b4413124b1fd4531f57781182"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a15b5336b4413124b1fd4531f57781182">NumComponents</a> () const</td></tr>
<tr class="separator:a15b5336b4413124b1fd4531f57781182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cb49b7dc262614200cb86400d36cb44"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a3cb49b7dc262614200cb86400d36cb44">GetComponent</a> (int32 i) const</td></tr>
<tr class="memdesc:a3cb49b7dc262614200cb86400d36cb44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the ith component in this component.  <a href="#a3cb49b7dc262614200cb86400d36cb44">More...</a><br /></td></tr>
<tr class="separator:a3cb49b7dc262614200cb86400d36cb44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a919d6e4e3d42713adcd6f5432561dfcb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a919d6e4e3d42713adcd6f5432561dfcb">SetComponent</a> (int32 i, <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *component)</td></tr>
<tr class="memdesc:a919d6e4e3d42713adcd6f5432561dfcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the ith component.  <a href="#a919d6e4e3d42713adcd6f5432561dfcb">More...</a><br /></td></tr>
<tr class="separator:a919d6e4e3d42713adcd6f5432561dfcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84123bd768a9a5f8a63a416363d1c367"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a84123bd768a9a5f8a63a416363d1c367">~CompositeComponent</a> ()</td></tr>
<tr class="separator:a84123bd768a9a5f8a63a416363d1c367"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html">UpdatableComponent</a></td></tr>
<tr class="memitem:a2291e94d519e3ea5a11e78c96ef39579 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2291e94d519e3ea5a11e78c96ef39579">UpdatableComponent</a> (const <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html">UpdatableComponent</a> &amp;other)</td></tr>
<tr class="separator:a2291e94d519e3ea5a11e78c96ef39579 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2af26d78825cc522c324976403bf4e4e inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a> ()</td></tr>
<tr class="separator:a2af26d78825cc522c324976403bf4e4e inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36873742fd6ae5311c593a7b437365c1 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a36873742fd6ae5311c593a7b437365c1">~UpdatableComponent</a> ()</td></tr>
<tr class="separator:a36873742fd6ae5311c593a7b437365c1 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e427259f9933cce5d95a63730d473e2 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a5e427259f9933cce5d95a63730d473e2">LearningRateFactor</a> ()</td></tr>
<tr class="separator:a5e427259f9933cce5d95a63730d473e2 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19b70a1769d3cf97043b7a81f81310fb inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a19b70a1769d3cf97043b7a81f81310fb">SetLearningRateFactor</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> lrate_factor)</td></tr>
<tr class="separator:a19b70a1769d3cf97043b7a81f81310fb inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fc8e5be4b32634aa8740c411819b62d inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a9fc8e5be4b32634aa8740c411819b62d">SetUpdatableConfigs</a> (const <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html">UpdatableComponent</a> &amp;other)</td></tr>
<tr class="separator:a9fc8e5be4b32634aa8740c411819b62d inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05c05e189447ef40d81ac40494668d8a inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a05c05e189447ef40d81ac40494668d8a">LearningRate</a> () const</td></tr>
<tr class="memdesc:a05c05e189447ef40d81ac40494668d8a inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the learning rate to be used in gradient descent.  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a05c05e189447ef40d81ac40494668d8a">More...</a><br /></td></tr>
<tr class="separator:a05c05e189447ef40d81ac40494668d8a inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4922b82383b37582e1d658849e0e7482 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a4922b82383b37582e1d658849e0e7482">MaxChange</a> () const</td></tr>
<tr class="memdesc:a4922b82383b37582e1d658849e0e7482 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the per-component max-change value, which is interpreted as the maximum change (in l2 norm) in parameters that is allowed per minibatch for this component.  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a4922b82383b37582e1d658849e0e7482">More...</a><br /></td></tr>
<tr class="separator:a4922b82383b37582e1d658849e0e7482 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7c390eb6ad357d73403c1f139dac757 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ae7c390eb6ad357d73403c1f139dac757">SetMaxChange</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> max_change)</td></tr>
<tr class="separator:ae7c390eb6ad357d73403c1f139dac757 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a7ae7b8e4ffb6ada1a81ae36e951041 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a1a7ae7b8e4ffb6ada1a81ae36e951041">L2Regularization</a> () const</td></tr>
<tr class="memdesc:a1a7ae7b8e4ffb6ada1a81ae36e951041 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the l2 regularization constant, which may be set in any updatable component (usually from the config file).  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a1a7ae7b8e4ffb6ada1a81ae36e951041">More...</a><br /></td></tr>
<tr class="separator:a1a7ae7b8e4ffb6ada1a81ae36e951041 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9807470ea8dfa745539e4ea67b44c939 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a9807470ea8dfa745539e4ea67b44c939">SetL2Regularization</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> a)</td></tr>
<tr class="separator:a9807470ea8dfa745539e4ea67b44c939 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classkaldi_1_1nnet3_1_1Component"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classkaldi_1_1nnet3_1_1Component')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a></td></tr>
<tr class="memitem:a304cec15e1a696a5af5f2f5daae7bc4f inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a304cec15e1a696a5af5f2f5daae7bc4f">StoreStats</a> (const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;in_value, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;out_value, void *memo)</td></tr>
<tr class="memdesc:a304cec15e1a696a5af5f2f5daae7bc4f inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function may store stats on average activation values, and for some component types, the average value of the derivative of the nonlinearity.  <a href="classkaldi_1_1nnet3_1_1Component.html#a304cec15e1a696a5af5f2f5daae7bc4f">More...</a><br /></td></tr>
<tr class="separator:a304cec15e1a696a5af5f2f5daae7bc4f inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d7b185ac981780bcfaed7dfdd8908d8 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a9d7b185ac981780bcfaed7dfdd8908d8">GetInputIndexes</a> (const <a class="el" href="structkaldi_1_1nnet3_1_1MiscComputationInfo.html">MiscComputationInfo</a> &amp;misc_info, const <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &amp;output_index, std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; *desired_indexes) const</td></tr>
<tr class="memdesc:a9d7b185ac981780bcfaed7dfdd8908d8 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function only does something interesting for non-simple Components.  <a href="classkaldi_1_1nnet3_1_1Component.html#a9d7b185ac981780bcfaed7dfdd8908d8">More...</a><br /></td></tr>
<tr class="separator:a9d7b185ac981780bcfaed7dfdd8908d8 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a529c07610dd915a30e452f80b8bb5fc0 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a529c07610dd915a30e452f80b8bb5fc0">IsComputable</a> (const <a class="el" href="structkaldi_1_1nnet3_1_1MiscComputationInfo.html">MiscComputationInfo</a> &amp;misc_info, const <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &amp;output_index, const <a class="el" href="classkaldi_1_1nnet3_1_1IndexSet.html">IndexSet</a> &amp;input_index_set, std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; *used_inputs) const</td></tr>
<tr class="memdesc:a529c07610dd915a30e452f80b8bb5fc0 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function only does something interesting for non-simple Components, and it exists to make it possible to manage optionally-required inputs.  <a href="classkaldi_1_1nnet3_1_1Component.html#a529c07610dd915a30e452f80b8bb5fc0">More...</a><br /></td></tr>
<tr class="separator:a529c07610dd915a30e452f80b8bb5fc0 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92fc16eadbf5faafb1aeb4b90614d691 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a92fc16eadbf5faafb1aeb4b90614d691">ReorderIndexes</a> (std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; *input_indexes, std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; *output_indexes) const</td></tr>
<tr class="memdesc:a92fc16eadbf5faafb1aeb4b90614d691 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function only does something interesting for non-simple Components.  <a href="classkaldi_1_1nnet3_1_1Component.html#a92fc16eadbf5faafb1aeb4b90614d691">More...</a><br /></td></tr>
<tr class="separator:a92fc16eadbf5faafb1aeb4b90614d691 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3829084b3e064ff320153ff4b6cfd44 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#ad3829084b3e064ff320153ff4b6cfd44">PrecomputeIndexes</a> (const <a class="el" href="structkaldi_1_1nnet3_1_1MiscComputationInfo.html">MiscComputationInfo</a> &amp;misc_info, const std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; &amp;input_indexes, const std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; &amp;output_indexes, <a class="el" href="classbool.html">bool</a> need_backprop) const</td></tr>
<tr class="memdesc:ad3829084b3e064ff320153ff4b6cfd44 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function must return NULL for simple Components.  <a href="classkaldi_1_1nnet3_1_1Component.html#ad3829084b3e064ff320153ff4b6cfd44">More...</a><br /></td></tr>
<tr class="separator:ad3829084b3e064ff320153ff4b6cfd44 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eacf8174f9fa190732c320ee3cf1d62 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a8eacf8174f9fa190732c320ee3cf1d62">DeleteMemo</a> (void *memo) const</td></tr>
<tr class="memdesc:a8eacf8174f9fa190732c320ee3cf1d62 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">This virtual function only needs to be overwritten by Components that return a non-NULL memo from their <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a342467ad10ff8535abe96768bdf27958" title="Propagate function. ">Propagate()</a> function.  <a href="classkaldi_1_1nnet3_1_1Component.html#a8eacf8174f9fa190732c320ee3cf1d62">More...</a><br /></td></tr>
<tr class="separator:a8eacf8174f9fa190732c320ee3cf1d62 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44818f697d4e7fb11120645a16bd0e39 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a44818f697d4e7fb11120645a16bd0e39">ConsolidateMemory</a> ()</td></tr>
<tr class="memdesc:a44818f697d4e7fb11120645a16bd0e39 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">This virtual function relates to memory management, and avoiding fragmentation.  <a href="classkaldi_1_1nnet3_1_1Component.html#a44818f697d4e7fb11120645a16bd0e39">More...</a><br /></td></tr>
<tr class="separator:a44818f697d4e7fb11120645a16bd0e39 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0171e1571f18dc6a27c8b041de55feec inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a0171e1571f18dc6a27c8b041de55feec">Component</a> ()</td></tr>
<tr class="separator:a0171e1571f18dc6a27c8b041de55feec inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0df822d4b95a18b1df2529896638daeb inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a0df822d4b95a18b1df2529896638daeb">~Component</a> ()</td></tr>
<tr class="separator:a0df822d4b95a18b1df2529896638daeb inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a8bcd65df8772aebda0be91c9134c2223"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#a21841167f1ffde9582edc512acdbaa51">MatrixStrideType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a8bcd65df8772aebda0be91c9134c2223">GetStrideType</a> (int32 i) const</td></tr>
<tr class="separator:a8bcd65df8772aebda0be91c9134c2223"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3e48770a25791feb1ee5f0ebe001fdd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">IsUpdatable</a> () const</td></tr>
<tr class="separator:aa3e48770a25791feb1ee5f0ebe001fdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aec2b32530f4dfafd1311208913a39e3a"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">max_rows_process_</a></td></tr>
<tr class="separator:aec2b32530f4dfafd1311208913a39e3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef258f30bd05cd26735ddcffd33ba8b9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a></td></tr>
<tr class="separator:aef258f30bd05cd26735ddcffd33ba8b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classkaldi_1_1nnet3_1_1Component"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classkaldi_1_1nnet3_1_1Component')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a></td></tr>
<tr class="memitem:a4ddbc3371d68afbe87908b87b8c0a6ae inherit pub_static_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a4ddbc3371d68afbe87908b87b8c0a6ae">ReadNew</a> (std::istream &amp;is, <a class="el" href="classbool.html">bool</a> binary)</td></tr>
<tr class="memdesc:a4ddbc3371d68afbe87908b87b8c0a6ae inherit pub_static_methods_classkaldi_1_1nnet3_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read component from stream (works out its type). Dies on error.  <a href="classkaldi_1_1nnet3_1_1Component.html#a4ddbc3371d68afbe87908b87b8c0a6ae">More...</a><br /></td></tr>
<tr class="separator:a4ddbc3371d68afbe87908b87b8c0a6ae inherit pub_static_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52564bb899e61119bac38d57147cd223 inherit pub_static_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a52564bb899e61119bac38d57147cd223">NewComponentOfType</a> (const std::string &amp;type)</td></tr>
<tr class="memdesc:a52564bb899e61119bac38d57147cd223 inherit pub_static_methods_classkaldi_1_1nnet3_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a> of the given type e.g.  <a href="classkaldi_1_1nnet3_1_1Component.html#a52564bb899e61119bac38d57147cd223">More...</a><br /></td></tr>
<tr class="separator:a52564bb899e61119bac38d57147cd223 inherit pub_static_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html">UpdatableComponent</a></td></tr>
<tr class="memitem:ae85774801475096c0cc34fd2d6a021ab inherit pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ae85774801475096c0cc34fd2d6a021ab">InitLearningRatesFromConfig</a> (<a class="el" href="classkaldi_1_1nnet3_1_1ConfigLine.html">ConfigLine</a> *cfl)</td></tr>
<tr class="separator:ae85774801475096c0cc34fd2d6a021ab inherit pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34e4f5bb2347784301fead47cc6d5008 inherit pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a34e4f5bb2347784301fead47cc6d5008">ReadUpdatableCommon</a> (std::istream &amp;is, <a class="el" href="classbool.html">bool</a> binary)</td></tr>
<tr class="separator:a34e4f5bb2347784301fead47cc6d5008 inherit pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2e64ac30c475dcc5d61612524cc1eb9 inherit pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ae2e64ac30c475dcc5d61612524cc1eb9">WriteUpdatableCommon</a> (std::ostream &amp;is, <a class="el" href="classbool.html">bool</a> binary) const</td></tr>
<tr class="separator:ae2e64ac30c475dcc5d61612524cc1eb9 inherit pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html">UpdatableComponent</a></td></tr>
<tr class="memitem:abef30da8aa0328dd5db955ce0b2a3466 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">learning_rate_</a></td></tr>
<tr class="memdesc:abef30da8aa0328dd5db955ce0b2a3466 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">learning rate (typically 0.0..0.01)  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">More...</a><br /></td></tr>
<tr class="separator:abef30da8aa0328dd5db955ce0b2a3466 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b609dd2ecd50c6165f783395bcd4468 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a7b609dd2ecd50c6165f783395bcd4468">learning_rate_factor_</a></td></tr>
<tr class="memdesc:a7b609dd2ecd50c6165f783395bcd4468 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">learning rate factor (normally 1.0, but can be set to another &lt; value so that when &lt; you call <a class="el" href="namespacekaldi_1_1nnet3.html#a3936ad79463d7cfd23ba1efd54f56084" title="Sets the underlying learning rate for all the components in the nnet to this value. ">SetLearningRate()</a>, that value will be scaled by this factor.  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a7b609dd2ecd50c6165f783395bcd4468">More...</a><br /></td></tr>
<tr class="separator:a7b609dd2ecd50c6165f783395bcd4468 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a2708b87f18a1aed11f8c0278585e3d inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a5a2708b87f18a1aed11f8c0278585e3d">l2_regularize_</a></td></tr>
<tr class="memdesc:a5a2708b87f18a1aed11f8c0278585e3d inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">L2 regularization constant.  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a5a2708b87f18a1aed11f8c0278585e3d">More...</a><br /></td></tr>
<tr class="separator:a5a2708b87f18a1aed11f8c0278585e3d inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95a4abdec65e2b9a9dc13725b6879cb9 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">is_gradient_</a></td></tr>
<tr class="memdesc:a95a4abdec65e2b9a9dc13725b6879cb9 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if this component is to be treated as a gradient rather than as parameters.  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">More...</a><br /></td></tr>
<tr class="separator:a95a4abdec65e2b9a9dc13725b6879cb9 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2efdd2c0f4a15742f06e463777a2a2d7 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2efdd2c0f4a15742f06e463777a2a2d7">max_change_</a></td></tr>
<tr class="memdesc:a2efdd2c0f4a15742f06e463777a2a2d7 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">configuration value for imposing max-change  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2efdd2c0f4a15742f06e463777a2a2d7">More...</a><br /></td></tr>
<tr class="separator:a2efdd2c0f4a15742f06e463777a2a2d7 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html" title="CompositeComponent is a component representing a sequence of [simple] components. ...">CompositeComponent</a> is a component representing a sequence of [simple] components. </p>
<p>The config line would be something like the following (imagine this is all on one line):</p>
<p>component name=composite1 type=<a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html" title="CompositeComponent is a component representing a sequence of [simple] components. ...">CompositeComponent</a> max-rows-process=2048 num-components=3 \ component1='type=<a class="el" href="classkaldi_1_1nnet3_1_1BlockAffineComponent.html" title="This class implements an affine transform using a block diagonal matrix e.g., one whose weight matrix...">BlockAffineComponent</a> input-dim=1000 output-dim=10000 num-blocks=100' \ component2='type=<a class="el" href="classkaldi_1_1nnet3_1_1RectifiedLinearComponent.html">RectifiedLinearComponent</a> dim=10000' \ component3='type=<a class="el" href="classkaldi_1_1nnet3_1_1BlockAffineComponent.html" title="This class implements an affine transform using a block diagonal matrix e.g., one whose weight matrix...">BlockAffineComponent</a> input-dim=10000 output-dim=1000 num-blocks=100'</p>
<p>The reason you might want to use this component, instead of directly using the same sequence of components in the config file, is to save GPU memory (at the expense of more compute)&ndash; because doing it like this means we have to re-do parts of the forward pass in the backprop phase, but we avoid using much memory for very long (and you can make the memory usage very small by making max-rows-process small). We inherit from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a> just in case one or more of the components in the sequence are updatable.</p>
<p>It is an error to nest a <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html" title="CompositeComponent is a component representing a sequence of [simple] components. ...">CompositeComponent</a> inside a <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html" title="CompositeComponent is a component representing a sequence of [simple] components. ...">CompositeComponent</a>. The same effect can be accomplished by specifying a smaller max-rows-process in a single <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html" title="CompositeComponent is a component representing a sequence of [simple] components. ...">CompositeComponent</a>. </p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8h_source.html#l02489">2489</a> of file <a class="el" href="nnet-simple-component_8h_source.html">nnet-simple-component.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aae4dcf2378af33e3384b938680e25d07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae4dcf2378af33e3384b938680e25d07">&#9670;&nbsp;</a></span>CompositeComponent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html">CompositeComponent</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8h_source.html#l02500">2500</a> of file <a class="el" href="nnet-simple-component_8h_source.html">nnet-simple-component.h</a>.</p>

<p class="reference">References <a class="el" href="nnet-simple-component_8cc_source.html#l00035">PnormComponent::Init()</a>.</p>
<div class="fragment"><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;{ } <span class="comment">// use Init() or InitFromConfig() to really initialize.</span></div></div><!-- fragment -->
</div>
</div>
<a id="a84123bd768a9a5f8a63a416363d1c367"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84123bd768a9a5f8a63a416363d1c367">&#9670;&nbsp;</a></span>~CompositeComponent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual ~<a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html">CompositeComponent</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8h_source.html#l02568">2568</a> of file <a class="el" href="nnet-simple-component_8h_source.html">nnet-simple-component.h</a>.</p>

<p class="reference">References <a class="el" href="stl-utils_8h_source.html#l00186">kaldi::DeletePointers()</a>.</p>
<div class="fragment"><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;{ <a class="code" href="namespacekaldi.html#a34158c6c567bc6c51c90af0251395d6a">DeletePointers</a>(&amp;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>); }</div><div class="ttc" id="namespacekaldi_html_a34158c6c567bc6c51c90af0251395d6a"><div class="ttname"><a href="namespacekaldi.html#a34158c6c567bc6c51c90af0251395d6a">kaldi::DeletePointers</a></div><div class="ttdeci">void DeletePointers(std::vector&lt; A *&gt; *v)</div><div class="ttdoc">Deletes any non-NULL pointers in the vector v, and sets the corresponding entries of v to NULL...</div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00186">stl-utils.h:186</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acdb3e97b46276e3c9f4f696c2bef3943"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdb3e97b46276e3c9f4f696c2bef3943">&#9670;&nbsp;</a></span>Add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>alpha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This virtual function when called by &ndash; an <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a> adds the parameters of another updatable component, times some constant, to the current parameters. </p>
<p>&ndash; a <a class="el" href="classkaldi_1_1nnet3_1_1NonlinearComponent.html">NonlinearComponent</a> (or another component that stores stats, like <a class="el" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html">BatchNormComponent</a>)&ndash; it relates to adding stats. Otherwise it will normally do nothing. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#aab16938236bd0978bad5de6d56fcf47f">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05332">5332</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-component-itf_8h_source.html#l00370">Component::Add()</a>, <a class="el" href="nnet-simple-component_8h_source.html#l02580">CompositeComponent::components_</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>
<div class="fragment"><div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;                                                                       {</div><div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;  <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aae4dcf2378af33e3384b938680e25d07">CompositeComponent</a> *other = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aae4dcf2378af33e3384b938680e25d07">CompositeComponent</a>*<span class="keyword">&gt;</span>(</div><div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;      &amp;other_in);</div><div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(other != NULL &amp;&amp; other-&gt;components_.size() ==</div><div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;               <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size() &amp;&amp; <span class="stringliteral">&quot;Mismatching nnet topologies&quot;</span>);</div><div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#acdb3e97b46276e3c9f4f696c2bef3943">Add</a>(alpha, *(other-&gt;components_[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]));</div><div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aae4dcf2378af33e3384b938680e25d07"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aae4dcf2378af33e3384b938680e25d07">kaldi::nnet3::CompositeComponent::CompositeComponent</a></div><div class="ttdeci">CompositeComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02500">nnet-simple-component.h:2500</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_acdb3e97b46276e3c9f4f696c2bef3943"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#acdb3e97b46276e3c9f4f696c2bef3943">kaldi::nnet3::CompositeComponent::Add</a></div><div class="ttdeci">virtual void Add(BaseFloat alpha, const Component &amp;other)</div><div class="ttdoc">This virtual function when called by – an UpdatableComponent adds the parameters of another updatabl...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05332">nnet-simple-component.cc:5332</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3e993d522e4e85b5dc5e331f2ff84023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e993d522e4e85b5dc5e331f2ff84023">&#9670;&nbsp;</a></span>Backprop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Backprop </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>debug_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a> *&#160;</td>
          <td class="paramname"><em>indexes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>in_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>out_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>out_deriv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>memo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *&#160;</td>
          <td class="paramname"><em>to_update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td>
          <td class="paramname"><em>in_deriv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Backprop function; depending on which of the arguments 'to_update' and 'in_deriv' are non-NULL, this can compute input-data derivatives and/or perform model update. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">debug_info</td><td>The component name, to be printed out in any warning messages. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">indexes</td><td>A pointer to some information output by this class's PrecomputeIndexes function (will be NULL for simple components, i.e. those that don't do things like splicing). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">in_value</td><td>The matrix that was given as input to the Propagate function. Will be ignored (and may be empty) if <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0" title="Return bitmask of the component&#39;s properties. ">Properties()</a>&amp;kBackpropNeedsInput == 0. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">out_value</td><td>The matrix that was output from the Propagate function. Will be ignored (and may be empty) if <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0" title="Return bitmask of the component&#39;s properties. ">Properties()</a>&amp;kBackpropNeedsOutput == 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">out_deriv</td><td>The derivative at the output of this component. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">memo</td><td>This will normally be NULL, but for component types that set the flag kUsesMemo, this will be the return value of the <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a8f1f1b05a170bd81a544caefe1acb040" title="Propagate function. ">Propagate()</a> function that corresponds to this <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a3e993d522e4e85b5dc5e331f2ff84023" title="Backprop function; depending on which of the arguments &#39;to_update&#39; and &#39;in_deriv&#39; are non-NULL...">Backprop()</a> function. Ownership of any pointers is not transferred to the Backprop function; <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a8eacf8174f9fa190732c320ee3cf1d62" title="This virtual function only needs to be overwritten by Components that return a non-NULL memo from the...">DeleteMemo()</a> will be called to delete it. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">to_update</td><td>If model update is desired, the <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a> to be updated, else NULL. Does not have to be identical to this. If supplied, you can assume that to_update-&gt;<a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0" title="Return bitmask of the component&#39;s properties. ">Properties()</a> &amp; kUpdatableComponent is nonzero. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">in_deriv</td><td>The derivative at the input of this component, if needed (else NULL). If <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0" title="Return bitmask of the component&#39;s properties. ">Properties()</a>&amp;kBackpropInPlace, may be the same matrix as out_deriv. If <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0" title="Return bitmask of the component&#39;s properties. ">Properties()</a>&amp;kBackpropAdds, this is added to by the Backprop routine, else it is set. The component code chooses which mode to work in, based on convenience. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#ada8f5f2c358622ef522a7f2b9d2833ca">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05187">5187</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-simple-component_8cc_source.html#l04786">MaxpoolingComponent::Backprop()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l04605">MaxpoolingComponent::InputDim()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00061">kaldi::nnet3::kBackpropAdds</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00065">kaldi::nnet3::kBackpropNeedsInput</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00067">kaldi::nnet3::kBackpropNeedsOutput</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00053">kaldi::nnet3::kPropagateAdds</a>, <a class="el" href="matrix-common_8h_source.html#l00038">kaldi::kSetZero</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00071">kaldi::nnet3::kStoresStats</a>, <a class="el" href="matrix-common_8h_source.html#l00039">kaldi::kUndefined</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00042">kaldi::nnet3::kUpdatableComponent</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00079">kaldi::nnet3::kUsesMemo</a>, <a class="el" href="cu-matrix_8h_source.html#l00215">CuMatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="cu-matrix_8h_source.html#l00214">CuMatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l04622">MaxpoolingComponent::OutputDim()</a>, <a class="el" href="nnet-simple-component_8h_source.html#l02413">MaxpoolingComponent::Properties()</a>, and <a class="el" href="nnet-component-itf_8h_source.html#l00186">Component::StoreStats()</a>.</p>
<div class="fragment"><div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;                                                                           {</div><div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(in_value.NumRows() == out_deriv.NumRows() &amp;&amp;</div><div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;               in_value.NumCols() == <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa5083adaff49881915d61ebf045e96db">InputDim</a>() &amp;&amp;</div><div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;               out_deriv.NumCols() == <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#af97474cce492a0b8305e8ec2c798509b">OutputDim</a>());</div><div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;  int32 num_rows = in_value.NumRows(),</div><div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;      num_components = <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size();</div><div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">max_rows_process_</a> &gt; 0 &amp;&amp; num_rows &gt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">max_rows_process_</a>) {</div><div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">max_rows_process_</a> &gt; 0);</div><div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;    <span class="comment">// recurse and process smaller parts of the data, to save memory.</span></div><div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;    <span class="keywordflow">for</span> (int32 row_offset = 0; row_offset &lt; num_rows;</div><div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;         row_offset += <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">max_rows_process_</a>) {</div><div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;      <span class="keywordtype">bool</span> have_output_value = (out_value.NumRows() != 0);</div><div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;      int32 this_num_rows = std::min&lt;int32&gt;(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">max_rows_process_</a>,</div><div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;                                            num_rows - row_offset);</div><div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;      <span class="comment">// out_value_part will only be used if out_value is nonempty; otherwise we</span></div><div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;      <span class="comment">// make it a submatrix of &#39;out_deriv&#39; to avoid errors in the constructor.</span></div><div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;      <span class="keyword">const</span> CuSubMatrix&lt;BaseFloat&gt; out_value_part(have_output_value ? out_value : out_deriv,</div><div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;                                                  row_offset, this_num_rows,</div><div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;                                                  0, out_deriv.NumCols());</div><div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;      <span class="comment">// in_deriv_value_part will only be used if in_deriv != NULL; otherwise we</span></div><div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;      <span class="comment">// make it a submatrix of &#39;in_value&#39; to avoid errors in the constructor.</span></div><div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;      CuSubMatrix&lt;BaseFloat&gt; in_deriv_part(in_deriv != NULL ? *in_deriv : in_value,</div><div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;                                            row_offset, this_num_rows,</div><div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;                                            0, in_value.NumCols());</div><div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;      CuSubMatrix&lt;BaseFloat&gt; in_value_part(in_value, row_offset, this_num_rows,</div><div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;                                           0, in_value.NumCols());</div><div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;      <span class="keyword">const</span> CuSubMatrix&lt;BaseFloat&gt; out_deriv_part(out_deriv,</div><div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;                                                  row_offset, this_num_rows,</div><div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;                                                  0, out_deriv.NumCols());</div><div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;      CuMatrix&lt;BaseFloat&gt;  empty_mat;</div><div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;      this-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a3e993d522e4e85b5dc5e331f2ff84023">Backprop</a>(debug_info, NULL, in_value_part,</div><div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;                     (have_output_value ? <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>CuMatrixBase&lt;BaseFloat&gt;&amp;<span class="keyword">&gt;</span>(out_value_part) :</div><div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;                      <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>CuMatrixBase&lt;BaseFloat&gt;&amp;<span class="keyword">&gt;</span>(empty_mat)),</div><div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;                     out_deriv_part, NULL, to_update,</div><div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;                     in_deriv != NULL ? &amp;in_deriv_part : NULL);</div><div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;    }</div><div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;  }</div><div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;  <span class="comment">// For now, assume all intermediate values and derivatives need to be</span></div><div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;  <span class="comment">// computed.  in_value and out_deriv will always be supplied.</span></div><div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;</div><div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;  <span class="comment">// intermediate_outputs[i] contains the output of component i.</span></div><div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;  std::vector&lt;CuMatrix&lt;BaseFloat&gt; &gt; intermediate_outputs(num_components);</div><div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;  <span class="comment">// intermediate_derivs[i] contains the deriative at the output of component i.</span></div><div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;  std::vector&lt;CuMatrix&lt;BaseFloat&gt; &gt; intermediate_derivs(num_components - 1);</div><div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;</div><div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(memo == NULL);</div><div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;  <span class="comment">// note: only a very few components use memos, but we need to support them.</span></div><div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;  std::vector&lt;void*&gt; memos(num_components, NULL);</div><div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;</div><div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;  int32 num_components_to_propagate = num_components;</div><div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;  <span class="keywordflow">if</span> (!(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[num_components - 1]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a>() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a1713e609229066c956d4c7d544c69658">kUsesMemo</a>)) {</div><div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;    <span class="comment">// we only need to propagate the very last component if it uses a memo.</span></div><div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;    num_components_to_propagate--;</div><div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;    <span class="keywordflow">if</span> (num_components &gt; 1) {</div><div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;      <span class="comment">// skip the last-but-one component&#39;s propagate if the last component&#39;s</span></div><div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;      <span class="comment">// backprop doesn&#39;t need the input and the last-but-one component&#39;s</span></div><div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;      <span class="comment">// backprop doesn&#39;t need the output.  This is the lowest hanging fruit for</span></div><div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;      <span class="comment">// optimization; other propagates might also be skippable.</span></div><div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;      int32 properties = <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[num_components - 2]-&gt;Properties(),</div><div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;          next_properties = <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[num_components - 1]-&gt;Properties();</div><div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;      <span class="keywordflow">if</span> (!(properties &amp; (<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2a37e781d9be4e2cb09699a840dde841">kBackpropNeedsOutput</a> || <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a1713e609229066c956d4c7d544c69658">kUsesMemo</a>)) &amp;&amp;</div><div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;          !(next_properties &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3adac6588b2ef2e8b52936718cf97263e7">kBackpropNeedsInput</a>)) {</div><div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;        num_components_to_propagate--;</div><div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;      }</div><div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;    }</div><div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;  }</div><div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;</div><div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;</div><div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;  <span class="comment">// Do the propagation again.</span></div><div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_components_to_propagate; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;    <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80b">MatrixResizeType</a> resize_type =</div><div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;        ((<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;Properties() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a5180ca55eb0162c68740d51295d056c7">kPropagateAdds</a>) ?</div><div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;         <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a> : <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div><div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;    intermediate_outputs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].Resize(num_rows, <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#af97474cce492a0b8305e8ec2c798509b">OutputDim</a>(),</div><div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;                                   resize_type, <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a8bcd65df8772aebda0be91c9134c2223">GetStrideType</a>(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;    memos[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] =</div><div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;        <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;Propagate(NULL,</div><div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;                             (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0 ? in_value : intermediate_outputs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>-1]),</div><div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;                              &amp;(intermediate_outputs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]));</div><div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;  }</div><div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;</div><div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = num_components - 1; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>--) {</div><div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;    <span class="keyword">const</span> CuMatrixBase&lt;BaseFloat&gt; &amp;this_in_value =</div><div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;        (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0 ? in_value : intermediate_outputs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>-1]),</div><div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;        &amp;this_out_value =</div><div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;        (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> == num_components - 1 ? out_value : intermediate_outputs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;</div><div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1Component.html#a0171e1571f18dc6a27c8b041de55feec">Component</a> *component_to_update =</div><div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;        (to_update == NULL ? NULL :</div><div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;         <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aae4dcf2378af33e3384b938680e25d07">CompositeComponent</a>*<span class="keyword">&gt;</span>(to_update)-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[i]);</div><div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;</div><div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;    <span class="keywordflow">if</span> (component_to_update != NULL  &amp;&amp;</div><div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;        <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[i]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a>() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3affff5abfeafd5643bee15f1daafe6827">kStoresStats</a>)</div><div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;      component_to_update-&gt;StoreStats(this_in_value, this_out_value, memos[i]);</div><div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;</div><div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;    <span class="keywordflow">if</span> (i &gt; 0) {</div><div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;      <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80b">MatrixResizeType</a> resize_type =</div><div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;          ((<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;Properties() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3acda3bbc91bd09631b18fdc57376c2b90">kBackpropAdds</a>) ?</div><div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;           <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a> : kUndefined);</div><div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;      intermediate_derivs[i-1].Resize(num_rows, <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[i]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa5083adaff49881915d61ebf045e96db">InputDim</a>(),</div><div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;                                      resize_type, <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a8bcd65df8772aebda0be91c9134c2223">GetStrideType</a>(i - 1));</div><div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;    }</div><div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;    <span class="comment">// skip the first component&#39;s backprop if it&#39;s not updatable and in_deriv is</span></div><div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;    <span class="comment">// not requested.  Again, this is the lowest-hanging fruit to optimize.</span></div><div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;    <span class="keywordflow">if</span> (!(i == 0 &amp;&amp; !(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[0]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a>() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kUpdatableComponent</a>) &amp;&amp;</div><div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;          in_deriv == NULL)) {</div><div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;Backprop(debug_info, NULL,</div><div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;                this_in_value, this_out_value,</div><div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;                (i + 1 == num_components ? out_deriv : intermediate_derivs[i]),</div><div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;                memos[i], component_to_update,</div><div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;                (i == 0 ? in_deriv : &amp;(intermediate_derivs[i-1])));</div><div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;    }</div><div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;    <span class="keywordflow">if</span> (memos[i] != NULL)</div><div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;DeleteMemo(memos[i]);</div><div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;  }</div><div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_af97474cce492a0b8305e8ec2c798509b"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#af97474cce492a0b8305e8ec2c798509b">kaldi::nnet3::CompositeComponent::OutputDim</a></div><div class="ttdeci">virtual int32 OutputDim() const</div><div class="ttdoc">Returns output-dimension of this component. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05007">nnet-simple-component.cc:5007</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00039">matrix-common.h:39</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80b"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80b">kaldi::MatrixResizeType</a></div><div class="ttdeci">MatrixResizeType</div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00037">matrix-common.h:37</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aec2b32530f4dfafd1311208913a39e3a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">kaldi::nnet3::CompositeComponent::max_rows_process_</a></div><div class="ttdeci">int32 max_rows_process_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02579">nnet-simple-component.h:2579</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aae4dcf2378af33e3384b938680e25d07"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aae4dcf2378af33e3384b938680e25d07">kaldi::nnet3::CompositeComponent::CompositeComponent</a></div><div class="ttdeci">CompositeComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02500">nnet-simple-component.h:2500</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a1713e609229066c956d4c7d544c69658"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a1713e609229066c956d4c7d544c69658">kaldi::nnet3::kUsesMemo</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00079">nnet-component-itf.h:79</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kaldi::nnet3::kUpdatableComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00042">nnet-component-itf.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_a3e993d522e4e85b5dc5e331f2ff84023"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a3e993d522e4e85b5dc5e331f2ff84023">kaldi::nnet3::CompositeComponent::Backprop</a></div><div class="ttdeci">virtual void Backprop(const std::string &amp;debug_info, const ComponentPrecomputedIndexes *indexes, const CuMatrixBase&lt; BaseFloat &gt; &amp;in_value, const CuMatrixBase&lt; BaseFloat &gt; &amp;, const CuMatrixBase&lt; BaseFloat &gt; &amp;out_deriv, void *memo, Component *to_update, CuMatrixBase&lt; BaseFloat &gt; *in_deriv) const</div><div class="ttdoc">Backprop function; depending on which of the arguments &amp;#39;to_update&amp;#39; and &amp;#39;in_deriv&amp;#39; are non-NULL...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05187">nnet-simple-component.cc:5187</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_a8bcd65df8772aebda0be91c9134c2223"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a8bcd65df8772aebda0be91c9134c2223">kaldi::nnet3::CompositeComponent::GetStrideType</a></div><div class="ttdeci">MatrixStrideType GetStrideType(int32 i) const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05035">nnet-simple-component.cc:5035</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1Component_html_a0171e1571f18dc6a27c8b041de55feec"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1Component.html#a0171e1571f18dc6a27c8b041de55feec">kaldi::nnet3::Component::Component</a></div><div class="ttdeci">Component()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00396">nnet-component-itf.h:396</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a2a37e781d9be4e2cb09699a840dde841"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2a37e781d9be4e2cb09699a840dde841">kaldi::nnet3::kBackpropNeedsOutput</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00067">nnet-component-itf.h:67</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3affff5abfeafd5643bee15f1daafe6827"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3affff5abfeafd5643bee15f1daafe6827">kaldi::nnet3::kStoresStats</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00071">nnet-component-itf.h:71</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3adac6588b2ef2e8b52936718cf97263e7"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3adac6588b2ef2e8b52936718cf97263e7">kaldi::nnet3::kBackpropNeedsInput</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00065">nnet-component-itf.h:65</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a5180ca55eb0162c68740d51295d056c7"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a5180ca55eb0162c68740d51295d056c7">kaldi::nnet3::kPropagateAdds</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00053">nnet-component-itf.h:53</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aa5083adaff49881915d61ebf045e96db"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa5083adaff49881915d61ebf045e96db">kaldi::nnet3::CompositeComponent::InputDim</a></div><div class="ttdeci">virtual int32 InputDim() const</div><div class="ttdoc">Returns input-dimension of this component. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05001">nnet-simple-component.cc:5001</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_ab17c0c589e9e60ab186972b0fdf835a0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">kaldi::nnet3::CompositeComponent::Properties</a></div><div class="ttdeci">virtual int32 Properties() const</div><div class="ttdoc">Return bitmask of the component&amp;#39;s properties. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05013">nnet-simple-component.cc:5013</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3acda3bbc91bd09631b18fdc57376c2b90"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3acda3bbc91bd09631b18fdc57376c2b90">kaldi::nnet3::kBackpropAdds</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00061">nnet-component-itf.h:61</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kaldi::kSetZero</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00038">matrix-common.h:38</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f11a4fb3396dda21cae55e81f23c750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f11a4fb3396dda21cae55e81f23c750">&#9670;&nbsp;</a></span>Copy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> * Copy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copies component (deep copy). </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#aa46d9c7de00be8203e16a6e55af0afef">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05476">5476</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-simple-component_8h_source.html#l02435">MaxpoolingComponent::Copy()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="nnet-simple-component_8cc_source.html#l05094">CompositeComponent::Init()</a>.</p>
<div class="fragment"><div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;                                          {</div><div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;  std::vector&lt;Component*&gt; components(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size());</div><div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;    components[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a1f11a4fb3396dda21cae55e81f23c750">Copy</a>();</div><div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aae4dcf2378af33e3384b938680e25d07">CompositeComponent</a> *ans = <span class="keyword">new</span> <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aae4dcf2378af33e3384b938680e25d07">CompositeComponent</a>();</div><div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;  ans-&gt;Init(components, <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">max_rows_process_</a>);</div><div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aec2b32530f4dfafd1311208913a39e3a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">kaldi::nnet3::CompositeComponent::max_rows_process_</a></div><div class="ttdeci">int32 max_rows_process_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02579">nnet-simple-component.h:2579</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aae4dcf2378af33e3384b938680e25d07"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aae4dcf2378af33e3384b938680e25d07">kaldi::nnet3::CompositeComponent::CompositeComponent</a></div><div class="ttdeci">CompositeComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02500">nnet-simple-component.h:2500</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_a1f11a4fb3396dda21cae55e81f23c750"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a1f11a4fb3396dda21cae55e81f23c750">kaldi::nnet3::CompositeComponent::Copy</a></div><div class="ttdeci">virtual Component * Copy() const</div><div class="ttdoc">Copies component (deep copy). </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05476">nnet-simple-component.cc:5476</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a87b95e5c043a8221ad58b2512b2d81c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87b95e5c043a8221ad58b2512b2d81c9">&#9670;&nbsp;</a></span>DotProduct()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> DotProduct </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html">UpdatableComponent</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Computes dot-product between parameters of two instances of a <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a>. </p>
<p>Can be used for computing parameter-norm of an <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a>. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ac0697192d76083f84fc989f67fbee5e9">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05443">5443</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-simple-component_8h_source.html#l02580">CompositeComponent::components_</a>, <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ac0697192d76083f84fc989f67fbee5e9">UpdatableComponent::DotProduct()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00042">kaldi::nnet3::kUpdatableComponent</a>, and <a class="el" href="nnet-simple-component_8h_source.html#l02413">MaxpoolingComponent::Properties()</a>.</p>
<div class="fragment"><div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;                                              {</div><div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;  <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aae4dcf2378af33e3384b938680e25d07">CompositeComponent</a> *other = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aae4dcf2378af33e3384b938680e25d07">CompositeComponent</a>*<span class="keyword">&gt;</span>(</div><div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;      &amp;other_in);</div><div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(other != NULL &amp;&amp; other-&gt;components_.size() ==</div><div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;               <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size() &amp;&amp; <span class="stringliteral">&quot;Mismatching nnet topologies&quot;</span>);</div><div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> ans = 0.0;</div><div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0.0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a>() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kUpdatableComponent</a>) {</div><div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a> *uc =</div><div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;          <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a>*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;      <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a> *uc_other =</div><div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;          <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a>*<span class="keyword">&gt;</span>(other-&gt;components_[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(uc != NULL &amp;&amp; uc_other != NULL);</div><div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;      ans += uc-&gt;DotProduct(*uc_other);</div><div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;    }</div><div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;  }</div><div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a2af26d78825cc522c324976403bf4e4e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">kaldi::nnet3::UpdatableComponent::UpdatableComponent</a></div><div class="ttdeci">UpdatableComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00461">nnet-component-itf.h:461</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aae4dcf2378af33e3384b938680e25d07"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aae4dcf2378af33e3384b938680e25d07">kaldi::nnet3::CompositeComponent::CompositeComponent</a></div><div class="ttdeci">CompositeComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02500">nnet-simple-component.h:2500</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kaldi::nnet3::kUpdatableComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00042">nnet-component-itf.h:42</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_ab17c0c589e9e60ab186972b0fdf835a0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">kaldi::nnet3::CompositeComponent::Properties</a></div><div class="ttdeci">virtual int32 Properties() const</div><div class="ttdoc">Return bitmask of the component&amp;#39;s properties. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05013">nnet-simple-component.cc:5013</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a32206a7478069f9e3e86e698bf526e30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32206a7478069f9e3e86e698bf526e30">&#9670;&nbsp;</a></span>FreezeNaturalGradient()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FreezeNaturalGradient </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>freeze</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>virtual </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ac065303ac0af64b0db2486e288eb98ff">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05464">5464</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-component-itf_8h_source.html#l00502">UpdatableComponent::FreezeNaturalGradient()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00042">kaldi::nnet3::kUpdatableComponent</a>, and <a class="el" href="nnet-simple-component_8h_source.html#l02413">MaxpoolingComponent::Properties()</a>.</p>
<div class="fragment"><div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;                                                          {</div><div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a>() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kUpdatableComponent</a>) {</div><div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a> *uc =</div><div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;          <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a>*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(uc != NULL);</div><div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;      uc-&gt;FreezeNaturalGradient(freeze);</div><div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;    }</div><div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;  }</div><div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a2af26d78825cc522c324976403bf4e4e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">kaldi::nnet3::UpdatableComponent::UpdatableComponent</a></div><div class="ttdeci">UpdatableComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00461">nnet-component-itf.h:461</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kaldi::nnet3::kUpdatableComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00042">nnet-component-itf.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_ab17c0c589e9e60ab186972b0fdf835a0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">kaldi::nnet3::CompositeComponent::Properties</a></div><div class="ttdeci">virtual int32 Properties() const</div><div class="ttdoc">Return bitmask of the component&amp;#39;s properties. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05013">nnet-simple-component.cc:5013</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3cb49b7dc262614200cb86400d36cb44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cb49b7dc262614200cb86400d36cb44">&#9670;&nbsp;</a></span>GetComponent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> * GetComponent </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>i</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the ith component in this component. </p>
<p>The ordering is the same as in the config line. The caller does not own the received component. </p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05542">5542</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-utils_8cc_source.html#l00438">kaldi::nnet3::ConvertRepeatedToBlockAffine()</a>, and <a class="el" href="nnet-utils-test_8cc_source.html#l00082">kaldi::nnet3::UnitTestConvertRepeatedToBlockAffineComposite()</a>.</p>
<div class="fragment"><div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;                                                               {</div><div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(static_cast&lt;size_t&gt;(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size());</div><div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8bcd65df8772aebda0be91c9134c2223"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bcd65df8772aebda0be91c9134c2223">&#9670;&nbsp;</a></span>GetStrideType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#a21841167f1ffde9582edc512acdbaa51">MatrixStrideType</a> GetStrideType </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>i</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05035">5035</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="matrix-common_8h_source.html#l00045">kaldi::kDefaultStride</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00075">kaldi::nnet3::kInputContiguous</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00077">kaldi::nnet3::kOutputContiguous</a>, <a class="el" href="matrix-common_8h_source.html#l00046">kaldi::kStrideEqualNumCols</a>, and <a class="el" href="nnet-simple-component_8h_source.html#l02413">MaxpoolingComponent::Properties()</a>.</p>
<div class="fragment"><div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;                                                                {</div><div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;  int32 num_components = <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size();</div><div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a>() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3ab8a5f348ba3b3b42e8943e20b1675dc9">kOutputContiguous</a>) ||</div><div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;      (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1 &lt; num_components &amp;&amp;</div><div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;       (<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a>() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2df016ee6a8dfbdac91f5e53f3662a94">kInputContiguous</a>)))</div><div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacekaldi.html#a21841167f1ffde9582edc512acdbaa51a2b73d1b429e7067fc592b019190e4976">kStrideEqualNumCols</a>;</div><div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacekaldi.html#a21841167f1ffde9582edc512acdbaa51aae343c6085287b6272231336d4b75986">kDefaultStride</a>;</div><div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;}</div><div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3ab8a5f348ba3b3b42e8943e20b1675dc9"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3ab8a5f348ba3b3b42e8943e20b1675dc9">kaldi::nnet3::kOutputContiguous</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00077">nnet-component-itf.h:77</a></div></div>
<div class="ttc" id="namespacekaldi_html_a21841167f1ffde9582edc512acdbaa51a2b73d1b429e7067fc592b019190e4976"><div class="ttname"><a href="namespacekaldi.html#a21841167f1ffde9582edc512acdbaa51a2b73d1b429e7067fc592b019190e4976">kaldi::kStrideEqualNumCols</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00046">matrix-common.h:46</a></div></div>
<div class="ttc" id="namespacekaldi_html_a21841167f1ffde9582edc512acdbaa51aae343c6085287b6272231336d4b75986"><div class="ttname"><a href="namespacekaldi.html#a21841167f1ffde9582edc512acdbaa51aae343c6085287b6272231336d4b75986">kaldi::kDefaultStride</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00045">matrix-common.h:45</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a2df016ee6a8dfbdac91f5e53f3662a94"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2df016ee6a8dfbdac91f5e53f3662a94">kaldi::nnet3::kInputContiguous</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00075">nnet-component-itf.h:75</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_ab17c0c589e9e60ab186972b0fdf835a0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">kaldi::nnet3::CompositeComponent::Properties</a></div><div class="ttdeci">virtual int32 Properties() const</div><div class="ttdoc">Return bitmask of the component&amp;#39;s properties. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05013">nnet-simple-component.cc:5013</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a245d65d566725422b859c99bff7623f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a245d65d566725422b859c99bff7623f8">&#9670;&nbsp;</a></span>Info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Info </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns some text-form information about this component, for diagnostics. </p>
<p>Starts with the type of the component. E.g. "SigmoidComponent dim=900", although most components will have much more info. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a245d65d566725422b859c99bff7623f8">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05314">5314</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l04863">MaxpoolingComponent::Info()</a>, and <a class="el" href="nnet-simple-component_8h_source.html#l02412">MaxpoolingComponent::Type()</a>.</p>
<div class="fragment"><div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;                                         {</div><div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;  std::ostringstream stream;</div><div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;  stream &lt;&lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#af2d951f58073f362411ee482aa469975">Type</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0) stream &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div><div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;    stream &lt;&lt; <span class="stringliteral">&quot;sub-component&quot;</span> &lt;&lt; (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>+1) &lt;&lt; <span class="stringliteral">&quot; = { &quot;</span></div><div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;           &lt;&lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a245d65d566725422b859c99bff7623f8">Info</a>() &lt;&lt; <span class="stringliteral">&quot; }&quot;</span>;</div><div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;  }</div><div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;  <span class="keywordflow">return</span> stream.str();</div><div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_a245d65d566725422b859c99bff7623f8"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a245d65d566725422b859c99bff7623f8">kaldi::nnet3::CompositeComponent::Info</a></div><div class="ttdeci">virtual std::string Info() const</div><div class="ttdoc">Returns some text-form information about this component, for diagnostics. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05314">nnet-simple-component.cc:5314</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_af2d951f58073f362411ee482aa469975"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#af2d951f58073f362411ee482aa469975">kaldi::nnet3::CompositeComponent::Type</a></div><div class="ttdeci">virtual std::string Type() const</div><div class="ttdoc">Returns a string such as &quot;SigmoidComponent&quot;, describing the type of the object. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02506">nnet-simple-component.h:2506</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2a436b6225464df079a21f198b8ebcfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a436b6225464df079a21f198b8ebcfd">&#9670;&nbsp;</a></span>Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Init </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *&gt; &amp;&#160;</td>
          <td class="paramname"><em>components</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>max_rows_process</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05094">5094</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="stl-utils_8h_source.html#l00186">kaldi::DeletePointers()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l04605">MaxpoolingComponent::InputDim()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00038">kaldi::nnet3::kSimpleComponent</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l04622">MaxpoolingComponent::OutputDim()</a>, and <a class="el" href="nnet-simple-component_8h_source.html#l02413">MaxpoolingComponent::Properties()</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-simple-component_8cc_source.html#l05476">CompositeComponent::Copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;                                                      {</div><div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;  <a class="code" href="namespacekaldi.html#a34158c6c567bc6c51c90af0251395d6a">DeletePointers</a>(&amp;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>);  <span class="comment">// clean up.</span></div><div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a> = components;</div><div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!components.empty());</div><div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">max_rows_process_</a> = max_rows_process;</div><div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;</div><div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;    <span class="comment">// make sure all constituent components are simple.</span></div><div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a>() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a5530b2f8f01fac9e6e73fd29a65d4127">kSimpleComponent</a>);</div><div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0) {</div><div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;      <span class="comment">// make sure all the internal dimensions match up.</span></div><div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa5083adaff49881915d61ebf045e96db">InputDim</a>() ==</div><div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;                   <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>-1]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#af97474cce492a0b8305e8ec2c798509b">OutputDim</a>());</div><div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;    }</div><div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;  }</div><div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_af97474cce492a0b8305e8ec2c798509b"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#af97474cce492a0b8305e8ec2c798509b">kaldi::nnet3::CompositeComponent::OutputDim</a></div><div class="ttdeci">virtual int32 OutputDim() const</div><div class="ttdoc">Returns output-dimension of this component. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05007">nnet-simple-component.cc:5007</a></div></div>
<div class="ttc" id="namespacekaldi_html_a34158c6c567bc6c51c90af0251395d6a"><div class="ttname"><a href="namespacekaldi.html#a34158c6c567bc6c51c90af0251395d6a">kaldi::DeletePointers</a></div><div class="ttdeci">void DeletePointers(std::vector&lt; A *&gt; *v)</div><div class="ttdoc">Deletes any non-NULL pointers in the vector v, and sets the corresponding entries of v to NULL...</div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00186">stl-utils.h:186</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aec2b32530f4dfafd1311208913a39e3a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">kaldi::nnet3::CompositeComponent::max_rows_process_</a></div><div class="ttdeci">int32 max_rows_process_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02579">nnet-simple-component.h:2579</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a5530b2f8f01fac9e6e73fd29a65d4127"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a5530b2f8f01fac9e6e73fd29a65d4127">kaldi::nnet3::kSimpleComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00038">nnet-component-itf.h:38</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aa5083adaff49881915d61ebf045e96db"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa5083adaff49881915d61ebf045e96db">kaldi::nnet3::CompositeComponent::InputDim</a></div><div class="ttdeci">virtual int32 InputDim() const</div><div class="ttdoc">Returns input-dimension of this component. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05001">nnet-simple-component.cc:5001</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_ab17c0c589e9e60ab186972b0fdf835a0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">kaldi::nnet3::CompositeComponent::Properties</a></div><div class="ttdeci">virtual int32 Properties() const</div><div class="ttdoc">Return bitmask of the component&amp;#39;s properties. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05013">nnet-simple-component.cc:5013</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4f5c35427c2657c50173313e99e3f01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4f5c35427c2657c50173313e99e3f01">&#9670;&nbsp;</a></span>InitFromConfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void InitFromConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1nnet3_1_1ConfigLine.html">ConfigLine</a> *&#160;</td>
          <td class="paramname"><em>cfl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize, from a <a class="el" href="classkaldi_1_1nnet3_1_1ConfigLine.html" title="This class is responsible for parsing input like hi-there xx=yyy a=b c empty= f-oo=Append(bar, sss) ba_z=123 bing=&#39;a b c&#39; baz=&quot;a b c d=&#39;a b&#39; e&quot; and giving you access to the fields, in this case. ">ConfigLine</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cfl</td><td>A <a class="el" href="classkaldi_1_1nnet3_1_1ConfigLine.html" title="This class is responsible for parsing input like hi-there xx=yyy a=b c empty= f-oo=Append(bar, sss) ba_z=123 bing=&#39;a b c&#39; baz=&quot;a b c d=&#39;a b&#39; e&quot; and giving you access to the fields, in this case. ">ConfigLine</a> containing any parameters that are needed for initialization. For example: "dim=100 param-stddev=0.1" </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a1f7dc9cc61293d3c7decb5bd8ea3f4d5">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05487">5487</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="stl-utils_8h_source.html#l00186">kaldi::DeletePointers()</a>, <a class="el" href="nnet-parse_8h_source.html#l00071">ConfigLine::FirstToken()</a>, <a class="el" href="nnet-parse_8cc_source.html#l00115">ConfigLine::GetValue()</a>, <a class="el" href="nnet-parse_8cc_source.html#l00198">ConfigLine::HasUnusedValues()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a1f7dc9cc61293d3c7decb5bd8ea3f4d5">Component::InitFromConfig()</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00082">kaldi::nnet3::kRandomComponent</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00038">kaldi::nnet3::kSimpleComponent</a>, <a class="el" href="nnet-component-itf_8cc_source.html#l00095">Component::NewComponentOfType()</a>, <a class="el" href="nnet-parse_8cc_source.html#l00031">ConfigLine::ParseLine()</a>, <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a3a4ff15fafe0c8c4885586fc2c36ca8a">Component::Properties()</a>, <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#ab6b6147feb5e0688469b735a6546c222">Component::Type()</a>, <a class="el" href="nnet-parse_8cc_source.html#l00206">ConfigLine::UnusedValues()</a>, and <a class="el" href="nnet-parse_8h_source.html#l00073">ConfigLine::WholeLine()</a>.</p>
<div class="fragment"><div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;                                                       {</div><div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;  int32 max_rows_process = 4096, num_components = -1;</div><div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;  cfl-&gt;GetValue(<span class="stringliteral">&quot;max-rows-process&quot;</span>, &amp;max_rows_process);</div><div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;  <span class="keywordflow">if</span> (!cfl-&gt;GetValue(<span class="stringliteral">&quot;num-components&quot;</span>, &amp;num_components) ||</div><div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;      num_components &lt; 1)</div><div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Expected num-components to be defined in &quot;</span></div><div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;CompositeComponent config line &#39;&quot;</span> &lt;&lt; cfl-&gt;WholeLine() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div><div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;  std::vector&lt;Component*&gt; components;</div><div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= num_components; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;    std::ostringstream name_stream;</div><div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;    name_stream &lt;&lt; <span class="stringliteral">&quot;component&quot;</span> &lt;&lt; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;    std::string component_config;</div><div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;    <span class="keywordflow">if</span> (!cfl-&gt;GetValue(name_stream.str(), &amp;component_config)) {</div><div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;      <a class="code" href="namespacekaldi.html#a34158c6c567bc6c51c90af0251395d6a">DeletePointers</a>(&amp;components);</div><div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Expected &#39;&quot;</span> &lt;&lt; name_stream.str() &lt;&lt; <span class="stringliteral">&quot;&#39; to be defined in &quot;</span></div><div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;CompositeComponent config line &#39;&quot;</span> &lt;&lt; cfl-&gt;WholeLine() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div><div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;    }</div><div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;    ConfigLine nested_line;</div><div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;    <span class="comment">// note: the nested line may not contain comments.</span></div><div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;    std::string component_type;</div><div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1Component.html#a0171e1571f18dc6a27c8b041de55feec">Component</a> *this_component = NULL;</div><div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;    <span class="keywordflow">if</span> (!nested_line.ParseLine(component_config) ||</div><div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;        !nested_line.GetValue(<span class="stringliteral">&quot;type&quot;</span>, &amp;component_type) ||</div><div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;        !(this_component = <a class="code" href="classkaldi_1_1nnet3_1_1Component.html#a52564bb899e61119bac38d57147cd223">NewComponentOfType</a>(component_type)) ||</div><div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;        nested_line.FirstToken() != <span class="stringliteral">&quot;&quot;</span>) {</div><div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;      <a class="code" href="namespacekaldi.html#a34158c6c567bc6c51c90af0251395d6a">DeletePointers</a>(&amp;components);</div><div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Could not parse config line for &#39;&quot;</span> &lt;&lt; name_stream.str()</div><div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;(or undefined or bad component type [type=xxx]), in &quot;</span></div><div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;CompositeComponent config line &#39;&quot;</span> &lt;&lt; cfl-&gt;WholeLine() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div><div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;    }</div><div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;    <span class="keywordflow">if</span>(this_component-&gt;Type() == <span class="stringliteral">&quot;CompositeComponent&quot;</span>) {</div><div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;      <a class="code" href="namespacekaldi.html#a34158c6c567bc6c51c90af0251395d6a">DeletePointers</a>(&amp;components);</div><div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;      <span class="keyword">delete</span> this_component;</div><div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;      <span class="comment">// This is not allowed.  If memory is too much with just one</span></div><div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;      <span class="comment">// CompositeComponent, try decreasing max-rows-process instead.</span></div><div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Found CompositeComponent nested within CompositeComponent.&quot;</span></div><div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;Nested line: &#39;&quot;</span> &lt;&lt; nested_line.WholeLine() &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span></div><div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;Toplevel CompositeComponent line &#39;&quot;</span> &lt;&lt; cfl-&gt;WholeLine()</div><div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div><div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;    }</div><div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;    this_component-&gt;InitFromConfig(&amp;nested_line);</div><div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;    int32 props = this_component-&gt;Properties();</div><div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;    <span class="keywordflow">if</span> ((props &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a7526d98193f4d5b839d6026397f6ce0b">kRandomComponent</a>) != 0 ||</div><div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;        (props &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a5530b2f8f01fac9e6e73fd29a65d4127">kSimpleComponent</a>) == 0) {</div><div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;CompositeComponent contains disallowed component type: &quot;</span></div><div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;                &lt;&lt; nested_line.WholeLine();</div><div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;    }</div><div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;    components.push_back(this_component);</div><div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;  }</div><div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;  <span class="keywordflow">if</span> (cfl-&gt;HasUnusedValues())</div><div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Could not process these elements in initializer: &quot;</span></div><div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;              &lt;&lt; cfl-&gt;UnusedValues();</div><div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;  this-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a2a436b6225464df079a21f198b8ebcfd">Init</a>(components, max_rows_process);</div><div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_a34158c6c567bc6c51c90af0251395d6a"><div class="ttname"><a href="namespacekaldi.html#a34158c6c567bc6c51c90af0251395d6a">kaldi::DeletePointers</a></div><div class="ttdeci">void DeletePointers(std::vector&lt; A *&gt; *v)</div><div class="ttdoc">Deletes any non-NULL pointers in the vector v, and sets the corresponding entries of v to NULL...</div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00186">stl-utils.h:186</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a7526d98193f4d5b839d6026397f6ce0b"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a7526d98193f4d5b839d6026397f6ce0b">kaldi::nnet3::kRandomComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00082">nnet-component-itf.h:82</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1Component_html_a0171e1571f18dc6a27c8b041de55feec"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1Component.html#a0171e1571f18dc6a27c8b041de55feec">kaldi::nnet3::Component::Component</a></div><div class="ttdeci">Component()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00396">nnet-component-itf.h:396</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a5530b2f8f01fac9e6e73fd29a65d4127"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a5530b2f8f01fac9e6e73fd29a65d4127">kaldi::nnet3::kSimpleComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00038">nnet-component-itf.h:38</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_a2a436b6225464df079a21f198b8ebcfd"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a2a436b6225464df079a21f198b8ebcfd">kaldi::nnet3::CompositeComponent::Init</a></div><div class="ttdeci">void Init(const std::vector&lt; Component *&gt; &amp;components, int32 max_rows_process)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05094">nnet-simple-component.cc:5094</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1Component_html_a52564bb899e61119bac38d57147cd223"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1Component.html#a52564bb899e61119bac38d57147cd223">kaldi::nnet3::Component::NewComponentOfType</a></div><div class="ttdeci">static Component * NewComponentOfType(const std::string &amp;type)</div><div class="ttdoc">Returns a new Component of the given type e.g. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8cc_source.html#l00095">nnet-component-itf.cc:95</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa5083adaff49881915d61ebf045e96db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5083adaff49881915d61ebf045e96db">&#9670;&nbsp;</a></span>InputDim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 InputDim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns input-dimension of this component. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a7f37d871d35c43a03324502cea308635">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05001">5001</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>
<div class="fragment"><div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;                                         {</div><div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.empty());</div><div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.front()-&gt;InputDim();</div><div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;};</div><div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3e48770a25791feb1ee5f0ebe001fdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3e48770a25791feb1ee5f0ebe001fdd">&#9670;&nbsp;</a></span>IsUpdatable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> IsUpdatable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l04992">4992</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-component-itf_8h_source.html#l00042">kaldi::nnet3::kUpdatableComponent</a>.</p>
<div class="fragment"><div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;                                           {</div><div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;  <span class="keywordflow">for</span> (std::vector&lt;Component*&gt;::const_iterator iter = <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.begin(),</div><div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;           end = <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.end(); iter != end; ++iter)</div><div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;    <span class="keywordflow">if</span> (((*iter)-&gt;Properties() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kUpdatableComponent</a>) != 0)</div><div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;}</div><div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kaldi::nnet3::kUpdatableComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00042">nnet-component-itf.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a15b5336b4413124b1fd4531f57781182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15b5336b4413124b1fd4531f57781182">&#9670;&nbsp;</a></span>NumComponents()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 NumComponents </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8h_source.html#l02558">2558</a> of file <a class="el" href="nnet-simple-component_8h_source.html">nnet-simple-component.h</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-utils_8cc_source.html#l00438">kaldi::nnet3::ConvertRepeatedToBlockAffine()</a>, and <a class="el" href="nnet-utils-test_8cc_source.html#l00082">kaldi::nnet3::UnitTestConvertRepeatedToBlockAffineComposite()</a>.</p>
<div class="fragment"><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); }</div><div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1ff16fe9504cbce1089af9cd84386405"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ff16fe9504cbce1089af9cd84386405">&#9670;&nbsp;</a></span>NumParameters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 NumParameters </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The following new virtual function returns the total dimension of the parameters in this class. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#abeffcf34bc1f700bf19a8a28fdf2ed95">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05395">5395</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00042">kaldi::nnet3::kUpdatableComponent</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00530">UpdatableComponent::NumParameters()</a>, and <a class="el" href="nnet-simple-component_8h_source.html#l02413">MaxpoolingComponent::Properties()</a>.</p>
<div class="fragment"><div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;                                              {</div><div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(this-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">IsUpdatable</a>());  <span class="comment">// or should not be called.</span></div><div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;  int32 ans = 0;</div><div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a>() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kUpdatableComponent</a>) {</div><div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a> *uc =</div><div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;          <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a>*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;      ans += uc-&gt;NumParameters();</div><div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;    }</div><div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;  }</div><div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a2af26d78825cc522c324976403bf4e4e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">kaldi::nnet3::UpdatableComponent::UpdatableComponent</a></div><div class="ttdeci">UpdatableComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00461">nnet-component-itf.h:461</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kaldi::nnet3::kUpdatableComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00042">nnet-component-itf.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aa3e48770a25791feb1ee5f0ebe001fdd"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">kaldi::nnet3::CompositeComponent::IsUpdatable</a></div><div class="ttdeci">bool IsUpdatable() const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l04992">nnet-simple-component.cc:4992</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_ab17c0c589e9e60ab186972b0fdf835a0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">kaldi::nnet3::CompositeComponent::Properties</a></div><div class="ttdeci">virtual int32 Properties() const</div><div class="ttdoc">Return bitmask of the component&amp;#39;s properties. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05013">nnet-simple-component.cc:5013</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af97474cce492a0b8305e8ec2c798509b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af97474cce492a0b8305e8ec2c798509b">&#9670;&nbsp;</a></span>OutputDim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 OutputDim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns output-dimension of this component. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#ac0f2f034a884363d4e0694c62ea8a764">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05007">5007</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>
<div class="fragment"><div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;                                          {</div><div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.empty());</div><div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.back()-&gt;OutputDim();</div><div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;};</div><div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a69a59272c763dc9372ad7d0671a87dad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69a59272c763dc9372ad7d0671a87dad">&#9670;&nbsp;</a></span>PerturbParams()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PerturbParams </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>stddev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is to be used in testing. </p>
<p>It adds unit noise times "stddev" to the parameters of the component. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#af8524a3f9d683293269f46e3cc54b285">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05342">5342</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00042">kaldi::nnet3::kUpdatableComponent</a>, <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#af8524a3f9d683293269f46e3cc54b285">UpdatableComponent::PerturbParams()</a>, and <a class="el" href="nnet-simple-component_8h_source.html#l02413">MaxpoolingComponent::Properties()</a>.</p>
<div class="fragment"><div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;                                                       {</div><div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(this-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">IsUpdatable</a>());  <span class="comment">// or should not be called.</span></div><div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a>() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kUpdatableComponent</a>) {</div><div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a> *uc =</div><div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;          <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a>*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;      uc-&gt;PerturbParams(stddev);</div><div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;    }</div><div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;  }</div><div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a2af26d78825cc522c324976403bf4e4e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">kaldi::nnet3::UpdatableComponent::UpdatableComponent</a></div><div class="ttdeci">UpdatableComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00461">nnet-component-itf.h:461</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kaldi::nnet3::kUpdatableComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00042">nnet-component-itf.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aa3e48770a25791feb1ee5f0ebe001fdd"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">kaldi::nnet3::CompositeComponent::IsUpdatable</a></div><div class="ttdeci">bool IsUpdatable() const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l04992">nnet-simple-component.cc:4992</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_ab17c0c589e9e60ab186972b0fdf835a0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">kaldi::nnet3::CompositeComponent::Properties</a></div><div class="ttdeci">virtual int32 Properties() const</div><div class="ttdoc">Return bitmask of the component&amp;#39;s properties. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05013">nnet-simple-component.cc:5013</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f1f1b05a170bd81a544caefe1acb040"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f1f1b05a170bd81a544caefe1acb040">&#9670;&nbsp;</a></span>Propagate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * Propagate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a> *&#160;</td>
          <td class="paramname"><em>indexes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Propagate function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">indexes</td><td>A pointer to some information output by this class's PrecomputeIndexes function (will be NULL for simple components, i.e. those that don't do things like splicing). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">in</td><td>The input to this component. Num-columns == <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa5083adaff49881915d61ebf045e96db" title="Returns input-dimension of this component. ">InputDim()</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>The output of this component. Num-columns == <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#af97474cce492a0b8305e8ec2c798509b" title="Returns output-dimension of this component. ">OutputDim()</a>. Note: output of this component will be added to the initial value of "out" if <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0" title="Return bitmask of the component&#39;s properties. ">Properties()</a>&amp;kPropagateAdds != 0; otherwise the output will be set and the initial value ignored. Each <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a> chooses whether it is more convenient implementation-wise to add or set, and the calling code has to deal with it. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Normally returns NULL, but may return a non-NULL value for components which have the flag kUsesMemo set. This value will be passed into the corresponding Backprop routine. </dd></dl>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a342467ad10ff8535abe96768bdf27958">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05047">5047</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l04605">MaxpoolingComponent::InputDim()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00053">kaldi::nnet3::kPropagateAdds</a>, <a class="el" href="matrix-common_8h_source.html#l00038">kaldi::kSetZero</a>, <a class="el" href="matrix-common_8h_source.html#l00039">kaldi::kUndefined</a>, <a class="el" href="cu-matrix_8h_source.html#l00215">CuMatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="cu-matrix_8h_source.html#l00214">CuMatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l04622">MaxpoolingComponent::OutputDim()</a>, and <a class="el" href="nnet-simple-component_8cc_source.html#l04721">MaxpoolingComponent::Propagate()</a>.</p>
<div class="fragment"><div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;                                        {</div><div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(in.NumRows() == out-&gt;NumRows() &amp;&amp; in.NumCols() == <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa5083adaff49881915d61ebf045e96db">InputDim</a>() &amp;&amp;</div><div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;               out-&gt;NumCols() == <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#af97474cce492a0b8305e8ec2c798509b">OutputDim</a>());</div><div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;  int32 num_rows = in.NumRows(),</div><div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;      num_components = <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size();</div><div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">max_rows_process_</a> &gt; 0 &amp;&amp; num_rows &gt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">max_rows_process_</a>) {</div><div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;    <span class="comment">// recurse and process smaller parts of the data, to save memory.</span></div><div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;    <span class="keywordflow">for</span> (int32 row_offset = 0; row_offset &lt; num_rows;</div><div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;         row_offset += <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">max_rows_process_</a>) {</div><div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;      int32 this_num_rows = std::min&lt;int32&gt;(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">max_rows_process_</a>,</div><div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;                                            num_rows - row_offset);</div><div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;      <span class="keyword">const</span> CuSubMatrix&lt;BaseFloat&gt; in_part(in, row_offset, this_num_rows,</div><div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;                                           0, in.NumCols());</div><div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;      CuSubMatrix&lt;BaseFloat&gt; out_part(*out, row_offset, this_num_rows,</div><div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;                                      0, out-&gt;NumCols());</div><div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;      this-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a8f1f1b05a170bd81a544caefe1acb040">Propagate</a>(NULL, in_part, &amp;out_part);</div><div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;    }</div><div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;  }</div><div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;  std::vector&lt;CuMatrix&lt;BaseFloat&gt; &gt; intermediate_outputs(num_components - 1);</div><div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_components; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1 &lt; num_components) {</div><div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;      <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80b">MatrixResizeType</a> resize_type =</div><div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;          ((<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;Properties() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a5180ca55eb0162c68740d51295d056c7">kPropagateAdds</a>) ?</div><div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;           <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a> : <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div><div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;      intermediate_outputs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].Resize(num_rows, <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#af97474cce492a0b8305e8ec2c798509b">OutputDim</a>(),</div><div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;                                     resize_type, <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a8bcd65df8772aebda0be91c9134c2223">GetStrideType</a>(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;    }</div><div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;    <span class="keyword">const</span> CuMatrixBase&lt;BaseFloat&gt; &amp;this_in = (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0 ? in :</div><div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;                                              intermediate_outputs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>-1]);</div><div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;    CuMatrixBase&lt;BaseFloat&gt; *this_out = (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1 == num_components ?</div><div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;                                         out : &amp;(intermediate_outputs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]));</div><div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;    <span class="keywordtype">void</span> *memo =  <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;Propagate(NULL, this_in, this_out);</div><div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;    <span class="comment">// we&#39;ll re-do the forward propagation in the backprop, and we can</span></div><div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;    <span class="comment">// regenerate any memos there, so no need to keep them.</span></div><div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;    <span class="keywordflow">if</span> (memo != NULL)</div><div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;DeleteMemo(memo);</div><div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0)</div><div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;      intermediate_outputs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>-1].Resize(0, 0);</div><div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;  }</div><div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_af97474cce492a0b8305e8ec2c798509b"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#af97474cce492a0b8305e8ec2c798509b">kaldi::nnet3::CompositeComponent::OutputDim</a></div><div class="ttdeci">virtual int32 OutputDim() const</div><div class="ttdoc">Returns output-dimension of this component. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05007">nnet-simple-component.cc:5007</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00039">matrix-common.h:39</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80b"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80b">kaldi::MatrixResizeType</a></div><div class="ttdeci">MatrixResizeType</div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00037">matrix-common.h:37</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aec2b32530f4dfafd1311208913a39e3a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">kaldi::nnet3::CompositeComponent::max_rows_process_</a></div><div class="ttdeci">int32 max_rows_process_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02579">nnet-simple-component.h:2579</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_a8bcd65df8772aebda0be91c9134c2223"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a8bcd65df8772aebda0be91c9134c2223">kaldi::nnet3::CompositeComponent::GetStrideType</a></div><div class="ttdeci">MatrixStrideType GetStrideType(int32 i) const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05035">nnet-simple-component.cc:5035</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a5180ca55eb0162c68740d51295d056c7"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a5180ca55eb0162c68740d51295d056c7">kaldi::nnet3::kPropagateAdds</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00053">nnet-component-itf.h:53</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aa5083adaff49881915d61ebf045e96db"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa5083adaff49881915d61ebf045e96db">kaldi::nnet3::CompositeComponent::InputDim</a></div><div class="ttdeci">virtual int32 InputDim() const</div><div class="ttdoc">Returns input-dimension of this component. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05001">nnet-simple-component.cc:5001</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_a8f1f1b05a170bd81a544caefe1acb040"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a8f1f1b05a170bd81a544caefe1acb040">kaldi::nnet3::CompositeComponent::Propagate</a></div><div class="ttdeci">virtual void * Propagate(const ComponentPrecomputedIndexes *indexes, const CuMatrixBase&lt; BaseFloat &gt; &amp;in, CuMatrixBase&lt; BaseFloat &gt; *out) const</div><div class="ttdoc">Propagate function. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05047">nnet-simple-component.cc:5047</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kaldi::kSetZero</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00038">matrix-common.h:38</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab17c0c589e9e60ab186972b0fdf835a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab17c0c589e9e60ab186972b0fdf835a0">&#9670;&nbsp;</a></span>Properties()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 Properties </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return bitmask of the component's properties. </p>
<p>These properties depend only on the component's type. See enum ComponentProperties. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a3a4ff15fafe0c8c4885586fc2c36ca8a">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05013">5013</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00061">kaldi::nnet3::kBackpropAdds</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00065">kaldi::nnet3::kBackpropNeedsInput</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00067">kaldi::nnet3::kBackpropNeedsOutput</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00075">kaldi::nnet3::kInputContiguous</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00077">kaldi::nnet3::kOutputContiguous</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00053">kaldi::nnet3::kPropagateAdds</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00038">kaldi::nnet3::kSimpleComponent</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00071">kaldi::nnet3::kStoresStats</a>, and <a class="el" href="nnet-component-itf_8h_source.html#l00042">kaldi::nnet3::kUpdatableComponent</a>.</p>
<div class="fragment"><div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;                                           {</div><div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.empty());</div><div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;  int32 last_component_properties = <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.back()-&gt;Properties(),</div><div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;      first_component_properties = <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.front()-&gt;Properties();</div><div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;  <span class="comment">// We always assume backprop needs the input, as this would be necessary to</span></div><div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;  <span class="comment">// get the activations at intermediate layers, if these were not needed in</span></div><div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;  <span class="comment">// backprop, there would be no reason to use a CompositeComponent.</span></div><div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;  int32 ans = <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a5530b2f8f01fac9e6e73fd29a65d4127">kSimpleComponent</a> | <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3adac6588b2ef2e8b52936718cf97263e7">kBackpropNeedsInput</a> |</div><div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;      (last_component_properties &amp;</div><div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;       (<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a5180ca55eb0162c68740d51295d056c7">kPropagateAdds</a>|<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2a37e781d9be4e2cb09699a840dde841">kBackpropNeedsOutput</a>|<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3ab8a5f348ba3b3b42e8943e20b1675dc9">kOutputContiguous</a>)) |</div><div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;       (first_component_properties &amp;</div><div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;        (<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3acda3bbc91bd09631b18fdc57376c2b90">kBackpropAdds</a>|<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2df016ee6a8dfbdac91f5e53f3662a94">kInputContiguous</a>)) |</div><div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;       (<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">IsUpdatable</a>() ? <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kUpdatableComponent</a> : 0);</div><div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;  <span class="comment">// note, we don&#39;t return the kStoresStats property because that function is</span></div><div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;  <span class="comment">// not implemented; instead, for efficiency, we call StoreStats() on any</span></div><div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;  <span class="comment">// sub-components as part of the backprop phase.</span></div><div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;  <span class="keywordflow">if</span> (last_component_properties &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3affff5abfeafd5643bee15f1daafe6827">kStoresStats</a>)</div><div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;    ans |= <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2a37e781d9be4e2cb09699a840dde841">kBackpropNeedsOutput</a>;</div><div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;};</div><div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3ab8a5f348ba3b3b42e8943e20b1675dc9"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3ab8a5f348ba3b3b42e8943e20b1675dc9">kaldi::nnet3::kOutputContiguous</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00077">nnet-component-itf.h:77</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kaldi::nnet3::kUpdatableComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00042">nnet-component-itf.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aa3e48770a25791feb1ee5f0ebe001fdd"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">kaldi::nnet3::CompositeComponent::IsUpdatable</a></div><div class="ttdeci">bool IsUpdatable() const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l04992">nnet-simple-component.cc:4992</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a2a37e781d9be4e2cb09699a840dde841"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2a37e781d9be4e2cb09699a840dde841">kaldi::nnet3::kBackpropNeedsOutput</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00067">nnet-component-itf.h:67</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a5530b2f8f01fac9e6e73fd29a65d4127"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a5530b2f8f01fac9e6e73fd29a65d4127">kaldi::nnet3::kSimpleComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00038">nnet-component-itf.h:38</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3affff5abfeafd5643bee15f1daafe6827"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3affff5abfeafd5643bee15f1daafe6827">kaldi::nnet3::kStoresStats</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00071">nnet-component-itf.h:71</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3adac6588b2ef2e8b52936718cf97263e7"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3adac6588b2ef2e8b52936718cf97263e7">kaldi::nnet3::kBackpropNeedsInput</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00065">nnet-component-itf.h:65</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a5180ca55eb0162c68740d51295d056c7"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a5180ca55eb0162c68740d51295d056c7">kaldi::nnet3::kPropagateAdds</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00053">nnet-component-itf.h:53</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a2df016ee6a8dfbdac91f5e53f3662a94"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2df016ee6a8dfbdac91f5e53f3662a94">kaldi::nnet3::kInputContiguous</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00075">nnet-component-itf.h:75</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3acda3bbc91bd09631b18fdc57376c2b90"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3acda3bbc91bd09631b18fdc57376c2b90">kaldi::nnet3::kBackpropAdds</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00061">nnet-component-itf.h:61</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8e7d2790fc7e94fe9780ccc937de1270"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e7d2790fc7e94fe9780ccc937de1270">&#9670;&nbsp;</a></span>Read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Read </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>is</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>binary</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read function (used after we know the type of the <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a>); accepts input that is missing the token that describes the component type, in case it has already been consumed. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a5d1c1c5364c25160bfef9dda52480cf5">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05113">5113</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-descriptor_8cc_source.html#l00045">kaldi::nnet3::ExpectToken()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="io-funcs-inl_8h_source.html#l00055">kaldi::ReadBasicType()</a>, <a class="el" href="nnet-component-itf_8cc_source.html#l00081">Component::ReadNew()</a>, and <a class="el" href="io-funcs_8cc_source.html#l00154">kaldi::ReadToken()</a>.</p>
<div class="fragment"><div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;                                                         {</div><div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;  <span class="comment">// Because we didn&#39;t previously write out the learning rate,</span></div><div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;  <span class="comment">// we need some temporary code.</span></div><div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;  int32 max_rows_process;</div><div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">false</span>) {</div><div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a34e4f5bb2347784301fead47cc6d5008">ReadUpdatableCommon</a>(is, binary);</div><div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet3.html#a41114607233f11aab89539abf08cf922">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;MaxRowsProcess&gt;&quot;</span>);</div><div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;    <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;max_rows_process);</div><div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;  } <span class="keywordflow">else</span> {  <span class="comment">// temporary code.</span></div><div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;    std::string token;</div><div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;    <a class="code" href="group__io__funcs__basic.html#gacbf9367cd910befefa0bc98055979bea">ReadToken</a>(is, binary, &amp;token);</div><div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;    <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;&lt;CompositeComponent&gt;&quot;</span>) {</div><div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;      <span class="comment">// if the first token is the opening tag, then</span></div><div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;      <span class="comment">// ignore it and get the next tag.</span></div><div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;      <a class="code" href="group__io__funcs__basic.html#gacbf9367cd910befefa0bc98055979bea">ReadToken</a>(is, binary, &amp;token);</div><div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;    }</div><div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;    <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;&lt;LearningRateFactor&gt;&quot;</span>) {</div><div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;      <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;<a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a7b609dd2ecd50c6165f783395bcd4468">learning_rate_factor_</a>);</div><div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;      <a class="code" href="group__io__funcs__basic.html#gacbf9367cd910befefa0bc98055979bea">ReadToken</a>(is, binary, &amp;token);</div><div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a7b609dd2ecd50c6165f783395bcd4468">learning_rate_factor_</a> = 1.0;</div><div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;    }</div><div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;    <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;&lt;IsGradient&gt;&quot;</span>) {</div><div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;      <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;<a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">is_gradient_</a>);</div><div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;      <a class="code" href="group__io__funcs__basic.html#gacbf9367cd910befefa0bc98055979bea">ReadToken</a>(is, binary, &amp;token);</div><div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">is_gradient_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;    }</div><div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;    <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;&lt;LearningRate&gt;&quot;</span>) {</div><div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;      <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;<a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">learning_rate_</a>);</div><div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;      <a class="code" href="group__io__funcs__basic.html#gacbf9367cd910befefa0bc98055979bea">ReadToken</a>(is, binary, &amp;token);</div><div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;    }</div><div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;    <span class="keywordflow">if</span> (token != <span class="stringliteral">&quot;&lt;MaxRowsProcess&gt;&quot;</span>) {</div><div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Expected token &lt;MaxRowsProcess&gt;, got &quot;</span></div><div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;                &lt;&lt; token;</div><div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;    }</div><div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;    <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;max_rows_process);</div><div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;  }</div><div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3.html#a41114607233f11aab89539abf08cf922">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;NumComponents&gt;&quot;</span>);</div><div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;  int32 num_components;</div><div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;num_components); <span class="comment">// Read dimension.</span></div><div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;  <span class="keywordflow">if</span> (num_components &lt; 0 || num_components &gt; 100000)</div><div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Bad num-components&quot;</span>;</div><div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;  std::vector&lt;Component*&gt; components(num_components);</div><div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_components; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;    components[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="classkaldi_1_1nnet3_1_1Component.html#a4ddbc3371d68afbe87908b87b8c0a6ae">ReadNew</a>(is, binary);</div><div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a2a436b6225464df079a21f198b8ebcfd">Init</a>(components, max_rows_process);</div><div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3.html#a41114607233f11aab89539abf08cf922">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;/CompositeComponent&gt;&quot;</span>);</div><div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;}</div><div class="ttc" id="group__io__funcs__basic_html_ga1bd1af0ef712b76f2332febcec8d095a"><div class="ttname"><a href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">kaldi::ReadBasicType</a></div><div class="ttdeci">void ReadBasicType(std::istream &amp;is, bool binary, T *t)</div><div class="ttdoc">ReadBasicType is the name of the read function for bool, integer types, and floating-point types...</div><div class="ttdef"><b>Definition:</b> <a href="io-funcs-inl_8h_source.html#l00055">io-funcs-inl.h:55</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_gacbf9367cd910befefa0bc98055979bea"><div class="ttname"><a href="group__io__funcs__basic.html#gacbf9367cd910befefa0bc98055979bea">kaldi::ReadToken</a></div><div class="ttdeci">void ReadToken(std::istream &amp;is, bool binary, std::string *str)</div><div class="ttdoc">ReadToken gets the next token and puts it in str (exception on failure). </div><div class="ttdef"><b>Definition:</b> <a href="io-funcs_8cc_source.html#l00154">io-funcs.cc:154</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a41114607233f11aab89539abf08cf922"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a41114607233f11aab89539abf08cf922">kaldi::nnet3::ExpectToken</a></div><div class="ttdeci">static void ExpectToken(const std::string &amp;token, const std::string &amp;what_we_are_parsing, const std::string **next_token)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-descriptor_8cc_source.html#l00045">nnet-descriptor.cc:45</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_abef30da8aa0328dd5db955ce0b2a3466"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">kaldi::nnet3::UpdatableComponent::learning_rate_</a></div><div class="ttdeci">BaseFloat learning_rate_</div><div class="ttdoc">learning rate (typically 0.0..0.01) </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00559">nnet-component-itf.h:559</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a34e4f5bb2347784301fead47cc6d5008"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a34e4f5bb2347784301fead47cc6d5008">kaldi::nnet3::UpdatableComponent::ReadUpdatableCommon</a></div><div class="ttdeci">std::string ReadUpdatableCommon(std::istream &amp;is, bool binary)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8cc_source.html#l00254">nnet-component-itf.cc:254</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1Component_html_a4ddbc3371d68afbe87908b87b8c0a6ae"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1Component.html#a4ddbc3371d68afbe87908b87b8c0a6ae">kaldi::nnet3::Component::ReadNew</a></div><div class="ttdeci">static Component * ReadNew(std::istream &amp;is, bool binary)</div><div class="ttdoc">Read component from stream (works out its type). Dies on error. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8cc_source.html#l00081">nnet-component-itf.cc:81</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_a2a436b6225464df079a21f198b8ebcfd"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a2a436b6225464df079a21f198b8ebcfd">kaldi::nnet3::CompositeComponent::Init</a></div><div class="ttdeci">void Init(const std::vector&lt; Component *&gt; &amp;components, int32 max_rows_process)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05094">nnet-simple-component.cc:5094</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a7b609dd2ecd50c6165f783395bcd4468"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a7b609dd2ecd50c6165f783395bcd4468">kaldi::nnet3::UpdatableComponent::learning_rate_factor_</a></div><div class="ttdeci">BaseFloat learning_rate_factor_</div><div class="ttdoc">learning rate factor (normally 1.0, but can be set to another &lt; value so that when &lt; you call SetLear...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00560">nnet-component-itf.h:560</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a95a4abdec65e2b9a9dc13725b6879cb9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">kaldi::nnet3::UpdatableComponent::is_gradient_</a></div><div class="ttdeci">bool is_gradient_</div><div class="ttdoc">True if this component is to be treated as a gradient rather than as parameters. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00566">nnet-component-itf.h:566</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5a4fc4a0524ae8957baf45b8cb168843"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a4fc4a0524ae8957baf45b8cb168843">&#9670;&nbsp;</a></span>Scale()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Scale </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>scale</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This virtual function when called on &ndash; an <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a> scales the parameters by "scale" when called by an <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a>. </p>
<p>&ndash; a Nonlinear component (or another component that stores stats, like <a class="el" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html">BatchNormComponent</a>)&ndash; it relates to scaling activation stats, not parameters. Otherwise it will normally do nothing. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a750ca3e44a00898afea53b54697226ba">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05326">5326</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="nnet-component-itf_8h_source.html#l00360">Component::Scale()</a>.</p>
<div class="fragment"><div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;                                              {</div><div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a5a4fc4a0524ae8957baf45b8cb168843">Scale</a>(scale);</div><div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_a5a4fc4a0524ae8957baf45b8cb168843"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a5a4fc4a0524ae8957baf45b8cb168843">kaldi::nnet3::CompositeComponent::Scale</a></div><div class="ttdeci">virtual void Scale(BaseFloat scale)</div><div class="ttdoc">This virtual function when called on – an UpdatableComponent scales the parameters by &quot;scale&quot; when c...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05326">nnet-simple-component.cc:5326</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3fc4193e519744ccd6a1624d31419d83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fc4193e519744ccd6a1624d31419d83">&#9670;&nbsp;</a></span>SetActualLearningRate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SetActualLearningRate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>lrate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the learning rate directly, bypassing learning_rate_factor_. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#afe5023a317ed0865367180c75877f866">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05369">5369</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00042">kaldi::nnet3::kUpdatableComponent</a>, <a class="el" href="nnet-simple-component_8h_source.html#l02413">MaxpoolingComponent::Properties()</a>, and <a class="el" href="nnet-component-itf_8h_source.html#l00483">UpdatableComponent::SetActualLearningRate()</a>.</p>
<div class="fragment"><div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;                                                              {</div><div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(this-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">IsUpdatable</a>());  <span class="comment">// or should not be called.</span></div><div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#afe5023a317ed0865367180c75877f866">UpdatableComponent::SetActualLearningRate</a>(lrate);</div><div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a>() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kUpdatableComponent</a>) {</div><div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a> *uc =</div><div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;          <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a>*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;      uc-&gt;SetActualLearningRate(lrate);</div><div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;    }</div><div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;  }</div><div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a2af26d78825cc522c324976403bf4e4e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">kaldi::nnet3::UpdatableComponent::UpdatableComponent</a></div><div class="ttdeci">UpdatableComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00461">nnet-component-itf.h:461</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kaldi::nnet3::kUpdatableComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00042">nnet-component-itf.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aa3e48770a25791feb1ee5f0ebe001fdd"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">kaldi::nnet3::CompositeComponent::IsUpdatable</a></div><div class="ttdeci">bool IsUpdatable() const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l04992">nnet-simple-component.cc:4992</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_afe5023a317ed0865367180c75877f866"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#afe5023a317ed0865367180c75877f866">kaldi::nnet3::UpdatableComponent::SetActualLearningRate</a></div><div class="ttdeci">virtual void SetActualLearningRate(BaseFloat lrate)</div><div class="ttdoc">Sets the learning rate directly, bypassing learning_rate_factor_. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00483">nnet-component-itf.h:483</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_ab17c0c589e9e60ab186972b0fdf835a0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">kaldi::nnet3::CompositeComponent::Properties</a></div><div class="ttdeci">virtual int32 Properties() const</div><div class="ttdoc">Return bitmask of the component&amp;#39;s properties. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05013">nnet-simple-component.cc:5013</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a494285f709381c37bd3726b31d7fe50f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a494285f709381c37bd3726b31d7fe50f">&#9670;&nbsp;</a></span>SetAsGradient()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SetAsGradient </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets is_gradient_ to true and sets learning_rate_ to 1, ignoring learning_rate_factor_. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a59a054b2e21fc81601d0eeebd6dc578a">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05382">5382</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00042">kaldi::nnet3::kUpdatableComponent</a>, <a class="el" href="nnet-simple-component_8h_source.html#l02413">MaxpoolingComponent::Properties()</a>, and <a class="el" href="nnet-component-itf_8h_source.html#l00487">UpdatableComponent::SetAsGradient()</a>.</p>
<div class="fragment"><div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;                                       {</div><div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(this-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">IsUpdatable</a>());  <span class="comment">// or should not be called.</span></div><div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a59a054b2e21fc81601d0eeebd6dc578a">UpdatableComponent::SetAsGradient</a>();</div><div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a>() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kUpdatableComponent</a>) {</div><div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a> *uc =</div><div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;          <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a>*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;      uc-&gt;SetAsGradient();</div><div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;    }</div><div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;  }</div><div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a2af26d78825cc522c324976403bf4e4e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">kaldi::nnet3::UpdatableComponent::UpdatableComponent</a></div><div class="ttdeci">UpdatableComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00461">nnet-component-itf.h:461</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kaldi::nnet3::kUpdatableComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00042">nnet-component-itf.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aa3e48770a25791feb1ee5f0ebe001fdd"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">kaldi::nnet3::CompositeComponent::IsUpdatable</a></div><div class="ttdeci">bool IsUpdatable() const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l04992">nnet-simple-component.cc:4992</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a59a054b2e21fc81601d0eeebd6dc578a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a59a054b2e21fc81601d0eeebd6dc578a">kaldi::nnet3::UpdatableComponent::SetAsGradient</a></div><div class="ttdeci">virtual void SetAsGradient()</div><div class="ttdoc">Sets is_gradient_ to true and sets learning_rate_ to 1, ignoring learning_rate_factor_. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00487">nnet-component-itf.h:487</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_ab17c0c589e9e60ab186972b0fdf835a0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">kaldi::nnet3::CompositeComponent::Properties</a></div><div class="ttdeci">virtual int32 Properties() const</div><div class="ttdoc">Return bitmask of the component&amp;#39;s properties. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05013">nnet-simple-component.cc:5013</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a919d6e4e3d42713adcd6f5432561dfcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a919d6e4e3d42713adcd6f5432561dfcb">&#9670;&nbsp;</a></span>SetComponent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetComponent </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *&#160;</td>
          <td class="paramname"><em>component</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the ith component. </p>
<p>After this call, <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html" title="CompositeComponent is a component representing a sequence of [simple] components. ...">CompositeComponent</a> owns the reference to the argument component. Frees the previous ith component. </p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05547">5547</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-utils_8cc_source.html#l00438">kaldi::nnet3::ConvertRepeatedToBlockAffine()</a>.</p>
<div class="fragment"><div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;                                                                   {</div><div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(static_cast&lt;size_t&gt;(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size());</div><div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;  <span class="keyword">delete</span> <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;  components_[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = component;</div><div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aad585cf712432af84b9629ba430350d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad585cf712432af84b9629ba430350d8">&#9670;&nbsp;</a></span>SetUnderlyingLearningRate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SetUnderlyingLearningRate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>lrate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the learning rate of gradient descent- gets multiplied by learning_rate_factor_. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a1457bf90197b0fcc510dc52a632eedd3">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05353">5353</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00042">kaldi::nnet3::kUpdatableComponent</a>, <a class="el" href="nnet-simple-component_8h_source.html#l02413">MaxpoolingComponent::Properties()</a>, and <a class="el" href="nnet-component-itf_8h_source.html#l00478">UpdatableComponent::SetUnderlyingLearningRate()</a>.</p>
<div class="fragment"><div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;                                                                  {</div><div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(this-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">IsUpdatable</a>());  <span class="comment">// or should not be called.</span></div><div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a1457bf90197b0fcc510dc52a632eedd3">UpdatableComponent::SetUnderlyingLearningRate</a>(lrate);</div><div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;</div><div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;  <span class="comment">// apply any learning-rate-factor that&#39;s set at this level (ill-advised, but</span></div><div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;  <span class="comment">// we&#39;ll do it.)</span></div><div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> effective_lrate = <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a05c05e189447ef40d81ac40494668d8a">LearningRate</a>();</div><div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a>() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kUpdatableComponent</a>) {</div><div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a> *uc =</div><div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;          <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a>*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;      uc-&gt;SetUnderlyingLearningRate(effective_lrate);</div><div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;    }</div><div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;  }</div><div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a2af26d78825cc522c324976403bf4e4e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">kaldi::nnet3::UpdatableComponent::UpdatableComponent</a></div><div class="ttdeci">UpdatableComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00461">nnet-component-itf.h:461</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kaldi::nnet3::kUpdatableComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00042">nnet-component-itf.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aa3e48770a25791feb1ee5f0ebe001fdd"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">kaldi::nnet3::CompositeComponent::IsUpdatable</a></div><div class="ttdeci">bool IsUpdatable() const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l04992">nnet-simple-component.cc:4992</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_ab17c0c589e9e60ab186972b0fdf835a0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">kaldi::nnet3::CompositeComponent::Properties</a></div><div class="ttdeci">virtual int32 Properties() const</div><div class="ttdoc">Return bitmask of the component&amp;#39;s properties. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05013">nnet-simple-component.cc:5013</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a1457bf90197b0fcc510dc52a632eedd3"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a1457bf90197b0fcc510dc52a632eedd3">kaldi::nnet3::UpdatableComponent::SetUnderlyingLearningRate</a></div><div class="ttdeci">virtual void SetUnderlyingLearningRate(BaseFloat lrate)</div><div class="ttdoc">Sets the learning rate of gradient descent- gets multiplied by learning_rate_factor_. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00478">nnet-component-itf.h:478</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a05c05e189447ef40d81ac40494668d8a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a05c05e189447ef40d81ac40494668d8a">kaldi::nnet3::UpdatableComponent::LearningRate</a></div><div class="ttdeci">BaseFloat LearningRate() const</div><div class="ttdoc">Gets the learning rate to be used in gradient descent. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00505">nnet-component-itf.h:505</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af2d951f58073f362411ee482aa469975"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2d951f58073f362411ee482aa469975">&#9670;&nbsp;</a></span>Type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string Type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a string such as "SigmoidComponent", describing the type of the object. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#ab6b6147feb5e0688469b735a6546c222">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8h_source.html#l02506">2506</a> of file <a class="el" href="nnet-simple-component_8h_source.html">nnet-simple-component.h</a>.</p>

<p class="reference">References <a class="el" href="nnet-component-itf_8h_source.html#l00370">Component::Add()</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l00062">PnormComponent::Backprop()</a>, <a class="el" href="nnet-utils_8cc_source.html#l00250">kaldi::nnet3::DotProduct()</a>, <a class="el" href="nnet-utils_8cc_source.html#l00423">kaldi::nnet3::FreezeNaturalGradient()</a>, <a class="el" href="nnet-utils_8cc_source.html#l00350">kaldi::nnet3::NumParameters()</a>, <a class="el" href="nnet-utils_8cc_source.html#l00199">kaldi::nnet3::PerturbParams()</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l00054">PnormComponent::Propagate()</a>, <a class="el" href="nnet-simple-component_8h_source.html#l00054">PnormComponent::Properties()</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l00076">PnormComponent::Read()</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00360">Component::Scale()</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l00084">PnormComponent::Write()</a>, and <a class="el" href="nnet-component-itf_8h_source.html#l00195">Component::ZeroStats()</a>.</p>
<div class="fragment"><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;CompositeComponent&quot;</span>; }</div></div><!-- fragment -->
</div>
</div>
<a id="a8619ba84ef93f98fa42dbcd11011e3a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8619ba84ef93f98fa42dbcd11011e3a3">&#9670;&nbsp;</a></span>UnVectorize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UnVectorize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts the parameters from vector form. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a0d6ac2b7329981543aa1299d94c9556d">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05426">5426</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-vector_8h_source.html#l00063">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00042">kaldi::nnet3::kUpdatableComponent</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00530">UpdatableComponent::NumParameters()</a>, <a class="el" href="nnet-simple-component_8h_source.html#l02413">MaxpoolingComponent::Properties()</a>, and <a class="el" href="nnet-component-itf_8h_source.html#l00537">UpdatableComponent::UnVectorize()</a>.</p>
<div class="fragment"><div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;                                                                        {</div><div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;  int32 cur_offset = 0;</div><div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(this-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">IsUpdatable</a>());  <span class="comment">// or should not be called.</span></div><div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a>() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kUpdatableComponent</a>) {</div><div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a> *uc =</div><div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;          <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a>*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;      int32 this_size = uc-&gt;NumParameters();</div><div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;      SubVector&lt;BaseFloat&gt; params_range(params, cur_offset, this_size);</div><div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;      uc-&gt;UnVectorize(params_range);</div><div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;      cur_offset += this_size;</div><div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;    }</div><div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;  }</div><div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(cur_offset == params.Dim());</div><div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a2af26d78825cc522c324976403bf4e4e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">kaldi::nnet3::UpdatableComponent::UpdatableComponent</a></div><div class="ttdeci">UpdatableComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00461">nnet-component-itf.h:461</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kaldi::nnet3::kUpdatableComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00042">nnet-component-itf.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aa3e48770a25791feb1ee5f0ebe001fdd"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">kaldi::nnet3::CompositeComponent::IsUpdatable</a></div><div class="ttdeci">bool IsUpdatable() const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l04992">nnet-simple-component.cc:4992</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_ab17c0c589e9e60ab186972b0fdf835a0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">kaldi::nnet3::CompositeComponent::Properties</a></div><div class="ttdeci">virtual int32 Properties() const</div><div class="ttdoc">Return bitmask of the component&amp;#39;s properties. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05013">nnet-simple-component.cc:5013</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afa4edb6094210608b8d3923f312f5a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa4edb6094210608b8d3923f312f5a75">&#9670;&nbsp;</a></span>Vectorize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Vectorize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Turns the parameters into vector form. </p>
<p>We put the vector form on the CPU, because in the kinds of situations where we do this, we'll tend to use too much memory for the GPU. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a5b2b163b2a360e5614e308eaabb169f9">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05409">5409</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-vector_8h_source.html#l00063">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00042">kaldi::nnet3::kUpdatableComponent</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00530">UpdatableComponent::NumParameters()</a>, <a class="el" href="nnet-simple-component_8h_source.html#l02413">MaxpoolingComponent::Properties()</a>, and <a class="el" href="nnet-component-itf_8h_source.html#l00535">UpdatableComponent::Vectorize()</a>.</p>
<div class="fragment"><div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;                                                                      {</div><div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;  int32 cur_offset = 0;</div><div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(this-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">IsUpdatable</a>());  <span class="comment">// or should not be called.</span></div><div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">Properties</a>() &amp; <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kUpdatableComponent</a>) {</div><div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a> *uc =</div><div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;          <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a>*<span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;      int32 this_size = uc-&gt;NumParameters();</div><div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;      SubVector&lt;BaseFloat&gt; params_range(*params, cur_offset, this_size);</div><div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;      uc-&gt;Vectorize(&amp;params_range);</div><div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;      cur_offset += this_size;</div><div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;    }</div><div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;  }</div><div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(cur_offset == params-&gt;Dim());</div><div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a2af26d78825cc522c324976403bf4e4e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">kaldi::nnet3::UpdatableComponent::UpdatableComponent</a></div><div class="ttdeci">UpdatableComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00461">nnet-component-itf.h:461</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kaldi::nnet3::kUpdatableComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00042">nnet-component-itf.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aa3e48770a25791feb1ee5f0ebe001fdd"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aa3e48770a25791feb1ee5f0ebe001fdd">kaldi::nnet3::CompositeComponent::IsUpdatable</a></div><div class="ttdeci">bool IsUpdatable() const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l04992">nnet-simple-component.cc:4992</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_ab17c0c589e9e60ab186972b0fdf835a0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#ab17c0c589e9e60ab186972b0fdf835a0">kaldi::nnet3::CompositeComponent::Properties</a></div><div class="ttdeci">virtual int32 Properties() const</div><div class="ttdoc">Return bitmask of the component&amp;#39;s properties. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05013">nnet-simple-component.cc:5013</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a68f354fd5f096134162f01719096e6fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68f354fd5f096134162f01719096e6fc">&#9670;&nbsp;</a></span>Write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Write </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>binary</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write component to stream. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a852bc7306aaa45b284f662f1ddb1a3d5">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05173">5173</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="nnet-simple-component_8cc_source.html#l04839">MaxpoolingComponent::Write()</a>, <a class="el" href="io-funcs-inl_8h_source.html#l00034">kaldi::WriteBasicType()</a>, and <a class="el" href="io-funcs_8cc_source.html#l00134">kaldi::WriteToken()</a>.</p>
<div class="fragment"><div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;                                                                {</div><div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ae2e64ac30c475dcc5d61612524cc1eb9">WriteUpdatableCommon</a>(os, binary);  <span class="comment">// Write opening tag and learning rate.</span></div><div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;MaxRowsProcess&gt;&quot;</span>);</div><div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">max_rows_process_</a>);</div><div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;NumComponents&gt;&quot;</span>);</div><div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;  int32 num_components = <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size();</div><div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, num_components);</div><div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_components; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a68f354fd5f096134162f01719096e6fc">Write</a>(os, binary);</div><div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;/CompositeComponent&gt;&quot;</span>);</div><div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aec2b32530f4dfafd1311208913a39e3a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aec2b32530f4dfafd1311208913a39e3a">kaldi::nnet3::CompositeComponent::max_rows_process_</a></div><div class="ttdeci">int32 max_rows_process_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02579">nnet-simple-component.h:2579</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga87f1638ef3c0a3ee117178b202c2d02a"><div class="ttname"><a href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">kaldi::WriteToken</a></div><div class="ttdeci">void WriteToken(std::ostream &amp;os, bool binary, const char *token)</div><div class="ttdoc">The WriteToken functions are for writing nonempty sequences of non-space characters. </div><div class="ttdef"><b>Definition:</b> <a href="io-funcs_8cc_source.html#l00134">io-funcs.cc:134</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_ae2e64ac30c475dcc5d61612524cc1eb9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ae2e64ac30c475dcc5d61612524cc1eb9">kaldi::nnet3::UpdatableComponent::WriteUpdatableCommon</a></div><div class="ttdeci">void WriteUpdatableCommon(std::ostream &amp;is, bool binary) const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8cc_source.html#l00297">nnet-component-itf.cc:297</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga108506a9aabafd9006926aa1b47617da"><div class="ttname"><a href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">kaldi::WriteBasicType</a></div><div class="ttdeci">void WriteBasicType(std::ostream &amp;os, bool binary, T t)</div><div class="ttdoc">WriteBasicType is the name of the write function for bool, integer types, and floating-point types...</div><div class="ttdef"><b>Definition:</b> <a href="io-funcs-inl_8h_source.html#l00034">io-funcs-inl.h:34</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_a68f354fd5f096134162f01719096e6fc"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#a68f354fd5f096134162f01719096e6fc">kaldi::nnet3::CompositeComponent::Write</a></div><div class="ttdeci">virtual void Write(std::ostream &amp;os, bool binary) const</div><div class="ttdoc">Write component to stream. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05173">nnet-simple-component.cc:5173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abfee972431c5488d69a56fc1114c7cdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfee972431c5488d69a56fc1114c7cdc">&#9670;&nbsp;</a></span>ZeroStats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ZeroStats </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Components that provide an implementation of StoreStats should also provide an implementation of <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#abfee972431c5488d69a56fc1114c7cdc" title="Components that provide an implementation of StoreStats should also provide an implementation of Zero...">ZeroStats()</a>, to set those stats to zero. </p>
<p>Other components that store other types of statistics (e.g. regarding gradient clipping) should implement <a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#abfee972431c5488d69a56fc1114c7cdc" title="Components that provide an implementation of StoreStats should also provide an implementation of Zero...">ZeroStats()</a> also. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#ab162a2631e5335091d1f2bba1571e54d">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8cc_source.html#l05164">5164</a> of file <a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="nnet-component-itf_8h_source.html#l00195">Component::ZeroStats()</a>.</p>
<div class="fragment"><div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;                                   {</div><div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;  <span class="comment">// we call ZeroStats() on all components without checking their flags; this</span></div><div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;  <span class="comment">// will do nothing if the component doesn&#39;t store stats.  (components like</span></div><div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;  <span class="comment">// ReLU and sigmoid and tanh store stats on activations).</span></div><div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;   <a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">components_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1CompositeComponent.html#abfee972431c5488d69a56fc1114c7cdc">ZeroStats</a>();</div><div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_abfee972431c5488d69a56fc1114c7cdc"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#abfee972431c5488d69a56fc1114c7cdc">kaldi::nnet3::CompositeComponent::ZeroStats</a></div><div class="ttdeci">virtual void ZeroStats()</div><div class="ttdoc">Components that provide an implementation of StoreStats should also provide an implementation of Zero...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8cc_source.html#l05164">nnet-simple-component.cc:5164</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CompositeComponent_html_aef258f30bd05cd26735ddcffd33ba8b9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CompositeComponent.html#aef258f30bd05cd26735ddcffd33ba8b9">kaldi::nnet3::CompositeComponent::components_</a></div><div class="ttdeci">std::vector&lt; Component * &gt; components_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-simple-component_8h_source.html#l02580">nnet-simple-component.h:2580</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aef258f30bd05cd26735ddcffd33ba8b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef258f30bd05cd26735ddcffd33ba8b9">&#9670;&nbsp;</a></span>components_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a>*&gt; components_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8h_source.html#l02580">2580</a> of file <a class="el" href="nnet-simple-component_8h_source.html">nnet-simple-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-simple-component_8cc_source.html#l05332">CompositeComponent::Add()</a>, and <a class="el" href="nnet-simple-component_8cc_source.html#l05443">CompositeComponent::DotProduct()</a>.</p>

</div>
</div>
<a id="aec2b32530f4dfafd1311208913a39e3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec2b32530f4dfafd1311208913a39e3a">&#9670;&nbsp;</a></span>max_rows_process_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 max_rows_process_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-simple-component_8h_source.html#l02579">2579</a> of file <a class="el" href="nnet-simple-component_8h_source.html">nnet-simple-component.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>nnet3/<a class="el" href="nnet-simple-component_8h_source.html">nnet-simple-component.h</a></li>
<li>nnet3/<a class="el" href="nnet-simple-component_8cc_source.html">nnet-simple-component.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekaldi.html">kaldi</a></li><li class="navelem"><a class="el" href="namespacekaldi_1_1nnet3.html">nnet3</a></li><li class="navelem"><a class="el" href="classkaldi_1_1nnet3_1_1CompositeComponent.html">CompositeComponent</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
