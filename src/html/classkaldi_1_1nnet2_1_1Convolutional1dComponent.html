<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: Convolutional1dComponent Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classkaldi_1_1nnet2_1_1Convolutional1dComponent.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Convolutional1dComponent Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html" title="Convolutional1dComponent implements convolution over frequency axis. ">Convolutional1dComponent</a> implements convolution over frequency axis.  
 <a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_2nnet-component_8h_source.html">nnet-component.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Convolutional1dComponent:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1nnet2_1_1Convolutional1dComponent__inherit__graph.png" border="0" usemap="#Convolutional1dComponent_inherit__map" alt="Inheritance graph"/></div>
<map name="Convolutional1dComponent_inherit__map" id="Convolutional1dComponent_inherit__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Convolutional1dComponent:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1nnet2_1_1Convolutional1dComponent__coll__graph.png" border="0" usemap="#Convolutional1dComponent_coll__map" alt="Collaboration graph"/></div>
<map name="Convolutional1dComponent_coll__map" id="Convolutional1dComponent_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aebceba9975102a11569e62071619b603"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aebceba9975102a11569e62071619b603">Convolutional1dComponent</a> ()</td></tr>
<tr class="separator:aebceba9975102a11569e62071619b603"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b546e750f06188c202acbde0d0c7a47"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b546e750f06188c202acbde0d0c7a47">Convolutional1dComponent</a> (const <a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html">Convolutional1dComponent</a> &amp;component)</td></tr>
<tr class="separator:a0b546e750f06188c202acbde0d0c7a47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac81644821ad36908e24668b0ab13a2d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aac81644821ad36908e24668b0ab13a2d">Convolutional1dComponent</a> (const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;filter_params, const <a class="el" href="classkaldi_1_1CuVectorBase.html">CuVectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;bias_params, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> learning_rate)</td></tr>
<tr class="separator:aac81644821ad36908e24668b0ab13a2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5083adaff49881915d61ebf045e96db"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa5083adaff49881915d61ebf045e96db">InputDim</a> () const</td></tr>
<tr class="memdesc:aa5083adaff49881915d61ebf045e96db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get size of input vectors.  <a href="#aa5083adaff49881915d61ebf045e96db">More...</a><br /></td></tr>
<tr class="separator:aa5083adaff49881915d61ebf045e96db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af97474cce492a0b8305e8ec2c798509b"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#af97474cce492a0b8305e8ec2c798509b">OutputDim</a> () const</td></tr>
<tr class="memdesc:af97474cce492a0b8305e8ec2c798509b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get size of output vectors.  <a href="#af97474cce492a0b8305e8ec2c798509b">More...</a><br /></td></tr>
<tr class="separator:af97474cce492a0b8305e8ec2c798509b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abce3fb3191b6b175e3e76f743549e891"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#abce3fb3191b6b175e3e76f743549e891">Init</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> learning_rate, int32 input_dim, int32 output_dim, int32 patch_dim, int32 patch_step, int32 patch_stride, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> param_stddev, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> bias_stddev, <a class="el" href="classbool.html">bool</a> appended_conv)</td></tr>
<tr class="separator:abce3fb3191b6b175e3e76f743549e891"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7685e66c1a7a5b6637b5cfced69a57e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a7685e66c1a7a5b6637b5cfced69a57e5">Init</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> learning_rate, int32 patch_dim, int32 patch_step, int32 patch_stride, std::string matrix_filename, <a class="el" href="classbool.html">bool</a> appended_conv)</td></tr>
<tr class="separator:a7685e66c1a7a5b6637b5cfced69a57e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d62ac4bb7407d02d9d51a2e0163e405"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6d62ac4bb7407d02d9d51a2e0163e405">Resize</a> (int32 input_dim, int32 output_dim)</td></tr>
<tr class="separator:a6d62ac4bb7407d02d9d51a2e0163e405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a245d65d566725422b859c99bff7623f8"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a245d65d566725422b859c99bff7623f8">Info</a> () const</td></tr>
<tr class="separator:a245d65d566725422b859c99bff7623f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93cbd3cf93a0fed1d868a35ad4a32b24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a93cbd3cf93a0fed1d868a35ad4a32b24">InitFromString</a> (std::string args)</td></tr>
<tr class="memdesc:a93cbd3cf93a0fed1d868a35ad4a32b24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize, typically from a line of a config file.  <a href="#a93cbd3cf93a0fed1d868a35ad4a32b24">More...</a><br /></td></tr>
<tr class="separator:a93cbd3cf93a0fed1d868a35ad4a32b24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9261b9326e20a8d1f6a9be72c1ad66db"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a9261b9326e20a8d1f6a9be72c1ad66db">Type</a> () const</td></tr>
<tr class="separator:a9261b9326e20a8d1f6a9be72c1ad66db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa53a37e7375b5ca604d4a56f6bf3a957"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa53a37e7375b5ca604d4a56f6bf3a957">BackpropNeedsInput</a> () const</td></tr>
<tr class="separator:aa53a37e7375b5ca604d4a56f6bf3a957"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1762f5b0ed27662ea841690ed7150d69"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1762f5b0ed27662ea841690ed7150d69">BackpropNeedsOutput</a> () const</td></tr>
<tr class="separator:a1762f5b0ed27662ea841690ed7150d69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace7d241fd0c2d8eda4773cd1f1d2a815"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ace7d241fd0c2d8eda4773cd1f1d2a815">Propagate</a> (const <a class="el" href="classkaldi_1_1nnet2_1_1ChunkInfo.html">ChunkInfo</a> &amp;in_info, const <a class="el" href="classkaldi_1_1nnet2_1_1ChunkInfo.html">ChunkInfo</a> &amp;out_info, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;in, <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *out) const</td></tr>
<tr class="memdesc:ace7d241fd0c2d8eda4773cd1f1d2a815"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform forward pass propagation Input-&gt;<a class="el" href="classkaldi_1_1Output.html">Output</a>.  <a href="#ace7d241fd0c2d8eda4773cd1f1d2a815">More...</a><br /></td></tr>
<tr class="separator:ace7d241fd0c2d8eda4773cd1f1d2a815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a4fc4a0524ae8957baf45b8cb168843"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a5a4fc4a0524ae8957baf45b8cb168843">Scale</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> scale)</td></tr>
<tr class="memdesc:a5a4fc4a0524ae8957baf45b8cb168843"><td class="mdescLeft">&#160;</td><td class="mdescRight">This new virtual function scales the parameters by this amount.  <a href="#a5a4fc4a0524ae8957baf45b8cb168843">More...</a><br /></td></tr>
<tr class="separator:a5a4fc4a0524ae8957baf45b8cb168843"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79f56d86c125086a706aeefaf3c9a076"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a79f56d86c125086a706aeefaf3c9a076">Add</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> alpha, const <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html">UpdatableComponent</a> &amp;other)</td></tr>
<tr class="memdesc:a79f56d86c125086a706aeefaf3c9a076"><td class="mdescLeft">&#160;</td><td class="mdescRight">This new virtual function adds the parameters of another updatable component, times some constant, to the current parameters.  <a href="#a79f56d86c125086a706aeefaf3c9a076">More...</a><br /></td></tr>
<tr class="separator:a79f56d86c125086a706aeefaf3c9a076"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a189b8f0d24076df05d4ac78c12085297"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a189b8f0d24076df05d4ac78c12085297">Backprop</a> (const <a class="el" href="classkaldi_1_1nnet2_1_1ChunkInfo.html">ChunkInfo</a> &amp;in_info, const <a class="el" href="classkaldi_1_1nnet2_1_1ChunkInfo.html">ChunkInfo</a> &amp;out_info, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;in_value, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;out_value, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;out_deriv, <a class="el" href="classkaldi_1_1nnet2_1_1Component.html">Component</a> *to_update_in, <a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *in_deriv) const</td></tr>
<tr class="memdesc:a189b8f0d24076df05d4ac78c12085297"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform backward pass propagation of the derivative, and also either update the model (if to_update == this) or update another model or compute the model derivative (otherwise).  <a href="#a189b8f0d24076df05d4ac78c12085297">More...</a><br /></td></tr>
<tr class="separator:a189b8f0d24076df05d4ac78c12085297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a947a5e99fe5ff5534ecfbb3f987febe1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a947a5e99fe5ff5534ecfbb3f987febe1">SetZero</a> (<a class="el" href="classbool.html">bool</a> treat_as_gradient)</td></tr>
<tr class="memdesc:a947a5e99fe5ff5534ecfbb3f987febe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set parameters to zero, and if treat_as_gradient is true, we'll be treating this as a gradient so set the learning rate to 1 and make any other changes necessary (there's a variable we have to set for the MixtureProbComponent).  <a href="#a947a5e99fe5ff5534ecfbb3f987febe1">More...</a><br /></td></tr>
<tr class="separator:a947a5e99fe5ff5534ecfbb3f987febe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e7d2790fc7e94fe9780ccc937de1270"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a8e7d2790fc7e94fe9780ccc937de1270">Read</a> (std::istream &amp;is, <a class="el" href="classbool.html">bool</a> binary)</td></tr>
<tr class="separator:a8e7d2790fc7e94fe9780ccc937de1270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68f354fd5f096134162f01719096e6fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a68f354fd5f096134162f01719096e6fc">Write</a> (std::ostream &amp;os, <a class="el" href="classbool.html">bool</a> binary) const</td></tr>
<tr class="memdesc:a68f354fd5f096134162f01719096e6fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write component to stream.  <a href="#a68f354fd5f096134162f01719096e6fc">More...</a><br /></td></tr>
<tr class="separator:a68f354fd5f096134162f01719096e6fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87b95e5c043a8221ad58b2512b2d81c9"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a87b95e5c043a8221ad58b2512b2d81c9">DotProduct</a> (const <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html">UpdatableComponent</a> &amp;other) const</td></tr>
<tr class="memdesc:a87b95e5c043a8221ad58b2512b2d81c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Here, "other" is a component of the same specific type.  <a href="#a87b95e5c043a8221ad58b2512b2d81c9">More...</a><br /></td></tr>
<tr class="separator:a87b95e5c043a8221ad58b2512b2d81c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f11a4fb3396dda21cae55e81f23c750"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1nnet2_1_1Component.html">Component</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1f11a4fb3396dda21cae55e81f23c750">Copy</a> () const</td></tr>
<tr class="memdesc:a1f11a4fb3396dda21cae55e81f23c750"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy component (deep copy).  <a href="#a1f11a4fb3396dda21cae55e81f23c750">More...</a><br /></td></tr>
<tr class="separator:a1f11a4fb3396dda21cae55e81f23c750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69a59272c763dc9372ad7d0671a87dad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a69a59272c763dc9372ad7d0671a87dad">PerturbParams</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> stddev)</td></tr>
<tr class="memdesc:a69a59272c763dc9372ad7d0671a87dad"><td class="mdescLeft">&#160;</td><td class="mdescRight">We introduce a new virtual function that only applies to class <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters and contains some global param...">UpdatableComponent</a>.  <a href="#a69a59272c763dc9372ad7d0671a87dad">More...</a><br /></td></tr>
<tr class="separator:a69a59272c763dc9372ad7d0671a87dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5e04f6f5379b8b2dd93937913c1e183"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae5e04f6f5379b8b2dd93937913c1e183">SetParams</a> (const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;bias, const <a class="el" href="classkaldi_1_1MatrixBase.html">MatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;filter)</td></tr>
<tr class="separator:ae5e04f6f5379b8b2dd93937913c1e183"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c4f15223897d71aaf79d859ea39b7f7"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classkaldi_1_1CuVector.html">CuVector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a5c4f15223897d71aaf79d859ea39b7f7">BiasParams</a> ()</td></tr>
<tr class="separator:a5c4f15223897d71aaf79d859ea39b7f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8e632fb05869d446940cfc912c88088"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ad8e632fb05869d446940cfc912c88088">LinearParams</a> ()</td></tr>
<tr class="separator:ad8e632fb05869d446940cfc912c88088"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a847004d103be24374c7291a1f12e3827"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a847004d103be24374c7291a1f12e3827">GetParameterDim</a> () const</td></tr>
<tr class="memdesc:a847004d103be24374c7291a1f12e3827"><td class="mdescLeft">&#160;</td><td class="mdescRight">The following new virtual function returns the total dimension of the parameters in this class.  <a href="#a847004d103be24374c7291a1f12e3827">More...</a><br /></td></tr>
<tr class="separator:a847004d103be24374c7291a1f12e3827"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a041a0abedde66a66f7ba7ea329ec3073"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a041a0abedde66a66f7ba7ea329ec3073">Update</a> (const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;in_value, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;out_deriv)</td></tr>
<tr class="separator:a041a0abedde66a66f7ba7ea329ec3073"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html">UpdatableComponent</a></td></tr>
<tr class="memitem:a2291e94d519e3ea5a11e78c96ef39579 inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a2291e94d519e3ea5a11e78c96ef39579">UpdatableComponent</a> (const <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html">UpdatableComponent</a> &amp;other)</td></tr>
<tr class="separator:a2291e94d519e3ea5a11e78c96ef39579 inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5c7aecb7c994a88fecf6c824500cd63 inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#ae5c7aecb7c994a88fecf6c824500cd63">Init</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> learning_rate)</td></tr>
<tr class="separator:ae5c7aecb7c994a88fecf6c824500cd63 inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30ee54c8b84d1a029b8ccba15c471648 inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a30ee54c8b84d1a029b8ccba15c471648">UpdatableComponent</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> learning_rate)</td></tr>
<tr class="separator:a30ee54c8b84d1a029b8ccba15c471648 inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2af26d78825cc522c324976403bf4e4e inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a> ()</td></tr>
<tr class="separator:a2af26d78825cc522c324976403bf4e4e inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36873742fd6ae5311c593a7b437365c1 inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a36873742fd6ae5311c593a7b437365c1">~UpdatableComponent</a> ()</td></tr>
<tr class="separator:a36873742fd6ae5311c593a7b437365c1 inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cbbffc6b7aa97d5e9734b771eb59e75 inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a8cbbffc6b7aa97d5e9734b771eb59e75">SetLearningRate</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> lrate)</td></tr>
<tr class="memdesc:a8cbbffc6b7aa97d5e9734b771eb59e75 inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the learning rate of gradient descent.  <a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a8cbbffc6b7aa97d5e9734b771eb59e75">More...</a><br /></td></tr>
<tr class="separator:a8cbbffc6b7aa97d5e9734b771eb59e75 inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05c05e189447ef40d81ac40494668d8a inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a05c05e189447ef40d81ac40494668d8a">LearningRate</a> () const</td></tr>
<tr class="memdesc:a05c05e189447ef40d81ac40494668d8a inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the learning rate of gradient descent.  <a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a05c05e189447ef40d81ac40494668d8a">More...</a><br /></td></tr>
<tr class="separator:a05c05e189447ef40d81ac40494668d8a inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b2b163b2a360e5614e308eaabb169f9 inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a5b2b163b2a360e5614e308eaabb169f9">Vectorize</a> (<a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *params) const</td></tr>
<tr class="memdesc:a5b2b163b2a360e5614e308eaabb169f9 inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns the parameters into vector form.  <a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a5b2b163b2a360e5614e308eaabb169f9">More...</a><br /></td></tr>
<tr class="separator:a5b2b163b2a360e5614e308eaabb169f9 inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d6ac2b7329981543aa1299d94c9556d inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a0d6ac2b7329981543aa1299d94c9556d">UnVectorize</a> (const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;params)</td></tr>
<tr class="memdesc:a0d6ac2b7329981543aa1299d94c9556d inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts the parameters from vector form.  <a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a0d6ac2b7329981543aa1299d94c9556d">More...</a><br /></td></tr>
<tr class="separator:a0d6ac2b7329981543aa1299d94c9556d inherit pub_methods_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classkaldi_1_1nnet2_1_1Component"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classkaldi_1_1nnet2_1_1Component')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classkaldi_1_1nnet2_1_1Component.html">Component</a></td></tr>
<tr class="memitem:a0171e1571f18dc6a27c8b041de55feec inherit pub_methods_classkaldi_1_1nnet2_1_1Component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Component.html#a0171e1571f18dc6a27c8b041de55feec">Component</a> ()</td></tr>
<tr class="separator:a0171e1571f18dc6a27c8b041de55feec inherit pub_methods_classkaldi_1_1nnet2_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4731ec6cfa9bb129c889385f1be4bd9 inherit pub_methods_classkaldi_1_1nnet2_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Component.html#ac4731ec6cfa9bb129c889385f1be4bd9">Index</a> () const</td></tr>
<tr class="memdesc:ac4731ec6cfa9bb129c889385f1be4bd9 inherit pub_methods_classkaldi_1_1nnet2_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the index in the sequence of layers in the neural net; intended only to be used in debugging information.  <a href="classkaldi_1_1nnet2_1_1Component.html#ac4731ec6cfa9bb129c889385f1be4bd9">More...</a><br /></td></tr>
<tr class="separator:ac4731ec6cfa9bb129c889385f1be4bd9 inherit pub_methods_classkaldi_1_1nnet2_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48890b00b2894743455f4bdbc890d336 inherit pub_methods_classkaldi_1_1nnet2_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Component.html#a48890b00b2894743455f4bdbc890d336">SetIndex</a> (int32 index)</td></tr>
<tr class="separator:a48890b00b2894743455f4bdbc890d336 inherit pub_methods_classkaldi_1_1nnet2_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab165f6325dfcddff8101ede80e5ea4ff inherit pub_methods_classkaldi_1_1nnet2_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; int32 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Component.html#ab165f6325dfcddff8101ede80e5ea4ff">Context</a> () const</td></tr>
<tr class="memdesc:ab165f6325dfcddff8101ede80e5ea4ff inherit pub_methods_classkaldi_1_1nnet2_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a vector describing the temporal context this component requires for each frame of output, as a sorted list.  <a href="classkaldi_1_1nnet2_1_1Component.html#ab165f6325dfcddff8101ede80e5ea4ff">More...</a><br /></td></tr>
<tr class="separator:ab165f6325dfcddff8101ede80e5ea4ff inherit pub_methods_classkaldi_1_1nnet2_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f9b83d8287a4d5dd6a008d0dfef39a9 inherit pub_methods_classkaldi_1_1nnet2_1_1Component"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Component.html#a5f9b83d8287a4d5dd6a008d0dfef39a9">Propagate</a> (const <a class="el" href="classkaldi_1_1nnet2_1_1ChunkInfo.html">ChunkInfo</a> &amp;in_info, const <a class="el" href="classkaldi_1_1nnet2_1_1ChunkInfo.html">ChunkInfo</a> &amp;out_info, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;in, <a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *out) const</td></tr>
<tr class="memdesc:a5f9b83d8287a4d5dd6a008d0dfef39a9 inherit pub_methods_classkaldi_1_1nnet2_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">A non-virtual propagate function that first resizes output if necessary.  <a href="classkaldi_1_1nnet2_1_1Component.html#a5f9b83d8287a4d5dd6a008d0dfef39a9">More...</a><br /></td></tr>
<tr class="separator:a5f9b83d8287a4d5dd6a008d0dfef39a9 inherit pub_methods_classkaldi_1_1nnet2_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0df822d4b95a18b1df2529896638daeb inherit pub_methods_classkaldi_1_1nnet2_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Component.html#a0df822d4b95a18b1df2529896638daeb">~Component</a> ()</td></tr>
<tr class="separator:a0df822d4b95a18b1df2529896638daeb inherit pub_methods_classkaldi_1_1nnet2_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a3766c379ab7b83ce65ed81043d9d2353"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html">Convolutional1dComponent</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a3766c379ab7b83ce65ed81043d9d2353">operator=</a> (const <a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html">Convolutional1dComponent</a> &amp;other)</td></tr>
<tr class="separator:a3766c379ab7b83ce65ed81043d9d2353"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a14d33bff1bd60e8ec8a6af9c2a4607c2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a14d33bff1bd60e8ec8a6af9c2a4607c2">ReverseIndexes</a> (const std::vector&lt; int32 &gt; &amp;forward_indexes, int32 input_dim, std::vector&lt; std::vector&lt; int32 &gt; &gt; *backward_indexes)</td></tr>
<tr class="separator:a14d33bff1bd60e8ec8a6af9c2a4607c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcd53b228122d202e7c9bc579ca54246"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#afcd53b228122d202e7c9bc579ca54246">RearrangeIndexes</a> (const std::vector&lt; std::vector&lt; int32 &gt; &gt; &amp;in, std::vector&lt; std::vector&lt; int32 &gt; &gt; *out)</td></tr>
<tr class="separator:afcd53b228122d202e7c9bc579ca54246"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a1d93165c40ed0551395cc459acb88112"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a></td></tr>
<tr class="separator:a1d93165c40ed0551395cc459acb88112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae71d98406b0ee2f9d5e90798280626b6"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a></td></tr>
<tr class="separator:ae71d98406b0ee2f9d5e90798280626b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a069ad4823c4858c30ffaefaebcc1931f"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a></td></tr>
<tr class="separator:a069ad4823c4858c30ffaefaebcc1931f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b9960b51716b06421895f9b61d7b08f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a></td></tr>
<tr class="separator:a0b9960b51716b06421895f9b61d7b08f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80919dec61ec4f145d2b70cca6d2c306"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1CuVector.html">CuVector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a></td></tr>
<tr class="separator:a80919dec61ec4f145d2b70cca6d2c306"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e6abfd7ad2cabd9d69ebba4137f69c7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">appended_conv_</a></td></tr>
<tr class="separator:a6e6abfd7ad2cabd9d69ebba4137f69c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95a4abdec65e2b9a9dc13725b6879cb9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">is_gradient_</a></td></tr>
<tr class="separator:a95a4abdec65e2b9a9dc13725b6879cb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classkaldi_1_1nnet2_1_1Component"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classkaldi_1_1nnet2_1_1Component')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classkaldi_1_1nnet2_1_1Component.html">Component</a></td></tr>
<tr class="memitem:a4ddbc3371d68afbe87908b87b8c0a6ae inherit pub_static_methods_classkaldi_1_1nnet2_1_1Component"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classkaldi_1_1nnet2_1_1Component.html">Component</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Component.html#a4ddbc3371d68afbe87908b87b8c0a6ae">ReadNew</a> (std::istream &amp;is, <a class="el" href="classbool.html">bool</a> binary)</td></tr>
<tr class="memdesc:a4ddbc3371d68afbe87908b87b8c0a6ae inherit pub_static_methods_classkaldi_1_1nnet2_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read component from stream.  <a href="classkaldi_1_1nnet2_1_1Component.html#a4ddbc3371d68afbe87908b87b8c0a6ae">More...</a><br /></td></tr>
<tr class="separator:a4ddbc3371d68afbe87908b87b8c0a6ae inherit pub_static_methods_classkaldi_1_1nnet2_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afec8438c238836c84fccfcdb210ab765 inherit pub_static_methods_classkaldi_1_1nnet2_1_1Component"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classkaldi_1_1nnet2_1_1Component.html">Component</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Component.html#afec8438c238836c84fccfcdb210ab765">NewFromString</a> (const std::string &amp;initializer_line)</td></tr>
<tr class="memdesc:afec8438c238836c84fccfcdb210ab765 inherit pub_static_methods_classkaldi_1_1nnet2_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the <a class="el" href="classkaldi_1_1nnet2_1_1Component.html" title="Abstract class, basic element of the network, it is a box with defined inputs, outputs, and tranformation functions interface. ">Component</a> from one line that will contain first the type, e.g.  <a href="classkaldi_1_1nnet2_1_1Component.html#afec8438c238836c84fccfcdb210ab765">More...</a><br /></td></tr>
<tr class="separator:afec8438c238836c84fccfcdb210ab765 inherit pub_static_methods_classkaldi_1_1nnet2_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52564bb899e61119bac38d57147cd223 inherit pub_static_methods_classkaldi_1_1nnet2_1_1Component"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classkaldi_1_1nnet2_1_1Component.html">Component</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1Component.html#a52564bb899e61119bac38d57147cd223">NewComponentOfType</a> (const std::string &amp;type)</td></tr>
<tr class="memdesc:a52564bb899e61119bac38d57147cd223 inherit pub_static_methods_classkaldi_1_1nnet2_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a new <a class="el" href="classkaldi_1_1nnet2_1_1Component.html" title="Abstract class, basic element of the network, it is a box with defined inputs, outputs, and tranformation functions interface. ">Component</a> of the given type e.g.  <a href="classkaldi_1_1nnet2_1_1Component.html#a52564bb899e61119bac38d57147cd223">More...</a><br /></td></tr>
<tr class="separator:a52564bb899e61119bac38d57147cd223 inherit pub_static_methods_classkaldi_1_1nnet2_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classkaldi_1_1nnet2_1_1UpdatableComponent"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classkaldi_1_1nnet2_1_1UpdatableComponent')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html">UpdatableComponent</a></td></tr>
<tr class="memitem:abef30da8aa0328dd5db955ce0b2a3466 inherit pro_attribs_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">learning_rate_</a></td></tr>
<tr class="memdesc:abef30da8aa0328dd5db955ce0b2a3466 inherit pro_attribs_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">learning rate (0.0..0.01)  <a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">More...</a><br /></td></tr>
<tr class="separator:abef30da8aa0328dd5db955ce0b2a3466 inherit pro_attribs_classkaldi_1_1nnet2_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html" title="Convolutional1dComponent implements convolution over frequency axis. ">Convolutional1dComponent</a> implements convolution over frequency axis. </p>
<p>We assume the input featrues are spliced, i.e. each frame is in fact a set of stacked frames, where we can form patches which span over several frequency bands and whole time axis. A patch is the instance of a filter on a group of frequency bands and whole time axis. Shifts of the filter generate patches.</p>
<p>The convolution is done over whole axis with same filter coefficients, i.e. we don't use separate filters for different 'regions' of frequency axis. Due to convolution, same weights are used repeateadly, the final gradient is a sum of all position-specific gradients (the sum was found better than averaging).</p>
<p>In order to have a fast implementations, the filters are represented in vectorized form, where each rectangular filter corresponds to a row in a matrix, where all the filters are stored. The features are then re-shaped to a set of matrices, where one matrix corresponds to single patch-position, where all the filters get applied.</p>
<p>The type of convolution is controled by hyperparameters: patch_dim_ ... frequency axis size of the patch patch_step_ ... size of shift in the convolution patch_stride_ ... shift for 2nd dim of a patch (i.e. frame length before splicing) For instance, for a convolutional component after raw input, if the input is 36-dim fbank feature with delta of order 2 and spliced using +/- 5 frames of contexts, the convolutional component takes the input as a 36 x 33 image. The patch_stride_ should be configured 36. If patch_step_ and patch_dim_ are configured 1 and 7, the <a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html" title="Convolutional1dComponent implements convolution over frequency axis. ">Convolutional1dComponent</a> creates a 2D filter of 7 x 33, such that the convolution is actually done only along the frequency axis. Specifically, the convolutional output along the frequency axis is (36 - 7) / 1 + 1 = 30, and the convolutional output along the temporal axis is 33 - 33 + 1 = 1, resulting in an output image of 30 x 1, which is called a feature map in ConvNet. Then if the output-dim is set 3840, the constructor would know there should be 3840 / 30 = 128 distinct filters, which will create 128 feature maps of 30 x 1 for one frame of input. The feature maps are vectorized as a 3840-dim row vector in the output matrix of this component. For details on progatation of <a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html" title="Convolutional1dComponent implements convolution over frequency axis. ">Convolutional1dComponent</a>, check the function definition. </p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8h_source.html#l01718">1718</a> of file <a class="el" href="_2nnet-component_8h_source.html">nnet-component.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aebceba9975102a11569e62071619b603"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebceba9975102a11569e62071619b603">&#9670;&nbsp;</a></span>Convolutional1dComponent() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html">Convolutional1dComponent</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03630">3630</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component_8cc_source.html#l04127">Convolutional1dComponent::Copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;                                                  :</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a>(),</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>(0), <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a>(0), <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a>(0),</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">appended_conv_</a>(<span class="keyword">false</span>), <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">is_gradient_</a>(<span class="keyword">false</span>) {}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1UpdatableComponent_html_a2af26d78825cc522c324976403bf4e4e"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">kaldi::nnet2::UpdatableComponent::UpdatableComponent</a></div><div class="ttdeci">UpdatableComponent()</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l00297">nnet-component.h:297</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a6e6abfd7ad2cabd9d69ebba4137f69c7"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">kaldi::nnet2::Convolutional1dComponent::appended_conv_</a></div><div class="ttdeci">bool appended_conv_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01789">nnet-component.h:1789</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a1d93165c40ed0551395cc459acb88112"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">kaldi::nnet2::Convolutional1dComponent::patch_dim_</a></div><div class="ttdeci">int32 patch_dim_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01774">nnet-component.h:1774</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a95a4abdec65e2b9a9dc13725b6879cb9"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">kaldi::nnet2::Convolutional1dComponent::is_gradient_</a></div><div class="ttdeci">bool is_gradient_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01790">nnet-component.h:1790</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a069ad4823c4858c30ffaefaebcc1931f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">kaldi::nnet2::Convolutional1dComponent::patch_stride_</a></div><div class="ttdeci">int32 patch_stride_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01776">nnet-component.h:1776</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_ae71d98406b0ee2f9d5e90798280626b6"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">kaldi::nnet2::Convolutional1dComponent::patch_step_</a></div><div class="ttdeci">int32 patch_step_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01775">nnet-component.h:1775</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0b546e750f06188c202acbde0d0c7a47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b546e750f06188c202acbde0d0c7a47">&#9670;&nbsp;</a></span>Convolutional1dComponent() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html">Convolutional1dComponent</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html">Convolutional1dComponent</a> &amp;&#160;</td>
          <td class="paramname"><em>component</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03635">3635</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;                                                                                           :</div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a>(component),</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>(component.filter_params_),</div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>(component.bias_params_),</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">appended_conv_</a>(component.appended_conv_),</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">is_gradient_</a>(component.is_gradient_) {}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1UpdatableComponent_html_a2af26d78825cc522c324976403bf4e4e"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">kaldi::nnet2::UpdatableComponent::UpdatableComponent</a></div><div class="ttdeci">UpdatableComponent()</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l00297">nnet-component.h:297</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a6e6abfd7ad2cabd9d69ebba4137f69c7"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">kaldi::nnet2::Convolutional1dComponent::appended_conv_</a></div><div class="ttdeci">bool appended_conv_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01789">nnet-component.h:1789</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a95a4abdec65e2b9a9dc13725b6879cb9"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">kaldi::nnet2::Convolutional1dComponent::is_gradient_</a></div><div class="ttdeci">bool is_gradient_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01790">nnet-component.h:1790</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aac81644821ad36908e24668b0ab13a2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac81644821ad36908e24668b0ab13a2d">&#9670;&nbsp;</a></span>Convolutional1dComponent() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html">Convolutional1dComponent</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>filter_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuVectorBase.html">CuVectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>bias_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>learning_rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03642">3642</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01789">Convolutional1dComponent::appended_conv_</a>, <a class="el" href="cu-vector_8h_source.html#l00068">CuVectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="_2nnet-component_8h_source.html#l01790">Convolutional1dComponent::is_gradient_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, and <a class="el" href="cu-matrix_8h_source.html#l00214">CuMatrixBase&lt; Real &gt;::NumRows()</a>.</p>
<div class="fragment"><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;                                                                           :</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a>(learning_rate),</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>(filter_params),</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>(bias_params) {</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(filter_params.NumRows() == bias_params.Dim() &amp;&amp;</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;               bias_params.Dim() != 0);</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">appended_conv_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">is_gradient_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1UpdatableComponent_html_a2af26d78825cc522c324976403bf4e4e"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">kaldi::nnet2::UpdatableComponent::UpdatableComponent</a></div><div class="ttdeci">UpdatableComponent()</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l00297">nnet-component.h:297</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a6e6abfd7ad2cabd9d69ebba4137f69c7"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">kaldi::nnet2::Convolutional1dComponent::appended_conv_</a></div><div class="ttdeci">bool appended_conv_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01789">nnet-component.h:1789</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a95a4abdec65e2b9a9dc13725b6879cb9"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">kaldi::nnet2::Convolutional1dComponent::is_gradient_</a></div><div class="ttdeci">bool is_gradient_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01790">nnet-component.h:1790</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a79f56d86c125086a706aeefaf3c9a076"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79f56d86c125086a706aeefaf3c9a076">&#9670;&nbsp;</a></span>Add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>alpha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html">UpdatableComponent</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This new virtual function adds the parameters of another updatable component, times some constant, to the current parameters. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a54d861e97312ba5098568f28fe2b579b">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03900">3900</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01786">Convolutional1dComponent::bias_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>
<div class="fragment"><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;                                                                                      {</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;  <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aebceba9975102a11569e62071619b603">Convolutional1dComponent</a> *other =</div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;      <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aebceba9975102a11569e62071619b603">Convolutional1dComponent</a>*<span class="keyword">&gt;</span>(&amp;other_in);</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(other != NULL);</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.AddMat(alpha, other-&gt;filter_params_);</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.AddVec(alpha, other-&gt;bias_params_);</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_aebceba9975102a11569e62071619b603"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aebceba9975102a11569e62071619b603">kaldi::nnet2::Convolutional1dComponent::Convolutional1dComponent</a></div><div class="ttdeci">Convolutional1dComponent()</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l03630">nnet-component.cc:3630</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a189b8f0d24076df05d4ac78c12085297"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a189b8f0d24076df05d4ac78c12085297">&#9670;&nbsp;</a></span>Backprop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Backprop </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet2_1_1ChunkInfo.html">ChunkInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>in_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet2_1_1ChunkInfo.html">ChunkInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>out_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>in_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>out_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>out_deriv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1nnet2_1_1Component.html">Component</a> *&#160;</td>
          <td class="paramname"><em>to_update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td>
          <td class="paramname"><em>in_deriv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Perform backward pass propagation of the derivative, and also either update the model (if to_update == this) or update another model or compute the model derivative (otherwise). </p>
<p>Note: in_value and out_value are the values of the input and output of the component, and these may be dummy variables if respectively <a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa53a37e7375b5ca604d4a56f6bf3a957">BackpropNeedsInput()</a> or <a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1762f5b0ed27662ea841690ed7150d69">BackpropNeedsOutput()</a> return false for that component (not all components need these).</p>
<p>num_chunks lets us treat the input matrix as contiguous-in-time chunks of equal size; it only matters if splicing is involved. </p>
<p>Buffer for backpropagation: derivatives in the domain of 'patches_', 1row = vectorized rectangular feature patches, 1col = dim over speech frames,</p>

<p>Implements <a class="el" href="classkaldi_1_1nnet2_1_1Component.html#a8b9e039df3b5ac8240511af69e3456d7">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03966">3966</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="cu-matrix_8cc_source.html#l02668">CuMatrixBase&lt; Real &gt;::AddCols()</a>, <a class="el" href="_2nnet-component_8h_source.html#l01789">Convolutional1dComponent::appended_conv_</a>, <a class="el" href="cu-matrix_8h_source.html#l00608">CuMatrixBase&lt; Real &gt;::ColRange()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00064">rnnlm::d</a>, <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03655">Convolutional1dComponent::InputDim()</a>, <a class="el" href="matrix-common_8h_source.html#l00034">kaldi::kNoTrans</a>, <a class="el" href="matrix-common_8h_source.html#l00038">kaldi::kSetZero</a>, <a class="el" href="cu-matrix_8h_source.html#l00215">CuMatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="cu-matrix_8h_source.html#l00214">CuMatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="_2nnet-component_8h_source.html#l01774">Convolutional1dComponent::patch_dim_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01775">Convolutional1dComponent::patch_step_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01776">Convolutional1dComponent::patch_stride_</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03948">Convolutional1dComponent::RearrangeIndexes()</a>, <a class="el" href="cu-matrix_8cc_source.html#l00049">CuMatrix&lt; Real &gt;::Resize()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03920">Convolutional1dComponent::ReverseIndexes()</a>, and <a class="el" href="_2nnet-component_8cc_source.html#l04162">Convolutional1dComponent::Update()</a>.</p>
<div class="fragment"><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;                                                                             {</div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;  in_deriv-&gt;Resize(out_deriv.NumRows(), <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa5083adaff49881915d61ebf045e96db">InputDim</a>());</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aebceba9975102a11569e62071619b603">Convolutional1dComponent</a> *to_update = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aebceba9975102a11569e62071619b603">Convolutional1dComponent</a>*<span class="keyword">&gt;</span>(to_update_in);</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;  int32 num_splice = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa5083adaff49881915d61ebf045e96db">InputDim</a>() / <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a>;</div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;  int32 num_patches = 1 + (<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a> - <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>) / <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a>;</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;  int32 num_filters = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.NumRows();</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;  int32 num_frames = out_deriv.NumRows();</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;  int32 filter_dim = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.NumCols();</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;  CuMatrix&lt;BaseFloat&gt; patches_deriv(num_frames, filter_dim * num_patches, <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a>);</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;  <span class="comment">// backpropagate to vector of matrices</span></div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;  <span class="comment">// (corresponding to position of a filter)</span></div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;  std::vector&lt;CuSubMatrix&lt;BaseFloat&gt;* &gt; patch_deriv_batch, out_deriv_batch,</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;      filter_params_batch;</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;  CuSubMatrix&lt;BaseFloat&gt;* filter_params_elem = <span class="keyword">new</span> CuSubMatrix&lt;BaseFloat&gt;(</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;      <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>, 0, filter_params_.NumRows(), 0, filter_params_.NumCols());</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;  <span class="comment">// form batch in vector container</span></div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;  <span class="keywordflow">for</span> (int32 p = 0; p &lt; num_patches; p++) {</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;    <span class="comment">// form batch in vector container. for filter_params_batch, all elements</span></div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;    <span class="comment">// point to the same copy filter_params_elem</span></div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;    patch_deriv_batch.push_back(<span class="keyword">new</span> CuSubMatrix&lt;BaseFloat&gt;(patches_deriv.ColRange(</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;        p * filter_dim, filter_dim)));</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;    out_deriv_batch.push_back(<span class="keyword">new</span> CuSubMatrix&lt;BaseFloat&gt;(out_deriv.ColRange(</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;        p * num_filters, num_filters)));</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;    filter_params_batch.push_back(filter_params_elem);</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;  }</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;  AddMatMatBatched&lt;BaseFloat&gt;(1.0, patch_deriv_batch, out_deriv_batch, <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d">kNoTrans</a>,</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;                              filter_params_batch, <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d">kNoTrans</a>, 0.0);</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;  <span class="comment">// release memory</span></div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;  <span class="keyword">delete</span> filter_params_elem;</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;  <span class="keywordflow">for</span> (int32 p = 0; p &lt; num_patches; p++) {</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;    <span class="keyword">delete</span> patch_deriv_batch[p];</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;    <span class="keyword">delete</span> out_deriv_batch[p];</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;  }</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;  <span class="comment">// sum the derivatives into in_deriv</span></div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;  std::vector&lt;int32&gt; column_map(filter_dim * num_patches);</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;  <span class="keywordflow">for</span> (int32 patch = 0, index = 0; patch &lt; num_patches; patch++) {</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;    int32 fstride = patch * <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a>;</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;    <span class="keywordflow">for</span> (int32 splice = 0; splice &lt; num_splice; splice++) {</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;      int32 cstride = splice * <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a>;</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;      <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a> = 0; <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a> &lt; <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>; <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>++, index++) {</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">appended_conv_</a>)</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;          column_map[index] = (fstride + <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>) * num_splice + splice;</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;          column_map[index] = fstride + cstride + <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>;</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;      }</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;    }</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;  }</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;  std::vector&lt;std::vector&lt;int32&gt; &gt; reversed_column_map;</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a14d33bff1bd60e8ec8a6af9c2a4607c2">ReverseIndexes</a>(column_map, <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa5083adaff49881915d61ebf045e96db">InputDim</a>(), &amp;reversed_column_map);</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;  std::vector&lt;std::vector&lt;int32&gt; &gt; rearranged_column_map;</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#afcd53b228122d202e7c9bc579ca54246">RearrangeIndexes</a>(reversed_column_map, &amp;rearranged_column_map);</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;  <span class="keywordflow">for</span> (int32 p = 0; p &lt; rearranged_column_map.size(); p++) {</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;    CuArray&lt;int32&gt; cu_cols(rearranged_column_map[p]);</div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;    in_deriv-&gt;AddCols(patches_deriv, cu_cols);</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;  }</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;  <span class="keywordflow">if</span> (to_update != NULL) {</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;    <span class="comment">// Next update the model (must do this 2nd so the derivatives we propagate</span></div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;    <span class="comment">// are accurate, in case this == to_update_in.)</span></div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;    to_update-&gt;Update(in_value, out_deriv);</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;  }</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a14d33bff1bd60e8ec8a6af9c2a4607c2"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a14d33bff1bd60e8ec8a6af9c2a4607c2">kaldi::nnet2::Convolutional1dComponent::ReverseIndexes</a></div><div class="ttdeci">static void ReverseIndexes(const std::vector&lt; int32 &gt; &amp;forward_indexes, int32 input_dim, std::vector&lt; std::vector&lt; int32 &gt; &gt; *backward_indexes)</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l03920">nnet-component.cc:3920</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a6e6abfd7ad2cabd9d69ebba4137f69c7"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">kaldi::nnet2::Convolutional1dComponent::appended_conv_</a></div><div class="ttdeci">bool appended_conv_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01789">nnet-component.h:1789</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a1d93165c40ed0551395cc459acb88112"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">kaldi::nnet2::Convolutional1dComponent::patch_dim_</a></div><div class="ttdeci">int32 patch_dim_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01774">nnet-component.h:1774</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a069ad4823c4858c30ffaefaebcc1931f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">kaldi::nnet2::Convolutional1dComponent::patch_stride_</a></div><div class="ttdeci">int32 patch_stride_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01776">nnet-component.h:1776</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_aebceba9975102a11569e62071619b603"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aebceba9975102a11569e62071619b603">kaldi::nnet2::Convolutional1dComponent::Convolutional1dComponent</a></div><div class="ttdeci">Convolutional1dComponent()</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l03630">nnet-component.cc:3630</a></div></div>
<div class="ttc" id="namespacekaldi_html_a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d"><div class="ttname"><a href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d">kaldi::kNoTrans</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00034">matrix-common.h:34</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_aa5083adaff49881915d61ebf045e96db"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa5083adaff49881915d61ebf045e96db">kaldi::nnet2::Convolutional1dComponent::InputDim</a></div><div class="ttdeci">int32 InputDim() const</div><div class="ttdoc">Get size of input vectors. </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l03655">nnet-component.cc:3655</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_ae71d98406b0ee2f9d5e90798280626b6"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">kaldi::nnet2::Convolutional1dComponent::patch_step_</a></div><div class="ttdeci">int32 patch_step_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01775">nnet-component.h:1775</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kaldi::kSetZero</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00038">matrix-common.h:38</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_afcd53b228122d202e7c9bc579ca54246"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#afcd53b228122d202e7c9bc579ca54246">kaldi::nnet2::Convolutional1dComponent::RearrangeIndexes</a></div><div class="ttdeci">static void RearrangeIndexes(const std::vector&lt; std::vector&lt; int32 &gt; &gt; &amp;in, std::vector&lt; std::vector&lt; int32 &gt; &gt; *out)</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l03948">nnet-component.cc:3948</a></div></div>
<div class="ttc" id="namespacernnlm_html_a873684cefeb665f3d5e6b495de57fc0d"><div class="ttname"><a href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">rnnlm::d</a></div><div class="ttdeci">double d</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00064">mikolov-rnnlm-lib.cc:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa53a37e7375b5ca604d4a56f6bf3a957"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa53a37e7375b5ca604d4a56f6bf3a957">&#9670;&nbsp;</a></span>BackpropNeedsInput()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> BackpropNeedsInput </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet2_1_1Component.html#a6665547e73d07ffc21cd10e55220e6e5">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8h_source.html#l01743">1743</a> of file <a class="el" href="_2nnet-component_8h_source.html">nnet-component.h</a>.</p>
<div class="fragment"><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div></div><!-- fragment -->
</div>
</div>
<a id="a1762f5b0ed27662ea841690ed7150d69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1762f5b0ed27662ea841690ed7150d69">&#9670;&nbsp;</a></span>BackpropNeedsOutput()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> BackpropNeedsOutput </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet2_1_1Component.html#aa2d5e0212c323009090023155511ab04">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8h_source.html#l01744">1744</a> of file <a class="el" href="_2nnet-component_8h_source.html">nnet-component.h</a>.</p>

<p class="reference">References <a class="el" href="cu-math_8cc_source.html#l00173">kaldi::cu::Copy()</a>, <a class="el" href="nnet-utils_8cc_source.html#l00250">kaldi::nnet3::DotProduct()</a>, <a class="el" href="nnet-utils_8cc_source.html#l00199">kaldi::nnet3::PerturbParams()</a>, and <a class="el" href="classkaldi_1_1nnet2_1_1Component.html#a0df7b94c48568e7f42916c6898f48f67">Component::Propagate()</a>.</p>
<div class="fragment"><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div></div><!-- fragment -->
</div>
</div>
<a id="a5c4f15223897d71aaf79d859ea39b7f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c4f15223897d71aaf79d859ea39b7f7">&#9670;&nbsp;</a></span>BiasParams()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classkaldi_1_1CuVector.html">CuVector</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt;&amp; BiasParams </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8h_source.html#l01767">1767</a> of file <a class="el" href="_2nnet-component_8h_source.html">nnet-component.h</a>.</p>
<div class="fragment"><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>; }</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f11a4fb3396dda21cae55e81f23c750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f11a4fb3396dda21cae55e81f23c750">&#9670;&nbsp;</a></span>Copy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet2_1_1Component.html">Component</a> * Copy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy component (deep copy). </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet2_1_1Component.html#aa46d9c7de00be8203e16a6e55af0afef">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l04127">4127</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01789">Convolutional1dComponent::appended_conv_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01786">Convolutional1dComponent::bias_params_</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03630">Convolutional1dComponent::Convolutional1dComponent()</a>, <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01790">Convolutional1dComponent::is_gradient_</a>, <a class="el" href="_2nnet-component_8h_source.html#l00345">UpdatableComponent::learning_rate_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01774">Convolutional1dComponent::patch_dim_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01775">Convolutional1dComponent::patch_step_</a>, and <a class="el" href="_2nnet-component_8h_source.html#l01776">Convolutional1dComponent::patch_stride_</a>.</p>
<div class="fragment"><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;                                                {</div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aebceba9975102a11569e62071619b603">Convolutional1dComponent</a> *ans = <span class="keyword">new</span> <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aebceba9975102a11569e62071619b603">Convolutional1dComponent</a>();</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;  ans-&gt;learning_rate_ = <a class="code" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">learning_rate_</a>;</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;  ans-&gt;patch_dim_ = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>;</div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;  ans-&gt;patch_step_ = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a>;</div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;  ans-&gt;patch_stride_ = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a>;</div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;  ans-&gt;filter_params_ = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>;</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;  ans-&gt;bias_params_ = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>;</div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;  ans-&gt;appended_conv_ = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">appended_conv_</a>;</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;  ans-&gt;is_gradient_ = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">is_gradient_</a>;</div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a6e6abfd7ad2cabd9d69ebba4137f69c7"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">kaldi::nnet2::Convolutional1dComponent::appended_conv_</a></div><div class="ttdeci">bool appended_conv_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01789">nnet-component.h:1789</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a1d93165c40ed0551395cc459acb88112"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">kaldi::nnet2::Convolutional1dComponent::patch_dim_</a></div><div class="ttdeci">int32 patch_dim_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01774">nnet-component.h:1774</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a95a4abdec65e2b9a9dc13725b6879cb9"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">kaldi::nnet2::Convolutional1dComponent::is_gradient_</a></div><div class="ttdeci">bool is_gradient_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01790">nnet-component.h:1790</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a069ad4823c4858c30ffaefaebcc1931f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">kaldi::nnet2::Convolutional1dComponent::patch_stride_</a></div><div class="ttdeci">int32 patch_stride_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01776">nnet-component.h:1776</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1UpdatableComponent_html_abef30da8aa0328dd5db955ce0b2a3466"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">kaldi::nnet2::UpdatableComponent::learning_rate_</a></div><div class="ttdeci">BaseFloat learning_rate_</div><div class="ttdoc">learning rate (0.0..0.01) </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l00345">nnet-component.h:345</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_aebceba9975102a11569e62071619b603"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aebceba9975102a11569e62071619b603">kaldi::nnet2::Convolutional1dComponent::Convolutional1dComponent</a></div><div class="ttdeci">Convolutional1dComponent()</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l03630">nnet-component.cc:3630</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_ae71d98406b0ee2f9d5e90798280626b6"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">kaldi::nnet2::Convolutional1dComponent::patch_step_</a></div><div class="ttdeci">int32 patch_step_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01775">nnet-component.h:1775</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a87b95e5c043a8221ad58b2512b2d81c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87b95e5c043a8221ad58b2512b2d81c9">&#9670;&nbsp;</a></span>DotProduct()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> DotProduct </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html">UpdatableComponent</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Here, "other" is a component of the same specific type. </p>
<p>This function computes the dot product in parameters, and is computed while automatically adjusting learning rates; typically, one of the two will actually contain the gradient. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#ac0697192d76083f84fc989f67fbee5e9">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l04120">4120</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01786">Convolutional1dComponent::bias_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, <a class="el" href="matrix-common_8h_source.html#l00033">kaldi::kTrans</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l02646">kaldi::TraceMatMat()</a>, and <a class="el" href="kaldi-vector_8cc_source.html#l00037">kaldi::VecVec()</a>.</p>
<div class="fragment"><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;                                                                                       {</div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;  <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aebceba9975102a11569e62071619b603">Convolutional1dComponent</a> *other =</div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;      <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aebceba9975102a11569e62071619b603">Convolutional1dComponent</a>*<span class="keyword">&gt;</span>(&amp;other_in);</div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacekaldi.html#a94b9f349754706b9d6f38bb5ccc11c77">TraceMatMat</a>(<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>, other-&gt;filter_params_, <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kTrans</a>)</div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;         + <a class="code" href="group__matrix__funcs__scalar.html#ga4750cd6f7a02a013435779588056b153">VecVec</a>(<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>, other-&gt;bias_params_);</div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="namespacekaldi_html_a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2"><div class="ttname"><a href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kaldi::kTrans</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00033">matrix-common.h:33</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_aebceba9975102a11569e62071619b603"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aebceba9975102a11569e62071619b603">kaldi::nnet2::Convolutional1dComponent::Convolutional1dComponent</a></div><div class="ttdeci">Convolutional1dComponent()</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l03630">nnet-component.cc:3630</a></div></div>
<div class="ttc" id="namespacekaldi_html_a94b9f349754706b9d6f38bb5ccc11c77"><div class="ttname"><a href="namespacekaldi.html#a94b9f349754706b9d6f38bb5ccc11c77">kaldi::TraceMatMat</a></div><div class="ttdeci">Real TraceMatMat(const MatrixBase&lt; Real &gt; &amp;A, const MatrixBase&lt; Real &gt; &amp;B, MatrixTransposeType trans)</div><div class="ttdoc">We need to declare this here as it will be a friend function. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l02646">kaldi-matrix.cc:2646</a></div></div>
<div class="ttc" id="group__matrix__funcs__scalar_html_ga4750cd6f7a02a013435779588056b153"><div class="ttname"><a href="group__matrix__funcs__scalar.html#ga4750cd6f7a02a013435779588056b153">kaldi::VecVec</a></div><div class="ttdeci">Real VecVec(const VectorBase&lt; Real &gt; &amp;a, const VectorBase&lt; Real &gt; &amp;b)</div><div class="ttdoc">Returns dot product between v1 and v2. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8cc_source.html#l00037">kaldi-vector.cc:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a847004d103be24374c7291a1f12e3827"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a847004d103be24374c7291a1f12e3827">&#9670;&nbsp;</a></span>GetParameterDim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 GetParameterDim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The following new virtual function returns the total dimension of the parameters in this class. </p>
<p>E.g. used for L-BFGS update </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#aa9daac67067552fabddbc6d726730c5c">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l04157">4157</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>.</p>
<div class="fragment"><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;                                                      {</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.NumCols() + 1) * <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.NumRows();</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a245d65d566725422b859c99bff7623f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a245d65d566725422b859c99bff7623f8">&#9670;&nbsp;</a></span>Info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Info </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a245d65d566725422b859c99bff7623f8">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03732">3732</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01789">Convolutional1dComponent::appended_conv_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01786">Convolutional1dComponent::bias_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03655">Convolutional1dComponent::InputDim()</a>, <a class="el" href="matrix-common_8h_source.html#l00033">kaldi::kTrans</a>, <a class="el" href="_2nnet-component_8h_source.html#l00323">UpdatableComponent::LearningRate()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03662">Convolutional1dComponent::OutputDim()</a>, <a class="el" href="_2nnet-component_8h_source.html#l01774">Convolutional1dComponent::patch_dim_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01775">Convolutional1dComponent::patch_step_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01776">Convolutional1dComponent::patch_stride_</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l02646">kaldi::TraceMatMat()</a>, <a class="el" href="_2nnet-component_8h_source.html#l01742">Convolutional1dComponent::Type()</a>, and <a class="el" href="kaldi-vector_8cc_source.html#l00037">kaldi::VecVec()</a>.</p>
<div class="fragment"><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;                                               {</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;  std::stringstream stream;</div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> filter_params_size = <span class="keyword">static_cast&lt;</span><a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a><span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.NumRows())</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;                                 * static_cast&lt;BaseFloat&gt;(<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.NumCols());</div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> filter_stddev =</div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;            std::sqrt(<a class="code" href="namespacekaldi.html#a94b9f349754706b9d6f38bb5ccc11c77">TraceMatMat</a>(<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>, <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>, <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kTrans</a>) /</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;                      filter_params_size),</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;            bias_stddev = std::sqrt(<a class="code" href="group__matrix__funcs__scalar.html#ga4750cd6f7a02a013435779588056b153">VecVec</a>(<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>, <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>) /</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;                                    <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Dim());</div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;  int32 num_splice = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa5083adaff49881915d61ebf045e96db">InputDim</a>() / <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a>;</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;  int32 filter_dim = num_splice * <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>;</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;  int32 num_patches = 1 + (<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a> - <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>) / <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a>;</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;  int32 num_filters = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#af97474cce492a0b8305e8ec2c798509b">OutputDim</a>() / num_patches;</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;  stream &lt;&lt; <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a9261b9326e20a8d1f6a9be72c1ad66db">Type</a>() &lt;&lt; <span class="stringliteral">&quot;, input-dim=&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa5083adaff49881915d61ebf045e96db">InputDim</a>()</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;, output-dim=&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#af97474cce492a0b8305e8ec2c798509b">OutputDim</a>()</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;, num-splice=&quot;</span> &lt;&lt; num_splice</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;, num-patches=&quot;</span> &lt;&lt; num_patches</div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;, num-filters=&quot;</span> &lt;&lt; num_filters</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;, filter-dim=&quot;</span> &lt;&lt; filter_dim</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;, filter-params-stddev=&quot;</span> &lt;&lt; filter_stddev</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;, bias-params-stddev=&quot;</span> &lt;&lt; bias_stddev</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;, appended-conv=&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">appended_conv_</a></div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;, learning-rate=&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a05c05e189447ef40d81ac40494668d8a">LearningRate</a>();</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;  <span class="keywordflow">return</span> stream.str();</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_af97474cce492a0b8305e8ec2c798509b"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#af97474cce492a0b8305e8ec2c798509b">kaldi::nnet2::Convolutional1dComponent::OutputDim</a></div><div class="ttdeci">int32 OutputDim() const</div><div class="ttdoc">Get size of output vectors. </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l03662">nnet-component.cc:3662</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a6e6abfd7ad2cabd9d69ebba4137f69c7"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">kaldi::nnet2::Convolutional1dComponent::appended_conv_</a></div><div class="ttdeci">bool appended_conv_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01789">nnet-component.h:1789</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a1d93165c40ed0551395cc459acb88112"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">kaldi::nnet2::Convolutional1dComponent::patch_dim_</a></div><div class="ttdeci">int32 patch_dim_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01774">nnet-component.h:1774</a></div></div>
<div class="ttc" id="namespacekaldi_html_a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2"><div class="ttname"><a href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kaldi::kTrans</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00033">matrix-common.h:33</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a069ad4823c4858c30ffaefaebcc1931f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">kaldi::nnet2::Convolutional1dComponent::patch_stride_</a></div><div class="ttdeci">int32 patch_stride_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01776">nnet-component.h:1776</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
<div class="ttc" id="namespacekaldi_html_a94b9f349754706b9d6f38bb5ccc11c77"><div class="ttname"><a href="namespacekaldi.html#a94b9f349754706b9d6f38bb5ccc11c77">kaldi::TraceMatMat</a></div><div class="ttdeci">Real TraceMatMat(const MatrixBase&lt; Real &gt; &amp;A, const MatrixBase&lt; Real &gt; &amp;B, MatrixTransposeType trans)</div><div class="ttdoc">We need to declare this here as it will be a friend function. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l02646">kaldi-matrix.cc:2646</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_aa5083adaff49881915d61ebf045e96db"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa5083adaff49881915d61ebf045e96db">kaldi::nnet2::Convolutional1dComponent::InputDim</a></div><div class="ttdeci">int32 InputDim() const</div><div class="ttdoc">Get size of input vectors. </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l03655">nnet-component.cc:3655</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_ae71d98406b0ee2f9d5e90798280626b6"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">kaldi::nnet2::Convolutional1dComponent::patch_step_</a></div><div class="ttdeci">int32 patch_step_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01775">nnet-component.h:1775</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a9261b9326e20a8d1f6a9be72c1ad66db"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a9261b9326e20a8d1f6a9be72c1ad66db">kaldi::nnet2::Convolutional1dComponent::Type</a></div><div class="ttdeci">std::string Type() const</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01742">nnet-component.h:1742</a></div></div>
<div class="ttc" id="group__matrix__funcs__scalar_html_ga4750cd6f7a02a013435779588056b153"><div class="ttname"><a href="group__matrix__funcs__scalar.html#ga4750cd6f7a02a013435779588056b153">kaldi::VecVec</a></div><div class="ttdeci">Real VecVec(const VectorBase&lt; Real &gt; &amp;a, const VectorBase&lt; Real &gt; &amp;b)</div><div class="ttdoc">Returns dot product between v1 and v2. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8cc_source.html#l00037">kaldi-vector.cc:37</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1UpdatableComponent_html_a05c05e189447ef40d81ac40494668d8a"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a05c05e189447ef40d81ac40494668d8a">kaldi::nnet2::UpdatableComponent::LearningRate</a></div><div class="ttdeci">BaseFloat LearningRate() const</div><div class="ttdoc">Gets the learning rate of gradient descent. </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l00323">nnet-component.h:323</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abce3fb3191b6b175e3e76f743549e891"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abce3fb3191b6b175e3e76f743549e891">&#9670;&nbsp;</a></span>Init() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>learning_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>input_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>output_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>patch_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>patch_step</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>patch_stride</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>param_stddev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>bias_stddev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>appended_conv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03669">3669</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01789">Convolutional1dComponent::appended_conv_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01786">Convolutional1dComponent::bias_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l00284">UpdatableComponent::Init()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="_2nnet-component_8h_source.html#l01774">Convolutional1dComponent::patch_dim_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01775">Convolutional1dComponent::patch_step_</a>, and <a class="el" href="_2nnet-component_8h_source.html#l01776">Convolutional1dComponent::patch_stride_</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component_8cc_source.html#l04269">MaxpoolingComponent::InitFromString()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03761">Convolutional1dComponent::InitFromString()</a>, and <a class="el" href="_2nnet-component-test_8cc_source.html#l00365">kaldi::nnet2::UnitTestConvolutional1dComponent()</a>.</p>
<div class="fragment"><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;                                                                               {</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#ae5c7aecb7c994a88fecf6c824500cd63">UpdatableComponent::Init</a>(learning_rate);</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a> = patch_dim;</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a> = patch_step;</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a> = patch_stride;</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">appended_conv_</a> = appended_conv;</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;  int32 num_splice = input_dim / patch_stride;</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;  int32 filter_dim = num_splice * patch_dim;</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;  int32 num_patches = 1 + (patch_stride - patch_dim) / patch_step;</div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;  int32 num_filters = output_dim / num_patches;</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(input_dim % patch_stride == 0);</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>((patch_stride - patch_dim) % patch_step == 0);</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(output_dim % num_patches == 0);</div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.Resize(num_filters, filter_dim);</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Resize(num_filters);</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(param_stddev &gt;= 0.0 &amp;&amp; bias_stddev &gt;= 0.0);</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.SetRandn();</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.Scale(param_stddev);</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.SetRandn();</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Scale(bias_stddev);</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a6e6abfd7ad2cabd9d69ebba4137f69c7"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">kaldi::nnet2::Convolutional1dComponent::appended_conv_</a></div><div class="ttdeci">bool appended_conv_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01789">nnet-component.h:1789</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a1d93165c40ed0551395cc459acb88112"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">kaldi::nnet2::Convolutional1dComponent::patch_dim_</a></div><div class="ttdeci">int32 patch_dim_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01774">nnet-component.h:1774</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1UpdatableComponent_html_ae5c7aecb7c994a88fecf6c824500cd63"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#ae5c7aecb7c994a88fecf6c824500cd63">kaldi::nnet2::UpdatableComponent::Init</a></div><div class="ttdeci">void Init(BaseFloat learning_rate)</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l00284">nnet-component.h:284</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a069ad4823c4858c30ffaefaebcc1931f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">kaldi::nnet2::Convolutional1dComponent::patch_stride_</a></div><div class="ttdeci">int32 patch_stride_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01776">nnet-component.h:1776</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_ae71d98406b0ee2f9d5e90798280626b6"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">kaldi::nnet2::Convolutional1dComponent::patch_step_</a></div><div class="ttdeci">int32 patch_step_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01775">nnet-component.h:1775</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7685e66c1a7a5b6637b5cfced69a57e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7685e66c1a7a5b6637b5cfced69a57e5">&#9670;&nbsp;</a></span>Init() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>learning_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>patch_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>patch_step</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>patch_stride</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>matrix_filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>appended_conv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03697">3697</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01789">Convolutional1dComponent::appended_conv_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01786">Convolutional1dComponent::bias_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l00284">UpdatableComponent::Init()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="cu-matrix_8h_source.html#l00215">CuMatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="cu-matrix_8h_source.html#l00214">CuMatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="_2nnet-component_8h_source.html#l01774">Convolutional1dComponent::patch_dim_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01775">Convolutional1dComponent::patch_step_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01776">Convolutional1dComponent::patch_stride_</a>, <a class="el" href="cu-matrix_8h_source.html#l00596">CuMatrixBase&lt; Real &gt;::Range()</a>, and <a class="el" href="kaldi-io_8cc_source.html#l00832">kaldi::ReadKaldiObject()</a>.</p>
<div class="fragment"><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;                                                        {</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#ae5c7aecb7c994a88fecf6c824500cd63">UpdatableComponent::Init</a>(learning_rate);</div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a> = patch_dim;</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a> = patch_step;</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a> = patch_stride;</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">appended_conv_</a> = appended_conv;</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;  CuMatrix&lt;BaseFloat&gt; mat;</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;  <a class="code" href="group__io__group.html#ga3669248523c1b632d135dba9a30fc2fd">ReadKaldiObject</a>(matrix_filename, &amp;mat);</div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(mat.NumCols() &gt;= 2);</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;  int32 filter_dim = mat.NumCols() - 1, num_filters = mat.NumRows();</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.Resize(num_filters, filter_dim);</div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Resize(num_filters);</div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.CopyFromMat(mat.Range(0, num_filters, 0, filter_dim));</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.CopyColFromMat(mat, filter_dim);</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a6e6abfd7ad2cabd9d69ebba4137f69c7"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">kaldi::nnet2::Convolutional1dComponent::appended_conv_</a></div><div class="ttdeci">bool appended_conv_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01789">nnet-component.h:1789</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a1d93165c40ed0551395cc459acb88112"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">kaldi::nnet2::Convolutional1dComponent::patch_dim_</a></div><div class="ttdeci">int32 patch_dim_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01774">nnet-component.h:1774</a></div></div>
<div class="ttc" id="group__io__group_html_ga3669248523c1b632d135dba9a30fc2fd"><div class="ttname"><a href="group__io__group.html#ga3669248523c1b632d135dba9a30fc2fd">kaldi::ReadKaldiObject</a></div><div class="ttdeci">void ReadKaldiObject(const std::string &amp;filename, Matrix&lt; float &gt; *m)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-io_8cc_source.html#l00832">kaldi-io.cc:832</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1UpdatableComponent_html_ae5c7aecb7c994a88fecf6c824500cd63"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#ae5c7aecb7c994a88fecf6c824500cd63">kaldi::nnet2::UpdatableComponent::Init</a></div><div class="ttdeci">void Init(BaseFloat learning_rate)</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l00284">nnet-component.h:284</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a069ad4823c4858c30ffaefaebcc1931f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">kaldi::nnet2::Convolutional1dComponent::patch_stride_</a></div><div class="ttdeci">int32 patch_stride_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01776">nnet-component.h:1776</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_ae71d98406b0ee2f9d5e90798280626b6"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">kaldi::nnet2::Convolutional1dComponent::patch_step_</a></div><div class="ttdeci">int32 patch_step_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01775">nnet-component.h:1775</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a93cbd3cf93a0fed1d868a35ad4a32b24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93cbd3cf93a0fed1d868a35ad4a32b24">&#9670;&nbsp;</a></span>InitFromString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void InitFromString </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize, typically from a line of a config file. </p>
<p>The "args" will contain any parameters that need to be passed to the <a class="el" href="classkaldi_1_1nnet2_1_1Component.html" title="Abstract class, basic element of the network, it is a box with defined inputs, outputs, and tranformation functions interface. ">Component</a>, e.g. dimensions. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet2_1_1Component.html#a2396890cb2af61b2dc1872c3a9bc52f8">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03761">3761</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8cc_source.html#l03669">Convolutional1dComponent::Init()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03655">Convolutional1dComponent::InputDim()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="_2nnet-component_8h_source.html#l00345">UpdatableComponent::learning_rate_</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03662">Convolutional1dComponent::OutputDim()</a>, and <a class="el" href="_2nnet-component_8cc_source.html#l00153">kaldi::nnet2::ParseFromString()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component-test_8cc_source.html#l00365">kaldi::nnet2::UnitTestConvolutional1dComponent()</a>.</p>
<div class="fragment"><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;                                                            {</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;  std::string orig_args(args);</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;  <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>, appended_conv = <span class="keyword">false</span>;</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> learning_rate = <a class="code" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">learning_rate_</a>;</div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;  std::string matrix_filename;</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;  int32 input_dim = -1, output_dim = -1;</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;  int32 patch_dim = -1, patch_step = -1, patch_stride = -1;</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet2.html#a0e18825b4c5b0834e638296b2f5bb35a">ParseFromString</a>(<span class="stringliteral">&quot;learning-rate&quot;</span>, &amp;args, &amp;learning_rate);</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet2.html#a0e18825b4c5b0834e638296b2f5bb35a">ParseFromString</a>(<span class="stringliteral">&quot;appended-conv&quot;</span>, &amp;args, &amp;appended_conv);</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;  ok = ok &amp;&amp; <a class="code" href="namespacekaldi_1_1nnet2.html#a0e18825b4c5b0834e638296b2f5bb35a">ParseFromString</a>(<span class="stringliteral">&quot;patch-dim&quot;</span>, &amp;args, &amp;patch_dim);</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;  ok = ok &amp;&amp; <a class="code" href="namespacekaldi_1_1nnet2.html#a0e18825b4c5b0834e638296b2f5bb35a">ParseFromString</a>(<span class="stringliteral">&quot;patch-step&quot;</span>, &amp;args, &amp;patch_step);</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;  ok = ok &amp;&amp; <a class="code" href="namespacekaldi_1_1nnet2.html#a0e18825b4c5b0834e638296b2f5bb35a">ParseFromString</a>(<span class="stringliteral">&quot;patch-stride&quot;</span>, &amp;args, &amp;patch_stride);</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi_1_1nnet2.html#a0e18825b4c5b0834e638296b2f5bb35a">ParseFromString</a>(<span class="stringliteral">&quot;matrix&quot;</span>, &amp;args, &amp;matrix_filename)) {</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;    <span class="comment">// initialize from prefined parameter matrix</span></div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#abce3fb3191b6b175e3e76f743549e891">Init</a>(learning_rate, patch_dim, patch_step, patch_stride,</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;         matrix_filename, appended_conv);</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi_1_1nnet2.html#a0e18825b4c5b0834e638296b2f5bb35a">ParseFromString</a>(<span class="stringliteral">&quot;input-dim&quot;</span>, &amp;args, &amp;input_dim))</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(input_dim == <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa5083adaff49881915d61ebf045e96db">InputDim</a>() &amp;&amp;</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;               <span class="stringliteral">&quot;input-dim mismatch vs. matrix.&quot;</span>);</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacekaldi_1_1nnet2.html#a0e18825b4c5b0834e638296b2f5bb35a">ParseFromString</a>(<span class="stringliteral">&quot;output-dim&quot;</span>, &amp;args, &amp;output_dim))</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;            <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(output_dim == <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#af97474cce492a0b8305e8ec2c798509b">OutputDim</a>() &amp;&amp;</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;                     <span class="stringliteral">&quot;output-dim mismatch vs. matrix.&quot;</span>);</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;    <span class="comment">// initialize from configuration</span></div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;    ok = ok &amp;&amp; <a class="code" href="namespacekaldi_1_1nnet2.html#a0e18825b4c5b0834e638296b2f5bb35a">ParseFromString</a>(<span class="stringliteral">&quot;input-dim&quot;</span>, &amp;args, &amp;input_dim);</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;    ok = ok &amp;&amp; <a class="code" href="namespacekaldi_1_1nnet2.html#a0e18825b4c5b0834e638296b2f5bb35a">ParseFromString</a>(<span class="stringliteral">&quot;output-dim&quot;</span>, &amp;args, &amp;output_dim);</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> param_stddev = 1.0 / std::sqrt(input_dim), bias_stddev = 1.0;</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet2.html#a0e18825b4c5b0834e638296b2f5bb35a">ParseFromString</a>(<span class="stringliteral">&quot;param-stddev&quot;</span>, &amp;args, &amp;param_stddev);</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet2.html#a0e18825b4c5b0834e638296b2f5bb35a">ParseFromString</a>(<span class="stringliteral">&quot;bias-stddev&quot;</span>, &amp;args, &amp;bias_stddev);</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#abce3fb3191b6b175e3e76f743549e891">Init</a>(learning_rate, input_dim, output_dim, patch_dim,</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;         patch_step, patch_stride, param_stddev, bias_stddev, appended_conv);</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;  }</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;  <span class="keywordflow">if</span> (!args.empty())</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Could not process these elements in initializer: &quot;</span> &lt;&lt; args;</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;  <span class="keywordflow">if</span> (!ok)</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Bad initializer &quot;</span> &lt;&lt; orig_args;</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_af97474cce492a0b8305e8ec2c798509b"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#af97474cce492a0b8305e8ec2c798509b">kaldi::nnet2::Convolutional1dComponent::OutputDim</a></div><div class="ttdeci">int32 OutputDim() const</div><div class="ttdoc">Get size of output vectors. </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l03662">nnet-component.cc:3662</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet2_html_a0e18825b4c5b0834e638296b2f5bb35a"><div class="ttname"><a href="namespacekaldi_1_1nnet2.html#a0e18825b4c5b0834e638296b2f5bb35a">kaldi::nnet2::ParseFromString</a></div><div class="ttdeci">bool ParseFromString(const std::string &amp;name, std::string *string, int32 *param)</div><div class="ttdoc">Functions used in Init routines. </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l00153">nnet-component.cc:153</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1UpdatableComponent_html_abef30da8aa0328dd5db955ce0b2a3466"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">kaldi::nnet2::UpdatableComponent::learning_rate_</a></div><div class="ttdeci">BaseFloat learning_rate_</div><div class="ttdoc">learning rate (0.0..0.01) </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l00345">nnet-component.h:345</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_aa5083adaff49881915d61ebf045e96db"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa5083adaff49881915d61ebf045e96db">kaldi::nnet2::Convolutional1dComponent::InputDim</a></div><div class="ttdeci">int32 InputDim() const</div><div class="ttdoc">Get size of input vectors. </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l03655">nnet-component.cc:3655</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_abce3fb3191b6b175e3e76f743549e891"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#abce3fb3191b6b175e3e76f743549e891">kaldi::nnet2::Convolutional1dComponent::Init</a></div><div class="ttdeci">void Init(BaseFloat learning_rate, int32 input_dim, int32 output_dim, int32 patch_dim, int32 patch_step, int32 patch_stride, BaseFloat param_stddev, BaseFloat bias_stddev, bool appended_conv)</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l03669">nnet-component.cc:3669</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa5083adaff49881915d61ebf045e96db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5083adaff49881915d61ebf045e96db">&#9670;&nbsp;</a></span>InputDim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 InputDim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get size of input vectors. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet2_1_1Component.html#a7f37d871d35c43a03324502cea308635">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03655">3655</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01774">Convolutional1dComponent::patch_dim_</a>, and <a class="el" href="_2nnet-component_8h_source.html#l01776">Convolutional1dComponent::patch_stride_</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component_8cc_source.html#l03966">Convolutional1dComponent::Backprop()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03732">Convolutional1dComponent::Info()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03761">Convolutional1dComponent::InitFromString()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03819">Convolutional1dComponent::Propagate()</a>, and <a class="el" href="_2nnet-component_8cc_source.html#l04162">Convolutional1dComponent::Update()</a>.</p>
<div class="fragment"><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;                                               {</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;  int32 filter_dim = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.NumCols();</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;  int32 num_splice = filter_dim / <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>;</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a> * num_splice;</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a1d93165c40ed0551395cc459acb88112"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">kaldi::nnet2::Convolutional1dComponent::patch_dim_</a></div><div class="ttdeci">int32 patch_dim_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01774">nnet-component.h:1774</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a069ad4823c4858c30ffaefaebcc1931f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">kaldi::nnet2::Convolutional1dComponent::patch_stride_</a></div><div class="ttdeci">int32 patch_stride_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01776">nnet-component.h:1776</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad8e632fb05869d446940cfc912c88088"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8e632fb05869d446940cfc912c88088">&#9670;&nbsp;</a></span>LinearParams()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt;&amp; LinearParams </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8h_source.html#l01768">1768</a> of file <a class="el" href="_2nnet-component_8h_source.html">nnet-component.h</a>.</p>
<div class="fragment"><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>; }</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3766c379ab7b83ce65ed81043d9d2353"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3766c379ab7b83ce65ed81043d9d2353">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html">Convolutional1dComponent</a>&amp; operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html">Convolutional1dComponent</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af97474cce492a0b8305e8ec2c798509b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af97474cce492a0b8305e8ec2c798509b">&#9670;&nbsp;</a></span>OutputDim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 OutputDim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get size of output vectors. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet2_1_1Component.html#ac0f2f034a884363d4e0694c62ea8a764">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03662">3662</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01774">Convolutional1dComponent::patch_dim_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01775">Convolutional1dComponent::patch_step_</a>, and <a class="el" href="_2nnet-component_8h_source.html#l01776">Convolutional1dComponent::patch_stride_</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component_8cc_source.html#l03732">Convolutional1dComponent::Info()</a>, and <a class="el" href="_2nnet-component_8cc_source.html#l03761">Convolutional1dComponent::InitFromString()</a>.</p>
<div class="fragment"><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;                                                {</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;  int32 num_filters = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.NumRows();</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;  int32 num_patches = 1 + (<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a> - <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>) / <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a>;</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;  <span class="keywordflow">return</span> num_patches * num_filters;</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a1d93165c40ed0551395cc459acb88112"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">kaldi::nnet2::Convolutional1dComponent::patch_dim_</a></div><div class="ttdeci">int32 patch_dim_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01774">nnet-component.h:1774</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a069ad4823c4858c30ffaefaebcc1931f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">kaldi::nnet2::Convolutional1dComponent::patch_stride_</a></div><div class="ttdeci">int32 patch_stride_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01776">nnet-component.h:1776</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_ae71d98406b0ee2f9d5e90798280626b6"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">kaldi::nnet2::Convolutional1dComponent::patch_step_</a></div><div class="ttdeci">int32 patch_step_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01775">nnet-component.h:1775</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a69a59272c763dc9372ad7d0671a87dad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69a59272c763dc9372ad7d0671a87dad">&#9670;&nbsp;</a></span>PerturbParams()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PerturbParams </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>stddev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>We introduce a new virtual function that only applies to class <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters and contains some global param...">UpdatableComponent</a>. </p>
<p>This is used in testing. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#af8524a3f9d683293269f46e3cc54b285">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l04140">4140</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01786">Convolutional1dComponent::bias_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, <a class="el" href="cu-vector_8cc_source.html#l00275">CuVectorBase&lt; Real &gt;::SetRandn()</a>, and <a class="el" href="cu-matrix_8cc_source.html#l03099">CuMatrixBase&lt; Real &gt;::SetRandn()</a>.</p>
<div class="fragment"><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;                                                             {</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;  CuMatrix&lt;BaseFloat&gt; temp_filter_params(<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>);</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;  temp_filter_params.SetRandn();</div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.AddMat(stddev, temp_filter_params);</div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;</div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;  CuVector&lt;BaseFloat&gt; temp_bias_params(<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>);</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;  temp_bias_params.SetRandn();</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.AddVec(stddev, temp_bias_params);</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ace7d241fd0c2d8eda4773cd1f1d2a815"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace7d241fd0c2d8eda4773cd1f1d2a815">&#9670;&nbsp;</a></span>Propagate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Propagate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet2_1_1ChunkInfo.html">ChunkInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>in_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet2_1_1ChunkInfo.html">ChunkInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>out_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Perform forward pass propagation Input-&gt;<a class="el" href="classkaldi_1_1Output.html">Output</a>. </p>
<p>Each row is one frame or training example. Interpreted as "num_chunks" equally sized chunks of frames; this only matters for layers that do things like context splicing. Typically this variable will either be 1 (when we're processing a single contiguous chunk of data) or will be the same as <a class="el" href="group__feat.html#ga3a4394e7a321cb172a34f001e7dc3eb5" title="This function returns the number of frames that we can extract from a wave file with the given number...">in.NumFrames()</a>, but other values are possible if some layers do splicing. </p>
<p>Buffer of reshaped inputs: 1row = vectorized rectangular feature patches 1col = dim over speech frames,</p>

<p>Implements <a class="el" href="classkaldi_1_1nnet2_1_1Component.html#a0df7b94c48568e7f42916c6898f48f67">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03819">3819</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="cu-matrix_8cc_source.html#l01248">CuMatrixBase&lt; Real &gt;::AddVecToRows()</a>, <a class="el" href="_2nnet-component_8h_source.html#l01789">Convolutional1dComponent::appended_conv_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01786">Convolutional1dComponent::bias_params_</a>, <a class="el" href="_2nnet-component_8cc_source.html#l02559">ChunkInfo::CheckSize()</a>, <a class="el" href="cu-matrix_8h_source.html#l00608">CuMatrixBase&lt; Real &gt;::ColRange()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02623">CuMatrixBase&lt; Real &gt;::CopyCols()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00064">rnnlm::d</a>, <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03655">Convolutional1dComponent::InputDim()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="matrix-common_8h_source.html#l00034">kaldi::kNoTrans</a>, <a class="el" href="matrix-common_8h_source.html#l00033">kaldi::kTrans</a>, <a class="el" href="matrix-common_8h_source.html#l00039">kaldi::kUndefined</a>, <a class="el" href="_2nnet-component_8h_source.html#l00118">ChunkInfo::NumChunks()</a>, <a class="el" href="cu-matrix_8h_source.html#l00215">CuMatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="cu-matrix_8h_source.html#l00214">CuMatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="_2nnet-component_8h_source.html#l01774">Convolutional1dComponent::patch_dim_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01775">Convolutional1dComponent::patch_step_</a>, and <a class="el" href="_2nnet-component_8h_source.html#l01776">Convolutional1dComponent::patch_stride_</a>.</p>
<div class="fragment"><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;                                                                             {</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;  in_info.CheckSize(in);</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;  out_info.CheckSize(*out);</div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(in_info.NumChunks() == out_info.NumChunks());</div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;  <span class="comment">// dims</span></div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;  int32 num_splice = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa5083adaff49881915d61ebf045e96db">InputDim</a>() / <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a>;</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;  int32 num_patches = 1 + (<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a> - <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>) / <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a>;</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;  int32 num_filters = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.NumRows();</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;  int32 num_frames = in.NumRows();</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;  int32 filter_dim = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.NumCols();</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;  CuMatrix&lt;BaseFloat&gt; patches(num_frames, filter_dim * num_patches, <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;  <span class="comment">// column_map is indexed by the column-index of &quot;patches&quot;,</span></div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;  <span class="comment">// and the value is the corresponding column-index of &quot;in&quot;.</span></div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;  std::vector&lt;int32&gt; column_map(filter_dim * num_patches);</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;  <span class="comment">// build-up a column selection map</span></div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;  <span class="keywordflow">for</span> (int32 patch = 0, index = 0; patch &lt; num_patches; patch++) {</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;    int32 fstride = patch * <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a>;</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;    <span class="keywordflow">for</span> (int32 splice = 0; splice &lt; num_splice; splice++) {</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;      int32 cstride = splice * <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a>;</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;      <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a> = 0; <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a> &lt; <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>; <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>++, index++) {</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">appended_conv_</a>)</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;          column_map[index] = (fstride + <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>) * num_splice + splice;</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;          column_map[index] = fstride + cstride + <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>;</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;      }</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;    }</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;  }</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;  CuArray&lt;int32&gt; cu_cols(column_map);</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;  patches.CopyCols(in, cu_cols);</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;  <span class="comment">// compute filter activations</span></div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;  std::vector&lt;CuSubMatrix&lt;BaseFloat&gt;* &gt; tgt_batch, patch_batch, filter_params_batch;</div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;  CuSubMatrix&lt;BaseFloat&gt;* filter_params_elem = <span class="keyword">new</span> CuSubMatrix&lt;BaseFloat&gt;(</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;      <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>, 0, filter_params_.NumRows(), 0, filter_params_.NumCols());</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;  <span class="comment">// form batch in vector container</span></div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;  <span class="keywordflow">for</span> (int32 p = 0; p &lt; num_patches; p++) {</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;    <span class="comment">// form batch in vector container. for filter_params_batch, all elements</span></div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;    <span class="comment">// point to the same copy filter_params_elem</span></div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;    tgt_batch.push_back(<span class="keyword">new</span> CuSubMatrix&lt;BaseFloat&gt;(out-&gt;ColRange(p * num_filters,</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;                                                                 num_filters)));</div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;    patch_batch.push_back(<span class="keyword">new</span> CuSubMatrix&lt;BaseFloat&gt;(</div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;        patches.ColRange(p * filter_dim, filter_dim)));</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;    filter_params_batch.push_back(filter_params_elem);</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;    tgt_batch[p]-&gt;AddVecToRows(1.0, <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>, 0.0); <span class="comment">// add bias</span></div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;  }</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;</div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;  <span class="comment">// apply all filters</span></div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;  AddMatMatBatched&lt;BaseFloat&gt;(1.0, tgt_batch, patch_batch, <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d">kNoTrans</a>,</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;                              filter_params_batch, <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kTrans</a>, 1.0);</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;  <span class="comment">// release memory</span></div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;  <span class="keyword">delete</span> filter_params_elem;</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;  <span class="keywordflow">for</span> (int32 p = 0; p &lt; num_patches; p++) {</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;    <span class="keyword">delete</span> tgt_batch[p];</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;    <span class="keyword">delete</span> patch_batch[p];</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;  }</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00039">matrix-common.h:39</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a6e6abfd7ad2cabd9d69ebba4137f69c7"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">kaldi::nnet2::Convolutional1dComponent::appended_conv_</a></div><div class="ttdeci">bool appended_conv_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01789">nnet-component.h:1789</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a1d93165c40ed0551395cc459acb88112"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">kaldi::nnet2::Convolutional1dComponent::patch_dim_</a></div><div class="ttdeci">int32 patch_dim_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01774">nnet-component.h:1774</a></div></div>
<div class="ttc" id="namespacekaldi_html_a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2"><div class="ttname"><a href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kaldi::kTrans</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00033">matrix-common.h:33</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a069ad4823c4858c30ffaefaebcc1931f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">kaldi::nnet2::Convolutional1dComponent::patch_stride_</a></div><div class="ttdeci">int32 patch_stride_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01776">nnet-component.h:1776</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
<div class="ttc" id="namespacekaldi_html_a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d"><div class="ttname"><a href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d">kaldi::kNoTrans</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00034">matrix-common.h:34</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_aa5083adaff49881915d61ebf045e96db"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa5083adaff49881915d61ebf045e96db">kaldi::nnet2::Convolutional1dComponent::InputDim</a></div><div class="ttdeci">int32 InputDim() const</div><div class="ttdoc">Get size of input vectors. </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l03655">nnet-component.cc:3655</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_ae71d98406b0ee2f9d5e90798280626b6"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">kaldi::nnet2::Convolutional1dComponent::patch_step_</a></div><div class="ttdeci">int32 patch_step_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01775">nnet-component.h:1775</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="namespacernnlm_html_a873684cefeb665f3d5e6b495de57fc0d"><div class="ttname"><a href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">rnnlm::d</a></div><div class="ttdeci">double d</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00064">mikolov-rnnlm-lib.cc:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8e7d2790fc7e94fe9780ccc937de1270"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e7d2790fc7e94fe9780ccc937de1270">&#9670;&nbsp;</a></span>Read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Read </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>is</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>binary</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classkaldi_1_1nnet2_1_1Component.html#a5d1c1c5364c25160bfef9dda52480cf5">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l04059">4059</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01789">Convolutional1dComponent::appended_conv_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01786">Convolutional1dComponent::bias_params_</a>, <a class="el" href="_2nnet-component_8cc_source.html#l00135">kaldi::nnet2::ExpectOneOrTwoTokens()</a>, <a class="el" href="io-funcs_8cc_source.html#l00194">kaldi::ExpectToken()</a>, <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01790">Convolutional1dComponent::is_gradient_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="_2nnet-component_8h_source.html#l00345">UpdatableComponent::learning_rate_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01774">Convolutional1dComponent::patch_dim_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01775">Convolutional1dComponent::patch_step_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01776">Convolutional1dComponent::patch_stride_</a>, <a class="el" href="io-funcs-inl_8h_source.html#l00055">kaldi::ReadBasicType()</a>, <a class="el" href="io-funcs_8cc_source.html#l00154">kaldi::ReadToken()</a>, and <a class="el" href="_2nnet-component_8h_source.html#l01742">Convolutional1dComponent::Type()</a>.</p>
<div class="fragment"><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;                                                               {</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;  std::ostringstream ostr_beg, ostr_end;</div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;  ostr_beg &lt;&lt; <span class="stringliteral">&quot;&lt;&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a9261b9326e20a8d1f6a9be72c1ad66db">Type</a>() &lt;&lt; <span class="stringliteral">&quot;&gt;&quot;</span>; <span class="comment">// e.g. &quot;&lt;Convolutional1dComponent&gt;&quot;</span></div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;  ostr_end &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a9261b9326e20a8d1f6a9be72c1ad66db">Type</a>() &lt;&lt; <span class="stringliteral">&quot;&gt;&quot;</span>; <span class="comment">// e.g. &quot;&lt;/Convolutional1dComponent&gt;&quot;</span></div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;  <span class="comment">// might not see the &quot;&lt;Convolutional1dComponent&gt;&quot; part because</span></div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;  <span class="comment">// of how ReadNew() works.</span></div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet2.html#a0c661e4a6e94e5d0abaa2bdf325172bc">ExpectOneOrTwoTokens</a>(is, binary, ostr_beg.str(), <span class="stringliteral">&quot;&lt;LearningRate&gt;&quot;</span>);</div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;<a class="code" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">learning_rate_</a>);</div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga4c7a80f758e878578e78b667f62463a5">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;PatchDim&gt;&quot;</span>);</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>);</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga4c7a80f758e878578e78b667f62463a5">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;PatchStep&gt;&quot;</span>);</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a>);</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga4c7a80f758e878578e78b667f62463a5">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;PatchStride&gt;&quot;</span>);</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a>);</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;  <span class="comment">// back-compatibility</span></div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;  std::string tok;</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;  <a class="code" href="group__io__funcs__basic.html#gacbf9367cd910befefa0bc98055979bea">ReadToken</a>(is, binary, &amp;tok);</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;  <span class="keywordflow">if</span> (tok == <span class="stringliteral">&quot;&lt;AppendedConv&gt;&quot;</span>) {</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;    <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">appended_conv_</a>);</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;    <a class="code" href="group__io__funcs__basic.html#ga4c7a80f758e878578e78b667f62463a5">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;FilterParams&gt;&quot;</span>);</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">appended_conv_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(tok == <span class="stringliteral">&quot;&lt;FilterParams&gt;&quot;</span>);</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;  }</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.Read(is, binary);</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga4c7a80f758e878578e78b667f62463a5">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;BiasParams&gt;&quot;</span>);</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Read(is, binary);</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;  <a class="code" href="group__io__funcs__basic.html#gacbf9367cd910befefa0bc98055979bea">ReadToken</a>(is, binary, &amp;tok);</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;  <span class="keywordflow">if</span> (tok == <span class="stringliteral">&quot;&lt;IsGradient&gt;&quot;</span>) {</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;    <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">is_gradient_</a>);</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;    <a class="code" href="group__io__funcs__basic.html#ga4c7a80f758e878578e78b667f62463a5">ExpectToken</a>(is, binary, ostr_end.str());</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">is_gradient_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(tok == ostr_end.str());</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;  }</div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga1bd1af0ef712b76f2332febcec8d095a"><div class="ttname"><a href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">kaldi::ReadBasicType</a></div><div class="ttdeci">void ReadBasicType(std::istream &amp;is, bool binary, T *t)</div><div class="ttdoc">ReadBasicType is the name of the read function for bool, integer types, and floating-point types...</div><div class="ttdef"><b>Definition:</b> <a href="io-funcs-inl_8h_source.html#l00055">io-funcs-inl.h:55</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a6e6abfd7ad2cabd9d69ebba4137f69c7"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">kaldi::nnet2::Convolutional1dComponent::appended_conv_</a></div><div class="ttdeci">bool appended_conv_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01789">nnet-component.h:1789</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_gacbf9367cd910befefa0bc98055979bea"><div class="ttname"><a href="group__io__funcs__basic.html#gacbf9367cd910befefa0bc98055979bea">kaldi::ReadToken</a></div><div class="ttdeci">void ReadToken(std::istream &amp;is, bool binary, std::string *str)</div><div class="ttdoc">ReadToken gets the next token and puts it in str (exception on failure). </div><div class="ttdef"><b>Definition:</b> <a href="io-funcs_8cc_source.html#l00154">io-funcs.cc:154</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a1d93165c40ed0551395cc459acb88112"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">kaldi::nnet2::Convolutional1dComponent::patch_dim_</a></div><div class="ttdeci">int32 patch_dim_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01774">nnet-component.h:1774</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a95a4abdec65e2b9a9dc13725b6879cb9"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">kaldi::nnet2::Convolutional1dComponent::is_gradient_</a></div><div class="ttdeci">bool is_gradient_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01790">nnet-component.h:1790</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a069ad4823c4858c30ffaefaebcc1931f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">kaldi::nnet2::Convolutional1dComponent::patch_stride_</a></div><div class="ttdeci">int32 patch_stride_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01776">nnet-component.h:1776</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga4c7a80f758e878578e78b667f62463a5"><div class="ttname"><a href="group__io__funcs__basic.html#ga4c7a80f758e878578e78b667f62463a5">kaldi::ExpectToken</a></div><div class="ttdeci">void ExpectToken(std::istream &amp;is, bool binary, const char *token)</div><div class="ttdoc">ExpectToken tries to read in the given token, and throws an exception on failure. ...</div><div class="ttdef"><b>Definition:</b> <a href="io-funcs_8cc_source.html#l00194">io-funcs.cc:194</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1UpdatableComponent_html_abef30da8aa0328dd5db955ce0b2a3466"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">kaldi::nnet2::UpdatableComponent::learning_rate_</a></div><div class="ttdeci">BaseFloat learning_rate_</div><div class="ttdoc">learning rate (0.0..0.01) </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l00345">nnet-component.h:345</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_ae71d98406b0ee2f9d5e90798280626b6"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">kaldi::nnet2::Convolutional1dComponent::patch_step_</a></div><div class="ttdeci">int32 patch_step_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01775">nnet-component.h:1775</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a9261b9326e20a8d1f6a9be72c1ad66db"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a9261b9326e20a8d1f6a9be72c1ad66db">kaldi::nnet2::Convolutional1dComponent::Type</a></div><div class="ttdeci">std::string Type() const</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01742">nnet-component.h:1742</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet2_html_a0c661e4a6e94e5d0abaa2bdf325172bc"><div class="ttname"><a href="namespacekaldi_1_1nnet2.html#a0c661e4a6e94e5d0abaa2bdf325172bc">kaldi::nnet2::ExpectOneOrTwoTokens</a></div><div class="ttdeci">static void ExpectOneOrTwoTokens(std::istream &amp;is, bool binary, const std::string &amp;token1, const std::string &amp;token2)</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l00135">nnet-component.cc:135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afcd53b228122d202e7c9bc579ca54246"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcd53b228122d202e7c9bc579ca54246">&#9670;&nbsp;</a></span>RearrangeIndexes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void RearrangeIndexes </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; int32 &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::vector&lt; int32 &gt; &gt; *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03948">3948</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component_8cc_source.html#l03966">Convolutional1dComponent::Backprop()</a>.</p>
<div class="fragment"><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;                                                                                   {</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;  int32 D = in.size();</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;  int32 L = 0;</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; D; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;    <span class="keywordflow">if</span> (in[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].size() &gt; L)</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;      L = in[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].size();</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;  out-&gt;resize(L);</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; L; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;    (*out)[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].resize(D, -1);</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; D; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;    <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; in[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].size(); <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;      (*out)[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>][<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = in[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>][<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>];</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;    }</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;  }</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;}</div><div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d62ac4bb7407d02d9d51a2e0163e405"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d62ac4bb7407d02d9d51a2e0163e405">&#9670;&nbsp;</a></span>Resize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Resize </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>input_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>output_dim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03718">3718</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01786">Convolutional1dComponent::bias_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="_2nnet-component_8h_source.html#l01774">Convolutional1dComponent::patch_dim_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01775">Convolutional1dComponent::patch_step_</a>, and <a class="el" href="_2nnet-component_8h_source.html#l01776">Convolutional1dComponent::patch_stride_</a>.</p>
<div class="fragment"><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;                                                                       {</div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(input_dim &gt; 0 &amp;&amp; output_dim &gt; 0);</div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;  int32 num_splice = input_dim / <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a>;</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;  int32 filter_dim = num_splice * <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>;</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;  int32 num_patches = 1 + (<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a> - <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>) / <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a>;</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;  int32 num_filters = output_dim / num_patches;</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(input_dim % <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a> == 0);</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>((<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a> - patch_dim_) % <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a> == 0);</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(output_dim % num_patches == 0);</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.Resize(num_filters, filter_dim);</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Resize(num_filters);</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a1d93165c40ed0551395cc459acb88112"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">kaldi::nnet2::Convolutional1dComponent::patch_dim_</a></div><div class="ttdeci">int32 patch_dim_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01774">nnet-component.h:1774</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a069ad4823c4858c30ffaefaebcc1931f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">kaldi::nnet2::Convolutional1dComponent::patch_stride_</a></div><div class="ttdeci">int32 patch_stride_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01776">nnet-component.h:1776</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_ae71d98406b0ee2f9d5e90798280626b6"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">kaldi::nnet2::Convolutional1dComponent::patch_step_</a></div><div class="ttdeci">int32 patch_step_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01775">nnet-component.h:1775</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a14d33bff1bd60e8ec8a6af9c2a4607c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14d33bff1bd60e8ec8a6af9c2a4607c2">&#9670;&nbsp;</a></span>ReverseIndexes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ReverseIndexes </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>forward_indexes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>input_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::vector&lt; int32 &gt; &gt; *&#160;</td>
          <td class="paramname"><em>backward_indexes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03920">3920</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component_8cc_source.html#l03966">Convolutional1dComponent::Backprop()</a>.</p>
<div class="fragment"><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;                                                                                              {</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;  int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>, size = forward_indexes.size();</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;  int32 reserve_size = 2 + size / input_dim;</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;  backward_indexes-&gt;resize(input_dim);</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;  std::vector&lt;std::vector&lt;int32&gt; &gt;::iterator iter = backward_indexes-&gt;begin(),</div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;    end = backward_indexes-&gt;end();</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;  <span class="keywordflow">for</span> (; iter != end; ++iter)</div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;    iter-&gt;reserve(reserve_size);</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; forward_indexes.size(); <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;    i = forward_indexes[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>];</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(i &lt; input_dim);</div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;    (*backward_indexes)[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].push_back(<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>);</div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;  }</div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;}</div><div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5a4fc4a0524ae8957baf45b8cb168843"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a4fc4a0524ae8957baf45b8cb168843">&#9670;&nbsp;</a></span>Scale()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Scale </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>scale</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This new virtual function scales the parameters by this amount. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a1632ab44f61acf34f6ac93b9daf93baf">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l03894">3894</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01786">Convolutional1dComponent::bias_params_</a>, and <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>.</p>
<div class="fragment"><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;                                                    {</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.Scale(scale);</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Scale(scale);</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae5e04f6f5379b8b2dd93937913c1e183"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5e04f6f5379b8b2dd93937913c1e183">&#9670;&nbsp;</a></span>SetParams()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetParams </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>bias</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1MatrixBase.html">MatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>filter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l04150">4150</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01786">Convolutional1dComponent::bias_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>
<div class="fragment"><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;                                                                              {</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a> = bias;</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a> = filter;</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Dim() == <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.NumRows());</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a947a5e99fe5ff5534ecfbb3f987febe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a947a5e99fe5ff5534ecfbb3f987febe1">&#9670;&nbsp;</a></span>SetZero()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SetZero </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>treat_as_gradient</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set parameters to zero, and if treat_as_gradient is true, we'll be treating this as a gradient so set the learning rate to 1 and make any other changes necessary (there's a variable we have to set for the MixtureProbComponent). </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#aa89881e9be0d01d34fedd82539973447">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l04048">4048</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01786">Convolutional1dComponent::bias_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01790">Convolutional1dComponent::is_gradient_</a>, and <a class="el" href="_2nnet-component_8h_source.html#l00321">UpdatableComponent::SetLearningRate()</a>.</p>
<div class="fragment"><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;                                                             {</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;  <span class="keywordflow">if</span> (treat_as_gradient) {</div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a8cbbffc6b7aa97d5e9734b771eb59e75">SetLearningRate</a>(1.0);</div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;  }</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.SetZero();</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.SetZero();</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;  <span class="keywordflow">if</span> (treat_as_gradient) {</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;    <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">is_gradient_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;  }</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a95a4abdec65e2b9a9dc13725b6879cb9"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">kaldi::nnet2::Convolutional1dComponent::is_gradient_</a></div><div class="ttdeci">bool is_gradient_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01790">nnet-component.h:1790</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1UpdatableComponent_html_a8cbbffc6b7aa97d5e9734b771eb59e75"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#a8cbbffc6b7aa97d5e9734b771eb59e75">kaldi::nnet2::UpdatableComponent::SetLearningRate</a></div><div class="ttdeci">void SetLearningRate(BaseFloat lrate)</div><div class="ttdoc">Sets the learning rate of gradient descent. </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l00321">nnet-component.h:321</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9261b9326e20a8d1f6a9be72c1ad66db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9261b9326e20a8d1f6a9be72c1ad66db">&#9670;&nbsp;</a></span>Type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classkaldi_1_1nnet2_1_1Component.html#ab6b6147feb5e0688469b735a6546c222">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8h_source.html#l01742">1742</a> of file <a class="el" href="_2nnet-component_8h_source.html">nnet-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component_8cc_source.html#l04380">MaxpoolingComponent::Info()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03732">Convolutional1dComponent::Info()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04269">MaxpoolingComponent::InitFromString()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04059">Convolutional1dComponent::Read()</a>, and <a class="el" href="_2nnet-component_8cc_source.html#l04096">Convolutional1dComponent::Write()</a>.</p>
<div class="fragment"><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;Convolutional1dComponent&quot;</span>; }</div></div><!-- fragment -->
</div>
</div>
<a id="a041a0abedde66a66f7ba7ea329ec3073"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a041a0abedde66a66f7ba7ea329ec3073">&#9670;&nbsp;</a></span>Update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Update </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>in_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>out_deriv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Buffer of reshaped inputs: 1row = vectorized rectangular feature patches 1col = dim over speech frames,</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l04162">4162</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="cu-matrix_8cc_source.html#l01106">CuMatrixBase&lt; Real &gt;::AddMatBlocks()</a>, <a class="el" href="cu-vector_8cc_source.html#l01242">CuVectorBase&lt; Real &gt;::AddRowSumMat()</a>, <a class="el" href="_2nnet-component_8h_source.html#l01789">Convolutional1dComponent::appended_conv_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01786">Convolutional1dComponent::bias_params_</a>, <a class="el" href="cu-matrix_8h_source.html#l00608">CuMatrixBase&lt; Real &gt;::ColRange()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02623">CuMatrixBase&lt; Real &gt;::CopyCols()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00064">rnnlm::d</a>, <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03655">Convolutional1dComponent::InputDim()</a>, <a class="el" href="matrix-common_8h_source.html#l00034">kaldi::kNoTrans</a>, <a class="el" href="matrix-common_8h_source.html#l00038">kaldi::kSetZero</a>, <a class="el" href="matrix-common_8h_source.html#l00033">kaldi::kTrans</a>, <a class="el" href="matrix-common_8h_source.html#l00039">kaldi::kUndefined</a>, <a class="el" href="_2nnet-component_8h_source.html#l00345">UpdatableComponent::learning_rate_</a>, <a class="el" href="cu-matrix_8h_source.html#l00215">CuMatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="cu-matrix_8h_source.html#l00214">CuMatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="_2nnet-component_8h_source.html#l01774">Convolutional1dComponent::patch_dim_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01775">Convolutional1dComponent::patch_step_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01776">Convolutional1dComponent::patch_stride_</a>, <a class="el" href="cu-vector_8cc_source.html#l00961">CuVector&lt; Real &gt;::Resize()</a>, and <a class="el" href="cu-matrix_8cc_source.html#l00049">CuMatrix&lt; Real &gt;::Resize()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component_8cc_source.html#l03966">Convolutional1dComponent::Backprop()</a>.</p>
<div class="fragment"><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;                                                                                {</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;  <span class="comment">// useful dims</span></div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;  int32 num_patches = 1 + (<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a> - <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>) / <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a>;</div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;  int32 num_filters = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.NumRows();</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;  int32 filter_dim = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.NumCols();</div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;  int32 num_frames = in_value.NumRows();</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;  int32 num_splice = <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa5083adaff49881915d61ebf045e96db">InputDim</a>() / <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a>;</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;  CuMatrix&lt;BaseFloat&gt; filters_grad;</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;  CuVector&lt;BaseFloat&gt; bias_grad;</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;  CuMatrix&lt;BaseFloat&gt; patches(num_frames, filter_dim * num_patches, <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;  std::vector&lt;int32&gt; column_map(filter_dim * num_patches);</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;  <span class="keywordflow">for</span> (int32 patch = 0, index = 0; patch &lt; num_patches; patch++) {</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;    int32 fstride = patch * <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a>;</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;    <span class="keywordflow">for</span> (int32 splice = 0; splice &lt; num_splice; splice++) {</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;      int32 cstride = splice * <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a>;</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;      <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a> = 0; <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a> &lt; <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>; <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>++, index++) {</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">appended_conv_</a>)</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;          column_map[index] = (fstride + <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>) * num_splice + splice;</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;          column_map[index] = fstride + cstride + <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>;</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;      }</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;    }</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;  }</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;  CuArray&lt;int32&gt; cu_cols(column_map);</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;  patches.CopyCols(in_value, cu_cols);</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;  <span class="comment">// calculate the gradient</span></div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;  filters_grad.Resize(num_filters, filter_dim, <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a>); <span class="comment">// reset</span></div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;  bias_grad.Resize(num_filters, <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a>); <span class="comment">// reset</span></div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;  <span class="comment">// use all the patches</span></div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;</div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;  <span class="comment">// create a single large matrix holding the smaller matrices</span></div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;  <span class="comment">// from the vector container filters_grad_batch along the rows</span></div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;  CuMatrix&lt;BaseFloat&gt; filters_grad_blocks_batch(</div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;      num_patches * filters_grad.NumRows(), filters_grad.NumCols());</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;  std::vector&lt;CuSubMatrix&lt;BaseFloat&gt;* &gt; filters_grad_batch, diff_patch_batch,</div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;      patch_batch;</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;  <span class="keywordflow">for</span> (int32 p = 0; p &lt; num_patches; p++) {</div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;    <span class="comment">// form batch in vector container</span></div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;    filters_grad_batch.push_back(<span class="keyword">new</span> CuSubMatrix&lt;BaseFloat&gt;(</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;        filters_grad_blocks_batch.RowRange(</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;            p * filters_grad.NumRows(),</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;            filters_grad.NumRows())));</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;    diff_patch_batch.push_back(<span class="keyword">new</span> CuSubMatrix&lt;BaseFloat&gt;(out_deriv.ColRange(</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;        p * num_filters, num_filters)));</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;    patch_batch.push_back(<span class="keyword">new</span> CuSubMatrix&lt;BaseFloat&gt;(patches.ColRange(</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;        p * filter_dim, filter_dim)));</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;  }</div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;  AddMatMatBatched&lt;BaseFloat&gt;(1.0, filters_grad_batch, diff_patch_batch,</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;                              <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kTrans</a>, patch_batch, <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d">kNoTrans</a>, 1.0);</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;  <span class="comment">// add the row blocks together to filters_grad</span></div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;  filters_grad.AddMatBlocks(1.0, filters_grad_blocks_batch);</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;  <span class="comment">// create a matrix holding the col blocks sum of out_deriv</span></div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;  CuMatrix&lt;BaseFloat&gt; out_deriv_col_blocks_sum(out_deriv.NumRows(), num_filters);</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;</div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;  <span class="comment">// add the col blocks together to out_deriv_col_blocks_sum</span></div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;  out_deriv_col_blocks_sum.AddMatBlocks(1.0, out_deriv);</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;</div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;  bias_grad.AddRowSumMat(1.0, out_deriv_col_blocks_sum, 1.0);</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;  <span class="comment">// release memory</span></div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;  <span class="keywordflow">for</span> (int32 p = 0; p &lt; num_patches; p++) {</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;    <span class="keyword">delete</span> filters_grad_batch[p];</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;    <span class="keyword">delete</span> diff_patch_batch[p];</div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;    <span class="keyword">delete</span> patch_batch[p];</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;  }</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;  <span class="comment">// update</span></div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.AddMat(<a class="code" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">learning_rate_</a>, filters_grad);</div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.AddVec(<a class="code" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">learning_rate_</a>, bias_grad);</div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00039">matrix-common.h:39</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a6e6abfd7ad2cabd9d69ebba4137f69c7"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">kaldi::nnet2::Convolutional1dComponent::appended_conv_</a></div><div class="ttdeci">bool appended_conv_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01789">nnet-component.h:1789</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a1d93165c40ed0551395cc459acb88112"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">kaldi::nnet2::Convolutional1dComponent::patch_dim_</a></div><div class="ttdeci">int32 patch_dim_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01774">nnet-component.h:1774</a></div></div>
<div class="ttc" id="namespacekaldi_html_a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2"><div class="ttname"><a href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kaldi::kTrans</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00033">matrix-common.h:33</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a069ad4823c4858c30ffaefaebcc1931f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">kaldi::nnet2::Convolutional1dComponent::patch_stride_</a></div><div class="ttdeci">int32 patch_stride_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01776">nnet-component.h:1776</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1UpdatableComponent_html_abef30da8aa0328dd5db955ce0b2a3466"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">kaldi::nnet2::UpdatableComponent::learning_rate_</a></div><div class="ttdeci">BaseFloat learning_rate_</div><div class="ttdoc">learning rate (0.0..0.01) </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l00345">nnet-component.h:345</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
<div class="ttc" id="namespacekaldi_html_a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d"><div class="ttname"><a href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa6decd3b781a809d748e5221d49f0ab5d">kaldi::kNoTrans</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00034">matrix-common.h:34</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_aa5083adaff49881915d61ebf045e96db"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#aa5083adaff49881915d61ebf045e96db">kaldi::nnet2::Convolutional1dComponent::InputDim</a></div><div class="ttdeci">int32 InputDim() const</div><div class="ttdoc">Get size of input vectors. </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8cc_source.html#l03655">nnet-component.cc:3655</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_ae71d98406b0ee2f9d5e90798280626b6"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">kaldi::nnet2::Convolutional1dComponent::patch_step_</a></div><div class="ttdeci">int32 patch_step_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01775">nnet-component.h:1775</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kaldi::kSetZero</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00038">matrix-common.h:38</a></div></div>
<div class="ttc" id="namespacernnlm_html_a873684cefeb665f3d5e6b495de57fc0d"><div class="ttname"><a href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">rnnlm::d</a></div><div class="ttdeci">double d</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00064">mikolov-rnnlm-lib.cc:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a68f354fd5f096134162f01719096e6fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68f354fd5f096134162f01719096e6fc">&#9670;&nbsp;</a></span>Write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Write </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>binary</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write component to stream. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet2_1_1Component.html#a852bc7306aaa45b284f662f1ddb1a3d5">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8cc_source.html#l04096">4096</a> of file <a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-component_8h_source.html#l01789">Convolutional1dComponent::appended_conv_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01786">Convolutional1dComponent::bias_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01785">Convolutional1dComponent::filter_params_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01790">Convolutional1dComponent::is_gradient_</a>, <a class="el" href="_2nnet-component_8h_source.html#l00345">UpdatableComponent::learning_rate_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01774">Convolutional1dComponent::patch_dim_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01775">Convolutional1dComponent::patch_step_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01776">Convolutional1dComponent::patch_stride_</a>, <a class="el" href="_2nnet-component_8h_source.html#l01742">Convolutional1dComponent::Type()</a>, <a class="el" href="io-funcs-inl_8h_source.html#l00034">kaldi::WriteBasicType()</a>, and <a class="el" href="io-funcs_8cc_source.html#l00134">kaldi::WriteToken()</a>.</p>
<div class="fragment"><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;                                                                      {</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;  std::ostringstream ostr_beg, ostr_end;</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;  ostr_beg &lt;&lt; <span class="stringliteral">&quot;&lt;&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a9261b9326e20a8d1f6a9be72c1ad66db">Type</a>() &lt;&lt; <span class="stringliteral">&quot;&gt;&quot;</span>; <span class="comment">// e.g. &quot;&lt;Convolutional1dComponent&gt;&quot;</span></div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;  ostr_end &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a9261b9326e20a8d1f6a9be72c1ad66db">Type</a>() &lt;&lt; <span class="stringliteral">&quot;&gt;&quot;</span>; <span class="comment">// e.g. &quot;&lt;/Convolutional1dComponent&gt;&quot;</span></div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, ostr_beg.str());</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;LearningRate&gt;&quot;</span>);</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, <a class="code" href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">learning_rate_</a>);</div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;PatchDim&gt;&quot;</span>);</div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">patch_dim_</a>);</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;PatchStep&gt;&quot;</span>);</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">patch_step_</a>);</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;PatchStride&gt;&quot;</span>);</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">patch_stride_</a>);</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;AppendedConv&gt;&quot;</span>);</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">appended_conv_</a>);</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;FilterParams&gt;&quot;</span>);</div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">filter_params_</a>.Write(os, binary);</div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;BiasParams&gt;&quot;</span>);</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;  <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Write(os, binary);</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;IsGradient&gt;&quot;</span>);</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, <a class="code" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">is_gradient_</a>);</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, ostr_end.str());</div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a0b9960b51716b06421895f9b61d7b08f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a0b9960b51716b06421895f9b61d7b08f">kaldi::nnet2::Convolutional1dComponent::filter_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; filter_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01785">nnet-component.h:1785</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a6e6abfd7ad2cabd9d69ebba4137f69c7"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a6e6abfd7ad2cabd9d69ebba4137f69c7">kaldi::nnet2::Convolutional1dComponent::appended_conv_</a></div><div class="ttdeci">bool appended_conv_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01789">nnet-component.h:1789</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a1d93165c40ed0551395cc459acb88112"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a1d93165c40ed0551395cc459acb88112">kaldi::nnet2::Convolutional1dComponent::patch_dim_</a></div><div class="ttdeci">int32 patch_dim_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01774">nnet-component.h:1774</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a95a4abdec65e2b9a9dc13725b6879cb9"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">kaldi::nnet2::Convolutional1dComponent::is_gradient_</a></div><div class="ttdeci">bool is_gradient_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01790">nnet-component.h:1790</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a069ad4823c4858c30ffaefaebcc1931f"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a069ad4823c4858c30ffaefaebcc1931f">kaldi::nnet2::Convolutional1dComponent::patch_stride_</a></div><div class="ttdeci">int32 patch_stride_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01776">nnet-component.h:1776</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1UpdatableComponent_html_abef30da8aa0328dd5db955ce0b2a3466"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">kaldi::nnet2::UpdatableComponent::learning_rate_</a></div><div class="ttdeci">BaseFloat learning_rate_</div><div class="ttdoc">learning rate (0.0..0.01) </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l00345">nnet-component.h:345</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet2::Convolutional1dComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01786">nnet-component.h:1786</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga87f1638ef3c0a3ee117178b202c2d02a"><div class="ttname"><a href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">kaldi::WriteToken</a></div><div class="ttdeci">void WriteToken(std::ostream &amp;os, bool binary, const char *token)</div><div class="ttdoc">The WriteToken functions are for writing nonempty sequences of non-space characters. </div><div class="ttdef"><b>Definition:</b> <a href="io-funcs_8cc_source.html#l00134">io-funcs.cc:134</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_ae71d98406b0ee2f9d5e90798280626b6"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#ae71d98406b0ee2f9d5e90798280626b6">kaldi::nnet2::Convolutional1dComponent::patch_step_</a></div><div class="ttdeci">int32 patch_step_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01775">nnet-component.h:1775</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet2_1_1Convolutional1dComponent_html_a9261b9326e20a8d1f6a9be72c1ad66db"><div class="ttname"><a href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html#a9261b9326e20a8d1f6a9be72c1ad66db">kaldi::nnet2::Convolutional1dComponent::Type</a></div><div class="ttdeci">std::string Type() const</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-component_8h_source.html#l01742">nnet-component.h:1742</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga108506a9aabafd9006926aa1b47617da"><div class="ttname"><a href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">kaldi::WriteBasicType</a></div><div class="ttdeci">void WriteBasicType(std::ostream &amp;os, bool binary, T t)</div><div class="ttdoc">WriteBasicType is the name of the write function for bool, integer types, and floating-point types...</div><div class="ttdef"><b>Definition:</b> <a href="io-funcs-inl_8h_source.html#l00034">io-funcs-inl.h:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6e6abfd7ad2cabd9d69ebba4137f69c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e6abfd7ad2cabd9d69ebba4137f69c7">&#9670;&nbsp;</a></span>appended_conv_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> appended_conv_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8h_source.html#l01789">1789</a> of file <a class="el" href="_2nnet-component_8h_source.html">nnet-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component_8cc_source.html#l03966">Convolutional1dComponent::Backprop()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03642">Convolutional1dComponent::Convolutional1dComponent()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04127">Convolutional1dComponent::Copy()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03732">Convolutional1dComponent::Info()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03669">Convolutional1dComponent::Init()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03819">Convolutional1dComponent::Propagate()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04059">Convolutional1dComponent::Read()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04162">Convolutional1dComponent::Update()</a>, and <a class="el" href="_2nnet-component_8cc_source.html#l04096">Convolutional1dComponent::Write()</a>.</p>

</div>
</div>
<a id="a80919dec61ec4f145d2b70cca6d2c306"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80919dec61ec4f145d2b70cca6d2c306">&#9670;&nbsp;</a></span>bias_params_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuVector.html">CuVector</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; bias_params_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8h_source.html#l01786">1786</a> of file <a class="el" href="_2nnet-component_8h_source.html">nnet-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component_8cc_source.html#l03900">Convolutional1dComponent::Add()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04127">Convolutional1dComponent::Copy()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04120">Convolutional1dComponent::DotProduct()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03732">Convolutional1dComponent::Info()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03669">Convolutional1dComponent::Init()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04140">Convolutional1dComponent::PerturbParams()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03819">Convolutional1dComponent::Propagate()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04059">Convolutional1dComponent::Read()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03718">Convolutional1dComponent::Resize()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03894">Convolutional1dComponent::Scale()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04150">Convolutional1dComponent::SetParams()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04048">Convolutional1dComponent::SetZero()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04162">Convolutional1dComponent::Update()</a>, and <a class="el" href="_2nnet-component_8cc_source.html#l04096">Convolutional1dComponent::Write()</a>.</p>

</div>
</div>
<a id="a0b9960b51716b06421895f9b61d7b08f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b9960b51716b06421895f9b61d7b08f">&#9670;&nbsp;</a></span>filter_params_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; filter_params_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8h_source.html#l01785">1785</a> of file <a class="el" href="_2nnet-component_8h_source.html">nnet-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component_8cc_source.html#l03900">Convolutional1dComponent::Add()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03966">Convolutional1dComponent::Backprop()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04127">Convolutional1dComponent::Copy()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04120">Convolutional1dComponent::DotProduct()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04157">Convolutional1dComponent::GetParameterDim()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03732">Convolutional1dComponent::Info()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03669">Convolutional1dComponent::Init()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03655">Convolutional1dComponent::InputDim()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03662">Convolutional1dComponent::OutputDim()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04140">Convolutional1dComponent::PerturbParams()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03819">Convolutional1dComponent::Propagate()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04059">Convolutional1dComponent::Read()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03718">Convolutional1dComponent::Resize()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03894">Convolutional1dComponent::Scale()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04150">Convolutional1dComponent::SetParams()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04048">Convolutional1dComponent::SetZero()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04162">Convolutional1dComponent::Update()</a>, and <a class="el" href="_2nnet-component_8cc_source.html#l04096">Convolutional1dComponent::Write()</a>.</p>

</div>
</div>
<a id="a95a4abdec65e2b9a9dc13725b6879cb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95a4abdec65e2b9a9dc13725b6879cb9">&#9670;&nbsp;</a></span>is_gradient_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> is_gradient_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8h_source.html#l01790">1790</a> of file <a class="el" href="_2nnet-component_8h_source.html">nnet-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component_8cc_source.html#l03642">Convolutional1dComponent::Convolutional1dComponent()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04127">Convolutional1dComponent::Copy()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04059">Convolutional1dComponent::Read()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04048">Convolutional1dComponent::SetZero()</a>, and <a class="el" href="_2nnet-component_8cc_source.html#l04096">Convolutional1dComponent::Write()</a>.</p>

</div>
</div>
<a id="a1d93165c40ed0551395cc459acb88112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d93165c40ed0551395cc459acb88112">&#9670;&nbsp;</a></span>patch_dim_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 patch_dim_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8h_source.html#l01774">1774</a> of file <a class="el" href="_2nnet-component_8h_source.html">nnet-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component_8cc_source.html#l03966">Convolutional1dComponent::Backprop()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04127">Convolutional1dComponent::Copy()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03732">Convolutional1dComponent::Info()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03669">Convolutional1dComponent::Init()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03655">Convolutional1dComponent::InputDim()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03662">Convolutional1dComponent::OutputDim()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03819">Convolutional1dComponent::Propagate()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04059">Convolutional1dComponent::Read()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03718">Convolutional1dComponent::Resize()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04162">Convolutional1dComponent::Update()</a>, and <a class="el" href="_2nnet-component_8cc_source.html#l04096">Convolutional1dComponent::Write()</a>.</p>

</div>
</div>
<a id="ae71d98406b0ee2f9d5e90798280626b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae71d98406b0ee2f9d5e90798280626b6">&#9670;&nbsp;</a></span>patch_step_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 patch_step_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8h_source.html#l01775">1775</a> of file <a class="el" href="_2nnet-component_8h_source.html">nnet-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component_8cc_source.html#l03966">Convolutional1dComponent::Backprop()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04127">Convolutional1dComponent::Copy()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03732">Convolutional1dComponent::Info()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03669">Convolutional1dComponent::Init()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03662">Convolutional1dComponent::OutputDim()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03819">Convolutional1dComponent::Propagate()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04059">Convolutional1dComponent::Read()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03718">Convolutional1dComponent::Resize()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04162">Convolutional1dComponent::Update()</a>, and <a class="el" href="_2nnet-component_8cc_source.html#l04096">Convolutional1dComponent::Write()</a>.</p>

</div>
</div>
<a id="a069ad4823c4858c30ffaefaebcc1931f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a069ad4823c4858c30ffaefaebcc1931f">&#9670;&nbsp;</a></span>patch_stride_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 patch_stride_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-component_8h_source.html#l01776">1776</a> of file <a class="el" href="_2nnet-component_8h_source.html">nnet-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-component_8cc_source.html#l03966">Convolutional1dComponent::Backprop()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04127">Convolutional1dComponent::Copy()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03732">Convolutional1dComponent::Info()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03669">Convolutional1dComponent::Init()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03655">Convolutional1dComponent::InputDim()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03662">Convolutional1dComponent::OutputDim()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03819">Convolutional1dComponent::Propagate()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04059">Convolutional1dComponent::Read()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l03718">Convolutional1dComponent::Resize()</a>, <a class="el" href="_2nnet-component_8cc_source.html#l04162">Convolutional1dComponent::Update()</a>, and <a class="el" href="_2nnet-component_8cc_source.html#l04096">Convolutional1dComponent::Write()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>nnet2/<a class="el" href="_2nnet-component_8h_source.html">nnet-component.h</a></li>
<li>nnet2/<a class="el" href="_2nnet-component_8cc_source.html">nnet-component.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekaldi.html">kaldi</a></li><li class="navelem"><a class="el" href="namespacekaldi_1_1nnet2.html">nnet2</a></li><li class="navelem"><a class="el" href="classkaldi_1_1nnet2_1_1Convolutional1dComponent.html">Convolutional1dComponent</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
