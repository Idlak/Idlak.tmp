<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: TimeHeightConvolutionComponent Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TimeHeightConvolutionComponent Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html" title="TimeHeightConvolutionComponent implements 2-dimensional convolution where one of the dimensions of co...">TimeHeightConvolutionComponent</a> implements 2-dimensional convolution where one of the dimensions of convolution (which traditionally would be called the width axis) is identified with time (i.e.  
 <a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for TimeHeightConvolutionComponent:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent__inherit__graph.png" border="0" usemap="#TimeHeightConvolutionComponent_inherit__map" alt="Inheritance graph"/></div>
<map name="TimeHeightConvolutionComponent_inherit__map" id="TimeHeightConvolutionComponent_inherit__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for TimeHeightConvolutionComponent:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent__coll__graph.png" border="0" usemap="#TimeHeightConvolutionComponent_coll__map" alt="Collaboration graph"/></div>
<map name="TimeHeightConvolutionComponent_coll__map" id="TimeHeightConvolutionComponent_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_1_1PrecomputedIndexes.html">PrecomputedIndexes</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a82e23480a8a23580ad74f1a23dcd9311"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a82e23480a8a23580ad74f1a23dcd9311">TimeHeightConvolutionComponent</a> ()</td></tr>
<tr class="separator:a82e23480a8a23580ad74f1a23dcd9311"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a3162776c6321009801847ebbb46352"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4a3162776c6321009801847ebbb46352">TimeHeightConvolutionComponent</a> (const <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html">TimeHeightConvolutionComponent</a> &amp;other)</td></tr>
<tr class="separator:a4a3162776c6321009801847ebbb46352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5083adaff49881915d61ebf045e96db"><td class="memItemLeft" align="right" valign="top">virtual int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#aa5083adaff49881915d61ebf045e96db">InputDim</a> () const</td></tr>
<tr class="memdesc:aa5083adaff49881915d61ebf045e96db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns input-dimension of this component.  <a href="#aa5083adaff49881915d61ebf045e96db">More...</a><br /></td></tr>
<tr class="separator:aa5083adaff49881915d61ebf045e96db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af97474cce492a0b8305e8ec2c798509b"><td class="memItemLeft" align="right" valign="top">virtual int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#af97474cce492a0b8305e8ec2c798509b">OutputDim</a> () const</td></tr>
<tr class="memdesc:af97474cce492a0b8305e8ec2c798509b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns output-dimension of this component.  <a href="#af97474cce492a0b8305e8ec2c798509b">More...</a><br /></td></tr>
<tr class="separator:af97474cce492a0b8305e8ec2c798509b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a245d65d566725422b859c99bff7623f8"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a245d65d566725422b859c99bff7623f8">Info</a> () const</td></tr>
<tr class="memdesc:a245d65d566725422b859c99bff7623f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns some text-form information about this component, for diagnostics.  <a href="#a245d65d566725422b859c99bff7623f8">More...</a><br /></td></tr>
<tr class="separator:a245d65d566725422b859c99bff7623f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4f5c35427c2657c50173313e99e3f01"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ac4f5c35427c2657c50173313e99e3f01">InitFromConfig</a> (<a class="el" href="classkaldi_1_1nnet3_1_1ConfigLine.html">ConfigLine</a> *cfl)</td></tr>
<tr class="memdesc:ac4f5c35427c2657c50173313e99e3f01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize, from a <a class="el" href="classkaldi_1_1nnet3_1_1ConfigLine.html" title="This class is responsible for parsing input like hi-there xx=yyy a=b c empty= f-oo=Append(bar, sss) ba_z=123 bing=&#39;a b c&#39; baz=&quot;a b c d=&#39;a b&#39; e&quot; and giving you access to the fields, in this case. ">ConfigLine</a> object.  <a href="#ac4f5c35427c2657c50173313e99e3f01">More...</a><br /></td></tr>
<tr class="separator:ac4f5c35427c2657c50173313e99e3f01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2d951f58073f362411ee482aa469975"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#af2d951f58073f362411ee482aa469975">Type</a> () const</td></tr>
<tr class="memdesc:af2d951f58073f362411ee482aa469975"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a string such as "SigmoidComponent", describing the type of the object.  <a href="#af2d951f58073f362411ee482aa469975">More...</a><br /></td></tr>
<tr class="separator:af2d951f58073f362411ee482aa469975"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a16a6da3a5108ec53e759722a51fd47"><td class="memItemLeft" align="right" valign="top">virtual int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4a16a6da3a5108ec53e759722a51fd47">Properties</a> () const</td></tr>
<tr class="memdesc:a4a16a6da3a5108ec53e759722a51fd47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return bitmask of the component's properties.  <a href="#a4a16a6da3a5108ec53e759722a51fd47">More...</a><br /></td></tr>
<tr class="separator:a4a16a6da3a5108ec53e759722a51fd47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f1f1b05a170bd81a544caefe1acb040"><td class="memItemLeft" align="right" valign="top">virtual void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a8f1f1b05a170bd81a544caefe1acb040">Propagate</a> (const <a class="el" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a> *indexes, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;in, <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *out) const</td></tr>
<tr class="memdesc:a8f1f1b05a170bd81a544caefe1acb040"><td class="mdescLeft">&#160;</td><td class="mdescRight">Propagate function.  <a href="#a8f1f1b05a170bd81a544caefe1acb040">More...</a><br /></td></tr>
<tr class="separator:a8f1f1b05a170bd81a544caefe1acb040"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0f9bb1c29228fa0a498a19b83ac5190"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ac0f9bb1c29228fa0a498a19b83ac5190">Backprop</a> (const std::string &amp;debug_info, const <a class="el" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a> *indexes, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;in_value, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;out_value, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;out_deriv, void *memo, <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *to_update, <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *in_deriv) const</td></tr>
<tr class="memdesc:ac0f9bb1c29228fa0a498a19b83ac5190"><td class="mdescLeft">&#160;</td><td class="mdescRight">Backprop function; depending on which of the arguments 'to_update' and 'in_deriv' are non-NULL, this can compute input-data derivatives and/or perform model update.  <a href="#ac0f9bb1c29228fa0a498a19b83ac5190">More...</a><br /></td></tr>
<tr class="separator:ac0f9bb1c29228fa0a498a19b83ac5190"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e7d2790fc7e94fe9780ccc937de1270"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a8e7d2790fc7e94fe9780ccc937de1270">Read</a> (std::istream &amp;is, <a class="el" href="classbool.html">bool</a> binary)</td></tr>
<tr class="memdesc:a8e7d2790fc7e94fe9780ccc937de1270"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read function (used after we know the type of the <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a>); accepts input that is missing the token that describes the component type, in case it has already been consumed.  <a href="#a8e7d2790fc7e94fe9780ccc937de1270">More...</a><br /></td></tr>
<tr class="separator:a8e7d2790fc7e94fe9780ccc937de1270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68f354fd5f096134162f01719096e6fc"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a68f354fd5f096134162f01719096e6fc">Write</a> (std::ostream &amp;os, <a class="el" href="classbool.html">bool</a> binary) const</td></tr>
<tr class="memdesc:a68f354fd5f096134162f01719096e6fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write component to stream.  <a href="#a68f354fd5f096134162f01719096e6fc">More...</a><br /></td></tr>
<tr class="separator:a68f354fd5f096134162f01719096e6fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1de31388e6c4839d855713baedc4f44b"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a1de31388e6c4839d855713baedc4f44b">Copy</a> () const</td></tr>
<tr class="memdesc:a1de31388e6c4839d855713baedc4f44b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies component (deep copy).  <a href="#a1de31388e6c4839d855713baedc4f44b">More...</a><br /></td></tr>
<tr class="separator:a1de31388e6c4839d855713baedc4f44b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2133bab2e5e5e64e8136a341971f2012"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a2133bab2e5e5e64e8136a341971f2012">ReorderIndexes</a> (std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; *input_indexes, std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; *output_indexes) const</td></tr>
<tr class="memdesc:a2133bab2e5e5e64e8136a341971f2012"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function only does something interesting for non-simple Components.  <a href="#a2133bab2e5e5e64e8136a341971f2012">More...</a><br /></td></tr>
<tr class="separator:a2133bab2e5e5e64e8136a341971f2012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d7b185ac981780bcfaed7dfdd8908d8"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9d7b185ac981780bcfaed7dfdd8908d8">GetInputIndexes</a> (const <a class="el" href="structkaldi_1_1nnet3_1_1MiscComputationInfo.html">MiscComputationInfo</a> &amp;misc_info, const <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &amp;output_index, std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; *desired_indexes) const</td></tr>
<tr class="memdesc:a9d7b185ac981780bcfaed7dfdd8908d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function only does something interesting for non-simple Components.  <a href="#a9d7b185ac981780bcfaed7dfdd8908d8">More...</a><br /></td></tr>
<tr class="separator:a9d7b185ac981780bcfaed7dfdd8908d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a529c07610dd915a30e452f80b8bb5fc0"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a529c07610dd915a30e452f80b8bb5fc0">IsComputable</a> (const <a class="el" href="structkaldi_1_1nnet3_1_1MiscComputationInfo.html">MiscComputationInfo</a> &amp;misc_info, const <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &amp;output_index, const <a class="el" href="classkaldi_1_1nnet3_1_1IndexSet.html">IndexSet</a> &amp;input_index_set, std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; *used_inputs) const</td></tr>
<tr class="memdesc:a529c07610dd915a30e452f80b8bb5fc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function only does something interesting for non-simple Components, and it exists to make it possible to manage optionally-required inputs.  <a href="#a529c07610dd915a30e452f80b8bb5fc0">More...</a><br /></td></tr>
<tr class="separator:a529c07610dd915a30e452f80b8bb5fc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b2919d1c6cfa5f73581f407150374b6"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a8b2919d1c6cfa5f73581f407150374b6">PrecomputeIndexes</a> (const <a class="el" href="structkaldi_1_1nnet3_1_1MiscComputationInfo.html">MiscComputationInfo</a> &amp;misc_info, const std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; &amp;input_indexes, const std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; &amp;output_indexes, <a class="el" href="classbool.html">bool</a> need_backprop) const</td></tr>
<tr class="memdesc:a8b2919d1c6cfa5f73581f407150374b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function must return NULL for simple Components.  <a href="#a8b2919d1c6cfa5f73581f407150374b6">More...</a><br /></td></tr>
<tr class="separator:a8b2919d1c6cfa5f73581f407150374b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a4fc4a0524ae8957baf45b8cb168843"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a5a4fc4a0524ae8957baf45b8cb168843">Scale</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> scale)</td></tr>
<tr class="memdesc:a5a4fc4a0524ae8957baf45b8cb168843"><td class="mdescLeft">&#160;</td><td class="mdescRight">This virtual function when called on &ndash; an <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a> scales the parameters by "scale" when called by an <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a>.  <a href="#a5a4fc4a0524ae8957baf45b8cb168843">More...</a><br /></td></tr>
<tr class="separator:a5a4fc4a0524ae8957baf45b8cb168843"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb3e97b46276e3c9f4f696c2bef3943"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#acdb3e97b46276e3c9f4f696c2bef3943">Add</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> alpha, const <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> &amp;other)</td></tr>
<tr class="memdesc:acdb3e97b46276e3c9f4f696c2bef3943"><td class="mdescLeft">&#160;</td><td class="mdescRight">This virtual function when called by &ndash; an <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a> adds the parameters of another updatable component, times some constant, to the current parameters.  <a href="#acdb3e97b46276e3c9f4f696c2bef3943">More...</a><br /></td></tr>
<tr class="separator:acdb3e97b46276e3c9f4f696c2bef3943"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69a59272c763dc9372ad7d0671a87dad"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a69a59272c763dc9372ad7d0671a87dad">PerturbParams</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> stddev)</td></tr>
<tr class="memdesc:a69a59272c763dc9372ad7d0671a87dad"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is to be used in testing.  <a href="#a69a59272c763dc9372ad7d0671a87dad">More...</a><br /></td></tr>
<tr class="separator:a69a59272c763dc9372ad7d0671a87dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87b95e5c043a8221ad58b2512b2d81c9"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a87b95e5c043a8221ad58b2512b2d81c9">DotProduct</a> (const <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html">UpdatableComponent</a> &amp;other) const</td></tr>
<tr class="memdesc:a87b95e5c043a8221ad58b2512b2d81c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes dot-product between parameters of two instances of a <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a>.  <a href="#a87b95e5c043a8221ad58b2512b2d81c9">More...</a><br /></td></tr>
<tr class="separator:a87b95e5c043a8221ad58b2512b2d81c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ff16fe9504cbce1089af9cd84386405"><td class="memItemLeft" align="right" valign="top">virtual int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a1ff16fe9504cbce1089af9cd84386405">NumParameters</a> () const</td></tr>
<tr class="memdesc:a1ff16fe9504cbce1089af9cd84386405"><td class="mdescLeft">&#160;</td><td class="mdescRight">The following new virtual function returns the total dimension of the parameters in this class.  <a href="#a1ff16fe9504cbce1089af9cd84386405">More...</a><br /></td></tr>
<tr class="separator:a1ff16fe9504cbce1089af9cd84386405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa4edb6094210608b8d3923f312f5a75"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#afa4edb6094210608b8d3923f312f5a75">Vectorize</a> (<a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *params) const</td></tr>
<tr class="memdesc:afa4edb6094210608b8d3923f312f5a75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns the parameters into vector form.  <a href="#afa4edb6094210608b8d3923f312f5a75">More...</a><br /></td></tr>
<tr class="separator:afa4edb6094210608b8d3923f312f5a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8619ba84ef93f98fa42dbcd11011e3a3"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a8619ba84ef93f98fa42dbcd11011e3a3">UnVectorize</a> (const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;params)</td></tr>
<tr class="memdesc:a8619ba84ef93f98fa42dbcd11011e3a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts the parameters from vector form.  <a href="#a8619ba84ef93f98fa42dbcd11011e3a3">More...</a><br /></td></tr>
<tr class="separator:a8619ba84ef93f98fa42dbcd11011e3a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32206a7478069f9e3e86e698bf526e30"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a32206a7478069f9e3e86e698bf526e30">FreezeNaturalGradient</a> (<a class="el" href="classbool.html">bool</a> freeze)</td></tr>
<tr class="memdesc:a32206a7478069f9e3e86e698bf526e30"><td class="mdescLeft">&#160;</td><td class="mdescRight">freezes/unfreezes NaturalGradient updates, if applicable (to be overriden by components that use Natural Gradient).  <a href="#a32206a7478069f9e3e86e698bf526e30">More...</a><br /></td></tr>
<tr class="separator:a32206a7478069f9e3e86e698bf526e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3358032f1fd3596fcf2bda51e24ae5b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a3358032f1fd3596fcf2bda51e24ae5b3">ScaleLinearParams</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> alpha)</td></tr>
<tr class="separator:a3358032f1fd3596fcf2bda51e24ae5b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aced42a39258a3786f1f3d8b31314913c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#aced42a39258a3786f1f3d8b31314913c">ConsolidateMemory</a> ()</td></tr>
<tr class="memdesc:aced42a39258a3786f1f3d8b31314913c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This virtual function relates to memory management, and avoiding fragmentation.  <a href="#aced42a39258a3786f1f3d8b31314913c">More...</a><br /></td></tr>
<tr class="separator:aced42a39258a3786f1f3d8b31314913c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html">UpdatableComponent</a></td></tr>
<tr class="memitem:a2291e94d519e3ea5a11e78c96ef39579 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2291e94d519e3ea5a11e78c96ef39579">UpdatableComponent</a> (const <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html">UpdatableComponent</a> &amp;other)</td></tr>
<tr class="separator:a2291e94d519e3ea5a11e78c96ef39579 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2af26d78825cc522c324976403bf4e4e inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a> ()</td></tr>
<tr class="separator:a2af26d78825cc522c324976403bf4e4e inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36873742fd6ae5311c593a7b437365c1 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a36873742fd6ae5311c593a7b437365c1">~UpdatableComponent</a> ()</td></tr>
<tr class="separator:a36873742fd6ae5311c593a7b437365c1 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1457bf90197b0fcc510dc52a632eedd3 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a1457bf90197b0fcc510dc52a632eedd3">SetUnderlyingLearningRate</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> lrate)</td></tr>
<tr class="memdesc:a1457bf90197b0fcc510dc52a632eedd3 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the learning rate of gradient descent- gets multiplied by learning_rate_factor_.  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a1457bf90197b0fcc510dc52a632eedd3">More...</a><br /></td></tr>
<tr class="separator:a1457bf90197b0fcc510dc52a632eedd3 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe5023a317ed0865367180c75877f866 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#afe5023a317ed0865367180c75877f866">SetActualLearningRate</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> lrate)</td></tr>
<tr class="memdesc:afe5023a317ed0865367180c75877f866 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the learning rate directly, bypassing learning_rate_factor_.  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#afe5023a317ed0865367180c75877f866">More...</a><br /></td></tr>
<tr class="separator:afe5023a317ed0865367180c75877f866 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59a054b2e21fc81601d0eeebd6dc578a inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a59a054b2e21fc81601d0eeebd6dc578a">SetAsGradient</a> ()</td></tr>
<tr class="memdesc:a59a054b2e21fc81601d0eeebd6dc578a inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets is_gradient_ to true and sets learning_rate_ to 1, ignoring learning_rate_factor_.  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a59a054b2e21fc81601d0eeebd6dc578a">More...</a><br /></td></tr>
<tr class="separator:a59a054b2e21fc81601d0eeebd6dc578a inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e427259f9933cce5d95a63730d473e2 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a5e427259f9933cce5d95a63730d473e2">LearningRateFactor</a> ()</td></tr>
<tr class="separator:a5e427259f9933cce5d95a63730d473e2 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19b70a1769d3cf97043b7a81f81310fb inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a19b70a1769d3cf97043b7a81f81310fb">SetLearningRateFactor</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> lrate_factor)</td></tr>
<tr class="separator:a19b70a1769d3cf97043b7a81f81310fb inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fc8e5be4b32634aa8740c411819b62d inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a9fc8e5be4b32634aa8740c411819b62d">SetUpdatableConfigs</a> (const <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html">UpdatableComponent</a> &amp;other)</td></tr>
<tr class="separator:a9fc8e5be4b32634aa8740c411819b62d inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05c05e189447ef40d81ac40494668d8a inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a05c05e189447ef40d81ac40494668d8a">LearningRate</a> () const</td></tr>
<tr class="memdesc:a05c05e189447ef40d81ac40494668d8a inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the learning rate to be used in gradient descent.  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a05c05e189447ef40d81ac40494668d8a">More...</a><br /></td></tr>
<tr class="separator:a05c05e189447ef40d81ac40494668d8a inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4922b82383b37582e1d658849e0e7482 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a4922b82383b37582e1d658849e0e7482">MaxChange</a> () const</td></tr>
<tr class="memdesc:a4922b82383b37582e1d658849e0e7482 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the per-component max-change value, which is interpreted as the maximum change (in l2 norm) in parameters that is allowed per minibatch for this component.  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a4922b82383b37582e1d658849e0e7482">More...</a><br /></td></tr>
<tr class="separator:a4922b82383b37582e1d658849e0e7482 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7c390eb6ad357d73403c1f139dac757 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ae7c390eb6ad357d73403c1f139dac757">SetMaxChange</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> max_change)</td></tr>
<tr class="separator:ae7c390eb6ad357d73403c1f139dac757 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a7ae7b8e4ffb6ada1a81ae36e951041 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a1a7ae7b8e4ffb6ada1a81ae36e951041">L2Regularization</a> () const</td></tr>
<tr class="memdesc:a1a7ae7b8e4ffb6ada1a81ae36e951041 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the l2 regularization constant, which may be set in any updatable component (usually from the config file).  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a1a7ae7b8e4ffb6ada1a81ae36e951041">More...</a><br /></td></tr>
<tr class="separator:a1a7ae7b8e4ffb6ada1a81ae36e951041 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9807470ea8dfa745539e4ea67b44c939 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a9807470ea8dfa745539e4ea67b44c939">SetL2Regularization</a> (<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> a)</td></tr>
<tr class="separator:a9807470ea8dfa745539e4ea67b44c939 inherit pub_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classkaldi_1_1nnet3_1_1Component"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classkaldi_1_1nnet3_1_1Component')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a></td></tr>
<tr class="memitem:a304cec15e1a696a5af5f2f5daae7bc4f inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a304cec15e1a696a5af5f2f5daae7bc4f">StoreStats</a> (const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;in_value, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;out_value, void *memo)</td></tr>
<tr class="memdesc:a304cec15e1a696a5af5f2f5daae7bc4f inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function may store stats on average activation values, and for some component types, the average value of the derivative of the nonlinearity.  <a href="classkaldi_1_1nnet3_1_1Component.html#a304cec15e1a696a5af5f2f5daae7bc4f">More...</a><br /></td></tr>
<tr class="separator:a304cec15e1a696a5af5f2f5daae7bc4f inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab162a2631e5335091d1f2bba1571e54d inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#ab162a2631e5335091d1f2bba1571e54d">ZeroStats</a> ()</td></tr>
<tr class="memdesc:ab162a2631e5335091d1f2bba1571e54d inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">Components that provide an implementation of StoreStats should also provide an implementation of <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#ab162a2631e5335091d1f2bba1571e54d" title="Components that provide an implementation of StoreStats should also provide an implementation of Zero...">ZeroStats()</a>, to set those stats to zero.  <a href="classkaldi_1_1nnet3_1_1Component.html#ab162a2631e5335091d1f2bba1571e54d">More...</a><br /></td></tr>
<tr class="separator:ab162a2631e5335091d1f2bba1571e54d inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eacf8174f9fa190732c320ee3cf1d62 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a8eacf8174f9fa190732c320ee3cf1d62">DeleteMemo</a> (void *memo) const</td></tr>
<tr class="memdesc:a8eacf8174f9fa190732c320ee3cf1d62 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">This virtual function only needs to be overwritten by Components that return a non-NULL memo from their <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a342467ad10ff8535abe96768bdf27958" title="Propagate function. ">Propagate()</a> function.  <a href="classkaldi_1_1nnet3_1_1Component.html#a8eacf8174f9fa190732c320ee3cf1d62">More...</a><br /></td></tr>
<tr class="separator:a8eacf8174f9fa190732c320ee3cf1d62 inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0171e1571f18dc6a27c8b041de55feec inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a0171e1571f18dc6a27c8b041de55feec">Component</a> ()</td></tr>
<tr class="separator:a0171e1571f18dc6a27c8b041de55feec inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0df822d4b95a18b1df2529896638daeb inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a0df822d4b95a18b1df2529896638daeb">~Component</a> ()</td></tr>
<tr class="separator:a0df822d4b95a18b1df2529896638daeb inherit pub_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a4c47fd4f163011eb1939870d25aa656a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4c47fd4f163011eb1939870d25aa656a">Check</a> () const</td></tr>
<tr class="separator:a4c47fd4f163011eb1939870d25aa656a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d601955f7a16a2d9492240166a8e569"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9d601955f7a16a2d9492240166a8e569">ComputeDerived</a> ()</td></tr>
<tr class="separator:a9d601955f7a16a2d9492240166a8e569"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3d42726cd74900a53fb1a86168150b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#af3d42726cd74900a53fb1a86168150b0">UpdateNaturalGradient</a> (const <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_1_1PrecomputedIndexes.html">PrecomputedIndexes</a> &amp;indexes, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;in_value, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;out_deriv)</td></tr>
<tr class="separator:af3d42726cd74900a53fb1a86168150b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6571fd0f2fd6f12f66d8ae469162aef5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a6571fd0f2fd6f12f66d8ae469162aef5">UpdateSimple</a> (const <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_1_1PrecomputedIndexes.html">PrecomputedIndexes</a> &amp;indexes, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;in_value, const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;out_deriv)</td></tr>
<tr class="separator:a6571fd0f2fd6f12f66d8ae469162aef5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a101cccfc4dca67ebfc545c60943d5a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a0a101cccfc4dca67ebfc545c60943d5a">InitUnit</a> ()</td></tr>
<tr class="separator:a0a101cccfc4dca67ebfc545c60943d5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a186a95fc2b048e39782a4bfebf6b964a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html">time_height_convolution::ConvolutionModel</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a></td></tr>
<tr class="separator:a186a95fc2b048e39782a4bfebf6b964a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a047936d7dcb44d987faed6274843ab9e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int32 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">all_time_offsets_</a></td></tr>
<tr class="separator:a047936d7dcb44d987faed6274843ab9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61a515cefdacd8a16f6a9f848386408e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classbool.html">bool</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a61a515cefdacd8a16f6a9f848386408e">time_offset_required_</a></td></tr>
<tr class="separator:a61a515cefdacd8a16f6a9f848386408e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c39dc24a756b4bb786771f621224e7e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a></td></tr>
<tr class="separator:a9c39dc24a756b4bb786771f621224e7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80919dec61ec4f145d2b70cca6d2c306"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1CuVector.html">CuVector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a></td></tr>
<tr class="separator:a80919dec61ec4f145d2b70cca6d2c306"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4b888539ce58d5188c7019c6db921f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">max_memory_mb_</a></td></tr>
<tr class="separator:ae4b888539ce58d5188c7019c6db921f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57660849c075b7ff1f48bd4c943b668c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a57660849c075b7ff1f48bd4c943b668c">use_natural_gradient_</a></td></tr>
<tr class="separator:a57660849c075b7ff1f48bd4c943b668c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e4c9ff6496f25c6214d32fd0033d398"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html">OnlineNaturalGradient</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a></td></tr>
<tr class="separator:a9e4c9ff6496f25c6214d32fd0033d398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4878727ca1c9f34ad5d17ba12067280e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html">OnlineNaturalGradient</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">preconditioner_out_</a></td></tr>
<tr class="separator:a4878727ca1c9f34ad5d17ba12067280e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classkaldi_1_1nnet3_1_1Component"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classkaldi_1_1nnet3_1_1Component')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a></td></tr>
<tr class="memitem:a4ddbc3371d68afbe87908b87b8c0a6ae inherit pub_static_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a4ddbc3371d68afbe87908b87b8c0a6ae">ReadNew</a> (std::istream &amp;is, <a class="el" href="classbool.html">bool</a> binary)</td></tr>
<tr class="memdesc:a4ddbc3371d68afbe87908b87b8c0a6ae inherit pub_static_methods_classkaldi_1_1nnet3_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read component from stream (works out its type). Dies on error.  <a href="classkaldi_1_1nnet3_1_1Component.html#a4ddbc3371d68afbe87908b87b8c0a6ae">More...</a><br /></td></tr>
<tr class="separator:a4ddbc3371d68afbe87908b87b8c0a6ae inherit pub_static_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52564bb899e61119bac38d57147cd223 inherit pub_static_methods_classkaldi_1_1nnet3_1_1Component"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a52564bb899e61119bac38d57147cd223">NewComponentOfType</a> (const std::string &amp;type)</td></tr>
<tr class="memdesc:a52564bb899e61119bac38d57147cd223 inherit pub_static_methods_classkaldi_1_1nnet3_1_1Component"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a> of the given type e.g.  <a href="classkaldi_1_1nnet3_1_1Component.html#a52564bb899e61119bac38d57147cd223">More...</a><br /></td></tr>
<tr class="separator:a52564bb899e61119bac38d57147cd223 inherit pub_static_methods_classkaldi_1_1nnet3_1_1Component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html">UpdatableComponent</a></td></tr>
<tr class="memitem:ae85774801475096c0cc34fd2d6a021ab inherit pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ae85774801475096c0cc34fd2d6a021ab">InitLearningRatesFromConfig</a> (<a class="el" href="classkaldi_1_1nnet3_1_1ConfigLine.html">ConfigLine</a> *cfl)</td></tr>
<tr class="separator:ae85774801475096c0cc34fd2d6a021ab inherit pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34e4f5bb2347784301fead47cc6d5008 inherit pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a34e4f5bb2347784301fead47cc6d5008">ReadUpdatableCommon</a> (std::istream &amp;is, <a class="el" href="classbool.html">bool</a> binary)</td></tr>
<tr class="separator:a34e4f5bb2347784301fead47cc6d5008 inherit pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2e64ac30c475dcc5d61612524cc1eb9 inherit pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ae2e64ac30c475dcc5d61612524cc1eb9">WriteUpdatableCommon</a> (std::ostream &amp;is, <a class="el" href="classbool.html">bool</a> binary) const</td></tr>
<tr class="separator:ae2e64ac30c475dcc5d61612524cc1eb9 inherit pro_methods_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html">UpdatableComponent</a></td></tr>
<tr class="memitem:abef30da8aa0328dd5db955ce0b2a3466 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">learning_rate_</a></td></tr>
<tr class="memdesc:abef30da8aa0328dd5db955ce0b2a3466 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">learning rate (typically 0.0..0.01)  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">More...</a><br /></td></tr>
<tr class="separator:abef30da8aa0328dd5db955ce0b2a3466 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b609dd2ecd50c6165f783395bcd4468 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a7b609dd2ecd50c6165f783395bcd4468">learning_rate_factor_</a></td></tr>
<tr class="memdesc:a7b609dd2ecd50c6165f783395bcd4468 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">learning rate factor (normally 1.0, but can be set to another &lt; value so that when &lt; you call <a class="el" href="namespacekaldi_1_1nnet3.html#a3936ad79463d7cfd23ba1efd54f56084" title="Sets the underlying learning rate for all the components in the nnet to this value. ">SetLearningRate()</a>, that value will be scaled by this factor.  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a7b609dd2ecd50c6165f783395bcd4468">More...</a><br /></td></tr>
<tr class="separator:a7b609dd2ecd50c6165f783395bcd4468 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a2708b87f18a1aed11f8c0278585e3d inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a5a2708b87f18a1aed11f8c0278585e3d">l2_regularize_</a></td></tr>
<tr class="memdesc:a5a2708b87f18a1aed11f8c0278585e3d inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">L2 regularization constant.  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a5a2708b87f18a1aed11f8c0278585e3d">More...</a><br /></td></tr>
<tr class="separator:a5a2708b87f18a1aed11f8c0278585e3d inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95a4abdec65e2b9a9dc13725b6879cb9 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">is_gradient_</a></td></tr>
<tr class="memdesc:a95a4abdec65e2b9a9dc13725b6879cb9 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if this component is to be treated as a gradient rather than as parameters.  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a95a4abdec65e2b9a9dc13725b6879cb9">More...</a><br /></td></tr>
<tr class="separator:a95a4abdec65e2b9a9dc13725b6879cb9 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2efdd2c0f4a15742f06e463777a2a2d7 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2efdd2c0f4a15742f06e463777a2a2d7">max_change_</a></td></tr>
<tr class="memdesc:a2efdd2c0f4a15742f06e463777a2a2d7 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="mdescLeft">&#160;</td><td class="mdescRight">configuration value for imposing max-change  <a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2efdd2c0f4a15742f06e463777a2a2d7">More...</a><br /></td></tr>
<tr class="separator:a2efdd2c0f4a15742f06e463777a2a2d7 inherit pro_attribs_classkaldi_1_1nnet3_1_1UpdatableComponent"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html" title="TimeHeightConvolutionComponent implements 2-dimensional convolution where one of the dimensions of co...">TimeHeightConvolutionComponent</a> implements 2-dimensional convolution where one of the dimensions of convolution (which traditionally would be called the width axis) is identified with time (i.e. </p>
<p>the 't' component of Indexes). For a deeper understanding of how this works, please see <a class="el" href="convolution_8h.html" title="This file contains some fairly low-level utilities for implementing convolutional neural networks and...">convolution.h</a>.</p>
<p>The following are the parameters accepted on the config line, with examples of their values.</p>
<p>Parameters inherited from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a> (see comment above declaration of UpdadableComponent in <a class="el" href="nnet-component-itf_8h.html">nnet-component-itf.h</a> for details): learning-rate, learning-rate-factor, max-change</p>
<p>Convolution-related parameters:</p>
<p>num-filters-in E.g. num-filters-in=32. Number of input filters (the number of separate versions of the input image). The filter-dim has stride 1 in the input and output vectors, i.e. we order the input as (all-filters-for-height=0, all-filters-for-height=1, etc.) num-filters-out E.g. num-filters-out=64. The number of output filters (the number of separate versions of the output image). As with the input, the filter-dim has stride 1. height-in E.g. height-in=40. The height of the input image. The width is not specified the the model level, as it's identified with "t" and is called the time axis; the width is determined by how many "t" values were available at the input of the network, and how many were requested at the output. height-out E.g. height-out=40. The height of the output image. Will normally be &lt;= (the input height divided by height-subsample-out). height-subsample-out E.g. height-subsample-out=2 (defaults to 1). Subsampling factor on the height axis, e.g. you might set this to 2 if you are doing subsampling on this layer, which would involve discarding every other height increment at the output. There is no corresponding config for the time dimension, as time subsampling is determined by which 't' values you request at the output, together with the values of 'time-offsets' at different layers of the network. height-offsets E.g. height-offsets=-1,0,1 The set of height offsets that contribute to each output pixel: with the values -1,0,1, height 10 at the output would see data from heights 9,10,11 at the input. These values will normally be consecutive. Negative values imply zero-padding on the bottom of the image, since output-height 0 is always defined. Zero-padding at the top of the image is determined in a similar way (e.g. if height-in==height-out and height-offsets=-1,0,1, then there is 1 pixel of padding at the top and bottom of the image). time-offsets E.g. time-offsets=-1,0,1 The time offsets that we require at the input to produce a given output; these are comparable to the offsets used in TDNNs. Note that the time axis is always numbered using an absolute scheme, so that if there is subsampling on the time axis, then later in the network you'll see time-offsets like "-2,0,2" or "-4,0,4". Subsampling on the time axis is not explicitly specified but is implicit based on tracking dependencies. offsets Setting 'offsets' is an alternative to setting both height-offsets and time-offsets, that is useful for configurations with less regularity. It is a semicolon- separated list of pairs (time-offset,height-offset) that might look like: -1,1;-1,0;-1,1;0,1;....;1,1 required-time-offsets E.g. required-time-offsets=0 (defaults to the same value as time-offsets). This is a set of time offsets, which if specified must be a nonempty subset of time-offsets; it determines whether zero-padding on the time axis is allowed in cases where there is insufficient input. If not specified it defaults to the same as 'time-offsets', meaning there is no zero-padding on the time axis. Note: for speech tasks we tend to pad on the time axis with repeats of the first or last frame, rather than zero; and this is handled while preparing the data and not by the core components of the <a class="el" href="namespacekaldi_1_1nnet3.html">nnet3</a> framework. So for speech tasks we wouldn't normally set this value. max-memory-mb Maximum amount of temporary memory, in megabytes, that may be used as temporary matrices in the convolution computation. default=200.0.</p>
<p>Initialization parameters: param-stddev Standard deviation of the linear parameters of the convolution. Defaults to sqrt(1.0 / (num-filters-in * num-height-offsets * num-time-offsets)), e.g. sqrt(1.0/(64*3*3)) for a 3x3 kernel with 64 input filters; this value will ensure that the output has unit stddev if the input has unit stddev. bias-stddev Standard deviation of bias terms. default=0.0. init-unit Defaults to false. If true, it is required that num-filters-in equal num-filters-out and there should exist a (height, time) offset in the model equal to (0, 0). We will initialize the parameter matrix to be equivalent to the identity transform. In this case, param-stddev is ignored.</p>
<p>Natural-gradient related options are below; you won't normally have to set these.</p>
<p>use-natural-gradient e.g. use-natural-gradient=false (defaults to true). You can set this to false to disable the natural gradient updates (you won't normally want to do this). rank-out Rank used in low-rank-plus-unit estimate of the Fisher-matrix factor that has the dimension (num-rows of the parameter space), which equals num-filters-out. It defaults to the minimum of 80, or half of the number of output filters. rank-in Rank used in low-rank-plus-unit estimate of the Fisher matrix factor which has the dimension (num-cols of the parameter matrix), which has the dimension (num-input-filters * number of time-offsets * number of height-offsets + 1), e.g. num-input-filters * 3 * 3 + 1 for a 3x3 kernel (the +1 is for the bias term). It defaults to the minimum of 80, or half the num-rows of the parameter matrix. [note: I'm considering decreasing this default to e.g. 40 or 20]. num-minibatches-history This is used setting the 'num_samples_history' configuration value of the natural gradient object. There is no concept of samples (frames) in the application of natural gradient to the convnet, because we do it all on the rows and columns of the derivative. default=4.0. A larger value means the Fisher matrix is averaged over more minibatches (it's an exponential-decay thing). alpha-out Constant that determines how much we smooth the Fisher-matrix factors with the unit matrix, for the space of dimension num-filters-out. default=4.0. alpha-in Constant that determines how much we smooth the Fisher-matrix factors with the unit matrix, for the space of dimension (num-filters-in * num-time-offsets * num-height-offsets + 1). default=4.0.</p>
<p>Example of a 3x3 kernel with no subsampling, and with zero-padding on both the the height and time axis, and where there has previously been no subsampling on the time axis:</p>
<p>num-filters-in=32 num-filters-out=64 height-in=28 height-out=28 \ height-subsample-out=1 height-offsets=-1,0,1 time-offsets=-1,0,1 \ required-time-offsets=0</p>
<p>Example of a 3x3 kernel with no subsampling, without zero-padding on either axis, and where there has *previously* been 2-fold subsampling on the time axis:</p>
<p>num-filters-in=32 num-filters-out=64 height-in=20 height-out=18 \ height-subsample-out=1 height-offsets=0,1,2 time-offsets=0,2,4</p>
<p>[note: above, the choice to have the time-offsets start at zero rather than be centered is just a choice: it assumes that at the output of the network you would want to request indexes with t=0, while at the input the t values start from zero.]</p>
<p>Example of a 3x3 kernel with subsampling on the height axis, without zero-padding on either axis, and where there has previously been 2-fold subsampling on the time axis:</p>
<p>num-filters-in=32 num-filters-out=64 height-in=20 height-out=9 \ height-subsample-out=2 height-offsets=0,1,2 time-offsets=0,2,4</p>
<p>[note: subsampling on the time axis is not expressed in the layer itself: any time you increase the distance between time-offsets, like changing them from 0,1,2 to 0,2,4, you are effectively subsampling the previous layer&ndash; assuming you only request the output at one time value or at multiples of the total subsampling factor.]</p>
<p>Example of a 1x1 kernel:</p>
<p>num-filters-in=64 num-filters-out=64 height-in=20 height-out=20 \ height-subsample-out=1 height-offsets=0 time-offsets=0 </p>

<p class="definition">Definition at line <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00212">212</a> of file <a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a82e23480a8a23580ad74f1a23dcd9311"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82e23480a8a23580ad74f1a23dcd9311">&#9670;&nbsp;</a></span>TimeHeightConvolutionComponent() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html">TimeHeightConvolutionComponent</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00031">31</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00245">TimeHeightConvolutionComponent::Copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                                                              :</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a57660849c075b7ff1f48bd4c943b668c">use_natural_gradient_</a>(<span class="keyword">true</span>) { }</div><div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a57660849c075b7ff1f48bd4c943b668c"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a57660849c075b7ff1f48bd4c943b668c">kaldi::nnet3::TimeHeightConvolutionComponent::use_natural_gradient_</a></div><div class="ttdeci">bool use_natural_gradient_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00362">nnet-convolutional-component.h:362</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a3162776c6321009801847ebbb46352"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a3162776c6321009801847ebbb46352">&#9670;&nbsp;</a></span>TimeHeightConvolutionComponent() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html">TimeHeightConvolutionComponent</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html">TimeHeightConvolutionComponent</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00034">34</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-convolutional-component_8cc_source.html#l00050">TimeHeightConvolutionComponent::Check()</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                                                :</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">UpdatableComponent</a>(other),  <span class="comment">// initialize base-class</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>(other.model_),</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">all_time_offsets_</a>(other.all_time_offsets_),</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a61a515cefdacd8a16f6a9f848386408e">time_offset_required_</a>(other.time_offset_required_),</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>(other.linear_params_),</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>(other.bias_params_),</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">max_memory_mb_</a>(other.max_memory_mb_),</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a57660849c075b7ff1f48bd4c943b668c">use_natural_gradient_</a>(other.use_natural_gradient_),</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>(other.preconditioner_in_),</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">preconditioner_out_</a>(other.preconditioner_out_) {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4c47fd4f163011eb1939870d25aa656a">Check</a>();</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a2af26d78825cc522c324976403bf4e4e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a2af26d78825cc522c324976403bf4e4e">kaldi::nnet3::UpdatableComponent::UpdatableComponent</a></div><div class="ttdeci">UpdatableComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00461">nnet-component-itf.h:461</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a4c47fd4f163011eb1939870d25aa656a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4c47fd4f163011eb1939870d25aa656a">kaldi::nnet3::TimeHeightConvolutionComponent::Check</a></div><div class="ttdeci">void Check() const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-convolutional-component_8cc_source.html#l00050">nnet-convolutional-component.cc:50</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a4878727ca1c9f34ad5d17ba12067280e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_out_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_out_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00372">nnet-convolutional-component.h:372</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a047936d7dcb44d987faed6274843ab9e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">kaldi::nnet3::TimeHeightConvolutionComponent::all_time_offsets_</a></div><div class="ttdeci">std::vector&lt; int32 &gt; all_time_offsets_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00334">nnet-convolutional-component.h:334</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a186a95fc2b048e39782a4bfebf6b964a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">kaldi::nnet3::TimeHeightConvolutionComponent::model_</a></div><div class="ttdeci">time_height_convolution::ConvolutionModel model_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00330">nnet-convolutional-component.h:330</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a61a515cefdacd8a16f6a9f848386408e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a61a515cefdacd8a16f6a9f848386408e">kaldi::nnet3::TimeHeightConvolutionComponent::time_offset_required_</a></div><div class="ttdeci">std::vector&lt; bool &gt; time_offset_required_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00338">nnet-convolutional-component.h:338</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a57660849c075b7ff1f48bd4c943b668c"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a57660849c075b7ff1f48bd4c943b668c">kaldi::nnet3::TimeHeightConvolutionComponent::use_natural_gradient_</a></div><div class="ttdeci">bool use_natural_gradient_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00362">nnet-convolutional-component.h:362</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9e4c9ff6496f25c6214d32fd0033d398"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_in_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_in_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00368">nnet-convolutional-component.h:368</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_ae4b888539ce58d5188c7019c6db921f3"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">kaldi::nnet3::TimeHeightConvolutionComponent::max_memory_mb_</a></div><div class="ttdeci">BaseFloat max_memory_mb_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00356">nnet-convolutional-component.h:356</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acdb3e97b46276e3c9f4f696c2bef3943"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdb3e97b46276e3c9f4f696c2bef3943">&#9670;&nbsp;</a></span>Add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>alpha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This virtual function when called by &ndash; an <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a> adds the parameters of another updatable component, times some constant, to the current parameters. </p>
<p>&ndash; a <a class="el" href="classkaldi_1_1nnet3_1_1NonlinearComponent.html">NonlinearComponent</a> (or another component that stores stats, like <a class="el" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html">BatchNormComponent</a>)&ndash; it relates to adding stats. Otherwise it will normally do nothing. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#aab16938236bd0978bad5de6d56fcf47f">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00590">590</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">TimeHeightConvolutionComponent::bias_params_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00245">TimeHeightConvolutionComponent::Copy()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00486">TdnnComponent::Copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                                                                    {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a82e23480a8a23580ad74f1a23dcd9311">TimeHeightConvolutionComponent</a> *other =</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a82e23480a8a23580ad74f1a23dcd9311">TimeHeightConvolutionComponent</a>*<span class="keyword">&gt;</span>(&amp;other_in);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(other != NULL);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.AddMat(alpha, other-&gt;linear_params_);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.AddVec(alpha, other-&gt;bias_params_);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a82e23480a8a23580ad74f1a23dcd9311"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a82e23480a8a23580ad74f1a23dcd9311">kaldi::nnet3::TimeHeightConvolutionComponent::TimeHeightConvolutionComponent</a></div><div class="ttdeci">TimeHeightConvolutionComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-convolutional-component_8cc_source.html#l00031">nnet-convolutional-component.cc:31</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0f9bb1c29228fa0a498a19b83ac5190"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0f9bb1c29228fa0a498a19b83ac5190">&#9670;&nbsp;</a></span>Backprop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Backprop </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>debug_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a> *&#160;</td>
          <td class="paramname"><em>indexes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>in_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>out_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>out_deriv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>memo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *&#160;</td>
          <td class="paramname"><em>to_update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td>
          <td class="paramname"><em>in_deriv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Backprop function; depending on which of the arguments 'to_update' and 'in_deriv' are non-NULL, this can compute input-data derivatives and/or perform model update. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">debug_info</td><td>The component name, to be printed out in any warning messages. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">indexes</td><td>A pointer to some information output by this class's PrecomputeIndexes function (will be NULL for simple components, i.e. those that don't do things like splicing). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">in_value</td><td>The matrix that was given as input to the Propagate function. Will be ignored (and may be empty) if <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4a16a6da3a5108ec53e759722a51fd47" title="Return bitmask of the component&#39;s properties. ">Properties()</a>&amp;kBackpropNeedsInput == 0. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">out_value</td><td>The matrix that was output from the Propagate function. Will be ignored (and may be empty) if <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4a16a6da3a5108ec53e759722a51fd47" title="Return bitmask of the component&#39;s properties. ">Properties()</a>&amp;kBackpropNeedsOutput == 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">out_deriv</td><td>The derivative at the output of this component. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">memo</td><td>This will normally be NULL, but for component types that set the flag kUsesMemo, this will be the return value of the <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a8f1f1b05a170bd81a544caefe1acb040" title="Propagate function. ">Propagate()</a> function that corresponds to this <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ac0f9bb1c29228fa0a498a19b83ac5190" title="Backprop function; depending on which of the arguments &#39;to_update&#39; and &#39;in_deriv&#39; are non-NULL...">Backprop()</a> function. Ownership of any pointers is not transferred to the Backprop function; <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a8eacf8174f9fa190732c320ee3cf1d62" title="This virtual function only needs to be overwritten by Components that return a non-NULL memo from the...">DeleteMemo()</a> will be called to delete it. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">to_update</td><td>If model update is desired, the <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a> to be updated, else NULL. Does not have to be identical to this. If supplied, you can assume that to_update-&gt;<a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4a16a6da3a5108ec53e759722a51fd47" title="Return bitmask of the component&#39;s properties. ">Properties()</a> &amp; kUpdatableComponent is nonzero. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">in_deriv</td><td>The derivative at the input of this component, if needed (else NULL). If <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4a16a6da3a5108ec53e759722a51fd47" title="Return bitmask of the component&#39;s properties. ">Properties()</a>&amp;kBackpropInPlace, may be the same matrix as out_deriv. If <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4a16a6da3a5108ec53e759722a51fd47" title="Return bitmask of the component&#39;s properties. ">Properties()</a>&amp;kBackpropAdds, this is added to by the Backprop routine, else it is set. The component code chooses which mode to work in, based on convenience. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#ada8f5f2c358622ef522a7f2b9d2833ca">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00301">301</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00299">TimeHeightConvolutionComponent::PrecomputedIndexes::computation</a>, <a class="el" href="convolution_8cc_source.html#l00682">kaldi::nnet3::time_height_convolution::ConvolveBackwardData()</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00566">UpdatableComponent::is_gradient_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00559">UpdatableComponent::learning_rate_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00353">TimeHeightConvolutionComponent::UpdateNaturalGradient()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00333">TimeHeightConvolutionComponent::UpdateSimple()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00362">TimeHeightConvolutionComponent::use_natural_gradient_</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00227">TimeHeightConvolutionComponent::Properties()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00467">TdnnComponent::Properties()</a>.</p>
<div class="fragment"><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                                             {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keyword">const</span> PrecomputedIndexes *indexes =</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>PrecomputedIndexes*<span class="keyword">&gt;</span>(indexes_in);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(indexes != NULL);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordflow">if</span> (in_deriv != NULL) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet3_1_1time__height__convolution.html#a7c24c02ba2b5c29ad1854da071902744">ConvolveBackwardData</a>(indexes-&gt;computation, <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>,</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                         out_deriv, in_deriv);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">if</span> (to_update_in != NULL) {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a82e23480a8a23580ad74f1a23dcd9311">TimeHeightConvolutionComponent</a> *to_update =</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a82e23480a8a23580ad74f1a23dcd9311">TimeHeightConvolutionComponent</a>*<span class="keyword">&gt;</span>(to_update_in);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(to_update != NULL);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">if</span> (to_update-&gt;learning_rate_ == 0.0)</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">if</span> (to_update-&gt;is_gradient_ || !to_update-&gt;use_natural_gradient_)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      to_update-&gt;UpdateSimple(*indexes, in_value, out_deriv);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      to_update-&gt;UpdateNaturalGradient(*indexes, in_value, out_deriv);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a82e23480a8a23580ad74f1a23dcd9311"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a82e23480a8a23580ad74f1a23dcd9311">kaldi::nnet3::TimeHeightConvolutionComponent::TimeHeightConvolutionComponent</a></div><div class="ttdeci">TimeHeightConvolutionComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-convolutional-component_8cc_source.html#l00031">nnet-convolutional-component.cc:31</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_1_1time__height__convolution_html_a7c24c02ba2b5c29ad1854da071902744"><div class="ttname"><a href="namespacekaldi_1_1nnet3_1_1time__height__convolution.html#a7c24c02ba2b5c29ad1854da071902744">kaldi::nnet3::time_height_convolution::ConvolveBackwardData</a></div><div class="ttdeci">void ConvolveBackwardData(const ConvolutionComputation &amp;cc, const CuMatrixBase&lt; BaseFloat &gt; &amp;params, const CuMatrixBase&lt; BaseFloat &gt; &amp;output_deriv, CuMatrixBase&lt; BaseFloat &gt; *input_deriv)</div><div class="ttdoc">This does the part of the backward derivative computation of convolution, that propagates derivatives...</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8cc_source.html#l00682">convolution.cc:682</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4c47fd4f163011eb1939870d25aa656a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c47fd4f163011eb1939870d25aa656a">&#9670;&nbsp;</a></span>Check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Check </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00050">50</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">TimeHeightConvolutionComponent::bias_params_</a>, <a class="el" href="convolution_8cc_source.html#l00130">ConvolutionModel::Check()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00330">TimeHeightConvolutionComponent::model_</a>, <a class="el" href="convolution_8h_source.html#l00127">ConvolutionModel::num_filters_out</a>, <a class="el" href="convolution_8h_source.html#l00208">ConvolutionModel::ParamCols()</a>, and <a class="el" href="convolution_8h_source.html#l00206">ConvolutionModel::ParamRows()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00560">TdnnComponent::OrthonormalConstraint()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00451">TimeHeightConvolutionComponent::Read()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00302">TimeHeightConvolutionComponent::ScaleLinearParams()</a>, and <a class="el" href="nnet-convolutional-component_8cc_source.html#l00034">TimeHeightConvolutionComponent::TimeHeightConvolutionComponent()</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                                                 {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#adc9de3c767c99e452604ceae022f20a4">Check</a>();</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Dim() == <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">num_filters_out</a> &amp;&amp;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;               <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumRows() == <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ac3fa74c7d37d13f40316563099322153">ParamRows</a>() &amp;&amp;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;               <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumCols() == <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#aaf781d073deb0b09dd89cefc0804979f">ParamCols</a>());</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div><div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_aaf781d073deb0b09dd89cefc0804979f"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#aaf781d073deb0b09dd89cefc0804979f">kaldi::nnet3::time_height_convolution::ConvolutionModel::ParamCols</a></div><div class="ttdeci">int32 ParamCols() const</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00208">convolution.h:208</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_adc9de3c767c99e452604ceae022f20a4"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#adc9de3c767c99e452604ceae022f20a4">kaldi::nnet3::time_height_convolution::ConvolutionModel::Check</a></div><div class="ttdeci">bool Check(bool check_heights_used=true, bool allow_height_padding=true) const</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8cc_source.html#l00130">convolution.cc:130</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_ab6517e72f4d0632f883d78c5b7ea8ef4"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">kaldi::nnet3::time_height_convolution::ConvolutionModel::num_filters_out</a></div><div class="ttdeci">int32 num_filters_out</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00127">convolution.h:127</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_ac3fa74c7d37d13f40316563099322153"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ac3fa74c7d37d13f40316563099322153">kaldi::nnet3::time_height_convolution::ConvolutionModel::ParamRows</a></div><div class="ttdeci">int32 ParamRows() const</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00206">convolution.h:206</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a186a95fc2b048e39782a4bfebf6b964a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">kaldi::nnet3::TimeHeightConvolutionComponent::model_</a></div><div class="ttdeci">time_height_convolution::ConvolutionModel model_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00330">nnet-convolutional-component.h:330</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9d601955f7a16a2d9492240166a8e569"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d601955f7a16a2d9492240166a8e569">&#9670;&nbsp;</a></span>ComputeDerived()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ComputeDerived </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00490">490</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="convolution_8h_source.html#l00173">ConvolutionModel::all_time_offsets</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00334">TimeHeightConvolutionComponent::all_time_offsets_</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00330">TimeHeightConvolutionComponent::model_</a>, <a class="el" href="convolution_8h_source.html#l00169">ConvolutionModel::required_time_offsets</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00338">TimeHeightConvolutionComponent::time_offset_required_</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-convolutional-component_8cc_source.html#l00114">TimeHeightConvolutionComponent::InitFromConfig()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00451">TimeHeightConvolutionComponent::Read()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00302">TimeHeightConvolutionComponent::ScaleLinearParams()</a>.</p>
<div class="fragment"><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                                                    {</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">all_time_offsets_</a>.clear();</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">all_time_offsets_</a>.insert(</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">all_time_offsets_</a>.end(),</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#afb30663cba0bd5956f528c27102b2445">all_time_offsets</a>.begin(),</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#afb30663cba0bd5956f528c27102b2445">all_time_offsets</a>.end());</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a61a515cefdacd8a16f6a9f848386408e">time_offset_required_</a>.resize(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">all_time_offsets_</a>.size());</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">all_time_offsets_</a>.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a61a515cefdacd8a16f6a9f848386408e">time_offset_required_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] =</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        (<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#aa8bc343695c77d80bab06500c84b4240">required_time_offsets</a>.count(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">all_time_offsets_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]) &gt; 0);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  }</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div><div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_afb30663cba0bd5956f528c27102b2445"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#afb30663cba0bd5956f528c27102b2445">kaldi::nnet3::time_height_convolution::ConvolutionModel::all_time_offsets</a></div><div class="ttdeci">std::set&lt; int32 &gt; all_time_offsets</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00173">convolution.h:173</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a047936d7dcb44d987faed6274843ab9e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">kaldi::nnet3::TimeHeightConvolutionComponent::all_time_offsets_</a></div><div class="ttdeci">std::vector&lt; int32 &gt; all_time_offsets_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00334">nnet-convolutional-component.h:334</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a186a95fc2b048e39782a4bfebf6b964a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">kaldi::nnet3::TimeHeightConvolutionComponent::model_</a></div><div class="ttdeci">time_height_convolution::ConvolutionModel model_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00330">nnet-convolutional-component.h:330</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a61a515cefdacd8a16f6a9f848386408e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a61a515cefdacd8a16f6a9f848386408e">kaldi::nnet3::TimeHeightConvolutionComponent::time_offset_required_</a></div><div class="ttdeci">std::vector&lt; bool &gt; time_offset_required_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00338">nnet-convolutional-component.h:338</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_aa8bc343695c77d80bab06500c84b4240"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#aa8bc343695c77d80bab06500c84b4240">kaldi::nnet3::time_height_convolution::ConvolutionModel::required_time_offsets</a></div><div class="ttdeci">std::set&lt; int32 &gt; required_time_offsets</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00169">convolution.h:169</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aced42a39258a3786f1f3d8b31314913c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aced42a39258a3786f1f3d8b31314913c">&#9670;&nbsp;</a></span>ConsolidateMemory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ConsolidateMemory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This virtual function relates to memory management, and avoiding fragmentation. </p>
<p>It is called only once per model, after we do the first minibatch of training. The default implementation does nothing, but it can be overridden by child classes, where it may re-initialize certain quantities that may possibly have been allocated during the forward pass (e.g. certain statistics; <a class="el" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html" title="Keywords for search: natural gradient, naturalgradient, NG-SGD. ">OnlineNaturalGradient</a> objects). We use our own CPU-based allocator (see <a class="el" href="cu-allocator_8h.html">cu-allocator.h</a>) and since it can't do paging since we're not in control of the GPU page table, fragmentation can be a problem. The allocator always tries to put things in 'low-address memory' (i.e. at smaller memory addresses) near the beginning of the block it allocated, to avoid fragmentation; but if permanent things (belonging to the model) are allocated in the forward pass, they can permanently stay in high memory. This function helps to prevent that, by re-allocating those things into low-address memory (It's important that it's called after all the temporary buffers for the forward-backward have been freed, so that there is low-address memory available)). </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a44818f697d4e7fb11120645a16bd0e39">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00668">668</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00368">TimeHeightConvolutionComponent::preconditioner_in_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00372">TimeHeightConvolutionComponent::preconditioner_out_</a>, and <a class="el" href="natural-gradient-online_8cc_source.html#l00626">OnlineNaturalGradient::Swap()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00560">TdnnComponent::OrthonormalConstraint()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00302">TimeHeightConvolutionComponent::ScaleLinearParams()</a>.</p>
<div class="fragment"><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                                                       {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  OnlineNaturalGradient temp_in(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#aff2f0bd6b38f9056268da28ae91aa316">Swap</a>(&amp;temp_in);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  OnlineNaturalGradient temp_out(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">preconditioner_out_</a>);</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">preconditioner_out_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#aff2f0bd6b38f9056268da28ae91aa316">Swap</a>(&amp;temp_out);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a4878727ca1c9f34ad5d17ba12067280e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_out_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_out_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00372">nnet-convolutional-component.h:372</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1OnlineNaturalGradient_html_aff2f0bd6b38f9056268da28ae91aa316"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#aff2f0bd6b38f9056268da28ae91aa316">kaldi::nnet3::OnlineNaturalGradient::Swap</a></div><div class="ttdeci">void Swap(OnlineNaturalGradient *other)</div><div class="ttdef"><b>Definition:</b> <a href="natural-gradient-online_8cc_source.html#l00626">natural-gradient-online.cc:626</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9e4c9ff6496f25c6214d32fd0033d398"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_in_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_in_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00368">nnet-convolutional-component.h:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1de31388e6c4839d855713baedc4f44b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1de31388e6c4839d855713baedc4f44b">&#9670;&nbsp;</a></span>Copy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classkaldi_1_1nnet3_1_1Component.html">Component</a>* Copy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copies component (deep copy). </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#aa46d9c7de00be8203e16a6e55af0afef">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00245">245</a> of file <a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a>.</p>

<p class="reference">References <a class="el" href="nnet-convolutional-component_8cc_source.html#l00590">TimeHeightConvolutionComponent::Add()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00609">TimeHeightConvolutionComponent::DotProduct()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00641">TimeHeightConvolutionComponent::FreezeNaturalGradient()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00503">TimeHeightConvolutionComponent::GetInputIndexes()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00518">TimeHeightConvolutionComponent::IsComputable()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00618">TimeHeightConvolutionComponent::NumParameters()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00599">TimeHeightConvolutionComponent::PerturbParams()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00559">TimeHeightConvolutionComponent::PrecomputeIndexes()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00407">TimeHeightConvolutionComponent::ReorderIndexes()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00580">TimeHeightConvolutionComponent::Scale()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00031">TimeHeightConvolutionComponent::TimeHeightConvolutionComponent()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00632">TimeHeightConvolutionComponent::UnVectorize()</a>, and <a class="el" href="nnet-convolutional-component_8cc_source.html#l00623">TimeHeightConvolutionComponent::Vectorize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                  {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a82e23480a8a23580ad74f1a23dcd9311">TimeHeightConvolutionComponent</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div><div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a82e23480a8a23580ad74f1a23dcd9311"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a82e23480a8a23580ad74f1a23dcd9311">kaldi::nnet3::TimeHeightConvolutionComponent::TimeHeightConvolutionComponent</a></div><div class="ttdeci">TimeHeightConvolutionComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-convolutional-component_8cc_source.html#l00031">nnet-convolutional-component.cc:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a87b95e5c043a8221ad58b2512b2d81c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87b95e5c043a8221ad58b2512b2d81c9">&#9670;&nbsp;</a></span>DotProduct()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> DotProduct </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html">UpdatableComponent</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Computes dot-product between parameters of two instances of a <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a>. </p>
<p>Can be used for computing parameter-norm of an <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a>. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ac0697192d76083f84fc989f67fbee5e9">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00609">609</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">TimeHeightConvolutionComponent::bias_params_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="matrix-common_8h_source.html#l00033">kaldi::kTrans</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l02646">kaldi::TraceMatMat()</a>, and <a class="el" href="kaldi-vector_8cc_source.html#l00037">kaldi::VecVec()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00245">TimeHeightConvolutionComponent::Copy()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00486">TdnnComponent::Copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                                              {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a82e23480a8a23580ad74f1a23dcd9311">TimeHeightConvolutionComponent</a> *other =</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a82e23480a8a23580ad74f1a23dcd9311">TimeHeightConvolutionComponent</a>*<span class="keyword">&gt;</span>(&amp;other_in);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(other != NULL);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacekaldi.html#a94b9f349754706b9d6f38bb5ccc11c77">TraceMatMat</a>(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>, other-&gt;linear_params_, <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kTrans</a>) +</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <a class="code" href="group__matrix__funcs__scalar.html#ga4750cd6f7a02a013435779588056b153">VecVec</a>(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>, other-&gt;bias_params_);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2"><div class="ttname"><a href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kaldi::kTrans</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00033">matrix-common.h:33</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a82e23480a8a23580ad74f1a23dcd9311"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a82e23480a8a23580ad74f1a23dcd9311">kaldi::nnet3::TimeHeightConvolutionComponent::TimeHeightConvolutionComponent</a></div><div class="ttdeci">TimeHeightConvolutionComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-convolutional-component_8cc_source.html#l00031">nnet-convolutional-component.cc:31</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="namespacekaldi_html_a94b9f349754706b9d6f38bb5ccc11c77"><div class="ttname"><a href="namespacekaldi.html#a94b9f349754706b9d6f38bb5ccc11c77">kaldi::TraceMatMat</a></div><div class="ttdeci">Real TraceMatMat(const MatrixBase&lt; Real &gt; &amp;A, const MatrixBase&lt; Real &gt; &amp;B, MatrixTransposeType trans)</div><div class="ttdoc">We need to declare this here as it will be a friend function. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l02646">kaldi-matrix.cc:2646</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
<div class="ttc" id="group__matrix__funcs__scalar_html_ga4750cd6f7a02a013435779588056b153"><div class="ttname"><a href="group__matrix__funcs__scalar.html#ga4750cd6f7a02a013435779588056b153">kaldi::VecVec</a></div><div class="ttdeci">Real VecVec(const VectorBase&lt; Real &gt; &amp;a, const VectorBase&lt; Real &gt; &amp;b)</div><div class="ttdoc">Returns dot product between v1 and v2. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-vector_8cc_source.html#l00037">kaldi-vector.cc:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a32206a7478069f9e3e86e698bf526e30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32206a7478069f9e3e86e698bf526e30">&#9670;&nbsp;</a></span>FreezeNaturalGradient()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FreezeNaturalGradient </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>freeze</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>freezes/unfreezes NaturalGradient updates, if applicable (to be overriden by components that use Natural Gradient). </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ac065303ac0af64b0db2486e288eb98ff">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00641">641</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="natural-gradient-online_8h_source.html#l00437">OnlineNaturalGradient::Freeze()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00368">TimeHeightConvolutionComponent::preconditioner_in_</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00372">TimeHeightConvolutionComponent::preconditioner_out_</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00245">TimeHeightConvolutionComponent::Copy()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00486">TdnnComponent::Copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                                                                      {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a73b9201eebf7d9e9179495c3025fa89e">Freeze</a>(freeze);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">preconditioner_out_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a73b9201eebf7d9e9179495c3025fa89e">Freeze</a>(freeze);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1OnlineNaturalGradient_html_a73b9201eebf7d9e9179495c3025fa89e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a73b9201eebf7d9e9179495c3025fa89e">kaldi::nnet3::OnlineNaturalGradient::Freeze</a></div><div class="ttdeci">void Freeze(bool frozen)</div><div class="ttdef"><b>Definition:</b> <a href="natural-gradient-online_8h_source.html#l00437">natural-gradient-online.h:437</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a4878727ca1c9f34ad5d17ba12067280e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_out_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_out_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00372">nnet-convolutional-component.h:372</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9e4c9ff6496f25c6214d32fd0033d398"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_in_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_in_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00368">nnet-convolutional-component.h:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9d7b185ac981780bcfaed7dfdd8908d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d7b185ac981780bcfaed7dfdd8908d8">&#9670;&nbsp;</a></span>GetInputIndexes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GetInputIndexes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1nnet3_1_1MiscComputationInfo.html">MiscComputationInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>misc_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &amp;&#160;</td>
          <td class="paramname"><em>output_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; *&#160;</td>
          <td class="paramname"><em>desired_indexes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function only does something interesting for non-simple Components. </p>
<p>For a given index at the output of the component, tells us what indexes are required at its input (note: "required" encompasses also optionally-required things; it will enumerate all things that we'd like to have). See also <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a529c07610dd915a30e452f80b8bb5fc0" title="This function only does something interesting for non-simple Components, and it exists to make it pos...">IsComputable()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">misc_info</td><td>This argument is supplied to handle things that the framework can't very easily supply: information like which time indexes are needed for AggregateComponent, which time-indexes are available at the input of a recurrent network, and so on. We will add members to misc_info as needed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">output_index</td><td>The <a class="el" href="structkaldi_1_1nnet3_1_1Index.html" title="struct Index is intended to represent the various indexes by which we number the rows of the matrices...">Index</a> at the output of the component, for which we are requesting the list of indexes at the component's input. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">desired_indexes</td><td>A list of indexes that are desired at the input. are to be written to here. By "desired" we mean required or optionally-required.</td></tr>
  </table>
  </dd>
</dl>
<p>The default implementation of this function is suitable for any SimpleComponent; it just copies the output_index to a single identical element in input_indexes. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a9d7b185ac981780bcfaed7dfdd8908d8">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00503">503</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00334">TimeHeightConvolutionComponent::all_time_offsets_</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-common_8cc_source.html#l00573">kaldi::nnet3::kNoTime</a>, <a class="el" href="nnet-common_8h_source.html#l00045">Index::n</a>, <a class="el" href="nnet-common_8h_source.html#l00046">Index::t</a>, and <a class="el" href="nnet-common_8h_source.html#l00047">Index::x</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00245">TimeHeightConvolutionComponent::Copy()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00486">TdnnComponent::Copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                                             {</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(output_index.t != <a class="code" href="namespacekaldi_1_1nnet3.html#ac952f0840a7950dff80c1a89e69656d7">kNoTime</a>);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordtype">size_t</span> size = <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">all_time_offsets_</a>.size();</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  desired_indexes-&gt;resize(size);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; size; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    (*desired_indexes)[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].n = output_index.n;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    (*desired_indexes)[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].t = output_index.t + <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">all_time_offsets_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    (*desired_indexes)[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].x = output_index.x;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a047936d7dcb44d987faed6274843ab9e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">kaldi::nnet3::TimeHeightConvolutionComponent::all_time_offsets_</a></div><div class="ttdeci">std::vector&lt; int32 &gt; all_time_offsets_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00334">nnet-convolutional-component.h:334</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_ac952f0840a7950dff80c1a89e69656d7"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#ac952f0840a7950dff80c1a89e69656d7">kaldi::nnet3::kNoTime</a></div><div class="ttdeci">const int kNoTime</div><div class="ttdef"><b>Definition:</b> <a href="nnet-common_8cc_source.html#l00573">nnet-common.cc:573</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a245d65d566725422b859c99bff7623f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a245d65d566725422b859c99bff7623f8">&#9670;&nbsp;</a></span>Info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Info </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns some text-form information about this component, for diagnostics. </p>
<p>Starts with the type of the component. E.g. "SigmoidComponent dim=900", although most components will have much more info. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a245d65d566725422b859c99bff7623f8">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00065">65</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">TimeHeightConvolutionComponent::bias_params_</a>, <a class="el" href="natural-gradient-online_8h_source.html#l00432">OnlineNaturalGradient::GetAlpha()</a>, <a class="el" href="natural-gradient-online_8h_source.html#l00431">OnlineNaturalGradient::GetNumMinibatchesHistory()</a>, <a class="el" href="natural-gradient-online_8h_source.html#l00433">OnlineNaturalGradient::GetRank()</a>, <a class="el" href="convolution_8cc_source.html#l00087">ConvolutionModel::Info()</a>, <a class="el" href="nnet-component-itf_8cc_source.html#l00324">UpdatableComponent::Info()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00356">TimeHeightConvolutionComponent::max_memory_mb_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00330">TimeHeightConvolutionComponent::model_</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00618">TimeHeightConvolutionComponent::NumParameters()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00368">TimeHeightConvolutionComponent::preconditioner_in_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00372">TimeHeightConvolutionComponent::preconditioner_out_</a>, <a class="el" href="nnet-parse_8cc_source.html#l00530">kaldi::nnet3::PrintParameterStats()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00362">TimeHeightConvolutionComponent::use_natural_gradient_</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00462">TdnnComponent::OutputDim()</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                                     {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  std::ostringstream stream;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment">// The output of model_.Info() has been designed to be suitable</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="comment">// as a component-level info string, it has</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">// {num-filters,height}-{in-out}, offsets=[...], required-time-offsets=[...],</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="comment">// {input,output}-dim.</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  stream &lt;&lt; <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a245d65d566725422b859c99bff7623f8">UpdatableComponent::Info</a>() &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a245d65d566725422b859c99bff7623f8">Info</a>();</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3.html#a34aff1eb4a29f66dee3a093eed6db9fa">PrintParameterStats</a>(stream, <span class="stringliteral">&quot;filter-params&quot;</span>, <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3.html#a34aff1eb4a29f66dee3a093eed6db9fa">PrintParameterStats</a>(stream, <span class="stringliteral">&quot;bias-params&quot;</span>, <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  stream &lt;&lt; <span class="stringliteral">&quot;, num-params=&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a1ff16fe9504cbce1089af9cd84386405">NumParameters</a>()</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;, max-memory-mb=&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">max_memory_mb_</a></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;, use-natural-gradient=&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a57660849c075b7ff1f48bd4c943b668c">use_natural_gradient_</a>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">if</span> (use_natural_gradient_) {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    stream &lt;&lt; <span class="stringliteral">&quot;, num-minibatches-history=&quot;</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;           &lt;&lt; <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#ade740d3baed295663ceaa07aa6951099">GetNumMinibatchesHistory</a>()</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;, rank-in=&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a1fd2929c7565d8aeebac17374c7ae45d">GetRank</a>()</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;, rank-out=&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">preconditioner_out_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a1fd2929c7565d8aeebac17374c7ae45d">GetRank</a>()</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;, alpha=&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#aecff47257feb076ddd824437cd4bb760">GetAlpha</a>();</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">return</span> stream.str();</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div><div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_a245d65d566725422b859c99bff7623f8"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a245d65d566725422b859c99bff7623f8">kaldi::nnet3::time_height_convolution::ConvolutionModel::Info</a></div><div class="ttdeci">std::string Info() const</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8cc_source.html#l00087">convolution.cc:87</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a4878727ca1c9f34ad5d17ba12067280e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_out_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_out_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00372">nnet-convolutional-component.h:372</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a186a95fc2b048e39782a4bfebf6b964a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">kaldi::nnet3::TimeHeightConvolutionComponent::model_</a></div><div class="ttdeci">time_height_convolution::ConvolutionModel model_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00330">nnet-convolutional-component.h:330</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1OnlineNaturalGradient_html_ade740d3baed295663ceaa07aa6951099"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#ade740d3baed295663ceaa07aa6951099">kaldi::nnet3::OnlineNaturalGradient::GetNumMinibatchesHistory</a></div><div class="ttdeci">BaseFloat GetNumMinibatchesHistory() const</div><div class="ttdef"><b>Definition:</b> <a href="natural-gradient-online_8h_source.html#l00431">natural-gradient-online.h:431</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a245d65d566725422b859c99bff7623f8"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a245d65d566725422b859c99bff7623f8">kaldi::nnet3::UpdatableComponent::Info</a></div><div class="ttdeci">virtual std::string Info() const</div><div class="ttdoc">Returns some text-form information about this component, for diagnostics. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8cc_source.html#l00324">nnet-component-itf.cc:324</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a1ff16fe9504cbce1089af9cd84386405"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a1ff16fe9504cbce1089af9cd84386405">kaldi::nnet3::TimeHeightConvolutionComponent::NumParameters</a></div><div class="ttdeci">virtual int32 NumParameters() const</div><div class="ttdoc">The following new virtual function returns the total dimension of the parameters in this class...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-convolutional-component_8cc_source.html#l00618">nnet-convolutional-component.cc:618</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1OnlineNaturalGradient_html_aecff47257feb076ddd824437cd4bb760"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#aecff47257feb076ddd824437cd4bb760">kaldi::nnet3::OnlineNaturalGradient::GetAlpha</a></div><div class="ttdeci">BaseFloat GetAlpha() const</div><div class="ttdef"><b>Definition:</b> <a href="natural-gradient-online_8h_source.html#l00432">natural-gradient-online.h:432</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a34aff1eb4a29f66dee3a093eed6db9fa"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a34aff1eb4a29f66dee3a093eed6db9fa">kaldi::nnet3::PrintParameterStats</a></div><div class="ttdeci">void PrintParameterStats(std::ostringstream &amp;os, const std::string &amp;name, const CuVectorBase&lt; BaseFloat &gt; &amp;params, bool include_mean)</div><div class="ttdoc">Print to &amp;#39;os&amp;#39; some information about the mean and standard deviation of some parameters, used in Info() functions in nnet-simple-component.cc. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-parse_8cc_source.html#l00530">nnet-parse.cc:530</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a57660849c075b7ff1f48bd4c943b668c"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a57660849c075b7ff1f48bd4c943b668c">kaldi::nnet3::TimeHeightConvolutionComponent::use_natural_gradient_</a></div><div class="ttdeci">bool use_natural_gradient_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00362">nnet-convolutional-component.h:362</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9e4c9ff6496f25c6214d32fd0033d398"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_in_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_in_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00368">nnet-convolutional-component.h:368</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_ae4b888539ce58d5188c7019c6db921f3"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">kaldi::nnet3::TimeHeightConvolutionComponent::max_memory_mb_</a></div><div class="ttdeci">BaseFloat max_memory_mb_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00356">nnet-convolutional-component.h:356</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1OnlineNaturalGradient_html_a1fd2929c7565d8aeebac17374c7ae45d"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a1fd2929c7565d8aeebac17374c7ae45d">kaldi::nnet3::OnlineNaturalGradient::GetRank</a></div><div class="ttdeci">int32 GetRank() const</div><div class="ttdef"><b>Definition:</b> <a href="natural-gradient-online_8h_source.html#l00433">natural-gradient-online.h:433</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4f5c35427c2657c50173313e99e3f01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4f5c35427c2657c50173313e99e3f01">&#9670;&nbsp;</a></span>InitFromConfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void InitFromConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1nnet3_1_1ConfigLine.html">ConfigLine</a> *&#160;</td>
          <td class="paramname"><em>cfl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize, from a <a class="el" href="classkaldi_1_1nnet3_1_1ConfigLine.html" title="This class is responsible for parsing input like hi-there xx=yyy a=b c empty= f-oo=Append(bar, sss) ba_z=123 bing=&#39;a b c&#39; baz=&quot;a b c d=&#39;a b&#39; e&quot; and giving you access to the fields, in this case. ">ConfigLine</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cfl</td><td>A <a class="el" href="classkaldi_1_1nnet3_1_1ConfigLine.html" title="This class is responsible for parsing input like hi-there xx=yyy a=b c empty= f-oo=Append(bar, sss) ba_z=123 bing=&#39;a b c&#39; baz=&quot;a b c d=&#39;a b&#39; e&quot; and giving you access to the fields, in this case. ">ConfigLine</a> containing any parameters that are needed for initialization. For example: "dim=100 param-stddev=0.1" </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a1f7dc9cc61293d3c7decb5bd8ea3f4d5">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00114">114</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">TimeHeightConvolutionComponent::bias_params_</a>, <a class="el" href="convolution_8cc_source.html#l00130">ConvolutionModel::Check()</a>, <a class="el" href="convolution_8cc_source.html#l00109">ConvolutionModel::ComputeDerived()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00490">TimeHeightConvolutionComponent::ComputeDerived()</a>, <a class="el" href="nnet-parse_8cc_source.html#l00115">ConfigLine::GetValue()</a>, <a class="el" href="convolution_8h_source.html#l00128">ConvolutionModel::height_in</a>, <a class="el" href="convolution_8h_source.html#l00137">ConvolutionModel::Offset::height_offset</a>, <a class="el" href="convolution_8h_source.html#l00129">ConvolutionModel::height_out</a>, <a class="el" href="convolution_8h_source.html#l00132">ConvolutionModel::height_subsample_out</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="nnet-component-itf_8cc_source.html#l00239">UpdatableComponent::InitLearningRatesFromConfig()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00088">TimeHeightConvolutionComponent::InitUnit()</a>, <a class="el" href="stl-utils_8h_source.html#l00063">kaldi::IsSortedAndUniq()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="kaldi-error_8h_source.html#l00129">KALDI_WARN</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00356">TimeHeightConvolutionComponent::max_memory_mb_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00330">TimeHeightConvolutionComponent::model_</a>, <a class="el" href="convolution_8h_source.html#l00126">ConvolutionModel::num_filters_in</a>, <a class="el" href="convolution_8h_source.html#l00127">ConvolutionModel::num_filters_out</a>, <a class="el" href="convolution_8h_source.html#l00157">ConvolutionModel::offsets</a>, <a class="el" href="convolution_8h_source.html#l00208">ConvolutionModel::ParamCols()</a>, <a class="el" href="convolution_8h_source.html#l00206">ConvolutionModel::ParamRows()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00368">TimeHeightConvolutionComponent::preconditioner_in_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00372">TimeHeightConvolutionComponent::preconditioner_out_</a>, <a class="el" href="convolution_8h_source.html#l00169">ConvolutionModel::required_time_offsets</a>, <a class="el" href="natural-gradient-online_8cc_source.html#l00621">OnlineNaturalGradient::SetAlpha()</a>, <a class="el" href="natural-gradient-online_8cc_source.html#l00615">OnlineNaturalGradient::SetNumMinibatchesHistory()</a>, <a class="el" href="natural-gradient-online_8cc_source.html#l00602">OnlineNaturalGradient::SetRank()</a>, <a class="el" href="stl-utils_8h_source.html#l00039">kaldi::SortAndUniq()</a>, <a class="el" href="text-utils_8h_source.html#l00068">kaldi::SplitStringToIntegers()</a>, <a class="el" href="text-utils_8cc_source.html#l00063">kaldi::SplitStringToVector()</a>, <a class="el" href="convolution_8h_source.html#l00136">ConvolutionModel::Offset::time_offset</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00362">TimeHeightConvolutionComponent::use_natural_gradient_</a>, and <a class="el" href="nnet-parse_8h_source.html#l00073">ConfigLine::WholeLine()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00462">TdnnComponent::OutputDim()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                                                   {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// 1. Config values inherited from UpdatableComponent.</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ae85774801475096c0cc34fd2d6a021ab">InitLearningRatesFromConfig</a>(cfl);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// 2. convolution-related config values.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ae8f1f2846a9eaabfec6b665ad055a850">height_subsample_out</a> = 1;  <span class="comment">// default.</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">max_memory_mb_</a> = 200.0;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  std::string height_offsets, time_offsets, required_time_offsets = <span class="stringliteral">&quot;undef&quot;</span>,</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      offsets;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordtype">bool</span> ok = cfl-&gt;GetValue(<span class="stringliteral">&quot;num-filters-in&quot;</span>, &amp;<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a15d88b7dff4152f85b8e864454d7be56">num_filters_in</a>) &amp;&amp;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      cfl-&gt;GetValue(<span class="stringliteral">&quot;num-filters-out&quot;</span>, &amp;<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">num_filters_out</a>) &amp;&amp;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      cfl-&gt;GetValue(<span class="stringliteral">&quot;height-in&quot;</span>, &amp;<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a6d3d2e1318a0bff4f829953108391f17">height_in</a>) &amp;&amp;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      cfl-&gt;GetValue(<span class="stringliteral">&quot;height-out&quot;</span>, &amp;<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab83e84168a713d1f7350d5f16d82a3a0">height_out</a>);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordflow">if</span> (!ok) {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Bad initializer: expected all the values &quot;</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="stringliteral">&quot;num-filters-in, num-filters-out, height-in, height-out, &quot;</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="stringliteral">&quot;to be defined: &quot;</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;              &lt;&lt; cfl-&gt;WholeLine();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="comment">// some optional structural configs.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  cfl-&gt;GetValue(<span class="stringliteral">&quot;required-time-offsets&quot;</span>, &amp;required_time_offsets);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  cfl-&gt;GetValue(<span class="stringliteral">&quot;height-subsample-out&quot;</span>, &amp;<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ae8f1f2846a9eaabfec6b665ad055a850">height_subsample_out</a>);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  cfl-&gt;GetValue(<span class="stringliteral">&quot;max-memory-mb&quot;</span>, &amp;<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">max_memory_mb_</a>);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">max_memory_mb_</a> &gt; 0.0);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  { <span class="comment">// This block sets up model_.offsets.</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>.clear();</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> (cfl-&gt;GetValue(<span class="stringliteral">&quot;offsets&quot;</span>, &amp;offsets)) {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="comment">// init from offsets, like &quot;-1,-1;-1,0;-1,1;0,-1;...;1,1&quot;</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      std::vector&lt;std::string&gt; splits;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <a class="code" href="namespacekaldi.html#ac332ce23fcf74c011cfa83276cd08477">SplitStringToVector</a>(offsets, <span class="stringliteral">&quot;;&quot;</span>, <span class="keyword">false</span>, &amp;splits);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; splits.size(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        std::vector&lt;int32&gt; int_pair;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacekaldi.html#ae95740f87fc2fb79419753e21396c647">SplitStringToIntegers</a>(splits[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>], <span class="stringliteral">&quot;,&quot;</span>, <span class="keyword">false</span>, &amp;int_pair) ||</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            int_pair.size() != 2)</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;          <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Bad config value offsets=&quot;</span> &lt;&lt; offsets;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        time_height_convolution::ConvolutionModel::Offset offset;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        offset.time_offset = int_pair[0];</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        offset.height_offset = int_pair[1];</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>.push_back(offset);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      std::sort(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>.begin(), <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>.end());</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacekaldi.html#a81dfa76eeac63eba502e32ee58e37d57">IsSortedAndUniq</a>(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>) || <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>.empty())</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Error in offsets: probably repeated offset.  &quot;</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="stringliteral">&quot;offsets=&quot;</span> &lt;&lt; offsets;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cfl-&gt;GetValue(<span class="stringliteral">&quot;height-offsets&quot;</span>, &amp;height_offsets) &amp;&amp;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;               cfl-&gt;GetValue(<span class="stringliteral">&quot;time-offsets&quot;</span>, &amp;time_offsets)) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      std::vector&lt;int32&gt; height_offsets_vec,</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;          time_offsets_vec;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacekaldi.html#ae95740f87fc2fb79419753e21396c647">SplitStringToIntegers</a>(height_offsets, <span class="stringliteral">&quot;,&quot;</span>, <span class="keyword">false</span>,</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                                 &amp;height_offsets_vec) ||</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;          !<a class="code" href="namespacekaldi.html#ae95740f87fc2fb79419753e21396c647">SplitStringToIntegers</a>(time_offsets, <span class="stringliteral">&quot;,&quot;</span>, <span class="keyword">false</span>,</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                                 &amp;time_offsets_vec)) {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Formatting problem in time-offsets or height-offsets: &quot;</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                  &lt;&lt; cfl-&gt;WholeLine();</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">if</span> (height_offsets_vec.empty() || !<a class="code" href="namespacekaldi.html#a81dfa76eeac63eba502e32ee58e37d57">IsSortedAndUniq</a>(height_offsets_vec) ||</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;          time_offsets_vec.empty() || !<a class="code" href="namespacekaldi.html#a81dfa76eeac63eba502e32ee58e37d57">IsSortedAndUniq</a>(time_offsets_vec)) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;time-offsets and height-offsets must be nonempty, &quot;</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="stringliteral">&quot;sorted and unique.&quot;</span>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>.clear();</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; time_offsets_vec.size(); i++) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; height_offsets_vec.size(); <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;          time_height_convolution::ConvolutionModel::Offset offset;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;          offset.time_offset = time_offsets_vec[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          offset.height_offset = height_offsets_vec[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>];</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;          <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>.push_back(offset);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Expected either &#39;offsets&#39;, or both &#39;height-offsets&#39; and &quot;</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;          <span class="stringliteral">&quot;&#39;time-offsets&#39;, to be defined: &quot;</span> &lt;&lt; cfl-&gt;WholeLine();</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>.empty())</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Something went wrong setting offsets: &quot;</span> &lt;&lt; cfl-&gt;WholeLine();</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  {  <span class="comment">// This block sets model_.required_time_offsets.</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    std::vector&lt;int32&gt; required_time_offsets_vec;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span> (required_time_offsets == <span class="stringliteral">&quot;undef&quot;</span>) {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="comment">// it defaults to all the time offsets that were used.</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      std::set&lt;int32&gt; required_time_offsets;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>.size(); i++)</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        required_time_offsets_vec.push_back(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>[i].time_offset);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <a class="code" href="namespacekaldi.html#a3dd7a9cc33032bfb870b4b6c053822db">SortAndUniq</a>(&amp;required_time_offsets_vec);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacekaldi.html#ae95740f87fc2fb79419753e21396c647">SplitStringToIntegers</a>(required_time_offsets, <span class="stringliteral">&quot;,&quot;</span>, <span class="keyword">false</span>,</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                                 &amp;required_time_offsets_vec) ||</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;          required_time_offsets_vec.empty() ||</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;          !<a class="code" href="namespacekaldi.html#a81dfa76eeac63eba502e32ee58e37d57">IsSortedAndUniq</a>(required_time_offsets_vec)) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Formatting problem in required-time-offsets: &quot;</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                &lt;&lt; cfl-&gt;WholeLine();</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#aa8bc343695c77d80bab06500c84b4240">required_time_offsets</a>.clear();</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#aa8bc343695c77d80bab06500c84b4240">required_time_offsets</a>.insert(</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        required_time_offsets_vec.begin(),</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        required_time_offsets_vec.end());</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a9d601955f7a16a2d9492240166a8e569">ComputeDerived</a>();</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#adc9de3c767c99e452604ceae022f20a4">Check</a>(<span class="keyword">false</span>, <span class="keyword">true</span>)) {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Parameters used to initialize TimeHeightConvolutionComponent &quot;</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;do not make sense,  line was: &quot;</span> &lt;&lt; cfl-&gt;WholeLine();</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#adc9de3c767c99e452604ceae022f20a4">Check</a>(<span class="keyword">true</span>, <span class="keyword">true</span>)) {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;There are input heights unused in &quot;</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="stringliteral">&quot;TimeHeightConvolutionComponent; consider increasing output &quot;</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="stringliteral">&quot;height or decreasing height of preceding layer.&quot;</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;               &lt;&lt; cfl-&gt;WholeLine();</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// 3. Parameter-initialization configs.</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> param_stddev = -1, bias_stddev = 0.0;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordtype">bool</span> init_unit = <span class="keyword">false</span>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  cfl-&gt;GetValue(<span class="stringliteral">&quot;param-stddev&quot;</span>, &amp;param_stddev);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  cfl-&gt;GetValue(<span class="stringliteral">&quot;bias-stddev&quot;</span>, &amp;bias_stddev);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  cfl-&gt;GetValue(<span class="stringliteral">&quot;init-unit&quot;</span>, &amp;init_unit);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">if</span> (param_stddev &lt; 0.0) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    param_stddev = 1.0 / sqrt(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a15d88b7dff4152f85b8e864454d7be56">num_filters_in</a> *</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                              <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>.size());</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// initialize the parameters.</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.Resize(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ac3fa74c7d37d13f40316563099322153">ParamRows</a>(), <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#aaf781d073deb0b09dd89cefc0804979f">ParamCols</a>());</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">if</span> (!init_unit) {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.SetRandn();</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.Scale(param_stddev);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a0a101cccfc4dca67ebfc545c60943d5a">InitUnit</a>();</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Resize(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">num_filters_out</a>);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.SetRandn();</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Scale(bias_stddev);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// 4. Natural-gradient related configs.</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a57660849c075b7ff1f48bd4c943b668c">use_natural_gradient_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  int32 rank_out = -1, rank_in = -1;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> alpha_out = 4.0, alpha_in = 4.0,</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      num_minibatches_history = 4.0;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  cfl-&gt;GetValue(<span class="stringliteral">&quot;use-natural-gradient&quot;</span>, &amp;<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a57660849c075b7ff1f48bd4c943b668c">use_natural_gradient_</a>);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  cfl-&gt;GetValue(<span class="stringliteral">&quot;rank-in&quot;</span>, &amp;rank_in);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  cfl-&gt;GetValue(<span class="stringliteral">&quot;rank-out&quot;</span>, &amp;rank_out);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  cfl-&gt;GetValue(<span class="stringliteral">&quot;alpha-in&quot;</span>, &amp;alpha_in);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  cfl-&gt;GetValue(<span class="stringliteral">&quot;alpha-out&quot;</span>, &amp;alpha_out);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  cfl-&gt;GetValue(<span class="stringliteral">&quot;num-minibatches-history&quot;</span>, &amp;num_minibatches_history);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  int32 dim_in = <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumCols() + 1,</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      dim_out = <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumRows();</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">if</span> (rank_in &lt; 0)</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    rank_in = std::min&lt;int32&gt;(80, (dim_in + 1) / 2);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#afb9bffca178027f3e5d52ec73a1ee0fe">SetRank</a>(rank_in);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keywordflow">if</span> (rank_out &lt; 0)</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    rank_out = std::min&lt;int32&gt;(80, (dim_out + 1) / 2);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">preconditioner_out_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#afb9bffca178027f3e5d52ec73a1ee0fe">SetRank</a>(rank_out);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a6fa49a23b816a2a52721b7a8dcf0ce42">SetNumMinibatchesHistory</a>(num_minibatches_history);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">preconditioner_out_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a6fa49a23b816a2a52721b7a8dcf0ce42">SetNumMinibatchesHistory</a>(num_minibatches_history);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a885862c5b0a0cf88d75bee40f5cf29f2">SetAlpha</a>(alpha_in);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">preconditioner_out_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a885862c5b0a0cf88d75bee40f5cf29f2">SetAlpha</a>(alpha_out);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9d601955f7a16a2d9492240166a8e569">ComputeDerived</a>();</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div><div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_ae8f1f2846a9eaabfec6b665ad055a850"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ae8f1f2846a9eaabfec6b665ad055a850">kaldi::nnet3::time_height_convolution::ConvolutionModel::height_subsample_out</a></div><div class="ttdeci">int32 height_subsample_out</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00132">convolution.h:132</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_aaf781d073deb0b09dd89cefc0804979f"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#aaf781d073deb0b09dd89cefc0804979f">kaldi::nnet3::time_height_convolution::ConvolutionModel::ParamCols</a></div><div class="ttdeci">int32 ParamCols() const</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00208">convolution.h:208</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_a6d3d2e1318a0bff4f829953108391f17"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a6d3d2e1318a0bff4f829953108391f17">kaldi::nnet3::time_height_convolution::ConvolutionModel::height_in</a></div><div class="ttdeci">int32 height_in</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00128">convolution.h:128</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_adc9de3c767c99e452604ceae022f20a4"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#adc9de3c767c99e452604ceae022f20a4">kaldi::nnet3::time_height_convolution::ConvolutionModel::Check</a></div><div class="ttdeci">bool Check(bool check_heights_used=true, bool allow_height_padding=true) const</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8cc_source.html#l00130">convolution.cc:130</a></div></div>
<div class="ttc" id="namespacekaldi_html_ae95740f87fc2fb79419753e21396c647"><div class="ttname"><a href="namespacekaldi.html#ae95740f87fc2fb79419753e21396c647">kaldi::SplitStringToIntegers</a></div><div class="ttdeci">bool SplitStringToIntegers(const std::string &amp;full, const char *delim, bool omit_empty_strings, std::vector&lt; I &gt; *out)</div><div class="ttdoc">Split a string (e.g. </div><div class="ttdef"><b>Definition:</b> <a href="text-utils_8h_source.html#l00068">text-utils.h:68</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_ab6517e72f4d0632f883d78c5b7ea8ef4"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">kaldi::nnet3::time_height_convolution::ConvolutionModel::num_filters_out</a></div><div class="ttdeci">int32 num_filters_out</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00127">convolution.h:127</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_ae85774801475096c0cc34fd2d6a021ab"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ae85774801475096c0cc34fd2d6a021ab">kaldi::nnet3::UpdatableComponent::InitLearningRatesFromConfig</a></div><div class="ttdeci">void InitLearningRatesFromConfig(ConfigLine *cfl)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8cc_source.html#l00239">nnet-component-itf.cc:239</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_a15d88b7dff4152f85b8e864454d7be56"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a15d88b7dff4152f85b8e864454d7be56">kaldi::nnet3::time_height_convolution::ConvolutionModel::num_filters_in</a></div><div class="ttdeci">int32 num_filters_in</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00126">convolution.h:126</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1OnlineNaturalGradient_html_afb9bffca178027f3e5d52ec73a1ee0fe"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#afb9bffca178027f3e5d52ec73a1ee0fe">kaldi::nnet3::OnlineNaturalGradient::SetRank</a></div><div class="ttdeci">void SetRank(int32 rank)</div><div class="ttdef"><b>Definition:</b> <a href="natural-gradient-online_8cc_source.html#l00602">natural-gradient-online.cc:602</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_a9d601955f7a16a2d9492240166a8e569"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a9d601955f7a16a2d9492240166a8e569">kaldi::nnet3::time_height_convolution::ConvolutionModel::ComputeDerived</a></div><div class="ttdeci">void ComputeDerived()</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8cc_source.html#l00109">convolution.cc:109</a></div></div>
<div class="ttc" id="namespacekaldi_html_a3dd7a9cc33032bfb870b4b6c053822db"><div class="ttname"><a href="namespacekaldi.html#a3dd7a9cc33032bfb870b4b6c053822db">kaldi::SortAndUniq</a></div><div class="ttdeci">void SortAndUniq(std::vector&lt; T &gt; *vec)</div><div class="ttdoc">Sorts and uniq&amp;#39;s (removes duplicates) from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00039">stl-utils.h:39</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a4878727ca1c9f34ad5d17ba12067280e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_out_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_out_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00372">nnet-convolutional-component.h:372</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_ac3fa74c7d37d13f40316563099322153"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ac3fa74c7d37d13f40316563099322153">kaldi::nnet3::time_height_convolution::ConvolutionModel::ParamRows</a></div><div class="ttdeci">int32 ParamRows() const</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00206">convolution.h:206</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9d601955f7a16a2d9492240166a8e569"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9d601955f7a16a2d9492240166a8e569">kaldi::nnet3::TimeHeightConvolutionComponent::ComputeDerived</a></div><div class="ttdeci">void ComputeDerived()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-convolutional-component_8cc_source.html#l00490">nnet-convolutional-component.cc:490</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a186a95fc2b048e39782a4bfebf6b964a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">kaldi::nnet3::TimeHeightConvolutionComponent::model_</a></div><div class="ttdeci">time_height_convolution::ConvolutionModel model_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00330">nnet-convolutional-component.h:330</a></div></div>
<div class="ttc" id="namespacekaldi_html_ac332ce23fcf74c011cfa83276cd08477"><div class="ttname"><a href="namespacekaldi.html#ac332ce23fcf74c011cfa83276cd08477">kaldi::SplitStringToVector</a></div><div class="ttdeci">void SplitStringToVector(const std::string &amp;full, const char *delim, bool omit_empty_strings, std::vector&lt; std::string &gt; *out)</div><div class="ttdoc">Split a string using any of the single character delimiters. </div><div class="ttdef"><b>Definition:</b> <a href="text-utils_8cc_source.html#l00063">text-utils.cc:63</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a0a101cccfc4dca67ebfc545c60943d5a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a0a101cccfc4dca67ebfc545c60943d5a">kaldi::nnet3::TimeHeightConvolutionComponent::InitUnit</a></div><div class="ttdeci">void InitUnit()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-convolutional-component_8cc_source.html#l00088">nnet-convolutional-component.cc:88</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_a2b4b07f084195f0a2563065b7d7ebbf9"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">kaldi::nnet3::time_height_convolution::ConvolutionModel::offsets</a></div><div class="ttdeci">std::vector&lt; Offset &gt; offsets</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00157">convolution.h:157</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_ab83e84168a713d1f7350d5f16d82a3a0"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab83e84168a713d1f7350d5f16d82a3a0">kaldi::nnet3::time_height_convolution::ConvolutionModel::height_out</a></div><div class="ttdeci">int32 height_out</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00129">convolution.h:129</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1OnlineNaturalGradient_html_a885862c5b0a0cf88d75bee40f5cf29f2"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a885862c5b0a0cf88d75bee40f5cf29f2">kaldi::nnet3::OnlineNaturalGradient::SetAlpha</a></div><div class="ttdeci">void SetAlpha(BaseFloat alpha)</div><div class="ttdef"><b>Definition:</b> <a href="natural-gradient-online_8cc_source.html#l00621">natural-gradient-online.cc:621</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_aa8bc343695c77d80bab06500c84b4240"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#aa8bc343695c77d80bab06500c84b4240">kaldi::nnet3::time_height_convolution::ConvolutionModel::required_time_offsets</a></div><div class="ttdeci">std::set&lt; int32 &gt; required_time_offsets</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00169">convolution.h:169</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1OnlineNaturalGradient_html_a6fa49a23b816a2a52721b7a8dcf0ce42"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a6fa49a23b816a2a52721b7a8dcf0ce42">kaldi::nnet3::OnlineNaturalGradient::SetNumMinibatchesHistory</a></div><div class="ttdeci">void SetNumMinibatchesHistory(BaseFloat num_minibatches_history)</div><div class="ttdef"><b>Definition:</b> <a href="natural-gradient-online_8cc_source.html#l00615">natural-gradient-online.cc:615</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a57660849c075b7ff1f48bd4c943b668c"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a57660849c075b7ff1f48bd4c943b668c">kaldi::nnet3::TimeHeightConvolutionComponent::use_natural_gradient_</a></div><div class="ttdeci">bool use_natural_gradient_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00362">nnet-convolutional-component.h:362</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9e4c9ff6496f25c6214d32fd0033d398"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_in_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_in_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00368">nnet-convolutional-component.h:368</a></div></div>
<div class="ttc" id="namespacekaldi_html_a81dfa76eeac63eba502e32ee58e37d57"><div class="ttname"><a href="namespacekaldi.html#a81dfa76eeac63eba502e32ee58e37d57">kaldi::IsSortedAndUniq</a></div><div class="ttdeci">bool IsSortedAndUniq(const std::vector&lt; T &gt; &amp;vec)</div><div class="ttdoc">Returns true if the vector is sorted and contains each element only once. </div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00063">stl-utils.h:63</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_ae4b888539ce58d5188c7019c6db921f3"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">kaldi::nnet3::TimeHeightConvolutionComponent::max_memory_mb_</a></div><div class="ttdeci">BaseFloat max_memory_mb_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00356">nnet-convolutional-component.h:356</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0a101cccfc4dca67ebfc545c60943d5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a101cccfc4dca67ebfc545c60943d5a">&#9670;&nbsp;</a></span>InitUnit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void InitUnit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00088">88</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00330">TimeHeightConvolutionComponent::model_</a>, <a class="el" href="convolution_8h_source.html#l00126">ConvolutionModel::num_filters_in</a>, <a class="el" href="convolution_8h_source.html#l00127">ConvolutionModel::num_filters_out</a>, and <a class="el" href="convolution_8h_source.html#l00157">ConvolutionModel::offsets</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-convolutional-component_8cc_source.html#l00114">TimeHeightConvolutionComponent::InitFromConfig()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00302">TimeHeightConvolutionComponent::ScaleLinearParams()</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                              {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a15d88b7dff4152f85b8e864454d7be56">num_filters_in</a> != <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">num_filters_out</a>) {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;You cannot specify init-unit if the num-filters-in &quot;</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;and num-filters-out differ.&quot;</span>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  int32 zero_offset = 0;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>.size(); i++) {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>[i].time_offset == 0 &amp;&amp;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>[i].height_offset == 0) {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      zero_offset = <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">if</span> (i == <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">offsets</a>.size())  <span class="comment">// did not break.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;You cannot specify init-unit if the model does &quot;</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;not have the offset (0, 0).&quot;</span>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  CuSubMatrix&lt;BaseFloat&gt; zero_offset_block(</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>, 0, <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumRows(),</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      zero_offset * <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a15d88b7dff4152f85b8e864454d7be56">num_filters_in</a>, <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a15d88b7dff4152f85b8e864454d7be56">num_filters_in</a>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(zero_offset_block.NumRows() == zero_offset_block.NumCols());</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  zero_offset_block.AddToDiag(1.0);  <span class="comment">// set this block to the unit matrix.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div><div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_ab6517e72f4d0632f883d78c5b7ea8ef4"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">kaldi::nnet3::time_height_convolution::ConvolutionModel::num_filters_out</a></div><div class="ttdeci">int32 num_filters_out</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00127">convolution.h:127</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_a15d88b7dff4152f85b8e864454d7be56"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a15d88b7dff4152f85b8e864454d7be56">kaldi::nnet3::time_height_convolution::ConvolutionModel::num_filters_in</a></div><div class="ttdeci">int32 num_filters_in</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00126">convolution.h:126</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a186a95fc2b048e39782a4bfebf6b964a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">kaldi::nnet3::TimeHeightConvolutionComponent::model_</a></div><div class="ttdeci">time_height_convolution::ConvolutionModel model_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00330">nnet-convolutional-component.h:330</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_a2b4b07f084195f0a2563065b7d7ebbf9"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a2b4b07f084195f0a2563065b7d7ebbf9">kaldi::nnet3::time_height_convolution::ConvolutionModel::offsets</a></div><div class="ttdeci">std::vector&lt; Offset &gt; offsets</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00157">convolution.h:157</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa5083adaff49881915d61ebf045e96db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5083adaff49881915d61ebf045e96db">&#9670;&nbsp;</a></span>InputDim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 InputDim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns input-dimension of this component. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a7f37d871d35c43a03324502cea308635">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00057">57</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="convolution_8h_source.html#l00203">ConvolutionModel::InputDim()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00330">TimeHeightConvolutionComponent::model_</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                                                     {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#aa5083adaff49881915d61ebf045e96db">InputDim</a>();</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div><div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_aa5083adaff49881915d61ebf045e96db"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#aa5083adaff49881915d61ebf045e96db">kaldi::nnet3::time_height_convolution::ConvolutionModel::InputDim</a></div><div class="ttdeci">int32 InputDim() const</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00203">convolution.h:203</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a186a95fc2b048e39782a4bfebf6b964a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">kaldi::nnet3::TimeHeightConvolutionComponent::model_</a></div><div class="ttdeci">time_height_convolution::ConvolutionModel model_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00330">nnet-convolutional-component.h:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a529c07610dd915a30e452f80b8bb5fc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a529c07610dd915a30e452f80b8bb5fc0">&#9670;&nbsp;</a></span>IsComputable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> IsComputable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1nnet3_1_1MiscComputationInfo.html">MiscComputationInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>misc_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &amp;&#160;</td>
          <td class="paramname"><em>output_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet3_1_1IndexSet.html">IndexSet</a> &amp;&#160;</td>
          <td class="paramname"><em>input_index_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; *&#160;</td>
          <td class="paramname"><em>used_inputs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function only does something interesting for non-simple Components, and it exists to make it possible to manage optionally-required inputs. </p>
<p>It tells the user whether a given output index is computable from a given set of input indexes, and if so, says which input indexes will be used in the computation.</p>
<p>Implementations of this function are required to have the property that adding an element to "input_index_set" can only ever change IsComputable from false to true, never vice versa.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">misc_info</td><td>Some information specific to the computation, such as minimum and maximum times for certain components to do adaptation on; it's a place to put things that don't easily fit in the framework. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">output_index</td><td>The index that is to be computed at the output of this <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input_index_set</td><td>The set of indexes that is available at the input of this <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">used_inputs</td><td>If this is non-NULL and the output is computable this will be set to the list of input indexes that will actually be used in the computation. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true iff this output is computable from the provided inputs.</dd></dl>
<p>The default implementation of this function is suitable for any SimpleComponent: it just returns true if output_index is in input_index_set, and if so sets used_inputs to vector containing that one <a class="el" href="structkaldi_1_1nnet3_1_1Index.html" title="struct Index is intended to represent the various indexes by which we number the rows of the matrices...">Index</a>. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a529c07610dd915a30e452f80b8bb5fc0">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00518">518</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00334">TimeHeightConvolutionComponent::all_time_offsets_</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-common_8cc_source.html#l00573">kaldi::nnet3::kNoTime</a>, <a class="el" href="nnet-common_8h_source.html#l00046">Index::t</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00338">TimeHeightConvolutionComponent::time_offset_required_</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00245">TimeHeightConvolutionComponent::Copy()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00486">TdnnComponent::Copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                                         {</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(output_index.t != <a class="code" href="namespacekaldi_1_1nnet3.html#ac952f0840a7950dff80c1a89e69656d7">kNoTime</a>);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordtype">size_t</span> size = <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">all_time_offsets_</a>.size();</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  Index index(output_index);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">if</span> (used_inputs != NULL) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    used_inputs-&gt;clear();</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    used_inputs-&gt;reserve(size);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; size; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      index.t = output_index.t + <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">all_time_offsets_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="keywordflow">if</span> (input_index_set(index)) {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="comment">// This input index is available.</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        used_inputs-&gt;push_back(index);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="comment">// This input index is not available.</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a61a515cefdacd8a16f6a9f848386408e">time_offset_required_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;          <span class="comment">// A required offset was not present -&gt; this output index is not</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;          <span class="comment">// computable.</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;          used_inputs-&gt;clear();</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        }</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      }</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    }</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="comment">// All required time-offsets of the output were computable. -&gt; return true.</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; size; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a61a515cefdacd8a16f6a9f848386408e">time_offset_required_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        index.t = output_index.t + <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">all_time_offsets_</a>[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">if</span> (!input_index_set(index))</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  }</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a047936d7dcb44d987faed6274843ab9e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a047936d7dcb44d987faed6274843ab9e">kaldi::nnet3::TimeHeightConvolutionComponent::all_time_offsets_</a></div><div class="ttdeci">std::vector&lt; int32 &gt; all_time_offsets_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00334">nnet-convolutional-component.h:334</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a61a515cefdacd8a16f6a9f848386408e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a61a515cefdacd8a16f6a9f848386408e">kaldi::nnet3::TimeHeightConvolutionComponent::time_offset_required_</a></div><div class="ttdeci">std::vector&lt; bool &gt; time_offset_required_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00338">nnet-convolutional-component.h:338</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_ac952f0840a7950dff80c1a89e69656d7"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#ac952f0840a7950dff80c1a89e69656d7">kaldi::nnet3::kNoTime</a></div><div class="ttdeci">const int kNoTime</div><div class="ttdef"><b>Definition:</b> <a href="nnet-common_8cc_source.html#l00573">nnet-common.cc:573</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1ff16fe9504cbce1089af9cd84386405"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ff16fe9504cbce1089af9cd84386405">&#9670;&nbsp;</a></span>NumParameters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 NumParameters </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The following new virtual function returns the total dimension of the parameters in this class. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#abeffcf34bc1f700bf19a8a28fdf2ed95">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00618">618</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">TimeHeightConvolutionComponent::bias_params_</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00245">TimeHeightConvolutionComponent::Copy()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00486">TdnnComponent::Copy()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00065">TimeHeightConvolutionComponent::Info()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00632">TimeHeightConvolutionComponent::UnVectorize()</a>, and <a class="el" href="nnet-convolutional-component_8cc_source.html#l00623">TimeHeightConvolutionComponent::Vectorize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                                                          {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumRows() * <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumCols() +</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Dim();</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af97474cce492a0b8305e8ec2c798509b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af97474cce492a0b8305e8ec2c798509b">&#9670;&nbsp;</a></span>OutputDim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 OutputDim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns output-dimension of this component. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#ac0f2f034a884363d4e0694c62ea8a764">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00061">61</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00330">TimeHeightConvolutionComponent::model_</a>, and <a class="el" href="convolution_8h_source.html#l00204">ConvolutionModel::OutputDim()</a>.</p>
<div class="fragment"><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                                                      {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#af97474cce492a0b8305e8ec2c798509b">OutputDim</a>();</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div><div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_af97474cce492a0b8305e8ec2c798509b"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#af97474cce492a0b8305e8ec2c798509b">kaldi::nnet3::time_height_convolution::ConvolutionModel::OutputDim</a></div><div class="ttdeci">int32 OutputDim() const</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00204">convolution.h:204</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a186a95fc2b048e39782a4bfebf6b964a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">kaldi::nnet3::TimeHeightConvolutionComponent::model_</a></div><div class="ttdeci">time_height_convolution::ConvolutionModel model_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00330">nnet-convolutional-component.h:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a69a59272c763dc9372ad7d0671a87dad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69a59272c763dc9372ad7d0671a87dad">&#9670;&nbsp;</a></span>PerturbParams()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PerturbParams </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>stddev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is to be used in testing. </p>
<p>It adds unit noise times "stddev" to the parameters of the component. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#af8524a3f9d683293269f46e3cc54b285">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00599">599</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">TimeHeightConvolutionComponent::bias_params_</a>, <a class="el" href="matrix-common_8h_source.html#l00039">kaldi::kUndefined</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>, <a class="el" href="cu-vector_8cc_source.html#l00275">CuVectorBase&lt; Real &gt;::SetRandn()</a>, and <a class="el" href="cu-matrix_8cc_source.html#l03099">CuMatrixBase&lt; Real &gt;::SetRandn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00245">TimeHeightConvolutionComponent::Copy()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00486">TdnnComponent::Copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                                                                   {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  CuMatrix&lt;BaseFloat&gt; temp_mat(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumRows(),</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                               <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumCols(), <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  temp_mat.SetRandn();</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.AddMat(stddev, temp_mat);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  CuVector&lt;BaseFloat&gt; temp_vec(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Dim(), <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  temp_vec.SetRandn();</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.AddVec(stddev, temp_vec);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00039">matrix-common.h:39</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b2919d1c6cfa5f73581f407150374b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b2919d1c6cfa5f73581f407150374b6">&#9670;&nbsp;</a></span>PrecomputeIndexes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a> * PrecomputeIndexes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1nnet3_1_1MiscComputationInfo.html">MiscComputationInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>misc_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>input_indexes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>output_indexes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>need_backprop</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function must return NULL for simple Components. </p>
<p>Returns a pointer to a class that may contain some precomputed component-specific and computation-specific indexes to be in used in the Propagate and Backprop functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">misc_info</td><td>This argument is supplied to handle things that the framework can't very easily supply: information like which time indexes are needed for AggregateComponent, which time-indexes are available at the input of a recurrent network, and so on. misc_info may not even ever be used here. We will add members to misc_info as needed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input_indexes</td><td>A vector of indexes that explains what time-indexes (and other indexes) each row of the in/in_value/in_deriv matrices given to Propagate and Backprop will mean. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">output_indexes</td><td>A vector of indexes that explains what time-indexes (and other indexes) each row of the out/out_value/out_deriv matrices given to Propagate and Backprop will mean. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">need_backprop</td><td>True if we might need to do backprop with this component, so that if any different indexes are needed for backprop then those should be computed too. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a child-class of class <a class="el" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a>, or NULL if this component for does not need to precompute any indexes (e.g. if it is a simple component and does not care about indexes). </dd></dl>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#ad3829084b3e064ff320153ff4b6cfd44">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00559">559</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="convolution_8cc_source.html#l01367">kaldi::nnet3::time_height_convolution::CompileConvolutionComputation()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00299">TimeHeightConvolutionComponent::PrecomputedIndexes::computation</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00356">TimeHeightConvolutionComponent::max_memory_mb_</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00330">TimeHeightConvolutionComponent::model_</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00245">TimeHeightConvolutionComponent::Copy()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00486">TdnnComponent::Copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                                {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keyword">using namespace </span>time_height_convolution;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  ConvolutionComputationOptions opts;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  opts.max_memory_mb = <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">max_memory_mb_</a>;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  PrecomputedIndexes *ans = <span class="keyword">new</span> PrecomputedIndexes();</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  std::vector&lt;Index&gt; input_indexes_modified,</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      output_indexes_modified;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3_1_1time__height__convolution.html#a3a8674224a035c83c521b9a5eccaaeb5">CompileConvolutionComputation</a>(</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>, input_indexes, output_indexes, opts,</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      &amp;(ans-&gt;computation), &amp;input_indexes_modified, &amp;output_indexes_modified);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordflow">if</span> (input_indexes_modified != input_indexes ||</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      output_indexes_modified != output_indexes) {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Problem precomputing indexes&quot;</span>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a186a95fc2b048e39782a4bfebf6b964a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">kaldi::nnet3::TimeHeightConvolutionComponent::model_</a></div><div class="ttdeci">time_height_convolution::ConvolutionModel model_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00330">nnet-convolutional-component.h:330</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_1_1time__height__convolution_html_a3a8674224a035c83c521b9a5eccaaeb5"><div class="ttname"><a href="namespacekaldi_1_1nnet3_1_1time__height__convolution.html#a3a8674224a035c83c521b9a5eccaaeb5">kaldi::nnet3::time_height_convolution::CompileConvolutionComputation</a></div><div class="ttdeci">void CompileConvolutionComputation(const ConvolutionModel &amp;model, const std::vector&lt; Index &gt; &amp;input_indexes, const std::vector&lt; Index &gt; &amp;output_indexes, const ConvolutionComputationOptions &amp;opts, ConvolutionComputation *computation, std::vector&lt; Index &gt; *input_indexes_modified, std::vector&lt; Index &gt; *output_indexes_modified)</div><div class="ttdoc">This function does the compilation for a convolution computation; it&amp;#39;s a wrapper for the functions be...</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8cc_source.html#l01367">convolution.cc:1367</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_ae4b888539ce58d5188c7019c6db921f3"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">kaldi::nnet3::TimeHeightConvolutionComponent::max_memory_mb_</a></div><div class="ttdeci">BaseFloat max_memory_mb_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00356">nnet-convolutional-component.h:356</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f1f1b05a170bd81a544caefe1acb040"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f1f1b05a170bd81a544caefe1acb040">&#9670;&nbsp;</a></span>Propagate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * Propagate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a> *&#160;</td>
          <td class="paramname"><em>indexes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Propagate function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">indexes</td><td>A pointer to some information output by this class's PrecomputeIndexes function (will be NULL for simple components, i.e. those that don't do things like splicing). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">in</td><td>The input to this component. Num-columns == <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#aa5083adaff49881915d61ebf045e96db" title="Returns input-dimension of this component. ">InputDim()</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>The output of this component. Num-columns == <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#af97474cce492a0b8305e8ec2c798509b" title="Returns output-dimension of this component. ">OutputDim()</a>. Note: output of this component will be added to the initial value of "out" if <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4a16a6da3a5108ec53e759722a51fd47" title="Return bitmask of the component&#39;s properties. ">Properties()</a>&amp;kPropagateAdds != 0; otherwise the output will be set and the initial value ignored. Each <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a> chooses whether it is more convenient implementation-wise to add or set, and the calling code has to deal with it. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Normally returns NULL, but may return a non-NULL value for components which have the flag kUsesMemo set. This value will be passed into the corresponding Backprop routine. </dd></dl>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a342467ad10ff8535abe96768bdf27958">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00282">282</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">TimeHeightConvolutionComponent::bias_params_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00299">TimeHeightConvolutionComponent::PrecomputedIndexes::computation</a>, <a class="el" href="convolution_8cc_source.html#l00524">kaldi::nnet3::time_height_convolution::ConvolveForward()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02282">CuMatrixBase&lt; Real &gt;::CopyRowsFromVec()</a>, <a class="el" href="cu-matrix_8h_source.html#l00689">CuMatrixBase&lt; Real &gt;::Data()</a>, <a class="el" href="convolution_8h_source.html#l00129">ConvolutionModel::height_out</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00330">TimeHeightConvolutionComponent::model_</a>, <a class="el" href="convolution_8h_source.html#l00127">ConvolutionModel::num_filters_out</a>, <a class="el" href="cu-matrix_8h_source.html#l00215">CuMatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="cu-matrix_8h_source.html#l00214">CuMatrixBase&lt; Real &gt;::NumRows()</a>, and <a class="el" href="cu-matrix_8h_source.html#l00216">CuMatrixBase&lt; Real &gt;::Stride()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00227">TimeHeightConvolutionComponent::Properties()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00467">TdnnComponent::Properties()</a>.</p>
<div class="fragment"><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                                        {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keyword">const</span> PrecomputedIndexes *indexes =</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>PrecomputedIndexes*<span class="keyword">&gt;</span>(indexes_in);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(indexes != NULL);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  { <span class="comment">// this block handles the bias term.</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(out-&gt;Stride() == out-&gt;NumCols() &amp;&amp;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                 out-&gt;NumCols() == <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab83e84168a713d1f7350d5f16d82a3a0">height_out</a> * <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">num_filters_out</a>);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    CuSubMatrix&lt;BaseFloat&gt; out_reshaped(</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        out-&gt;Data(), out-&gt;NumRows() * <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab83e84168a713d1f7350d5f16d82a3a0">height_out</a>,</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">num_filters_out</a>, <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">num_filters_out</a>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    out_reshaped.CopyRowsFromVec(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3_1_1time__height__convolution.html#ad1cde1ebf0949cbc13fb9678bde0a70c">ConvolveForward</a>(indexes-&gt;computation, in, <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>, out);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div><div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_ab6517e72f4d0632f883d78c5b7ea8ef4"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">kaldi::nnet3::time_height_convolution::ConvolutionModel::num_filters_out</a></div><div class="ttdeci">int32 num_filters_out</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00127">convolution.h:127</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a186a95fc2b048e39782a4bfebf6b964a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">kaldi::nnet3::TimeHeightConvolutionComponent::model_</a></div><div class="ttdeci">time_height_convolution::ConvolutionModel model_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00330">nnet-convolutional-component.h:330</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_ab83e84168a713d1f7350d5f16d82a3a0"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab83e84168a713d1f7350d5f16d82a3a0">kaldi::nnet3::time_height_convolution::ConvolutionModel::height_out</a></div><div class="ttdeci">int32 height_out</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00129">convolution.h:129</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_1_1time__height__convolution_html_ad1cde1ebf0949cbc13fb9678bde0a70c"><div class="ttname"><a href="namespacekaldi_1_1nnet3_1_1time__height__convolution.html#ad1cde1ebf0949cbc13fb9678bde0a70c">kaldi::nnet3::time_height_convolution::ConvolveForward</a></div><div class="ttdeci">void ConvolveForward(const ConvolutionComputation &amp;cc, const CuMatrixBase&lt; BaseFloat &gt; &amp;input, const CuMatrixBase&lt; BaseFloat &gt; &amp;params, CuMatrixBase&lt; BaseFloat &gt; *output)</div><div class="ttdoc">This does the forward computation of convolution. </div><div class="ttdef"><b>Definition:</b> <a href="convolution_8cc_source.html#l00524">convolution.cc:524</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a16a6da3a5108ec53e759722a51fd47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a16a6da3a5108ec53e759722a51fd47">&#9670;&nbsp;</a></span>Properties()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int32 Properties </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return bitmask of the component's properties. </p>
<p>These properties depend only on the component's type. See enum ComponentProperties. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a3a4ff15fafe0c8c4885586fc2c36ca8a">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00227">227</a> of file <a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a>.</p>

<p class="reference">References <a class="el" href="nnet-convolutional-component_8cc_source.html#l00301">TimeHeightConvolutionComponent::Backprop()</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00061">kaldi::nnet3::kBackpropAdds</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00065">kaldi::nnet3::kBackpropNeedsInput</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00075">kaldi::nnet3::kInputContiguous</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00077">kaldi::nnet3::kOutputContiguous</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00058">kaldi::nnet3::kReordersIndexes</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00042">kaldi::nnet3::kUpdatableComponent</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00282">TimeHeightConvolutionComponent::Propagate()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00451">TimeHeightConvolutionComponent::Read()</a>, and <a class="el" href="nnet-convolutional-component_8cc_source.html#l00423">TimeHeightConvolutionComponent::Write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                                   {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kUpdatableComponent</a>|<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a6c12dbc12f9d02024f66b4b0d160ee67">kReordersIndexes</a>|<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3acda3bbc91bd09631b18fdc57376c2b90">kBackpropAdds</a>|</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3adac6588b2ef2e8b52936718cf97263e7">kBackpropNeedsInput</a>|<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2df016ee6a8dfbdac91f5e53f3662a94">kInputContiguous</a>|<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3ab8a5f348ba3b3b42e8943e20b1675dc9">kOutputContiguous</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  }</div><div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3ab8a5f348ba3b3b42e8943e20b1675dc9"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3ab8a5f348ba3b3b42e8943e20b1675dc9">kaldi::nnet3::kOutputContiguous</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00077">nnet-component-itf.h:77</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a61132a04f6c327dffd7f053b93ae393b">kaldi::nnet3::kUpdatableComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00042">nnet-component-itf.h:42</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3adac6588b2ef2e8b52936718cf97263e7"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3adac6588b2ef2e8b52936718cf97263e7">kaldi::nnet3::kBackpropNeedsInput</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00065">nnet-component-itf.h:65</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a2df016ee6a8dfbdac91f5e53f3662a94"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2df016ee6a8dfbdac91f5e53f3662a94">kaldi::nnet3::kInputContiguous</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00075">nnet-component-itf.h:75</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a6c12dbc12f9d02024f66b4b0d160ee67"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a6c12dbc12f9d02024f66b4b0d160ee67">kaldi::nnet3::kReordersIndexes</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00058">nnet-component-itf.h:58</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3acda3bbc91bd09631b18fdc57376c2b90"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3acda3bbc91bd09631b18fdc57376c2b90">kaldi::nnet3::kBackpropAdds</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00061">nnet-component-itf.h:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8e7d2790fc7e94fe9780ccc937de1270"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e7d2790fc7e94fe9780ccc937de1270">&#9670;&nbsp;</a></span>Read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Read </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>is</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>binary</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read function (used after we know the type of the <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a>); accepts input that is missing the token that describes the component type, in case it has already been consumed. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a5d1c1c5364c25160bfef9dda52480cf5">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00451">451</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">TimeHeightConvolutionComponent::bias_params_</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00050">TimeHeightConvolutionComponent::Check()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00490">TimeHeightConvolutionComponent::ComputeDerived()</a>, <a class="el" href="nnet-descriptor_8cc_source.html#l00045">kaldi::nnet3::ExpectToken()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00356">TimeHeightConvolutionComponent::max_memory_mb_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00330">TimeHeightConvolutionComponent::model_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00368">TimeHeightConvolutionComponent::preconditioner_in_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00372">TimeHeightConvolutionComponent::preconditioner_out_</a>, <a class="el" href="convolution_8cc_source.html#l00252">ConvolutionModel::Read()</a>, <a class="el" href="io-funcs-inl_8h_source.html#l00055">kaldi::ReadBasicType()</a>, <a class="el" href="nnet-component-itf_8cc_source.html#l00254">UpdatableComponent::ReadUpdatableCommon()</a>, <a class="el" href="natural-gradient-online_8cc_source.html#l00621">OnlineNaturalGradient::SetAlpha()</a>, <a class="el" href="natural-gradient-online_8cc_source.html#l00615">OnlineNaturalGradient::SetNumMinibatchesHistory()</a>, <a class="el" href="natural-gradient-online_8cc_source.html#l00602">OnlineNaturalGradient::SetRank()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00362">TimeHeightConvolutionComponent::use_natural_gradient_</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00227">TimeHeightConvolutionComponent::Properties()</a>.</p>
<div class="fragment"><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                                                                     {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  std::string token = <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a34e4f5bb2347784301fead47cc6d5008">ReadUpdatableCommon</a>(is, binary);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="comment">// the next few lines are only for back compatibility.</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">if</span> (token != <span class="stringliteral">&quot;&quot;</span>) {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(token == <span class="stringliteral">&quot;&lt;Model&gt;&quot;</span>);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet3.html#a41114607233f11aab89539abf08cf922">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;Model&gt;&quot;</span>);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a8e7d2790fc7e94fe9780ccc937de1270">Read</a>(is, binary);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3.html#a41114607233f11aab89539abf08cf922">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;LinearParams&gt;&quot;</span>);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.Read(is, binary);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3.html#a41114607233f11aab89539abf08cf922">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;BiasParams&gt;&quot;</span>);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Read(is, binary);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3.html#a41114607233f11aab89539abf08cf922">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;MaxMemoryMb&gt;&quot;</span>);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">max_memory_mb_</a>);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3.html#a41114607233f11aab89539abf08cf922">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;UseNaturalGradient&gt;&quot;</span>);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a57660849c075b7ff1f48bd4c943b668c">use_natural_gradient_</a>);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  int32 rank_in,  rank_out;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> alpha_in, alpha_out,</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      num_minibatches_history;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3.html#a41114607233f11aab89539abf08cf922">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;NumMinibatchesHistory&gt;&quot;</span>);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;num_minibatches_history);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3.html#a41114607233f11aab89539abf08cf922">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;AlphaInOut&gt;&quot;</span>);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;alpha_in);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;alpha_out);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a885862c5b0a0cf88d75bee40f5cf29f2">SetAlpha</a>(alpha_in);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">preconditioner_out_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a885862c5b0a0cf88d75bee40f5cf29f2">SetAlpha</a>(alpha_out);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3.html#a41114607233f11aab89539abf08cf922">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;RankInOut&gt;&quot;</span>);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;rank_in);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">ReadBasicType</a>(is, binary, &amp;rank_out);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#afb9bffca178027f3e5d52ec73a1ee0fe">SetRank</a>(rank_in);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">preconditioner_out_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#afb9bffca178027f3e5d52ec73a1ee0fe">SetRank</a>(rank_out);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a6fa49a23b816a2a52721b7a8dcf0ce42">SetNumMinibatchesHistory</a>(num_minibatches_history);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">preconditioner_out_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a6fa49a23b816a2a52721b7a8dcf0ce42">SetNumMinibatchesHistory</a>(num_minibatches_history);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3.html#a41114607233f11aab89539abf08cf922">ExpectToken</a>(is, binary, <span class="stringliteral">&quot;&lt;/TimeHeightConvolutionComponent&gt;&quot;</span>);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9d601955f7a16a2d9492240166a8e569">ComputeDerived</a>();</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4c47fd4f163011eb1939870d25aa656a">Check</a>();</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a4c47fd4f163011eb1939870d25aa656a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4c47fd4f163011eb1939870d25aa656a">kaldi::nnet3::TimeHeightConvolutionComponent::Check</a></div><div class="ttdeci">void Check() const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-convolutional-component_8cc_source.html#l00050">nnet-convolutional-component.cc:50</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga1bd1af0ef712b76f2332febcec8d095a"><div class="ttname"><a href="group__io__funcs__basic.html#ga1bd1af0ef712b76f2332febcec8d095a">kaldi::ReadBasicType</a></div><div class="ttdeci">void ReadBasicType(std::istream &amp;is, bool binary, T *t)</div><div class="ttdoc">ReadBasicType is the name of the read function for bool, integer types, and floating-point types...</div><div class="ttdef"><b>Definition:</b> <a href="io-funcs-inl_8h_source.html#l00055">io-funcs-inl.h:55</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1OnlineNaturalGradient_html_afb9bffca178027f3e5d52ec73a1ee0fe"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#afb9bffca178027f3e5d52ec73a1ee0fe">kaldi::nnet3::OnlineNaturalGradient::SetRank</a></div><div class="ttdeci">void SetRank(int32 rank)</div><div class="ttdef"><b>Definition:</b> <a href="natural-gradient-online_8cc_source.html#l00602">natural-gradient-online.cc:602</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a4878727ca1c9f34ad5d17ba12067280e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_out_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_out_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00372">nnet-convolutional-component.h:372</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a41114607233f11aab89539abf08cf922"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a41114607233f11aab89539abf08cf922">kaldi::nnet3::ExpectToken</a></div><div class="ttdeci">static void ExpectToken(const std::string &amp;token, const std::string &amp;what_we_are_parsing, const std::string **next_token)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-descriptor_8cc_source.html#l00045">nnet-descriptor.cc:45</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_a8e7d2790fc7e94fe9780ccc937de1270"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a8e7d2790fc7e94fe9780ccc937de1270">kaldi::nnet3::time_height_convolution::ConvolutionModel::Read</a></div><div class="ttdeci">void Read(std::istream &amp;is, bool binary)</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8cc_source.html#l00252">convolution.cc:252</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9d601955f7a16a2d9492240166a8e569"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9d601955f7a16a2d9492240166a8e569">kaldi::nnet3::TimeHeightConvolutionComponent::ComputeDerived</a></div><div class="ttdeci">void ComputeDerived()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-convolutional-component_8cc_source.html#l00490">nnet-convolutional-component.cc:490</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a186a95fc2b048e39782a4bfebf6b964a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">kaldi::nnet3::TimeHeightConvolutionComponent::model_</a></div><div class="ttdeci">time_height_convolution::ConvolutionModel model_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00330">nnet-convolutional-component.h:330</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_a34e4f5bb2347784301fead47cc6d5008"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a34e4f5bb2347784301fead47cc6d5008">kaldi::nnet3::UpdatableComponent::ReadUpdatableCommon</a></div><div class="ttdeci">std::string ReadUpdatableCommon(std::istream &amp;is, bool binary)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8cc_source.html#l00254">nnet-component-itf.cc:254</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1OnlineNaturalGradient_html_a885862c5b0a0cf88d75bee40f5cf29f2"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a885862c5b0a0cf88d75bee40f5cf29f2">kaldi::nnet3::OnlineNaturalGradient::SetAlpha</a></div><div class="ttdeci">void SetAlpha(BaseFloat alpha)</div><div class="ttdef"><b>Definition:</b> <a href="natural-gradient-online_8cc_source.html#l00621">natural-gradient-online.cc:621</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1OnlineNaturalGradient_html_a6fa49a23b816a2a52721b7a8dcf0ce42"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a6fa49a23b816a2a52721b7a8dcf0ce42">kaldi::nnet3::OnlineNaturalGradient::SetNumMinibatchesHistory</a></div><div class="ttdeci">void SetNumMinibatchesHistory(BaseFloat num_minibatches_history)</div><div class="ttdef"><b>Definition:</b> <a href="natural-gradient-online_8cc_source.html#l00615">natural-gradient-online.cc:615</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a57660849c075b7ff1f48bd4c943b668c"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a57660849c075b7ff1f48bd4c943b668c">kaldi::nnet3::TimeHeightConvolutionComponent::use_natural_gradient_</a></div><div class="ttdeci">bool use_natural_gradient_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00362">nnet-convolutional-component.h:362</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9e4c9ff6496f25c6214d32fd0033d398"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_in_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_in_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00368">nnet-convolutional-component.h:368</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_ae4b888539ce58d5188c7019c6db921f3"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">kaldi::nnet3::TimeHeightConvolutionComponent::max_memory_mb_</a></div><div class="ttdeci">BaseFloat max_memory_mb_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00356">nnet-convolutional-component.h:356</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2133bab2e5e5e64e8136a341971f2012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2133bab2e5e5e64e8136a341971f2012">&#9670;&nbsp;</a></span>ReorderIndexes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ReorderIndexes </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; *&#160;</td>
          <td class="paramname"><em>input_indexes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structkaldi_1_1nnet3_1_1Index.html">Index</a> &gt; *&#160;</td>
          <td class="paramname"><em>output_indexes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function only does something interesting for non-simple Components. </p>
<p>It provides an opportunity for a <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a> to reorder the or pad the indexes at its input and output. This might be useful, for instance, if a component requires a particular ordering of the indexes that doesn't correspond to their natural ordering. Components that might modify the indexes are required to return the kReordersIndexes flag in their <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4a16a6da3a5108ec53e759722a51fd47" title="Return bitmask of the component&#39;s properties. ">Properties()</a>. The <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a2133bab2e5e5e64e8136a341971f2012" title="This function only does something interesting for non-simple Components. ">ReorderIndexes()</a> function is now allowed to insert blanks into the indexes. The 'blanks' must be of the form (n,kNoTime,x), where the marker kNoTime (a very negative number) is there where the 't' indexes normally live. The reason we don't just have, say, (-1,-1,-1), relates to the need to preserve a regular pattern over the 'n' indexes so that 'shortcut compilation' (c.f. <a class="el" href="namespacekaldi_1_1nnet3.html#af8007bfceb176a3f8f7f3efb765c9062" title="This function is used in &#39;shortcut&#39; compilation to expand a computation that has been compiled for ex...">ExpandComputation()</a>) can work correctly</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">Indexes</td><td>at the input of the <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a>. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">Indexes</td><td>at the output of the <a class="el" href="classkaldi_1_1nnet3_1_1Component.html" title="Abstract base-class for neural-net components. ">Component</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a92fc16eadbf5faafb1aeb4b90614d691">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00407">407</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="convolution_8cc_source.html#l01367">kaldi::nnet3::time_height_convolution::CompileConvolutionComputation()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00356">TimeHeightConvolutionComponent::max_memory_mb_</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00330">TimeHeightConvolutionComponent::model_</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00245">TimeHeightConvolutionComponent::Copy()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00486">TdnnComponent::Copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                                            {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keyword">using namespace </span>time_height_convolution;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  ConvolutionComputationOptions opts;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  opts.max_memory_mb = <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">max_memory_mb_</a>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  ConvolutionComputation computation_temp;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  std::vector&lt;Index&gt; input_indexes_modified,</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      output_indexes_modified;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3_1_1time__height__convolution.html#a3a8674224a035c83c521b9a5eccaaeb5">CompileConvolutionComputation</a>(</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>, *input_indexes, *output_indexes, opts,</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      &amp;computation_temp, &amp;input_indexes_modified, &amp;output_indexes_modified);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  input_indexes-&gt;swap(input_indexes_modified);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  output_indexes-&gt;swap(output_indexes_modified);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a186a95fc2b048e39782a4bfebf6b964a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">kaldi::nnet3::TimeHeightConvolutionComponent::model_</a></div><div class="ttdeci">time_height_convolution::ConvolutionModel model_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00330">nnet-convolutional-component.h:330</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_1_1time__height__convolution_html_a3a8674224a035c83c521b9a5eccaaeb5"><div class="ttname"><a href="namespacekaldi_1_1nnet3_1_1time__height__convolution.html#a3a8674224a035c83c521b9a5eccaaeb5">kaldi::nnet3::time_height_convolution::CompileConvolutionComputation</a></div><div class="ttdeci">void CompileConvolutionComputation(const ConvolutionModel &amp;model, const std::vector&lt; Index &gt; &amp;input_indexes, const std::vector&lt; Index &gt; &amp;output_indexes, const ConvolutionComputationOptions &amp;opts, ConvolutionComputation *computation, std::vector&lt; Index &gt; *input_indexes_modified, std::vector&lt; Index &gt; *output_indexes_modified)</div><div class="ttdoc">This function does the compilation for a convolution computation; it&amp;#39;s a wrapper for the functions be...</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8cc_source.html#l01367">convolution.cc:1367</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_ae4b888539ce58d5188c7019c6db921f3"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">kaldi::nnet3::TimeHeightConvolutionComponent::max_memory_mb_</a></div><div class="ttdeci">BaseFloat max_memory_mb_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00356">nnet-convolutional-component.h:356</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5a4fc4a0524ae8957baf45b8cb168843"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a4fc4a0524ae8957baf45b8cb168843">&#9670;&nbsp;</a></span>Scale()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Scale </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>scale</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This virtual function when called on &ndash; an <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a> scales the parameters by "scale" when called by an <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html" title="Class UpdatableComponent is a Component which has trainable parameters; it extends the interface of C...">UpdatableComponent</a>. </p>
<p>&ndash; a Nonlinear component (or another component that stores stats, like <a class="el" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html">BatchNormComponent</a>)&ndash; it relates to scaling activation stats, not parameters. Otherwise it will normally do nothing. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a750ca3e44a00898afea53b54697226ba">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00580">580</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">TimeHeightConvolutionComponent::bias_params_</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00245">TimeHeightConvolutionComponent::Copy()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00486">TdnnComponent::Copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                                                          {</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordflow">if</span> (scale == 0.0) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.SetZero();</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.SetZero();</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.Scale(scale);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Scale(scale);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  }</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3358032f1fd3596fcf2bda51e24ae5b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3358032f1fd3596fcf2bda51e24ae5b3">&#9670;&nbsp;</a></span>ScaleLinearParams()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ScaleLinearParams </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>alpha</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00302">302</a> of file <a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a>.</p>

<p class="reference">References <a class="el" href="nnet-convolutional-component_8cc_source.html#l00050">TimeHeightConvolutionComponent::Check()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00490">TimeHeightConvolutionComponent::ComputeDerived()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00668">TimeHeightConvolutionComponent::ConsolidateMemory()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00088">TimeHeightConvolutionComponent::InitUnit()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00353">TimeHeightConvolutionComponent::UpdateNaturalGradient()</a>, and <a class="el" href="nnet-convolutional-component_8cc_source.html#l00333">TimeHeightConvolutionComponent::UpdateSimple()</a>.</p>
<div class="fragment"><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;{ <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.Scale(alpha); }</div><div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af2d951f58073f362411ee482aa469975"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2d951f58073f362411ee482aa469975">&#9670;&nbsp;</a></span>Type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string Type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a string such as "SigmoidComponent", describing the type of the object. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#ab6b6147feb5e0688469b735a6546c222">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00226">226</a> of file <a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;TimeHeightConvolutionComponent&quot;</span>; }</div></div><!-- fragment -->
</div>
</div>
<a id="a8619ba84ef93f98fa42dbcd11011e3a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8619ba84ef93f98fa42dbcd11011e3a3">&#9670;&nbsp;</a></span>UnVectorize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UnVectorize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts the parameters from vector form. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a0d6ac2b7329981543aa1299d94c9556d">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00632">632</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">TimeHeightConvolutionComponent::bias_params_</a>, <a class="el" href="kaldi-vector_8h_source.html#l00063">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00618">TimeHeightConvolutionComponent::NumParameters()</a>, and <a class="el" href="kaldi-vector_8h_source.html#l00093">VectorBase&lt; Real &gt;::Range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00245">TimeHeightConvolutionComponent::Copy()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00486">TdnnComponent::Copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                         {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(params.Dim() == <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a1ff16fe9504cbce1089af9cd84386405">NumParameters</a>());</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  int32 linear_size = <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumRows() * <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumCols(),</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      bias_size = <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Dim();</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.CopyRowsFromVec(params.Range(0, linear_size));</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.CopyFromVec(params.Range(linear_size, bias_size));</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a1ff16fe9504cbce1089af9cd84386405"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a1ff16fe9504cbce1089af9cd84386405">kaldi::nnet3::TimeHeightConvolutionComponent::NumParameters</a></div><div class="ttdeci">virtual int32 NumParameters() const</div><div class="ttdoc">The following new virtual function returns the total dimension of the parameters in this class...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-convolutional-component_8cc_source.html#l00618">nnet-convolutional-component.cc:618</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af3d42726cd74900a53fb1a86168150b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3d42726cd74900a53fb1a86168150b0">&#9670;&nbsp;</a></span>UpdateNaturalGradient()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UpdateNaturalGradient </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_1_1PrecomputedIndexes.html">PrecomputedIndexes</a> &amp;&#160;</td>
          <td class="paramname"><em>indexes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>in_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>out_deriv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00353">353</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">TimeHeightConvolutionComponent::bias_params_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00299">TimeHeightConvolutionComponent::PrecomputedIndexes::computation</a>, <a class="el" href="convolution_8cc_source.html#l00840">kaldi::nnet3::time_height_convolution::ConvolveBackwardParams()</a>, <a class="el" href="cu-matrix_8cc_source.html#l02388">CuMatrixBase&lt; Real &gt;::CopyColFromVec()</a>, <a class="el" href="cu-matrix_8h_source.html#l00689">CuMatrixBase&lt; Real &gt;::Data()</a>, <a class="el" href="convolution_8h_source.html#l00129">ConvolutionModel::height_out</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="matrix-common_8h_source.html#l00033">kaldi::kTrans</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00559">UpdatableComponent::learning_rate_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00330">TimeHeightConvolutionComponent::model_</a>, <a class="el" href="convolution_8h_source.html#l00127">ConvolutionModel::num_filters_out</a>, <a class="el" href="cu-matrix_8h_source.html#l00215">CuMatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="cu-matrix_8h_source.html#l00214">CuMatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="natural-gradient-online_8cc_source.html#l00159">OnlineNaturalGradient::PreconditionDirections()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00368">TimeHeightConvolutionComponent::preconditioner_in_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00372">TimeHeightConvolutionComponent::preconditioner_out_</a>, <a class="el" href="cu-matrix_8h_source.html#l00613">CuMatrixBase&lt; Real &gt;::Row()</a>, <a class="el" href="cu-matrix_8h_source.html#l00603">CuMatrixBase&lt; Real &gt;::RowRange()</a>, and <a class="el" href="cu-matrix_8h_source.html#l00216">CuMatrixBase&lt; Real &gt;::Stride()</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-convolutional-component_8cc_source.html#l00301">TimeHeightConvolutionComponent::Backprop()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00560">TdnnComponent::OrthonormalConstraint()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00302">TimeHeightConvolutionComponent::ScaleLinearParams()</a>.</p>
<div class="fragment"><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                                              {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  CuVector&lt;BaseFloat&gt; bias_deriv(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Dim());</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  { <span class="comment">// this block computes &#39;bias_deriv&#39;, the derivative w.r.t. the bias.</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(out_deriv.Stride() == out_deriv.NumCols() &amp;&amp;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                 out_deriv.NumCols() ==</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                 <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab83e84168a713d1f7350d5f16d82a3a0">height_out</a> * <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">num_filters_out</a>);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    CuSubMatrix&lt;BaseFloat&gt; out_deriv_reshaped(</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        out_deriv.Data(), out_deriv.NumRows() * <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab83e84168a713d1f7350d5f16d82a3a0">height_out</a>,</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">num_filters_out</a>, <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">num_filters_out</a>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    bias_deriv.AddRowSumMat(1.0, out_deriv_reshaped);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  }</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  CuMatrix&lt;BaseFloat&gt; params_deriv(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumRows(),</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumCols() + 1);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  params_deriv.CopyColFromVec(bias_deriv, <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumCols());</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  CuSubMatrix&lt;BaseFloat&gt; linear_params_deriv(</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      params_deriv, 0, <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumRows(),</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      0, <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumCols());</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3_1_1time__height__convolution.html#a55135cbe454ca7d1333962ed8bdb1476">ConvolveBackwardParams</a>(indexes.computation, in_value, out_deriv,</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                         1.0, &amp;linear_params_deriv);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="comment">// the precondition-directions code outputs a scalar that</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">// must be multiplied by its output (this saves one</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// CUDA operation internally).</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">// We don&#39;t bother applying this scale before doing the other</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">// dimenson of natural gradient, because although it&#39;s not</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// invariant to scalar multiplication of the input if the</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// scalars are different across iterations, the scalars</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// will be pretty similar on different iterations</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> scale1, scale2;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#aa3bcd897525db0c5caa855f1fe5b69ff">PreconditionDirections</a>(&amp;params_deriv, &amp;scale1);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  CuMatrix&lt;BaseFloat&gt; params_deriv_transpose(params_deriv, <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kTrans</a>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">preconditioner_out_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#aa3bcd897525db0c5caa855f1fe5b69ff">PreconditionDirections</a>(&amp;params_deriv_transpose, &amp;scale2);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.AddMat(</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">learning_rate_</a> * scale1 * scale2,</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      params_deriv_transpose.RowRange(0, <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumCols()),</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kTrans</a>);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.AddVec(<a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">learning_rate_</a> * scale1 * scale2,</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                      params_deriv_transpose.Row(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumCols()));</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;}</div><div class="ttc" id="namespacekaldi_1_1nnet3_1_1time__height__convolution_html_a55135cbe454ca7d1333962ed8bdb1476"><div class="ttname"><a href="namespacekaldi_1_1nnet3_1_1time__height__convolution.html#a55135cbe454ca7d1333962ed8bdb1476">kaldi::nnet3::time_height_convolution::ConvolveBackwardParams</a></div><div class="ttdeci">void ConvolveBackwardParams(const ConvolutionComputation &amp;cc, const CuMatrixBase&lt; BaseFloat &gt; &amp;input, const CuMatrixBase&lt; BaseFloat &gt; &amp;output_deriv, BaseFloat alpha, CuMatrixBase&lt; BaseFloat &gt; *params_deriv)</div><div class="ttdoc">This does the part of the backward derivative computation of convolution, that computes derivatives w...</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8cc_source.html#l00840">convolution.cc:840</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_ab6517e72f4d0632f883d78c5b7ea8ef4"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">kaldi::nnet3::time_height_convolution::ConvolutionModel::num_filters_out</a></div><div class="ttdeci">int32 num_filters_out</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00127">convolution.h:127</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a4878727ca1c9f34ad5d17ba12067280e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_out_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_out_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00372">nnet-convolutional-component.h:372</a></div></div>
<div class="ttc" id="namespacekaldi_html_a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2"><div class="ttname"><a href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kaldi::kTrans</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00033">matrix-common.h:33</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a186a95fc2b048e39782a4bfebf6b964a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">kaldi::nnet3::TimeHeightConvolutionComponent::model_</a></div><div class="ttdeci">time_height_convolution::ConvolutionModel model_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00330">nnet-convolutional-component.h:330</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_abef30da8aa0328dd5db955ce0b2a3466"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">kaldi::nnet3::UpdatableComponent::learning_rate_</a></div><div class="ttdeci">BaseFloat learning_rate_</div><div class="ttdoc">learning rate (typically 0.0..0.01) </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00559">nnet-component-itf.h:559</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_ab83e84168a713d1f7350d5f16d82a3a0"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab83e84168a713d1f7350d5f16d82a3a0">kaldi::nnet3::time_height_convolution::ConvolutionModel::height_out</a></div><div class="ttdeci">int32 height_out</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00129">convolution.h:129</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1OnlineNaturalGradient_html_aa3bcd897525db0c5caa855f1fe5b69ff"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#aa3bcd897525db0c5caa855f1fe5b69ff">kaldi::nnet3::OnlineNaturalGradient::PreconditionDirections</a></div><div class="ttdeci">void PreconditionDirections(CuMatrixBase&lt; BaseFloat &gt; *R, BaseFloat *scale)</div><div class="ttdoc">This call implements the main functionality of this class. </div><div class="ttdef"><b>Definition:</b> <a href="natural-gradient-online_8cc_source.html#l00159">natural-gradient-online.cc:159</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9e4c9ff6496f25c6214d32fd0033d398"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_in_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_in_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00368">nnet-convolutional-component.h:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6571fd0f2fd6f12f66d8ae469162aef5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6571fd0f2fd6f12f66d8ae469162aef5">&#9670;&nbsp;</a></span>UpdateSimple()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UpdateSimple </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_1_1PrecomputedIndexes.html">PrecomputedIndexes</a> &amp;&#160;</td>
          <td class="paramname"><em>indexes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>in_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>out_deriv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00333">333</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">TimeHeightConvolutionComponent::bias_params_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00299">TimeHeightConvolutionComponent::PrecomputedIndexes::computation</a>, <a class="el" href="convolution_8cc_source.html#l00840">kaldi::nnet3::time_height_convolution::ConvolveBackwardParams()</a>, <a class="el" href="cu-matrix_8h_source.html#l00689">CuMatrixBase&lt; Real &gt;::Data()</a>, <a class="el" href="convolution_8h_source.html#l00129">ConvolutionModel::height_out</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="nnet-component-itf_8h_source.html#l00559">UpdatableComponent::learning_rate_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00330">TimeHeightConvolutionComponent::model_</a>, <a class="el" href="convolution_8h_source.html#l00127">ConvolutionModel::num_filters_out</a>, <a class="el" href="cu-matrix_8h_source.html#l00215">CuMatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="cu-matrix_8h_source.html#l00214">CuMatrixBase&lt; Real &gt;::NumRows()</a>, and <a class="el" href="cu-matrix_8h_source.html#l00216">CuMatrixBase&lt; Real &gt;::Stride()</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-convolutional-component_8cc_source.html#l00301">TimeHeightConvolutionComponent::Backprop()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00560">TdnnComponent::OrthonormalConstraint()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00302">TimeHeightConvolutionComponent::ScaleLinearParams()</a>.</p>
<div class="fragment"><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                                              {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  { <span class="comment">// this block handles the bias term.</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(out_deriv.Stride() == out_deriv.NumCols() &amp;&amp;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                 out_deriv.NumCols() ==</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                 <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab83e84168a713d1f7350d5f16d82a3a0">height_out</a> * <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">num_filters_out</a>);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    CuSubMatrix&lt;BaseFloat&gt; out_deriv_reshaped(</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        out_deriv.Data(), out_deriv.NumRows() * <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab83e84168a713d1f7350d5f16d82a3a0">height_out</a>,</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">num_filters_out</a>, <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">num_filters_out</a>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.AddRowSumMat(<a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">learning_rate_</a>, out_deriv_reshaped);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3_1_1time__height__convolution.html#a55135cbe454ca7d1333962ed8bdb1476">ConvolveBackwardParams</a>(indexes.computation, in_value, out_deriv,</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                         <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">learning_rate_</a>, &amp;<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;}</div><div class="ttc" id="namespacekaldi_1_1nnet3_1_1time__height__convolution_html_a55135cbe454ca7d1333962ed8bdb1476"><div class="ttname"><a href="namespacekaldi_1_1nnet3_1_1time__height__convolution.html#a55135cbe454ca7d1333962ed8bdb1476">kaldi::nnet3::time_height_convolution::ConvolveBackwardParams</a></div><div class="ttdeci">void ConvolveBackwardParams(const ConvolutionComputation &amp;cc, const CuMatrixBase&lt; BaseFloat &gt; &amp;input, const CuMatrixBase&lt; BaseFloat &gt; &amp;output_deriv, BaseFloat alpha, CuMatrixBase&lt; BaseFloat &gt; *params_deriv)</div><div class="ttdoc">This does the part of the backward derivative computation of convolution, that computes derivatives w...</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8cc_source.html#l00840">convolution.cc:840</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_ab6517e72f4d0632f883d78c5b7ea8ef4"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab6517e72f4d0632f883d78c5b7ea8ef4">kaldi::nnet3::time_height_convolution::ConvolutionModel::num_filters_out</a></div><div class="ttdeci">int32 num_filters_out</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00127">convolution.h:127</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a186a95fc2b048e39782a4bfebf6b964a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">kaldi::nnet3::TimeHeightConvolutionComponent::model_</a></div><div class="ttdeci">time_height_convolution::ConvolutionModel model_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00330">nnet-convolutional-component.h:330</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_abef30da8aa0328dd5db955ce0b2a3466"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#abef30da8aa0328dd5db955ce0b2a3466">kaldi::nnet3::UpdatableComponent::learning_rate_</a></div><div class="ttdeci">BaseFloat learning_rate_</div><div class="ttdoc">learning rate (typically 0.0..0.01) </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00559">nnet-component-itf.h:559</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_ab83e84168a713d1f7350d5f16d82a3a0"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#ab83e84168a713d1f7350d5f16d82a3a0">kaldi::nnet3::time_height_convolution::ConvolutionModel::height_out</a></div><div class="ttdeci">int32 height_out</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8h_source.html#l00129">convolution.h:129</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afa4edb6094210608b8d3923f312f5a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa4edb6094210608b8d3923f312f5a75">&#9670;&nbsp;</a></span>Vectorize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Vectorize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Turns the parameters into vector form. </p>
<p>We put the vector form on the CPU, because in the kinds of situations where we do this, we'll tend to use too much memory for the GPU. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#a5b2b163b2a360e5614e308eaabb169f9">UpdatableComponent</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00623">623</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">TimeHeightConvolutionComponent::bias_params_</a>, <a class="el" href="kaldi-vector_8h_source.html#l00063">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00618">TimeHeightConvolutionComponent::NumParameters()</a>, and <a class="el" href="kaldi-vector_8h_source.html#l00093">VectorBase&lt; Real &gt;::Range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00245">TimeHeightConvolutionComponent::Copy()</a>, and <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00486">TdnnComponent::Copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                                         {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(params-&gt;Dim() == <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a1ff16fe9504cbce1089af9cd84386405">NumParameters</a>());</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  int32 linear_size = <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumRows() * <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.NumCols(),</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      bias_size = <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Dim();</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  params-&gt;Range(0, linear_size).CopyRowsFromMat(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  params-&gt;Range(linear_size, bias_size).CopyFromVec(<a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a1ff16fe9504cbce1089af9cd84386405"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a1ff16fe9504cbce1089af9cd84386405">kaldi::nnet3::TimeHeightConvolutionComponent::NumParameters</a></div><div class="ttdeci">virtual int32 NumParameters() const</div><div class="ttdoc">The following new virtual function returns the total dimension of the parameters in this class...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-convolutional-component_8cc_source.html#l00618">nnet-convolutional-component.cc:618</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a68f354fd5f096134162f01719096e6fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68f354fd5f096134162f01719096e6fc">&#9670;&nbsp;</a></span>Write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Write </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>binary</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write component to stream. </p>

<p>Implements <a class="el" href="classkaldi_1_1nnet3_1_1Component.html#a852bc7306aaa45b284f662f1ddb1a3d5">Component</a>.</p>

<p class="definition">Definition at line <a class="el" href="nnet-convolutional-component_8cc_source.html#l00423">423</a> of file <a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">TimeHeightConvolutionComponent::bias_params_</a>, <a class="el" href="natural-gradient-online_8h_source.html#l00432">OnlineNaturalGradient::GetAlpha()</a>, <a class="el" href="natural-gradient-online_8h_source.html#l00431">OnlineNaturalGradient::GetNumMinibatchesHistory()</a>, <a class="el" href="natural-gradient-online_8h_source.html#l00433">OnlineNaturalGradient::GetRank()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">TimeHeightConvolutionComponent::linear_params_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00356">TimeHeightConvolutionComponent::max_memory_mb_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00330">TimeHeightConvolutionComponent::model_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00368">TimeHeightConvolutionComponent::preconditioner_in_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00372">TimeHeightConvolutionComponent::preconditioner_out_</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00362">TimeHeightConvolutionComponent::use_natural_gradient_</a>, <a class="el" href="convolution_8cc_source.html#l00225">ConvolutionModel::Write()</a>, <a class="el" href="io-funcs-inl_8h_source.html#l00034">kaldi::WriteBasicType()</a>, <a class="el" href="io-funcs_8cc_source.html#l00134">kaldi::WriteToken()</a>, and <a class="el" href="nnet-component-itf_8cc_source.html#l00297">UpdatableComponent::WriteUpdatableCommon()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00227">TimeHeightConvolutionComponent::Properties()</a>.</p>
<div class="fragment"><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                                                                            {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ae2e64ac30c475dcc5d61612524cc1eb9">WriteUpdatableCommon</a>(os, binary);  <span class="comment">// Write opening tag and learning rate.</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;Model&gt;&quot;</span>);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">model_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a68f354fd5f096134162f01719096e6fc">Write</a>(os, binary);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;LinearParams&gt;&quot;</span>);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">linear_params_</a>.Write(os, binary);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;BiasParams&gt;&quot;</span>);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">bias_params_</a>.Write(os, binary);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;MaxMemoryMb&gt;&quot;</span>);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">max_memory_mb_</a>);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;UseNaturalGradient&gt;&quot;</span>);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a57660849c075b7ff1f48bd4c943b668c">use_natural_gradient_</a>);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  int32 rank_in = <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a1fd2929c7565d8aeebac17374c7ae45d">GetRank</a>(),</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      rank_out = <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">preconditioner_out_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a1fd2929c7565d8aeebac17374c7ae45d">GetRank</a>();</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> alpha_in = <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#aecff47257feb076ddd824437cd4bb760">GetAlpha</a>(),</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      alpha_out = <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">preconditioner_out_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#aecff47257feb076ddd824437cd4bb760">GetAlpha</a>(),</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      num_minibatches_history = <a class="code" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">preconditioner_in_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#ade740d3baed295663ceaa07aa6951099">GetNumMinibatchesHistory</a>();</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;NumMinibatchesHistory&gt;&quot;</span>);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, num_minibatches_history);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;AlphaInOut&gt;&quot;</span>);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, alpha_in);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, alpha_out);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;RankInOut&gt;&quot;</span>);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, rank_in);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">WriteBasicType</a>(os, binary, rank_out);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <a class="code" href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">WriteToken</a>(os, binary, <span class="stringliteral">&quot;&lt;/TimeHeightConvolutionComponent&gt;&quot;</span>);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div><div class="ttc" id="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel_html_a68f354fd5f096134162f01719096e6fc"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html#a68f354fd5f096134162f01719096e6fc">kaldi::nnet3::time_height_convolution::ConvolutionModel::Write</a></div><div class="ttdeci">void Write(std::ostream &amp;os, bool binary) const</div><div class="ttdef"><b>Definition:</b> <a href="convolution_8cc_source.html#l00225">convolution.cc:225</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a4878727ca1c9f34ad5d17ba12067280e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a4878727ca1c9f34ad5d17ba12067280e">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_out_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_out_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00372">nnet-convolutional-component.h:372</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a186a95fc2b048e39782a4bfebf6b964a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a186a95fc2b048e39782a4bfebf6b964a">kaldi::nnet3::TimeHeightConvolutionComponent::model_</a></div><div class="ttdeci">time_height_convolution::ConvolutionModel model_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00330">nnet-convolutional-component.h:330</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a80919dec61ec4f145d2b70cca6d2c306"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a80919dec61ec4f145d2b70cca6d2c306">kaldi::nnet3::TimeHeightConvolutionComponent::bias_params_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; bias_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00349">nnet-convolutional-component.h:349</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga87f1638ef3c0a3ee117178b202c2d02a"><div class="ttname"><a href="group__io__funcs__basic.html#ga87f1638ef3c0a3ee117178b202c2d02a">kaldi::WriteToken</a></div><div class="ttdeci">void WriteToken(std::ostream &amp;os, bool binary, const char *token)</div><div class="ttdoc">The WriteToken functions are for writing nonempty sequences of non-space characters. </div><div class="ttdef"><b>Definition:</b> <a href="io-funcs_8cc_source.html#l00134">io-funcs.cc:134</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1OnlineNaturalGradient_html_ade740d3baed295663ceaa07aa6951099"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#ade740d3baed295663ceaa07aa6951099">kaldi::nnet3::OnlineNaturalGradient::GetNumMinibatchesHistory</a></div><div class="ttdeci">BaseFloat GetNumMinibatchesHistory() const</div><div class="ttdef"><b>Definition:</b> <a href="natural-gradient-online_8h_source.html#l00431">natural-gradient-online.h:431</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1UpdatableComponent_html_ae2e64ac30c475dcc5d61612524cc1eb9"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1UpdatableComponent.html#ae2e64ac30c475dcc5d61612524cc1eb9">kaldi::nnet3::UpdatableComponent::WriteUpdatableCommon</a></div><div class="ttdeci">void WriteUpdatableCommon(std::ostream &amp;is, bool binary) const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8cc_source.html#l00297">nnet-component-itf.cc:297</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga108506a9aabafd9006926aa1b47617da"><div class="ttname"><a href="group__io__funcs__basic.html#ga108506a9aabafd9006926aa1b47617da">kaldi::WriteBasicType</a></div><div class="ttdeci">void WriteBasicType(std::ostream &amp;os, bool binary, T t)</div><div class="ttdoc">WriteBasicType is the name of the write function for bool, integer types, and floating-point types...</div><div class="ttdef"><b>Definition:</b> <a href="io-funcs-inl_8h_source.html#l00034">io-funcs-inl.h:34</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1OnlineNaturalGradient_html_aecff47257feb076ddd824437cd4bb760"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#aecff47257feb076ddd824437cd4bb760">kaldi::nnet3::OnlineNaturalGradient::GetAlpha</a></div><div class="ttdeci">BaseFloat GetAlpha() const</div><div class="ttdef"><b>Definition:</b> <a href="natural-gradient-online_8h_source.html#l00432">natural-gradient-online.h:432</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9c39dc24a756b4bb786771f621224e7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9c39dc24a756b4bb786771f621224e7e">kaldi::nnet3::TimeHeightConvolutionComponent::linear_params_</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; linear_params_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00346">nnet-convolutional-component.h:346</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a57660849c075b7ff1f48bd4c943b668c"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a57660849c075b7ff1f48bd4c943b668c">kaldi::nnet3::TimeHeightConvolutionComponent::use_natural_gradient_</a></div><div class="ttdeci">bool use_natural_gradient_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00362">nnet-convolutional-component.h:362</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_a9e4c9ff6496f25c6214d32fd0033d398"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#a9e4c9ff6496f25c6214d32fd0033d398">kaldi::nnet3::TimeHeightConvolutionComponent::preconditioner_in_</a></div><div class="ttdeci">OnlineNaturalGradient preconditioner_in_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00368">nnet-convolutional-component.h:368</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent_html_ae4b888539ce58d5188c7019c6db921f3"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html#ae4b888539ce58d5188c7019c6db921f3">kaldi::nnet3::TimeHeightConvolutionComponent::max_memory_mb_</a></div><div class="ttdeci">BaseFloat max_memory_mb_</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-convolutional-component_8h_source.html#l00356">nnet-convolutional-component.h:356</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1OnlineNaturalGradient_html_a1fd2929c7565d8aeebac17374c7ae45d"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html#a1fd2929c7565d8aeebac17374c7ae45d">kaldi::nnet3::OnlineNaturalGradient::GetRank</a></div><div class="ttdeci">int32 GetRank() const</div><div class="ttdef"><b>Definition:</b> <a href="natural-gradient-online_8h_source.html#l00433">natural-gradient-online.h:433</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a047936d7dcb44d987faed6274843ab9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a047936d7dcb44d987faed6274843ab9e">&#9670;&nbsp;</a></span>all_time_offsets_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int32&gt; all_time_offsets_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00334">334</a> of file <a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-convolutional-component_8cc_source.html#l00490">TimeHeightConvolutionComponent::ComputeDerived()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00503">TimeHeightConvolutionComponent::GetInputIndexes()</a>, and <a class="el" href="nnet-convolutional-component_8cc_source.html#l00518">TimeHeightConvolutionComponent::IsComputable()</a>.</p>

</div>
</div>
<a id="a80919dec61ec4f145d2b70cca6d2c306"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80919dec61ec4f145d2b70cca6d2c306">&#9670;&nbsp;</a></span>bias_params_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuVector.html">CuVector</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; bias_params_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00349">349</a> of file <a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-convolutional-component_8cc_source.html#l00590">TimeHeightConvolutionComponent::Add()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00558">TdnnComponent::BiasParams()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00050">TimeHeightConvolutionComponent::Check()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00609">TimeHeightConvolutionComponent::DotProduct()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00065">TimeHeightConvolutionComponent::Info()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00114">TimeHeightConvolutionComponent::InitFromConfig()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00618">TimeHeightConvolutionComponent::NumParameters()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00599">TimeHeightConvolutionComponent::PerturbParams()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00282">TimeHeightConvolutionComponent::Propagate()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00467">TdnnComponent::Properties()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00451">TimeHeightConvolutionComponent::Read()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00580">TimeHeightConvolutionComponent::Scale()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00632">TimeHeightConvolutionComponent::UnVectorize()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00353">TimeHeightConvolutionComponent::UpdateNaturalGradient()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00333">TimeHeightConvolutionComponent::UpdateSimple()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00623">TimeHeightConvolutionComponent::Vectorize()</a>, and <a class="el" href="nnet-convolutional-component_8cc_source.html#l00423">TimeHeightConvolutionComponent::Write()</a>.</p>

</div>
</div>
<a id="a9c39dc24a756b4bb786771f621224e7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c39dc24a756b4bb786771f621224e7e">&#9670;&nbsp;</a></span>linear_params_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1CuMatrix.html">CuMatrix</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; linear_params_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00346">346</a> of file <a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-convolutional-component_8cc_source.html#l00590">TimeHeightConvolutionComponent::Add()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00301">TimeHeightConvolutionComponent::Backprop()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00050">TimeHeightConvolutionComponent::Check()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00609">TimeHeightConvolutionComponent::DotProduct()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00065">TimeHeightConvolutionComponent::Info()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00114">TimeHeightConvolutionComponent::InitFromConfig()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00088">TimeHeightConvolutionComponent::InitUnit()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00459">TdnnComponent::InputDim()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00554">TdnnComponent::LinearParams()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00618">TimeHeightConvolutionComponent::NumParameters()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00462">TdnnComponent::OutputDim()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00599">TimeHeightConvolutionComponent::PerturbParams()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00282">TimeHeightConvolutionComponent::Propagate()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00451">TimeHeightConvolutionComponent::Read()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00580">TimeHeightConvolutionComponent::Scale()</a>, <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00302">TimeHeightConvolutionComponent::ScaleLinearParams()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00632">TimeHeightConvolutionComponent::UnVectorize()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00353">TimeHeightConvolutionComponent::UpdateNaturalGradient()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00333">TimeHeightConvolutionComponent::UpdateSimple()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00623">TimeHeightConvolutionComponent::Vectorize()</a>, and <a class="el" href="nnet-convolutional-component_8cc_source.html#l00423">TimeHeightConvolutionComponent::Write()</a>.</p>

</div>
</div>
<a id="ae4b888539ce58d5188c7019c6db921f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4b888539ce58d5188c7019c6db921f3">&#9670;&nbsp;</a></span>max_memory_mb_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> max_memory_mb_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00356">356</a> of file <a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-convolutional-component_8cc_source.html#l00065">TimeHeightConvolutionComponent::Info()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00114">TimeHeightConvolutionComponent::InitFromConfig()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00559">TimeHeightConvolutionComponent::PrecomputeIndexes()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00451">TimeHeightConvolutionComponent::Read()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00407">TimeHeightConvolutionComponent::ReorderIndexes()</a>, and <a class="el" href="nnet-convolutional-component_8cc_source.html#l00423">TimeHeightConvolutionComponent::Write()</a>.</p>

</div>
</div>
<a id="a186a95fc2b048e39782a4bfebf6b964a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a186a95fc2b048e39782a4bfebf6b964a">&#9670;&nbsp;</a></span>model_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structkaldi_1_1nnet3_1_1time__height__convolution_1_1ConvolutionModel.html">time_height_convolution::ConvolutionModel</a> model_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00330">330</a> of file <a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-convolutional-component_8cc_source.html#l00050">TimeHeightConvolutionComponent::Check()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00490">TimeHeightConvolutionComponent::ComputeDerived()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00065">TimeHeightConvolutionComponent::Info()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00114">TimeHeightConvolutionComponent::InitFromConfig()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00088">TimeHeightConvolutionComponent::InitUnit()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00057">TimeHeightConvolutionComponent::InputDim()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00061">TimeHeightConvolutionComponent::OutputDim()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00559">TimeHeightConvolutionComponent::PrecomputeIndexes()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00282">TimeHeightConvolutionComponent::Propagate()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00451">TimeHeightConvolutionComponent::Read()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00407">TimeHeightConvolutionComponent::ReorderIndexes()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00353">TimeHeightConvolutionComponent::UpdateNaturalGradient()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00333">TimeHeightConvolutionComponent::UpdateSimple()</a>, and <a class="el" href="nnet-convolutional-component_8cc_source.html#l00423">TimeHeightConvolutionComponent::Write()</a>.</p>

</div>
</div>
<a id="a9e4c9ff6496f25c6214d32fd0033d398"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e4c9ff6496f25c6214d32fd0033d398">&#9670;&nbsp;</a></span>preconditioner_in_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html">OnlineNaturalGradient</a> preconditioner_in_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00368">368</a> of file <a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-convolutional-component_8cc_source.html#l00668">TimeHeightConvolutionComponent::ConsolidateMemory()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00641">TimeHeightConvolutionComponent::FreezeNaturalGradient()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00065">TimeHeightConvolutionComponent::Info()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00114">TimeHeightConvolutionComponent::InitFromConfig()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00451">TimeHeightConvolutionComponent::Read()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00353">TimeHeightConvolutionComponent::UpdateNaturalGradient()</a>, and <a class="el" href="nnet-convolutional-component_8cc_source.html#l00423">TimeHeightConvolutionComponent::Write()</a>.</p>

</div>
</div>
<a id="a4878727ca1c9f34ad5d17ba12067280e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4878727ca1c9f34ad5d17ba12067280e">&#9670;&nbsp;</a></span>preconditioner_out_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet3_1_1OnlineNaturalGradient.html">OnlineNaturalGradient</a> preconditioner_out_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00372">372</a> of file <a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-convolutional-component_8cc_source.html#l00668">TimeHeightConvolutionComponent::ConsolidateMemory()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00641">TimeHeightConvolutionComponent::FreezeNaturalGradient()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00065">TimeHeightConvolutionComponent::Info()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00114">TimeHeightConvolutionComponent::InitFromConfig()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00451">TimeHeightConvolutionComponent::Read()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00353">TimeHeightConvolutionComponent::UpdateNaturalGradient()</a>, and <a class="el" href="nnet-convolutional-component_8cc_source.html#l00423">TimeHeightConvolutionComponent::Write()</a>.</p>

</div>
</div>
<a id="a61a515cefdacd8a16f6a9f848386408e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61a515cefdacd8a16f6a9f848386408e">&#9670;&nbsp;</a></span>time_offset_required_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classbool.html">bool</a>&gt; time_offset_required_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00338">338</a> of file <a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-convolutional-component_8cc_source.html#l00490">TimeHeightConvolutionComponent::ComputeDerived()</a>, and <a class="el" href="nnet-convolutional-component_8cc_source.html#l00518">TimeHeightConvolutionComponent::IsComputable()</a>.</p>

</div>
</div>
<a id="a57660849c075b7ff1f48bd4c943b668c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57660849c075b7ff1f48bd4c943b668c">&#9670;&nbsp;</a></span>use_natural_gradient_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> use_natural_gradient_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_2nnet-convolutional-component_8h_source.html#l00362">362</a> of file <a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-convolutional-component_8cc_source.html#l00301">TimeHeightConvolutionComponent::Backprop()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00065">TimeHeightConvolutionComponent::Info()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00114">TimeHeightConvolutionComponent::InitFromConfig()</a>, <a class="el" href="nnet-convolutional-component_8cc_source.html#l00451">TimeHeightConvolutionComponent::Read()</a>, and <a class="el" href="nnet-convolutional-component_8cc_source.html#l00423">TimeHeightConvolutionComponent::Write()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>nnet3/<a class="el" href="_2nnet-convolutional-component_8h_source.html">nnet-convolutional-component.h</a></li>
<li>nnet3/<a class="el" href="nnet-convolutional-component_8cc_source.html">nnet-convolutional-component.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekaldi.html">kaldi</a></li><li class="navelem"><a class="el" href="namespacekaldi_1_1nnet3.html">nnet3</a></li><li class="navelem"><a class="el" href="classkaldi_1_1nnet3_1_1TimeHeightConvolutionComponent.html">TimeHeightConvolutionComponent</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
