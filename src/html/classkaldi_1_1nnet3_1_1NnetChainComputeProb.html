<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: NnetChainComputeProb Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classkaldi_1_1nnet3_1_1NnetChainComputeProb.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">NnetChainComputeProb Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class is for computing objective-function values in a nnet3+chain setup, for diagnostics.  
 <a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="nnet-chain-diagnostics_8h_source.html">nnet-chain-diagnostics.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for NnetChainComputeProb:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1nnet3_1_1NnetChainComputeProb__coll__graph.png" border="0" usemap="#NnetChainComputeProb_coll__map" alt="Collaboration graph"/></div>
<map name="NnetChainComputeProb_coll__map" id="NnetChainComputeProb_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a73775b60b3e57906eb2387cbe96e42fb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a73775b60b3e57906eb2387cbe96e42fb">NnetChainComputeProb</a> (const <a class="el" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html">NnetComputeProbOptions</a> &amp;nnet_config, const chain::ChainTrainingOptions &amp;chain_config, const <a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">fst::StdVectorFst</a> &amp;den_fst, const <a class="el" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> &amp;nnet)</td></tr>
<tr class="separator:a73775b60b3e57906eb2387cbe96e42fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb11e2c858b7ef7053e86409d43f2e13"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#afb11e2c858b7ef7053e86409d43f2e13">NnetChainComputeProb</a> (const <a class="el" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html">NnetComputeProbOptions</a> &amp;nnet_config, const chain::ChainTrainingOptions &amp;chain_config, const <a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">fst::StdVectorFst</a> &amp;den_fst, <a class="el" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> *nnet)</td></tr>
<tr class="separator:afb11e2c858b7ef7053e86409d43f2e13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a372de693ad40b3f42839c8ec6ac845f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a> ()</td></tr>
<tr class="separator:a372de693ad40b3f42839c8ec6ac845f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b9e7c04d6e8db4f33e8513d4e327a8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1b9e7c04d6e8db4f33e8513d4e327a8a">Compute</a> (const <a class="el" href="structkaldi_1_1nnet3_1_1NnetChainExample.html">NnetChainExample</a> &amp;chain_eg)</td></tr>
<tr class="separator:a1b9e7c04d6e8db4f33e8513d4e327a8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad57a45f61541b7b94999b984a3c43439"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ad57a45f61541b7b94999b984a3c43439">PrintTotalStats</a> () const</td></tr>
<tr class="separator:ad57a45f61541b7b94999b984a3c43439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeac73c6fe879643e8cb5ec9ee2134da"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structkaldi_1_1nnet3_1_1ChainObjectiveInfo.html">ChainObjectiveInfo</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#afeac73c6fe879643e8cb5ec9ee2134da">GetObjective</a> (const std::string &amp;output_name) const</td></tr>
<tr class="separator:afeac73c6fe879643e8cb5ec9ee2134da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c14d15e4ffc8d57e30b61e1aea7e499"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3c14d15e4ffc8d57e30b61e1aea7e499">GetTotalObjective</a> (double *tot_weight) const</td></tr>
<tr class="separator:a3c14d15e4ffc8d57e30b61e1aea7e499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeba221035165b1ef0732011bf917ec7c"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#aeba221035165b1ef0732011bf917ec7c">GetDeriv</a> () const</td></tr>
<tr class="separator:aeba221035165b1ef0732011bf917ec7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8266e1dcb9624f869fed77e53e88dcf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ac8266e1dcb9624f869fed77e53e88dcf">~NnetChainComputeProb</a> ()</td></tr>
<tr class="separator:ac8266e1dcb9624f869fed77e53e88dcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a6b9467e9ed40173eecdbf214ce316bfc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a6b9467e9ed40173eecdbf214ce316bfc">ProcessOutputs</a> (const <a class="el" href="structkaldi_1_1nnet3_1_1NnetChainExample.html">NnetChainExample</a> &amp;chain_eg, <a class="el" href="classkaldi_1_1nnet3_1_1NnetComputer.html">NnetComputer</a> *computer)</td></tr>
<tr class="separator:a6b9467e9ed40173eecdbf214ce316bfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:abd407e217a4cf227cdf0d4883cca2d7e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html">NnetComputeProbOptions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a></td></tr>
<tr class="separator:abd407e217a4cf227cdf0d4883cca2d7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dfc1d70dbd0c8bbc51e821b4af0768a"><td class="memItemLeft" align="right" valign="top">chain::ChainTrainingOptions&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1dfc1d70dbd0c8bbc51e821b4af0768a">chain_config_</a></td></tr>
<tr class="separator:a1dfc1d70dbd0c8bbc51e821b4af0768a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1253ba1cbc8c427fd22ae99abad9007a"><td class="memItemLeft" align="right" valign="top">chain::DenominatorGraph&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1253ba1cbc8c427fd22ae99abad9007a">den_graph_</a></td></tr>
<tr class="separator:a1253ba1cbc8c427fd22ae99abad9007a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbabf05a7702103113a02a113015205f"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#adbabf05a7702103113a02a113015205f">nnet_</a></td></tr>
<tr class="separator:adbabf05a7702103113a02a113015205f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc1c4c518295918abed6546cfd7f065f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1nnet3_1_1CachingOptimizingCompiler.html">CachingOptimizingCompiler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#acc1c4c518295918abed6546cfd7f065f">compiler_</a></td></tr>
<tr class="separator:acc1c4c518295918abed6546cfd7f065f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba93d2c9a8fd3cc9f30f45a2d886f2e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#aba93d2c9a8fd3cc9f30f45a2d886f2e1">deriv_nnet_owned_</a></td></tr>
<tr class="separator:aba93d2c9a8fd3cc9f30f45a2d886f2e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3631649a1d1426d7d7ed4c4ae9fe8892"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">deriv_nnet_</a></td></tr>
<tr class="separator:a3631649a1d1426d7d7ed4c4ae9fe8892"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af676d295ba780873405747474e9f28aa"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#af676d295ba780873405747474e9f28aa">num_minibatches_processed_</a></td></tr>
<tr class="separator:af676d295ba780873405747474e9f28aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade4d4760cfe3be9cfaab8bf150c5d615"><td class="memItemLeft" align="right" valign="top">unordered_map&lt; std::string, <a class="el" href="structkaldi_1_1nnet3_1_1ChainObjectiveInfo.html">ChainObjectiveInfo</a>, <a class="el" href="structkaldi_1_1StringHasher.html">StringHasher</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ade4d4760cfe3be9cfaab8bf150c5d615">objf_info_</a></td></tr>
<tr class="separator:ade4d4760cfe3be9cfaab8bf150c5d615"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class is for computing objective-function values in a nnet3+chain setup, for diagnostics. </p>
<p>It also supports computing model derivatives. Note: if the &ndash;xent-regularization option is nonzero, the cross-entropy objective will be computed, and displayed when you call <a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ad57a45f61541b7b94999b984a3c43439">PrintTotalStats()</a>, but it will not contribute to model derivatives (there is no code to compute the regularized objective function, and anyway it's not clear that we really need this regularization in the combination phase). </p>

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00054">54</a> of file <a class="el" href="nnet-chain-diagnostics_8h_source.html">nnet-chain-diagnostics.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a73775b60b3e57906eb2387cbe96e42fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73775b60b3e57906eb2387cbe96e42fb">&#9670;&nbsp;</a></span>NnetChainComputeProb() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html">NnetChainComputeProb</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html">NnetComputeProbOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>nnet_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const chain::ChainTrainingOptions &amp;&#160;</td>
          <td class="paramname"><em>chain_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">fst::StdVectorFst</a> &amp;&#160;</td>
          <td class="paramname"><em>den_fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> &amp;&#160;</td>
          <td class="paramname"><em>nnet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00026">26</a> of file <a class="el" href="nnet-chain-diagnostics_8cc_source.html">nnet-chain-diagnostics.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-diagnostics_8h_source.html#l00057">NnetComputeProbOptions::compute_deriv</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00106">NnetChainComputeProb::deriv_nnet_</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00103">NnetChainComputeProb::nnet_</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00100">NnetChainComputeProb::nnet_config_</a>, <a class="el" href="nnet-utils_8cc_source.html#l00303">kaldi::nnet3::ScaleNnet()</a>, <a class="el" href="nnet-utils_8cc_source.html#l00292">kaldi::nnet3::SetNnetAsGradient()</a>, and <a class="el" href="nnet-diagnostics_8h_source.html#l00063">NnetComputeProbOptions::store_component_stats</a>.</p>
<div class="fragment"><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                     :</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>(nnet_config),</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1dfc1d70dbd0c8bbc51e821b4af0768a">chain_config_</a>(chain_config),</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1253ba1cbc8c427fd22ae99abad9007a">den_graph_</a>(den_fst, nnet.OutputDim(<span class="stringliteral">&quot;output&quot;</span>)),</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#adbabf05a7702103113a02a113015205f">nnet_</a>(nnet),</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#acc1c4c518295918abed6546cfd7f065f">compiler_</a>(nnet, <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#af7eb9009a775319c96e30d19bb9f329f">optimize_config</a>, <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#a92592ade35ce8201f316a1390632b82a">compiler_config</a>),</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#aba93d2c9a8fd3cc9f30f45a2d886f2e1">deriv_nnet_owned_</a>(<span class="keyword">true</span>),</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">deriv_nnet_</a>(NULL),</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#af676d295ba780873405747474e9f28aa">num_minibatches_processed_</a>(0) {</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#ae660030c5d0b3640bd31c007af2bb64c">compute_deriv</a>) {</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">deriv_nnet_</a> = <span class="keyword">new</span> Nnet(<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#adbabf05a7702103113a02a113015205f">nnet_</a>);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet3.html#a62b3a3e7be6ebc2a2af34bdb347ec76a">ScaleNnet</a>(0.0, <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">deriv_nnet_</a>);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet3.html#ab5c7a956c7fc10e9e5d67f351498c243">SetNnetAsGradient</a>(<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">deriv_nnet_</a>); <span class="comment">// force simple update</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#a5c5011f4cb4b2fc21775a3308c9cecda">store_component_stats</a>) {</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;If you set store_component_stats == true and &quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;compute_deriv == false, use the other constructor.&quot;</span>;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  }</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_a1dfc1d70dbd0c8bbc51e821b4af0768a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1dfc1d70dbd0c8bbc51e821b4af0768a">kaldi::nnet3::NnetChainComputeProb::chain_config_</a></div><div class="ttdeci">chain::ChainTrainingOptions chain_config_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00101">nnet-chain-diagnostics.h:101</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a62b3a3e7be6ebc2a2af34bdb347ec76a"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a62b3a3e7be6ebc2a2af34bdb347ec76a">kaldi::nnet3::ScaleNnet</a></div><div class="ttdeci">void ScaleNnet(BaseFloat scale, Nnet *nnet)</div><div class="ttdoc">Scales the nnet parameters and stats by this scale. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-utils_8cc_source.html#l00303">nnet-utils.cc:303</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_adbabf05a7702103113a02a113015205f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#adbabf05a7702103113a02a113015205f">kaldi::nnet3::NnetChainComputeProb::nnet_</a></div><div class="ttdeci">const Nnet &amp; nnet_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00103">nnet-chain-diagnostics.h:103</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_aba93d2c9a8fd3cc9f30f45a2d886f2e1"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#aba93d2c9a8fd3cc9f30f45a2d886f2e1">kaldi::nnet3::NnetChainComputeProb::deriv_nnet_owned_</a></div><div class="ttdeci">bool deriv_nnet_owned_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00105">nnet-chain-diagnostics.h:105</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_acc1c4c518295918abed6546cfd7f065f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#acc1c4c518295918abed6546cfd7f065f">kaldi::nnet3::NnetChainComputeProb::compiler_</a></div><div class="ttdeci">CachingOptimizingCompiler compiler_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00104">nnet-chain-diagnostics.h:104</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputeProbOptions_html_a5c5011f4cb4b2fc21775a3308c9cecda"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#a5c5011f4cb4b2fc21775a3308c9cecda">kaldi::nnet3::NnetComputeProbOptions::store_component_stats</a></div><div class="ttdeci">bool store_component_stats</div><div class="ttdef"><b>Definition:</b> <a href="nnet-diagnostics_8h_source.html#l00063">nnet-diagnostics.h:63</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_ab5c7a956c7fc10e9e5d67f351498c243"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#ab5c7a956c7fc10e9e5d67f351498c243">kaldi::nnet3::SetNnetAsGradient</a></div><div class="ttdeci">void SetNnetAsGradient(Nnet *nnet)</div><div class="ttdoc">Sets nnet as gradient by Setting is_gradient_ to true and learning_rate_ to 1 for each UpdatableCompo...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-utils_8cc_source.html#l00292">nnet-utils.cc:292</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_a1253ba1cbc8c427fd22ae99abad9007a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1253ba1cbc8c427fd22ae99abad9007a">kaldi::nnet3::NnetChainComputeProb::den_graph_</a></div><div class="ttdeci">chain::DenominatorGraph den_graph_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00102">nnet-chain-diagnostics.h:102</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputeProbOptions_html_af7eb9009a775319c96e30d19bb9f329f"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#af7eb9009a775319c96e30d19bb9f329f">kaldi::nnet3::NnetComputeProbOptions::optimize_config</a></div><div class="ttdeci">NnetOptimizeOptions optimize_config</div><div class="ttdef"><b>Definition:</b> <a href="nnet-diagnostics_8h_source.html#l00067">nnet-diagnostics.h:67</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputeProbOptions_html_ae660030c5d0b3640bd31c007af2bb64c"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#ae660030c5d0b3640bd31c007af2bb64c">kaldi::nnet3::NnetComputeProbOptions::compute_deriv</a></div><div class="ttdeci">bool compute_deriv</div><div class="ttdef"><b>Definition:</b> <a href="nnet-diagnostics_8h_source.html#l00057">nnet-diagnostics.h:57</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_abd407e217a4cf227cdf0d4883cca2d7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">kaldi::nnet3::NnetChainComputeProb::nnet_config_</a></div><div class="ttdeci">NnetComputeProbOptions nnet_config_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00100">nnet-chain-diagnostics.h:100</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputeProbOptions_html_a92592ade35ce8201f316a1390632b82a"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#a92592ade35ce8201f316a1390632b82a">kaldi::nnet3::NnetComputeProbOptions::compiler_config</a></div><div class="ttdeci">CachingOptimizingCompilerOptions compiler_config</div><div class="ttdef"><b>Definition:</b> <a href="nnet-diagnostics_8h_source.html#l00069">nnet-diagnostics.h:69</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_a3631649a1d1426d7d7ed4c4ae9fe8892"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">kaldi::nnet3::NnetChainComputeProb::deriv_nnet_</a></div><div class="ttdeci">Nnet * deriv_nnet_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00106">nnet-chain-diagnostics.h:106</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_af676d295ba780873405747474e9f28aa"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#af676d295ba780873405747474e9f28aa">kaldi::nnet3::NnetChainComputeProb::num_minibatches_processed_</a></div><div class="ttdeci">int32 num_minibatches_processed_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00107">nnet-chain-diagnostics.h:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afb11e2c858b7ef7053e86409d43f2e13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb11e2c858b7ef7053e86409d43f2e13">&#9670;&nbsp;</a></span>NnetChainComputeProb() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html">NnetChainComputeProb</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html">NnetComputeProbOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>nnet_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const chain::ChainTrainingOptions &amp;&#160;</td>
          <td class="paramname"><em>chain_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacefst.html#a88a968cc6f6d68c2b3dd6aa90385f65c">fst::StdVectorFst</a> &amp;&#160;</td>
          <td class="paramname"><em>den_fst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> *&#160;</td>
          <td class="paramname"><em>nnet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00050">50</a> of file <a class="el" href="nnet-chain-diagnostics_8cc_source.html">nnet-chain-diagnostics.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-diagnostics_8h_source.html#l00057">NnetComputeProbOptions::compute_deriv</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00102">NnetChainComputeProb::den_graph_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, and <a class="el" href="nnet-diagnostics_8h_source.html#l00063">NnetComputeProbOptions::store_component_stats</a>.</p>
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;               :</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>(nnet_config),</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1dfc1d70dbd0c8bbc51e821b4af0768a">chain_config_</a>(chain_config),</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1253ba1cbc8c427fd22ae99abad9007a">den_graph_</a>(den_fst, nnet-&gt;OutputDim(<span class="stringliteral">&quot;output&quot;</span>)),</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#adbabf05a7702103113a02a113015205f">nnet_</a>(*nnet),</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#acc1c4c518295918abed6546cfd7f065f">compiler_</a>(*nnet, <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#af7eb9009a775319c96e30d19bb9f329f">optimize_config</a>, <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#a92592ade35ce8201f316a1390632b82a">compiler_config</a>),</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#aba93d2c9a8fd3cc9f30f45a2d886f2e1">deriv_nnet_owned_</a>(<span class="keyword">false</span>),</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">deriv_nnet_</a>(nnet),</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#af676d295ba780873405747474e9f28aa">num_minibatches_processed_</a>(0) {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1253ba1cbc8c427fd22ae99abad9007a">den_graph_</a>.NumPdfs() &gt; 0);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(nnet_config.store_component_stats &amp;&amp; !nnet_config.compute_deriv);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_a1dfc1d70dbd0c8bbc51e821b4af0768a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1dfc1d70dbd0c8bbc51e821b4af0768a">kaldi::nnet3::NnetChainComputeProb::chain_config_</a></div><div class="ttdeci">chain::ChainTrainingOptions chain_config_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00101">nnet-chain-diagnostics.h:101</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_adbabf05a7702103113a02a113015205f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#adbabf05a7702103113a02a113015205f">kaldi::nnet3::NnetChainComputeProb::nnet_</a></div><div class="ttdeci">const Nnet &amp; nnet_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00103">nnet-chain-diagnostics.h:103</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_aba93d2c9a8fd3cc9f30f45a2d886f2e1"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#aba93d2c9a8fd3cc9f30f45a2d886f2e1">kaldi::nnet3::NnetChainComputeProb::deriv_nnet_owned_</a></div><div class="ttdeci">bool deriv_nnet_owned_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00105">nnet-chain-diagnostics.h:105</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_acc1c4c518295918abed6546cfd7f065f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#acc1c4c518295918abed6546cfd7f065f">kaldi::nnet3::NnetChainComputeProb::compiler_</a></div><div class="ttdeci">CachingOptimizingCompiler compiler_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00104">nnet-chain-diagnostics.h:104</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_a1253ba1cbc8c427fd22ae99abad9007a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1253ba1cbc8c427fd22ae99abad9007a">kaldi::nnet3::NnetChainComputeProb::den_graph_</a></div><div class="ttdeci">chain::DenominatorGraph den_graph_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00102">nnet-chain-diagnostics.h:102</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputeProbOptions_html_af7eb9009a775319c96e30d19bb9f329f"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#af7eb9009a775319c96e30d19bb9f329f">kaldi::nnet3::NnetComputeProbOptions::optimize_config</a></div><div class="ttdeci">NnetOptimizeOptions optimize_config</div><div class="ttdef"><b>Definition:</b> <a href="nnet-diagnostics_8h_source.html#l00067">nnet-diagnostics.h:67</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_abd407e217a4cf227cdf0d4883cca2d7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">kaldi::nnet3::NnetChainComputeProb::nnet_config_</a></div><div class="ttdeci">NnetComputeProbOptions nnet_config_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00100">nnet-chain-diagnostics.h:100</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputeProbOptions_html_a92592ade35ce8201f316a1390632b82a"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#a92592ade35ce8201f316a1390632b82a">kaldi::nnet3::NnetComputeProbOptions::compiler_config</a></div><div class="ttdeci">CachingOptimizingCompilerOptions compiler_config</div><div class="ttdef"><b>Definition:</b> <a href="nnet-diagnostics_8h_source.html#l00069">nnet-diagnostics.h:69</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_a3631649a1d1426d7d7ed4c4ae9fe8892"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">kaldi::nnet3::NnetChainComputeProb::deriv_nnet_</a></div><div class="ttdeci">Nnet * deriv_nnet_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00106">nnet-chain-diagnostics.h:106</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_af676d295ba780873405747474e9f28aa"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#af676d295ba780873405747474e9f28aa">kaldi::nnet3::NnetChainComputeProb::num_minibatches_processed_</a></div><div class="ttdeci">int32 num_minibatches_processed_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00107">nnet-chain-diagnostics.h:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac8266e1dcb9624f869fed77e53e88dcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8266e1dcb9624f869fed77e53e88dcf">&#9670;&nbsp;</a></span>~NnetChainComputeProb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html">NnetChainComputeProb</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00074">74</a> of file <a class="el" href="nnet-chain-diagnostics_8cc_source.html">nnet-chain-diagnostics.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00106">NnetChainComputeProb::deriv_nnet_</a>, and <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00105">NnetChainComputeProb::deriv_nnet_owned_</a>.</p>
<div class="fragment"><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                                            {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#aba93d2c9a8fd3cc9f30f45a2d886f2e1">deriv_nnet_owned_</a>)</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keyword">delete</span> <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">deriv_nnet_</a>;  <span class="comment">// delete does nothing if pointer is NULL.</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_aba93d2c9a8fd3cc9f30f45a2d886f2e1"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#aba93d2c9a8fd3cc9f30f45a2d886f2e1">kaldi::nnet3::NnetChainComputeProb::deriv_nnet_owned_</a></div><div class="ttdeci">bool deriv_nnet_owned_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00105">nnet-chain-diagnostics.h:105</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_a3631649a1d1426d7d7ed4c4ae9fe8892"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">kaldi::nnet3::NnetChainComputeProb::deriv_nnet_</a></div><div class="ttdeci">Nnet * deriv_nnet_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00106">nnet-chain-diagnostics.h:106</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1b9e7c04d6e8db4f33e8513d4e327a8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b9e7c04d6e8db4f33e8513d4e327a8a">&#9670;&nbsp;</a></span>Compute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Compute </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1nnet3_1_1NnetChainExample.html">NnetChainExample</a> &amp;&#160;</td>
          <td class="paramname"><em>chain_eg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00088">88</a> of file <a class="el" href="nnet-chain-diagnostics_8cc_source.html">nnet-chain-diagnostics.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet3_2nnet-compute_8cc_source.html#l00658">NnetComputer::AcceptInputs()</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00101">NnetChainComputeProb::chain_config_</a>, <a class="el" href="nnet-optimize_8cc_source.html#l00716">CachingOptimizingCompiler::Compile()</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00104">NnetChainComputeProb::compiler_</a>, <a class="el" href="nnet-diagnostics_8h_source.html#l00068">NnetComputeProbOptions::compute_config</a>, <a class="el" href="nnet-diagnostics_8h_source.html#l00057">NnetComputeProbOptions::compute_deriv</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00106">NnetChainComputeProb::deriv_nnet_</a>, <a class="el" href="nnet-chain-example_8cc_source.html#l00290">kaldi::nnet3::GetChainComputationRequest()</a>, <a class="el" href="nnet-chain-example_8h_source.html#l00115">NnetChainExample::inputs</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00103">NnetChainComputeProb::nnet_</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00100">NnetChainComputeProb::nnet_config_</a>, <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00115">NnetChainComputeProb::ProcessOutputs()</a>, <a class="el" href="nnet3_2nnet-compute_8cc_source.html#l00508">NnetComputer::Run()</a>, and <a class="el" href="nnet-diagnostics_8h_source.html#l00063">NnetComputeProbOptions::store_component_stats</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00248">kaldi::nnet3::RecomputeStats()</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                                                   {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordtype">bool</span> need_model_derivative = <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#ae660030c5d0b3640bd31c007af2bb64c">compute_deriv</a>,</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      store_component_stats = <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#a5c5011f4cb4b2fc21775a3308c9cecda">store_component_stats</a>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  ComputationRequest request;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="comment">// if the options specify cross-entropy regularization, we&#39;ll be computing</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="comment">// this objective (not interpolated with the regular objective-- we give it a</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// separate name), but currently we won&#39;t make it contribute to the</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// derivative-- we just compute the derivative of the regular output.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="comment">// This is because in the place where we use the derivative (the</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// model-combination code) we decided to keep it simple and just use the</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// regular objective.</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordtype">bool</span> use_xent_regularization = (<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1dfc1d70dbd0c8bbc51e821b4af0768a">chain_config_</a>.xent_regularize != 0.0),</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      use_xent_derivative = <span class="keyword">false</span>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="namespacekaldi_1_1nnet3.html#afc0bb79239b07e7a8b8c26abbf05657b">GetChainComputationRequest</a>(<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#adbabf05a7702103113a02a113015205f">nnet_</a>, chain_eg, need_model_derivative,</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                             store_component_stats, use_xent_regularization,</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                             use_xent_derivative, &amp;request);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  std::shared_ptr&lt;const NnetComputation&gt; computation = <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#acc1c4c518295918abed6546cfd7f065f">compiler_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1CachingOptimizingCompiler.html#aff351a0fdf96a308aac59a70993d58ff">Compile</a>(request);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  NnetComputer computer(<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#a4493f40ffdbde20bcfbf81716ae74d01">compute_config</a>, *computation,</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                        <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#adbabf05a7702103113a02a113015205f">nnet_</a>, <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">deriv_nnet_</a>);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// give the inputs to the computer object.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  computer.AcceptInputs(<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#adbabf05a7702103113a02a113015205f">nnet_</a>, chain_eg.inputs);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  computer.Run();</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  this-&gt;<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a6b9467e9ed40173eecdbf214ce316bfc">ProcessOutputs</a>(chain_eg, &amp;computer);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#ae660030c5d0b3640bd31c007af2bb64c">compute_deriv</a>)</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    computer.Run();</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_a1dfc1d70dbd0c8bbc51e821b4af0768a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1dfc1d70dbd0c8bbc51e821b4af0768a">kaldi::nnet3::NnetChainComputeProb::chain_config_</a></div><div class="ttdeci">chain::ChainTrainingOptions chain_config_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00101">nnet-chain-diagnostics.h:101</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_adbabf05a7702103113a02a113015205f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#adbabf05a7702103113a02a113015205f">kaldi::nnet3::NnetChainComputeProb::nnet_</a></div><div class="ttdeci">const Nnet &amp; nnet_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00103">nnet-chain-diagnostics.h:103</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_acc1c4c518295918abed6546cfd7f065f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#acc1c4c518295918abed6546cfd7f065f">kaldi::nnet3::NnetChainComputeProb::compiler_</a></div><div class="ttdeci">CachingOptimizingCompiler compiler_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00104">nnet-chain-diagnostics.h:104</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputeProbOptions_html_a5c5011f4cb4b2fc21775a3308c9cecda"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#a5c5011f4cb4b2fc21775a3308c9cecda">kaldi::nnet3::NnetComputeProbOptions::store_component_stats</a></div><div class="ttdeci">bool store_component_stats</div><div class="ttdef"><b>Definition:</b> <a href="nnet-diagnostics_8h_source.html#l00063">nnet-diagnostics.h:63</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputeProbOptions_html_ae660030c5d0b3640bd31c007af2bb64c"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#ae660030c5d0b3640bd31c007af2bb64c">kaldi::nnet3::NnetComputeProbOptions::compute_deriv</a></div><div class="ttdeci">bool compute_deriv</div><div class="ttdef"><b>Definition:</b> <a href="nnet-diagnostics_8h_source.html#l00057">nnet-diagnostics.h:57</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1CachingOptimizingCompiler_html_aff351a0fdf96a308aac59a70993d58ff"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1CachingOptimizingCompiler.html#aff351a0fdf96a308aac59a70993d58ff">kaldi::nnet3::CachingOptimizingCompiler::Compile</a></div><div class="ttdeci">std::shared_ptr&lt; const NnetComputation &gt; Compile(const ComputationRequest &amp;request)</div><div class="ttdoc">Does the compilation and returns a const pointer to the result, which is owned by this class...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-optimize_8cc_source.html#l00716">nnet-optimize.cc:716</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_abd407e217a4cf227cdf0d4883cca2d7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">kaldi::nnet3::NnetChainComputeProb::nnet_config_</a></div><div class="ttdeci">NnetComputeProbOptions nnet_config_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00100">nnet-chain-diagnostics.h:100</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputeProbOptions_html_a4493f40ffdbde20bcfbf81716ae74d01"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#a4493f40ffdbde20bcfbf81716ae74d01">kaldi::nnet3::NnetComputeProbOptions::compute_config</a></div><div class="ttdeci">NnetComputeOptions compute_config</div><div class="ttdef"><b>Definition:</b> <a href="nnet-diagnostics_8h_source.html#l00068">nnet-diagnostics.h:68</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_afc0bb79239b07e7a8b8c26abbf05657b"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#afc0bb79239b07e7a8b8c26abbf05657b">kaldi::nnet3::GetChainComputationRequest</a></div><div class="ttdeci">void GetChainComputationRequest(const Nnet &amp;nnet, const NnetChainExample &amp;eg, bool need_model_derivative, bool store_component_stats, bool use_xent_regularization, bool use_xent_derivative, ComputationRequest *request)</div><div class="ttdoc">This function takes a NnetChainExample and produces a ComputationRequest. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-example_8cc_source.html#l00290">nnet-chain-example.cc:290</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_a3631649a1d1426d7d7ed4c4ae9fe8892"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">kaldi::nnet3::NnetChainComputeProb::deriv_nnet_</a></div><div class="ttdeci">Nnet * deriv_nnet_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00106">nnet-chain-diagnostics.h:106</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_a6b9467e9ed40173eecdbf214ce316bfc"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a6b9467e9ed40173eecdbf214ce316bfc">kaldi::nnet3::NnetChainComputeProb::ProcessOutputs</a></div><div class="ttdeci">void ProcessOutputs(const NnetChainExample &amp;chain_eg, NnetComputer *computer)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8cc_source.html#l00115">nnet-chain-diagnostics.cc:115</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeba221035165b1ef0732011bf917ec7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeba221035165b1ef0732011bf917ec7c">&#9670;&nbsp;</a></span>GetDeriv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a> &amp; GetDeriv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00068">68</a> of file <a class="el" href="nnet-chain-diagnostics_8cc_source.html">nnet-chain-diagnostics.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-diagnostics_8h_source.html#l00057">NnetComputeProbOptions::compute_deriv</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00106">NnetChainComputeProb::deriv_nnet_</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, and <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00100">NnetChainComputeProb::nnet_config_</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                                                 {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#ae660030c5d0b3640bd31c007af2bb64c">compute_deriv</a>)</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;GetDeriv() called when no derivatives were requested.&quot;</span>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordflow">return</span> *<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">deriv_nnet_</a>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div><div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputeProbOptions_html_ae660030c5d0b3640bd31c007af2bb64c"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#ae660030c5d0b3640bd31c007af2bb64c">kaldi::nnet3::NnetComputeProbOptions::compute_deriv</a></div><div class="ttdeci">bool compute_deriv</div><div class="ttdef"><b>Definition:</b> <a href="nnet-diagnostics_8h_source.html#l00057">nnet-diagnostics.h:57</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_abd407e217a4cf227cdf0d4883cca2d7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">kaldi::nnet3::NnetChainComputeProb::nnet_config_</a></div><div class="ttdeci">NnetComputeProbOptions nnet_config_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00100">nnet-chain-diagnostics.h:100</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_a3631649a1d1426d7d7ed4c4ae9fe8892"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">kaldi::nnet3::NnetChainComputeProb::deriv_nnet_</a></div><div class="ttdeci">Nnet * deriv_nnet_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00106">nnet-chain-diagnostics.h:106</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afeac73c6fe879643e8cb5ec9ee2134da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeac73c6fe879643e8cb5ec9ee2134da">&#9670;&nbsp;</a></span>GetObjective()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structkaldi_1_1nnet3_1_1ChainObjectiveInfo.html">ChainObjectiveInfo</a> * GetObjective </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>output_name</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00211">211</a> of file <a class="el" href="nnet-chain-diagnostics_8cc_source.html">nnet-chain-diagnostics.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00109">NnetChainComputeProb::objf_info_</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                                        {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  unordered_map&lt;std::string, ChainObjectiveInfo, StringHasher&gt;::const_iterator</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      iter = <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ade4d4760cfe3be9cfaab8bf150c5d615">objf_info_</a>.find(output_name);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">if</span> (iter != <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ade4d4760cfe3be9cfaab8bf150c5d615">objf_info_</a>.end())</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">return</span> &amp;(iter-&gt;second);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_ade4d4760cfe3be9cfaab8bf150c5d615"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ade4d4760cfe3be9cfaab8bf150c5d615">kaldi::nnet3::NnetChainComputeProb::objf_info_</a></div><div class="ttdeci">unordered_map&lt; std::string, ChainObjectiveInfo, StringHasher &gt; objf_info_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00109">nnet-chain-diagnostics.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c14d15e4ffc8d57e30b61e1aea7e499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c14d15e4ffc8d57e30b61e1aea7e499">&#9670;&nbsp;</a></span>GetTotalObjective()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double GetTotalObjective </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>tot_weight</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00221">221</a> of file <a class="el" href="nnet-chain-diagnostics_8cc_source.html">nnet-chain-diagnostics.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00109">NnetChainComputeProb::objf_info_</a>.</p>
<div class="fragment"><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                                                                         {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordtype">double</span> tot_objectives = 0.0;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordtype">double</span> tot_weight = 0.0;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  unordered_map&lt;std::string, ChainObjectiveInfo, StringHasher&gt;::const_iterator</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    iter = <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ade4d4760cfe3be9cfaab8bf150c5d615">objf_info_</a>.begin(), end = <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ade4d4760cfe3be9cfaab8bf150c5d615">objf_info_</a>.end();</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">for</span> (; iter != end; ++iter) {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    tot_objectives += iter-&gt;second.tot_like + iter-&gt;second.tot_l2_term;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    tot_weight += iter-&gt;second.tot_weight;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">if</span> (total_weight) *total_weight = tot_weight;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">return</span> tot_objectives;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_ade4d4760cfe3be9cfaab8bf150c5d615"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ade4d4760cfe3be9cfaab8bf150c5d615">kaldi::nnet3::NnetChainComputeProb::objf_info_</a></div><div class="ttdeci">unordered_map&lt; std::string, ChainObjectiveInfo, StringHasher &gt; objf_info_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00109">nnet-chain-diagnostics.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad57a45f61541b7b94999b984a3c43439"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad57a45f61541b7b94999b984a3c43439">&#9670;&nbsp;</a></span>PrintTotalStats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> PrintTotalStats </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00179">179</a> of file <a class="el" href="nnet-chain-diagnostics_8cc_source.html">nnet-chain-diagnostics.cc</a>.</p>

<p class="reference">References <a class="el" href="_2nnet-nnet_8cc_source.html#l00466">Nnet::GetNodeIndex()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00132">KALDI_LOG</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00103">NnetChainComputeProb::nnet_</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00109">NnetChainComputeProb::objf_info_</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00039">ChainObjectiveInfo::tot_l2_term</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00038">ChainObjectiveInfo::tot_like</a>, and <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00037">ChainObjectiveInfo::tot_weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00248">kaldi::nnet3::RecomputeStats()</a>.</p>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                                 {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordtype">bool</span> ans = <span class="keyword">false</span>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  unordered_map&lt;std::string, ChainObjectiveInfo, StringHasher&gt;::const_iterator</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      iter, end;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  iter = <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ade4d4760cfe3be9cfaab8bf150c5d615">objf_info_</a>.begin();</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  end = <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ade4d4760cfe3be9cfaab8bf150c5d615">objf_info_</a>.end();</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">for</span> (; iter != end; ++iter) {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keyword">const</span> std::string &amp;name = iter-&gt;first;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    int32 node_index = <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#adbabf05a7702103113a02a113015205f">nnet_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1Nnet.html#a801beed78b9ad611d753940538c15252">GetNodeIndex</a>(name);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(node_index &gt;= 0);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keyword">const</span> ChainObjectiveInfo &amp;info = iter-&gt;second;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> like = (info.tot_like / info.tot_weight),</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        l2_term = (info.tot_l2_term / info.tot_weight),</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        tot_objf = like + l2_term;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span> (info.tot_l2_term == 0.0) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;Overall log-probability for &#39;&quot;</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;&#39; is &quot;</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                &lt;&lt; like &lt;&lt; <span class="stringliteral">&quot; per frame&quot;</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;, over &quot;</span> &lt;&lt; info.tot_weight &lt;&lt; <span class="stringliteral">&quot; frames.&quot;</span>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;Overall log-probability for &#39;&quot;</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;&#39; is &quot;</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                &lt;&lt; like &lt;&lt; <span class="stringliteral">&quot; + &quot;</span> &lt;&lt; l2_term &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; tot_objf &lt;&lt; <span class="stringliteral">&quot; per frame&quot;</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;, over &quot;</span> &lt;&lt; info.tot_weight &lt;&lt; <span class="stringliteral">&quot; frames.&quot;</span>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">if</span> (info.tot_weight &gt; 0)</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      ans = <span class="keyword">true</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">return</span> ans;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_adbabf05a7702103113a02a113015205f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#adbabf05a7702103113a02a113015205f">kaldi::nnet3::NnetChainComputeProb::nnet_</a></div><div class="ttdeci">const Nnet &amp; nnet_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00103">nnet-chain-diagnostics.h:103</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_ade4d4760cfe3be9cfaab8bf150c5d615"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ade4d4760cfe3be9cfaab8bf150c5d615">kaldi::nnet3::NnetChainComputeProb::objf_info_</a></div><div class="ttdeci">unordered_map&lt; std::string, ChainObjectiveInfo, StringHasher &gt; objf_info_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00109">nnet-chain-diagnostics.h:109</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1Nnet_html_a801beed78b9ad611d753940538c15252"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1Nnet.html#a801beed78b9ad611d753940538c15252">kaldi::nnet3::Nnet::GetNodeIndex</a></div><div class="ttdeci">int32 GetNodeIndex(const std::string &amp;node_name) const</div><div class="ttdoc">returns index associated with this node name, or -1 if no such index. </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-nnet_8cc_source.html#l00466">nnet-nnet.cc:466</a></div></div>
<div class="ttc" id="group__error__group_html_gaf8fb55454306b60c9c1e07a6ef9d341a"><div class="ttname"><a href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a></div><div class="ttdeci">#define KALDI_LOG</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00132">kaldi-error.h:132</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b9467e9ed40173eecdbf214ce316bfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b9467e9ed40173eecdbf214ce316bfc">&#9670;&nbsp;</a></span>ProcessOutputs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ProcessOutputs </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1nnet3_1_1NnetChainExample.html">NnetChainExample</a> &amp;&#160;</td>
          <td class="paramname"><em>chain_eg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1nnet3_1_1NnetComputer.html">NnetComputer</a> *&#160;</td>
          <td class="paramname"><em>computer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00115">115</a> of file <a class="el" href="nnet-chain-diagnostics_8cc_source.html">nnet-chain-diagnostics.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet3_2nnet-compute_8cc_source.html#l00542">NnetComputer::AcceptInput()</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00101">NnetChainComputeProb::chain_config_</a>, <a class="el" href="nnet-diagnostics_8h_source.html#l00057">NnetComputeProbOptions::compute_deriv</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00102">NnetChainComputeProb::den_graph_</a>, <a class="el" href="_2nnet-nnet_8cc_source.html#l00466">Nnet::GetNodeIndex()</a>, <a class="el" href="nnet3_2nnet-compute_8cc_source.html#l00573">NnetComputer::GetOutput()</a>, <a class="el" href="_2nnet-nnet_8cc_source.html#l00112">Nnet::IsOutputNode()</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="matrix-common_8h_source.html#l00033">kaldi::kTrans</a>, <a class="el" href="matrix-common_8h_source.html#l00039">kaldi::kUndefined</a>, <a class="el" href="nnet-chain-example_8h_source.html#l00046">NnetChainSupervision::name</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00103">NnetChainComputeProb::nnet_</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00100">NnetChainComputeProb::nnet_config_</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00107">NnetChainComputeProb::num_minibatches_processed_</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00109">NnetChainComputeProb::objf_info_</a>, <a class="el" href="nnet-chain-example_8h_source.html#l00119">NnetChainExample::outputs</a>, <a class="el" href="cu-matrix_8cc_source.html#l00049">CuMatrix&lt; Real &gt;::Resize()</a>, <a class="el" href="nnet-chain-example_8h_source.html#l00064">NnetChainSupervision::supervision</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00039">ChainObjectiveInfo::tot_l2_term</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00038">ChainObjectiveInfo::tot_like</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00037">ChainObjectiveInfo::tot_weight</a>, and <a class="el" href="kaldi-matrix_8cc_source.html#l02646">kaldi::TraceMatMat()</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00088">NnetChainComputeProb::Compute()</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                                                 {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// There will normally be just one output here, named &#39;output&#39;,</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// but the code is more general than this.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  std::vector&lt;NnetChainSupervision&gt;::const_iterator iter = eg.outputs.begin(),</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      end = eg.outputs.end();</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">for</span> (; iter != end; ++iter) {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keyword">const</span> NnetChainSupervision &amp;sup = *iter;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    int32 node_index = <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#adbabf05a7702103113a02a113015205f">nnet_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1Nnet.html#a801beed78b9ad611d753940538c15252">GetNodeIndex</a>(sup.name);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">if</span> (node_index &lt; 0 ||</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        !<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#adbabf05a7702103113a02a113015205f">nnet_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1Nnet.html#a6c50812e1be80ab06573493276ec2ca5">IsOutputNode</a>(node_index))</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Network has no output named &quot;</span> &lt;&lt; sup.name;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keyword">const</span> CuMatrixBase&lt;BaseFloat&gt; &amp;nnet_output = computer-&gt;GetOutput(sup.name);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordtype">bool</span> use_xent = (<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1dfc1d70dbd0c8bbc51e821b4af0768a">chain_config_</a>.xent_regularize != 0.0);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    std::string xent_name = sup.name + <span class="stringliteral">&quot;-xent&quot;</span>;  <span class="comment">// typically &quot;output-xent&quot;.</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    CuMatrix&lt;BaseFloat&gt; nnet_output_deriv, xent_deriv;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#ae660030c5d0b3640bd31c007af2bb64c">compute_deriv</a>)</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      nnet_output_deriv.Resize(nnet_output.NumRows(), nnet_output.NumCols(),</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                               <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> (use_xent)</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      xent_deriv.Resize(nnet_output.NumRows(), nnet_output.NumCols(),</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                        <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> tot_like, tot_l2_term, tot_weight;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    ComputeChainObjfAndDeriv(<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1dfc1d70dbd0c8bbc51e821b4af0768a">chain_config_</a>, <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1253ba1cbc8c427fd22ae99abad9007a">den_graph_</a>,</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                             sup.supervision, nnet_output,</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                             &amp;tot_like, &amp;tot_l2_term, &amp;tot_weight,</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                             (<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#ae660030c5d0b3640bd31c007af2bb64c">compute_deriv</a> ? &amp;nnet_output_deriv :</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                              NULL), (use_xent ? &amp;xent_deriv : NULL));</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment">// note: in this context we don&#39;t want to apply &#39;sup.deriv_weights&#39; because</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">// this code is used only in combination, where it&#39;s part of an L-BFGS</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// optimization algorithm, and in that case if there is a mismatch between</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="comment">// the computed objective function and the derivatives, it may cause errors</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// in the optimization procedure such as early termination.  (line search</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// and conjugate gradient descent both rely on the derivatives being</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// accurate, and don&#39;t fail gracefully if the derivatives are not accurate).</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    ChainObjectiveInfo &amp;totals = <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ade4d4760cfe3be9cfaab8bf150c5d615">objf_info_</a>[sup.name];</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    totals.tot_weight += tot_weight;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    totals.tot_like += tot_like;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    totals.tot_l2_term += tot_l2_term;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">nnet_config_</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#ae660030c5d0b3640bd31c007af2bb64c">compute_deriv</a>)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      computer-&gt;AcceptInput(sup.name, &amp;nnet_output_deriv);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">if</span> (use_xent) {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      ChainObjectiveInfo &amp;xent_totals = <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ade4d4760cfe3be9cfaab8bf150c5d615">objf_info_</a>[xent_name];</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="comment">// this block computes the cross-entropy objective.</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="keyword">const</span> CuMatrixBase&lt;BaseFloat&gt; &amp;xent_output = computer-&gt;GetOutput(</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;          xent_name);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="comment">// at this point, xent_deriv is posteriors derived from the numerator</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="comment">// computation.  note, xent_deriv has a factor of &#39;.supervision.weight&#39;,</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="comment">// but so does tot_weight.</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> xent_objf = <a class="code" href="namespacekaldi.html#a94b9f349754706b9d6f38bb5ccc11c77">TraceMatMat</a>(xent_output, xent_deriv, <a class="code" href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kTrans</a>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      xent_totals.tot_weight += tot_weight;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      xent_totals.tot_like += xent_objf;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#af676d295ba780873405747474e9f28aa">num_minibatches_processed_</a>++;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_a1dfc1d70dbd0c8bbc51e821b4af0768a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1dfc1d70dbd0c8bbc51e821b4af0768a">kaldi::nnet3::NnetChainComputeProb::chain_config_</a></div><div class="ttdeci">chain::ChainTrainingOptions chain_config_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00101">nnet-chain-diagnostics.h:101</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00039">matrix-common.h:39</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_adbabf05a7702103113a02a113015205f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#adbabf05a7702103113a02a113015205f">kaldi::nnet3::NnetChainComputeProb::nnet_</a></div><div class="ttdeci">const Nnet &amp; nnet_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00103">nnet-chain-diagnostics.h:103</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_ade4d4760cfe3be9cfaab8bf150c5d615"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ade4d4760cfe3be9cfaab8bf150c5d615">kaldi::nnet3::NnetChainComputeProb::objf_info_</a></div><div class="ttdeci">unordered_map&lt; std::string, ChainObjectiveInfo, StringHasher &gt; objf_info_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00109">nnet-chain-diagnostics.h:109</a></div></div>
<div class="ttc" id="namespacekaldi_html_a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2"><div class="ttname"><a href="namespacekaldi.html#a610f4f6c3c8fe58b76713f593b9d724fa538d6ef272b2ad113f1860fccbc2c3e2">kaldi::kTrans</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00033">matrix-common.h:33</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_a1253ba1cbc8c427fd22ae99abad9007a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a1253ba1cbc8c427fd22ae99abad9007a">kaldi::nnet3::NnetChainComputeProb::den_graph_</a></div><div class="ttdeci">chain::DenominatorGraph den_graph_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00102">nnet-chain-diagnostics.h:102</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1Nnet_html_a6c50812e1be80ab06573493276ec2ca5"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1Nnet.html#a6c50812e1be80ab06573493276ec2ca5">kaldi::nnet3::Nnet::IsOutputNode</a></div><div class="ttdeci">bool IsOutputNode(int32 node) const</div><div class="ttdoc">Returns true if this is an output node, meaning that it is of type kDescriptor and is not directly fo...</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-nnet_8cc_source.html#l00112">nnet-nnet.cc:112</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetComputeProbOptions_html_ae660030c5d0b3640bd31c007af2bb64c"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html#ae660030c5d0b3640bd31c007af2bb64c">kaldi::nnet3::NnetComputeProbOptions::compute_deriv</a></div><div class="ttdeci">bool compute_deriv</div><div class="ttdef"><b>Definition:</b> <a href="nnet-diagnostics_8h_source.html#l00057">nnet-diagnostics.h:57</a></div></div>
<div class="ttc" id="namespacekaldi_html_a94b9f349754706b9d6f38bb5ccc11c77"><div class="ttname"><a href="namespacekaldi.html#a94b9f349754706b9d6f38bb5ccc11c77">kaldi::TraceMatMat</a></div><div class="ttdeci">Real TraceMatMat(const MatrixBase&lt; Real &gt; &amp;A, const MatrixBase&lt; Real &gt; &amp;B, MatrixTransposeType trans)</div><div class="ttdoc">We need to declare this here as it will be a friend function. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l02646">kaldi-matrix.cc:2646</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_abd407e217a4cf227cdf0d4883cca2d7e"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#abd407e217a4cf227cdf0d4883cca2d7e">kaldi::nnet3::NnetChainComputeProb::nnet_config_</a></div><div class="ttdeci">NnetComputeProbOptions nnet_config_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00100">nnet-chain-diagnostics.h:100</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1Nnet_html_a801beed78b9ad611d753940538c15252"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1Nnet.html#a801beed78b9ad611d753940538c15252">kaldi::nnet3::Nnet::GetNodeIndex</a></div><div class="ttdeci">int32 GetNodeIndex(const std::string &amp;node_name) const</div><div class="ttdoc">returns index associated with this node name, or -1 if no such index. </div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-nnet_8cc_source.html#l00466">nnet-nnet.cc:466</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_af676d295ba780873405747474e9f28aa"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#af676d295ba780873405747474e9f28aa">kaldi::nnet3::NnetChainComputeProb::num_minibatches_processed_</a></div><div class="ttdeci">int32 num_minibatches_processed_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00107">nnet-chain-diagnostics.h:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a372de693ad40b3f42839c8ec6ac845f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a372de693ad40b3f42839c8ec6ac845f4">&#9670;&nbsp;</a></span>Reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00079">79</a> of file <a class="el" href="nnet-chain-diagnostics_8cc_source.html">nnet-chain-diagnostics.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00106">NnetChainComputeProb::deriv_nnet_</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00107">NnetChainComputeProb::num_minibatches_processed_</a>, <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00109">NnetChainComputeProb::objf_info_</a>, <a class="el" href="nnet-utils_8cc_source.html#l00303">kaldi::nnet3::ScaleNnet()</a>, and <a class="el" href="nnet-utils_8cc_source.html#l00292">kaldi::nnet3::SetNnetAsGradient()</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                                 {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#af676d295ba780873405747474e9f28aa">num_minibatches_processed_</a> = 0;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ade4d4760cfe3be9cfaab8bf150c5d615">objf_info_</a>.clear();</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">deriv_nnet_</a>) {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet3.html#a62b3a3e7be6ebc2a2af34bdb347ec76a">ScaleNnet</a>(0.0, <a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">deriv_nnet_</a>);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet3.html#ab5c7a956c7fc10e9e5d67f351498c243">SetNnetAsGradient</a>(<a class="code" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">deriv_nnet_</a>);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  }</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div><div class="ttc" id="namespacekaldi_1_1nnet3_html_a62b3a3e7be6ebc2a2af34bdb347ec76a"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a62b3a3e7be6ebc2a2af34bdb347ec76a">kaldi::nnet3::ScaleNnet</a></div><div class="ttdeci">void ScaleNnet(BaseFloat scale, Nnet *nnet)</div><div class="ttdoc">Scales the nnet parameters and stats by this scale. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-utils_8cc_source.html#l00303">nnet-utils.cc:303</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_ade4d4760cfe3be9cfaab8bf150c5d615"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#ade4d4760cfe3be9cfaab8bf150c5d615">kaldi::nnet3::NnetChainComputeProb::objf_info_</a></div><div class="ttdeci">unordered_map&lt; std::string, ChainObjectiveInfo, StringHasher &gt; objf_info_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00109">nnet-chain-diagnostics.h:109</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_ab5c7a956c7fc10e9e5d67f351498c243"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#ab5c7a956c7fc10e9e5d67f351498c243">kaldi::nnet3::SetNnetAsGradient</a></div><div class="ttdeci">void SetNnetAsGradient(Nnet *nnet)</div><div class="ttdoc">Sets nnet as gradient by Setting is_gradient_ to true and learning_rate_ to 1 for each UpdatableCompo...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-utils_8cc_source.html#l00292">nnet-utils.cc:292</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_a3631649a1d1426d7d7ed4c4ae9fe8892"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#a3631649a1d1426d7d7ed4c4ae9fe8892">kaldi::nnet3::NnetChainComputeProb::deriv_nnet_</a></div><div class="ttdeci">Nnet * deriv_nnet_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00106">nnet-chain-diagnostics.h:106</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetChainComputeProb_html_af676d295ba780873405747474e9f28aa"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html#af676d295ba780873405747474e9f28aa">kaldi::nnet3::NnetChainComputeProb::num_minibatches_processed_</a></div><div class="ttdeci">int32 num_minibatches_processed_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-chain-diagnostics_8h_source.html#l00107">nnet-chain-diagnostics.h:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a1dfc1d70dbd0c8bbc51e821b4af0768a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dfc1d70dbd0c8bbc51e821b4af0768a">&#9670;&nbsp;</a></span>chain_config_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">chain::ChainTrainingOptions chain_config_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00101">101</a> of file <a class="el" href="nnet-chain-diagnostics_8h_source.html">nnet-chain-diagnostics.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00088">NnetChainComputeProb::Compute()</a>, and <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00115">NnetChainComputeProb::ProcessOutputs()</a>.</p>

</div>
</div>
<a id="acc1c4c518295918abed6546cfd7f065f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc1c4c518295918abed6546cfd7f065f">&#9670;&nbsp;</a></span>compiler_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet3_1_1CachingOptimizingCompiler.html">CachingOptimizingCompiler</a> compiler_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00104">104</a> of file <a class="el" href="nnet-chain-diagnostics_8h_source.html">nnet-chain-diagnostics.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00088">NnetChainComputeProb::Compute()</a>.</p>

</div>
</div>
<a id="a1253ba1cbc8c427fd22ae99abad9007a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1253ba1cbc8c427fd22ae99abad9007a">&#9670;&nbsp;</a></span>den_graph_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">chain::DenominatorGraph den_graph_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00102">102</a> of file <a class="el" href="nnet-chain-diagnostics_8h_source.html">nnet-chain-diagnostics.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00050">NnetChainComputeProb::NnetChainComputeProb()</a>, and <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00115">NnetChainComputeProb::ProcessOutputs()</a>.</p>

</div>
</div>
<a id="a3631649a1d1426d7d7ed4c4ae9fe8892"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3631649a1d1426d7d7ed4c4ae9fe8892">&#9670;&nbsp;</a></span>deriv_nnet_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a>* deriv_nnet_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00106">106</a> of file <a class="el" href="nnet-chain-diagnostics_8h_source.html">nnet-chain-diagnostics.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00088">NnetChainComputeProb::Compute()</a>, <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00068">NnetChainComputeProb::GetDeriv()</a>, <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00026">NnetChainComputeProb::NnetChainComputeProb()</a>, <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00079">NnetChainComputeProb::Reset()</a>, and <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00074">NnetChainComputeProb::~NnetChainComputeProb()</a>.</p>

</div>
</div>
<a id="aba93d2c9a8fd3cc9f30f45a2d886f2e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba93d2c9a8fd3cc9f30f45a2d886f2e1">&#9670;&nbsp;</a></span>deriv_nnet_owned_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> deriv_nnet_owned_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00105">105</a> of file <a class="el" href="nnet-chain-diagnostics_8h_source.html">nnet-chain-diagnostics.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00074">NnetChainComputeProb::~NnetChainComputeProb()</a>.</p>

</div>
</div>
<a id="adbabf05a7702103113a02a113015205f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbabf05a7702103113a02a113015205f">&#9670;&nbsp;</a></span>nnet_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classkaldi_1_1nnet3_1_1Nnet.html">Nnet</a>&amp; nnet_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00103">103</a> of file <a class="el" href="nnet-chain-diagnostics_8h_source.html">nnet-chain-diagnostics.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00088">NnetChainComputeProb::Compute()</a>, <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00026">NnetChainComputeProb::NnetChainComputeProb()</a>, <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00179">NnetChainComputeProb::PrintTotalStats()</a>, and <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00115">NnetChainComputeProb::ProcessOutputs()</a>.</p>

</div>
</div>
<a id="abd407e217a4cf227cdf0d4883cca2d7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd407e217a4cf227cdf0d4883cca2d7e">&#9670;&nbsp;</a></span>nnet_config_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structkaldi_1_1nnet3_1_1NnetComputeProbOptions.html">NnetComputeProbOptions</a> nnet_config_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00100">100</a> of file <a class="el" href="nnet-chain-diagnostics_8h_source.html">nnet-chain-diagnostics.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00088">NnetChainComputeProb::Compute()</a>, <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00068">NnetChainComputeProb::GetDeriv()</a>, <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00026">NnetChainComputeProb::NnetChainComputeProb()</a>, and <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00115">NnetChainComputeProb::ProcessOutputs()</a>.</p>

</div>
</div>
<a id="af676d295ba780873405747474e9f28aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af676d295ba780873405747474e9f28aa">&#9670;&nbsp;</a></span>num_minibatches_processed_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 num_minibatches_processed_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00107">107</a> of file <a class="el" href="nnet-chain-diagnostics_8h_source.html">nnet-chain-diagnostics.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00115">NnetChainComputeProb::ProcessOutputs()</a>, and <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00079">NnetChainComputeProb::Reset()</a>.</p>

</div>
</div>
<a id="ade4d4760cfe3be9cfaab8bf150c5d615"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade4d4760cfe3be9cfaab8bf150c5d615">&#9670;&nbsp;</a></span>objf_info_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unordered_map&lt;std::string, <a class="el" href="structkaldi_1_1nnet3_1_1ChainObjectiveInfo.html">ChainObjectiveInfo</a>, <a class="el" href="structkaldi_1_1StringHasher.html">StringHasher</a>&gt; objf_info_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="nnet-chain-diagnostics_8h_source.html#l00109">109</a> of file <a class="el" href="nnet-chain-diagnostics_8h_source.html">nnet-chain-diagnostics.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00211">NnetChainComputeProb::GetObjective()</a>, <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00221">NnetChainComputeProb::GetTotalObjective()</a>, <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00179">NnetChainComputeProb::PrintTotalStats()</a>, <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00115">NnetChainComputeProb::ProcessOutputs()</a>, and <a class="el" href="nnet-chain-diagnostics_8cc_source.html#l00079">NnetChainComputeProb::Reset()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>nnet3/<a class="el" href="nnet-chain-diagnostics_8h_source.html">nnet-chain-diagnostics.h</a></li>
<li>nnet3/<a class="el" href="nnet-chain-diagnostics_8cc_source.html">nnet-chain-diagnostics.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekaldi.html">kaldi</a></li><li class="navelem"><a class="el" href="namespacekaldi_1_1nnet3.html">nnet3</a></li><li class="navelem"><a class="el" href="classkaldi_1_1nnet3_1_1NnetChainComputeProb.html">NnetChainComputeProb</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
