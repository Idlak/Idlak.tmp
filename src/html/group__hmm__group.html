<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: Classes and functions related to HMM topology and transition modeling</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__hmm__group.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Classes and functions related to HMM topology and transition modeling</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Classes and functions related to HMM topology and transition modeling:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__hmm__group.png" border="0" alt="" usemap="#group____hmm____group"/>
<map name="group____hmm____group" id="group____hmm____group">
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__hmm__group__graph"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hmm__group__graph.html">Classes and functions for creating FSTs from HMMs</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1HmmTopology.html">HmmTopology</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A class for storing topology information for phones.  <a href="classkaldi_1_1HmmTopology.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1MleTransitionUpdateConfig.html">MleTransitionUpdateConfig</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1MapTransitionUpdateConfig.html">MapTransitionUpdateConfig</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8de8a15a25238f4a7834e4b38ccf3a4b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hmm__group.html#ga8de8a15a25238f4a7834e4b38ccf3a4b">SplitToPhones</a> (const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;trans_model, const std::vector&lt; int32 &gt; &amp;alignment, std::vector&lt; std::vector&lt; int32 &gt; &gt; *split_alignment)</td></tr>
<tr class="memdesc:ga8de8a15a25238f4a7834e4b38ccf3a4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">SplitToPhones splits up the TransitionIds in "alignment" into their individual phones (one vector per instance of a phone).  <a href="group__hmm__group.html#ga8de8a15a25238f4a7834e4b38ccf3a4b">More...</a><br /></td></tr>
<tr class="separator:ga8de8a15a25238f4a7834e4b38ccf3a4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac4646cf7b9adc8531feb51d99b9a80c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hmm__group.html#gac4646cf7b9adc8531feb51d99b9a80c9">ConvertAlignment</a> (const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;old_trans_model, const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;new_trans_model, const <a class="el" href="classkaldi_1_1ContextDependencyInterface.html">ContextDependencyInterface</a> &amp;new_ctx_dep, const std::vector&lt; int32 &gt; &amp;old_alignment, int32 subsample_factor, <a class="el" href="classbool.html">bool</a> repeat_frames, <a class="el" href="classbool.html">bool</a> reorder, const std::vector&lt; int32 &gt; *phone_map, std::vector&lt; int32 &gt; *new_alignment)</td></tr>
<tr class="memdesc:gac4646cf7b9adc8531feb51d99b9a80c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">ConvertAlignment converts an alignment that was created using one model, to another model.  <a href="group__hmm__group.html#gac4646cf7b9adc8531feb51d99b9a80c9">More...</a><br /></td></tr>
<tr class="separator:gac4646cf7b9adc8531feb51d99b9a80c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga195962035fa801828842ad8f64b49b14"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hmm__group.html#ga195962035fa801828842ad8f64b49b14">ConvertPhnxToProns</a> (const std::vector&lt; int32 &gt; &amp;phnx, const std::vector&lt; int32 &gt; &amp;<a class="el" href="arpa-file-parser-test_8cc.html#a1e047defc56305925400c84666b87df3">words</a>, int32 word_start_sym, int32 word_end_sym, std::vector&lt; std::vector&lt; int32 &gt; &gt; *prons)</td></tr>
<tr class="separator:ga195962035fa801828842ad8f64b49b14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafbe0662d074548f56f4507ff3030ffc0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hmm__group.html#gafbe0662d074548f56f4507ff3030ffc0">GetRandomAlignmentForPhone</a> (const <a class="el" href="classkaldi_1_1ContextDependencyInterface.html">ContextDependencyInterface</a> &amp;ctx_dep, const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;trans_model, const std::vector&lt; int32 &gt; &amp;phone_window, std::vector&lt; int32 &gt; *alignment)</td></tr>
<tr class="separator:gafbe0662d074548f56f4507ff3030ffc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga02c0f6b69373c2c6a3a05e0afc38199e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hmm__group.html#ga02c0f6b69373c2c6a3a05e0afc38199e">ChangeReorderingOfAlignment</a> (const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;trans_model, std::vector&lt; int32 &gt; *alignment)</td></tr>
<tr class="separator:ga02c0f6b69373c2c6a3a05e0afc38199e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac0f3ce35b5963c3277c0f53d36bd11ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hmm__group.html#gac0f3ce35b5963c3277c0f53d36bd11ad">GetPdfsForPhones</a> (const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;trans_model, const std::vector&lt; int32 &gt; &amp;phones, std::vector&lt; int32 &gt; *pdfs)</td></tr>
<tr class="memdesc:gac0f3ce35b5963c3277c0f53d36bd11ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Works out which pdfs might correspond to the given phones.  <a href="group__hmm__group.html#gac0f3ce35b5963c3277c0f53d36bd11ad">More...</a><br /></td></tr>
<tr class="separator:gac0f3ce35b5963c3277c0f53d36bd11ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4a78a689d7521569166e52cc1e19c2c7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hmm__group.html#ga4a78a689d7521569166e52cc1e19c2c7">GetPhonesForPdfs</a> (const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;trans_model, const std::vector&lt; int32 &gt; &amp;pdfs, std::vector&lt; int32 &gt; *phones)</td></tr>
<tr class="memdesc:ga4a78a689d7521569166e52cc1e19c2c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Works out which phones might correspond to the given pdfs.  <a href="group__hmm__group.html#ga4a78a689d7521569166e52cc1e19c2c7">More...</a><br /></td></tr>
<tr class="separator:ga4a78a689d7521569166e52cc1e19c2c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gad94539d80f1ba0b8731c6692b624b7a3"><td class="memItemLeft" align="right" valign="top">static const int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hmm__group.html#gad94539d80f1ba0b8731c6692b624b7a3">kNoPdf</a> = -1</td></tr>
<tr class="memdesc:gad94539d80f1ba0b8731c6692b624b7a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">A constant used in the <a class="el" href="classkaldi_1_1HmmTopology.html" title="A class for storing topology information for phones. ">HmmTopology</a> class as the <a class="el" href="hmm.html#pdf_class">pdf-class</a> kNoPdf, which is used when a HMM-state is nonemitting (has no associated PDF).  <a href="group__hmm__group.html#gad94539d80f1ba0b8731c6692b624b7a3">More...</a><br /></td></tr>
<tr class="separator:gad94539d80f1ba0b8731c6692b624b7a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Integer mapping functions</h2></td></tr>
<tr class="memitem:ga53ec248f5bb23021e89d571c7063b108"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hmm__group.html#ga53ec248f5bb23021e89d571c7063b108">TransitionIdToPdf</a> (int32 trans_id) const</td></tr>
<tr class="separator:ga53ec248f5bb23021e89d571c7063b108"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga79ac308061506d21c5e34ff3886905d6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hmm__group.html#ga79ac308061506d21c5e34ff3886905d6">ConvertFullCtxAlignment</a> (const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;old_trans_model, const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;new_trans_model, const <a class="el" href="classkaldi_1_1ContextDependencyInterface.html">ContextDependencyInterface</a> &amp;new_ctx_dep, const std::vector&lt; int32 &gt; &amp;tid_ali, const std::vector&lt; std::vector&lt; int32 &gt; &gt; &amp;full_ali, std::vector&lt; int32 &gt; *new_tid_ali)</td></tr>
<tr class="memdesc:ga79ac308061506d21c5e34ff3886905d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">ConvertFullCtxAlignment converts an alignment that was created using one model, to another model.  <a href="group__hmm__group.html#ga79ac308061506d21c5e34ff3886905d6">More...</a><br /></td></tr>
<tr class="separator:ga79ac308061506d21c5e34ff3886905d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6cae38047feceab4132a2c60dd8dfb8f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hmm__group.html#ga6cae38047feceab4132a2c60dd8dfb8f">GetPhoneWindows</a> (const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;trans_model, const std::vector&lt; int32 &gt; &amp;alignment, int32 context_width, int32 central_pos, <a class="el" href="classbool.html">bool</a> per_frame, std::vector&lt; std::vector&lt; int32 &gt; &gt; *phone_windows, std::vector&lt; int32 &gt; *phones)</td></tr>
<tr class="memdesc:ga6cae38047feceab4132a2c60dd8dfb8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">GetPhoneWindows takes an alignment in terms of transition-ids and works out the phonetic context windows for a given context-width and central position.  <a href="group__hmm__group.html#ga6cae38047feceab4132a2c60dd8dfb8f">More...</a><br /></td></tr>
<tr class="separator:ga6cae38047feceab4132a2c60dd8dfb8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga02c0f6b69373c2c6a3a05e0afc38199e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga02c0f6b69373c2c6a3a05e0afc38199e">&#9670;&nbsp;</a></span>ChangeReorderingOfAlignment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ChangeReorderingOfAlignment </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;&#160;</td>
          <td class="paramname"><em>trans_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int32 &gt; *&#160;</td>
          <td class="paramname"><em>alignment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hmm-utils_8cc_source.html#l01260">1260</a> of file <a class="el" href="hmm-utils_8cc_source.html">hmm-utils.cc</a>.</p>

<p class="reference">References <a class="el" href="transition-model_8cc_source.html#l00901">TransitionModel::IsSelfLoop()</a>, <a class="el" href="basic-filebuf_8h_source.html#l00275">kaldi::swap()</a>, and <a class="el" href="transition-model_8cc_source.html#l00264">TransitionModel::TransitionIdToTransitionState()</a>.</p>

<p class="reference">Referenced by <a class="el" href="hmm-utils_8cc_source.html#l00742">kaldi::ConvertAlignmentForPhone()</a>.</p>
<div class="fragment"><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                                                              {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  int32 start_pos = 0, size = alignment-&gt;size();</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="keywordflow">while</span> (start_pos != size) {</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    int32 start_tid = (*alignment)[start_pos];</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    int32 cur_tstate = trans_model.TransitionIdToTransitionState(start_tid);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordtype">bool</span> start_is_self_loop = trans_model.IsSelfLoop(start_tid) ? 0 : 1;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    int32 end_pos = start_pos + 1;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="comment">// If the first instance of this transition-state was a self-loop, then eat</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="comment">// only non-self-loops of this state; if it was a non-self-loop, then eat</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="comment">// only self-loops of this state.  Imposing this condition on self-loops</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="comment">// would only actually matter in the rare circumstances that phones can</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="comment">// have length 1.</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="keywordflow">while</span> (end_pos != size &amp;&amp;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;           trans_model.TransitionIdToTransitionState((*alignment)[end_pos]) ==</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;           cur_tstate) {</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <span class="keywordtype">bool</span> this_is_self_loop = trans_model.IsSelfLoop((*alignment)[end_pos]);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="keywordflow">if</span> (!this_is_self_loop) {</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        <span class="keywordflow">if</span> (start_is_self_loop) {</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;          <span class="keywordflow">break</span>;  <span class="comment">// stop before including this transition-id.</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;          end_pos++;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;          <span class="keywordflow">break</span>;  <span class="comment">// stop after including this transition-id.</span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      }</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      end_pos++;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    }</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <a class="code" href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">std::swap</a>((*alignment)[start_pos], (*alignment)[end_pos - 1]);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    start_pos = end_pos;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  }</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_aa3e99328db564bc2bf6397fa1eaee4d7"><div class="ttname"><a href="namespacekaldi.html#aa3e99328db564bc2bf6397fa1eaee4d7">kaldi::swap</a></div><div class="ttdeci">void swap(basic_filebuf&lt; CharT, Traits &gt; &amp;x, basic_filebuf&lt; CharT, Traits &gt; &amp;y)</div><div class="ttdef"><b>Definition:</b> <a href="basic-filebuf_8h_source.html#l00275">basic-filebuf.h:275</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gac4646cf7b9adc8531feb51d99b9a80c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac4646cf7b9adc8531feb51d99b9a80c9">&#9670;&nbsp;</a></span>ConvertAlignment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> ConvertAlignment </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;&#160;</td>
          <td class="paramname"><em>old_trans_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;&#160;</td>
          <td class="paramname"><em>new_trans_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1ContextDependencyInterface.html">ContextDependencyInterface</a> &amp;&#160;</td>
          <td class="paramname"><em>new_ctx_dep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>old_alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>subsample_factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>repeat_frames</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>reorder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int32 &gt; *&#160;</td>
          <td class="paramname"><em>phone_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int32 &gt; *&#160;</td>
          <td class="paramname"><em>new_alignment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ConvertAlignment converts an alignment that was created using one model, to another model. </p>
<p>Returns false if it could not be split to phones (e.g. because the alignment was partial), or because some other error happened, such as we couldn't convert the alignment because there were too few frames for the new topology.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old_trans_model</td><td>[in] The transition model that the original alignment used. </td></tr>
    <tr><td class="paramname">new_trans_model</td><td>[in] The transition model that we want to use for the new alignment. </td></tr>
    <tr><td class="paramname">new_ctx_dep</td><td>[in] The new tree </td></tr>
    <tr><td class="paramname">old_alignment</td><td>[in] The alignment we want to convert </td></tr>
    <tr><td class="paramname">subsample_factor</td><td>[in] The frame subsampling factor... normally 1, but might be &gt; 1 if we're converting to a reduced-frame-rate system. </td></tr>
    <tr><td class="paramname">repeat_frames</td><td>[in] Only relevant when subsample_factor != 1 If true, repeat frames of alignment by 'subsample_factor' after alignment conversion, to keep the alignment the same length as the input alignment. [note: we actually do this by interpolating 'subsample_factor' separately generated alignments, to keep the phone boundaries the same as the input where possible.] </td></tr>
    <tr><td class="paramname">reorder</td><td>[in] True if you want the pdf-ids on the new alignment to be 'reordered'. (vs. the way they appear in the <a class="el" href="classkaldi_1_1HmmTopology.html" title="A class for storing topology information for phones. ">HmmTopology</a> object) </td></tr>
    <tr><td class="paramname">phone_map</td><td>[in] If non-NULL, map from old to new phones. </td></tr>
    <tr><td class="paramname">new_alignment</td><td>[out] The converted alignment. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="hmm-utils_8cc_source.html#l01013">1013</a> of file <a class="el" href="hmm-utils_8cc_source.html">hmm-utils.cc</a>.</p>

<p class="reference">References <a class="el" href="hmm-utils_8cc_source.html#l00926">kaldi::ConvertAlignmentInternal()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="convert-ali_8cc_source.html#l00029">main()</a>, and <a class="el" href="hmm-utils-test_8cc_source.html#l00232">kaldi::TestConvertAlignment()</a>.</p>
<div class="fragment"><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                                                       {</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="keywordflow">if</span> (!repeat_frames || subsample_factor == 1) {</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacekaldi.html#a042911f4ee6e1894c2bb9e77fd8d369a">ConvertAlignmentInternal</a>(old_trans_model,</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                                    new_trans_model,</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                                    new_ctx_dep,</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                                    old_alignment,</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                                    subsample_factor - 1,</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                                    subsample_factor,</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                                    new_is_reordered,</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                                    phone_map,</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                                    new_alignment);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   <span class="comment">// The value &quot;subsample_factor - 1&quot; for conversion_shift above ensures the</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;   <span class="comment">// alignments have the same length as the output of &#39;subsample-feats&#39;</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    std::vector&lt;std::vector&lt;int32&gt; &gt; shifted_alignments(subsample_factor);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordflow">for</span> (int32 conversion_shift = subsample_factor - 1;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;         conversion_shift &gt;= 0; conversion_shift--) {</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacekaldi.html#a042911f4ee6e1894c2bb9e77fd8d369a">ConvertAlignmentInternal</a>(old_trans_model,</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                                    new_trans_model,</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                                    new_ctx_dep,</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                                    old_alignment,</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                                    conversion_shift,</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                                    subsample_factor,</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                                    new_is_reordered,</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                                    phone_map,</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                                    &amp;shifted_alignments[conversion_shift]))</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(new_alignment != NULL);</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    new_alignment-&gt;clear();</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    new_alignment-&gt;reserve(old_alignment.size());</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    int32 max_shifted_ali_length = (old_alignment.size() / subsample_factor)</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                                   + (old_alignment.size() % subsample_factor);</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; max_shifted_ali_length; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      <span class="keywordflow">for</span> (int32 conversion_shift = subsample_factor - 1;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;           conversion_shift &gt;= 0; conversion_shift--)</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; static_cast&lt;int32&gt;(shifted_alignments[conversion_shift].size()))</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;          new_alignment-&gt;push_back(shifted_alignments[conversion_shift][<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  }</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(new_alignment-&gt;size() == old_alignment.size());</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_a042911f4ee6e1894c2bb9e77fd8d369a"><div class="ttname"><a href="namespacekaldi.html#a042911f4ee6e1894c2bb9e77fd8d369a">kaldi::ConvertAlignmentInternal</a></div><div class="ttdeci">static bool ConvertAlignmentInternal(const TransitionModel &amp;old_trans_model, const TransitionModel &amp;new_trans_model, const ContextDependencyInterface &amp;new_ctx_dep, const std::vector&lt; int32 &gt; &amp;old_alignment, int32 conversion_shift, int32 subsample_factor, bool new_is_reordered, const std::vector&lt; int32 &gt; *phone_map, std::vector&lt; int32 &gt; *new_alignment)</div><div class="ttdoc">This function is the same as &amp;#39;ConvertAligment&amp;#39;, but instead of the &amp;#39;repeat_frames&amp;#39; option it supports...</div><div class="ttdef"><b>Definition:</b> <a href="hmm-utils_8cc_source.html#l00926">hmm-utils.cc:926</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga79ac308061506d21c5e34ff3886905d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga79ac308061506d21c5e34ff3886905d6">&#9670;&nbsp;</a></span>ConvertFullCtxAlignment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> ConvertFullCtxAlignment </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;&#160;</td>
          <td class="paramname"><em>old_trans_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;&#160;</td>
          <td class="paramname"><em>new_trans_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1ContextDependencyInterface.html">ContextDependencyInterface</a> &amp;&#160;</td>
          <td class="paramname"><em>new_ctx_dep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>tid_ali</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; int32 &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>full_ali</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int32 &gt; *&#160;</td>
          <td class="paramname"><em>new_tid_ali</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ConvertFullCtxAlignment converts an alignment that was created using one model, to another model. </p>
<p>They must use a compatible topology (so we know the state alignments of the new model). It returns false if it could not be split to phones (probably because the alignment was partial), but for other kinds of error that are more likely a coding error, it will throw an exception. </p>

<p class="definition">Definition at line <a class="el" href="hmm-utils-idlak_8cc_source.html#l00094">94</a> of file <a class="el" href="hmm-utils-idlak_8cc_source.html">hmm-utils-idlak.cc</a>.</p>

<p class="reference">References <a class="el" href="classkaldi_1_1ContextDependencyInterface.html#a63785b3c15a9e59679d01e91ec5deb32">ContextDependencyInterface::CentralPosition()</a>, <a class="el" href="classkaldi_1_1ContextDependencyInterface.html#add482cf5802e38844b4147007e7b3b2c">ContextDependencyInterface::Compute()</a>, <a class="el" href="classkaldi_1_1ContextDependencyInterface.html#a5ab5836712a8f5537f9b88d05f429c42">ContextDependencyInterface::ContextWidth()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="transition-model_8cc_source.html#l00314">TransitionModel::PairToTransitionId()</a>, <a class="el" href="transition-model_8cc_source.html#l00794">TransitionModel::TransitionIdToHmmState()</a>, <a class="el" href="transition-model_8cc_source.html#l00774">TransitionModel::TransitionIdToPhone()</a>, <a class="el" href="transition-model_8cc_source.html#l00269">TransitionModel::TransitionIdToTransitionIndex()</a>, <a class="el" href="transition-model_8cc_source.html#l00264">TransitionModel::TransitionIdToTransitionState()</a>, <a class="el" href="transition-model_8cc_source.html#l00284">TransitionModel::TransitionStateToForwardPdfClass()</a>, <a class="el" href="transition-model_8cc_source.html#l00294">TransitionModel::TransitionStateToSelfLoopPdfClass()</a>, <a class="el" href="transition-model_8cc_source.html#l00243">TransitionModel::TupleToTransitionState()</a>, and <a class="el" href="io-funcs-inl_8h_source.html#l00198">kaldi::WriteIntegerVector()</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                                                            {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(new_tid_ali != NULL);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(tid_ali.size() == full_ali.size() &amp;&amp;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;               <span class="stringliteral">&quot;Regular and full-context alignments must be of same size.&quot;</span>);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  new_tid_ali-&gt;clear();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  int32 num_frames = tid_ali.size(),</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      ctx_width = new_ctx_dep.ContextWidth(),</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      central_pos = new_ctx_dep.CentralPosition();</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_frames; ++<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(full_ali[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].size() == ctx_width);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    int32 old_tid = tid_ali[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>],</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        phone = old_trans_model.TransitionIdToPhone(old_tid),</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        old_tstate = old_trans_model.TransitionIdToTransitionState(old_tid);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    int32 forward_pdf_class = </div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        old_trans_model.TransitionStateToForwardPdfClass(old_tstate),</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        self_loop_pdf_class =</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        old_trans_model.TransitionStateToSelfLoopPdfClass(old_tstate);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    int32 hmm_state = old_trans_model.TransitionIdToHmmState(old_tid),</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        trans_idx = old_trans_model.TransitionIdToTransitionIndex(old_tid);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(full_ali[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>][central_pos] == phone &amp;&amp;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                 <span class="stringliteral">&quot;Mismatched regular and full-context alignments.&quot;</span>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>((*full_ali[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].end()) == forward_pdf_class &amp;&amp;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                 <span class="stringliteral">&quot;Mismatched regular and full-context alignments.&quot;</span>);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    std::vector&lt;int32&gt; fullctx(full_ali[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].begin(), full_ali[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].end()-1);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    int32 new_forward_pdf, new_self_loop_pdf;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (!new_ctx_dep.Compute(fullctx, forward_pdf_class, &amp;new_forward_pdf) </div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        || !new_ctx_dep.Compute(fullctx, self_loop_pdf_class, &amp;new_self_loop_pdf)) {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      std::ostringstream ctx_ss;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <a class="code" href="group__io__funcs__basic.html#ga99e4557f845a9c1e3202ab136226a980">WriteIntegerVector</a>(ctx_ss, <span class="keyword">false</span>, full_ali[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Decision tree did not produce an answer for: pdf-class = &quot;</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                &lt;&lt; forward_pdf_class &lt;&lt; <span class="stringliteral">&quot; context window = &quot;</span> &lt;&lt; ctx_ss.str();</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    int32 new_trans_state = </div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        new_trans_model.TupleToTransitionState(phone,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                               hmm_state,</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                                               new_forward_pdf,</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                                               new_self_loop_pdf);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    int32 new_tid = new_trans_model.PairToTransitionId(new_trans_state,</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                                                       trans_idx);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    new_tid_ali-&gt;push_back(new_tid);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(new_tid_ali-&gt;size() == tid_ali.size());</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div><div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="group__io__funcs__basic_html_ga99e4557f845a9c1e3202ab136226a980"><div class="ttname"><a href="group__io__funcs__basic.html#ga99e4557f845a9c1e3202ab136226a980">kaldi::WriteIntegerVector</a></div><div class="ttdeci">void WriteIntegerVector(std::ostream &amp;os, bool binary, const std::vector&lt; T &gt; &amp;v)</div><div class="ttdoc">Function for writing STL vectors of integer types. </div><div class="ttdef"><b>Definition:</b> <a href="io-funcs-inl_8h_source.html#l00198">io-funcs-inl.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga195962035fa801828842ad8f64b49b14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga195962035fa801828842ad8f64b49b14">&#9670;&nbsp;</a></span>ConvertPhnxToProns()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> ConvertPhnxToProns </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>phnx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>words</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>word_start_sym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>word_end_sym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::vector&lt; int32 &gt; &gt; *&#160;</td>
          <td class="paramname"><em>prons</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hmm-utils_8cc_source.html#l01161">1161</a> of file <a class="el" href="hmm-utils_8cc_source.html">hmm-utils.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, and <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>.</p>

<p class="reference">Referenced by <a class="el" href="phones-to-prons_8cc_source.html#l00062">main()</a>, and <a class="el" href="hmm-utils-test_8cc_source.html#l00028">kaldi::TestConvertPhnxToProns()</a>.</p>
<div class="fragment"><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                                                             {</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="keywordflow">while</span> (i &lt; phnx.size()) {</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordflow">if</span> (phnx[i] == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// zeros not valid here.</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keywordflow">if</span> (phnx[i] == word_start_sym) { <span class="comment">// start a word...</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      std::vector&lt;int32&gt; pron;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &gt;= <a class="code" href="arpa-file-parser-test_8cc.html#a1e047defc56305925400c84666b87df3">words</a>.size()) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// no word left..</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="arpa-file-parser-test_8cc.html#a1e047defc56305925400c84666b87df3">words</a>[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>] == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// zero word disallowed.</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      pron.push_back(<a class="code" href="arpa-file-parser-test_8cc.html#a1e047defc56305925400c84666b87df3">words</a>[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++]);</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;      i++;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      <span class="keywordflow">while</span> (i &lt; phnx.size()) {</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="keywordflow">if</span> (phnx[i] == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        <span class="keywordflow">if</span> (phnx[i] == word_start_sym) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// error.</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        <span class="keywordflow">if</span> (phnx[i] == word_end_sym) { i++; <span class="keywordflow">break</span>; }</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        pron.push_back(phnx[i]);</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        i++;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      }</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      <span class="comment">// check we did see the word-end symbol.</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      <span class="keywordflow">if</span> (!(i &gt; 0 &amp;&amp; phnx[i-1] == word_end_sym))</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      prons-&gt;push_back(pron);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (phnx[i] == word_end_sym) {</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// error.</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      <span class="comment">// start a non-word sequence of phones (e.g. opt-sil).</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      std::vector&lt;int32&gt; pron;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      pron.push_back(0); <span class="comment">// 0 serves as the word-id.</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      <span class="keywordflow">while</span> (i &lt; phnx.size()) {</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <span class="keywordflow">if</span> (phnx[i] == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        <span class="keywordflow">if</span> (phnx[i] == word_start_sym) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        <span class="keywordflow">if</span> (phnx[i] == word_end_sym) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// error.</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        pron.push_back(phnx[i]);</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        i++;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      }</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      prons-&gt;push_back(pron);</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    }</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  }</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> == <a class="code" href="arpa-file-parser-test_8cc.html#a1e047defc56305925400c84666b87df3">words</a>.size());</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;}</div><div class="ttc" id="arpa-file-parser-test_8cc_html_a1e047defc56305925400c84666b87df3"><div class="ttname"><a href="arpa-file-parser-test_8cc.html#a1e047defc56305925400c84666b87df3">words</a></div><div class="ttdeci">int32 words[kMaxOrder]</div><div class="ttdef"><b>Definition:</b> <a href="arpa-file-parser-test_8cc_source.html#l00043">arpa-file-parser-test.cc:43</a></div></div>
<div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gac0f3ce35b5963c3277c0f53d36bd11ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac0f3ce35b5963c3277c0f53d36bd11ad">&#9670;&nbsp;</a></span>GetPdfsForPhones()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> GetPdfsForPhones </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;&#160;</td>
          <td class="paramname"><em>trans_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>phones</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int32 &gt; *&#160;</td>
          <td class="paramname"><em>pdfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Works out which pdfs might correspond to the given phones. </p>
<p>Will return true if these pdfs correspond *just* to these phones, false if these pdfs are also used by other phones. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trans_model</td><td>[in] Transition-model used to work out this information </td></tr>
    <tr><td class="paramname">phones</td><td>[in] A sorted, uniq vector that represents a set of phones </td></tr>
    <tr><td class="paramname">pdfs</td><td>[out] Will be set to a sorted, uniq list of pdf-ids that correspond to one of this set of phones. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true if all of the pdfs output to "pdfs" correspond to phones from just this set (false if they may be shared with phones outside this set). </dd></dl>

<p class="definition">Definition at line <a class="el" href="transition-model_8cc_source.html#l00843">843</a> of file <a class="el" href="transition-model_8cc_source.html">transition-model.cc</a>.</p>

<p class="reference">References <a class="el" href="stl-utils_8h_source.html#l00063">kaldi::IsSortedAndUniq()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="transition-model_8h_source.html#l00179">TransitionModel::NumTransitionStates()</a>, <a class="el" href="stl-utils_8h_source.html#l00039">kaldi::SortAndUniq()</a>, <a class="el" href="transition-model_8cc_source.html#l00279">TransitionModel::TransitionStateToForwardPdf()</a>, <a class="el" href="transition-model_8cc_source.html#l00274">TransitionModel::TransitionStateToPhone()</a>, and <a class="el" href="transition-model_8cc_source.html#l00304">TransitionModel::TransitionStateToSelfLoopPdf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="gmm-boost-silence_8cc_source.html#l00025">main()</a>, and <a class="el" href="transition-model_8h_source.html#l00324">TransitionModel::TransitionIdToPdf()</a>.</p>
<div class="fragment"><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                                              {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacekaldi.html#a81dfa76eeac63eba502e32ee58e37d57">IsSortedAndUniq</a>(phones));</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(pdfs != NULL);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  pdfs-&gt;clear();</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="keywordflow">for</span> (int32 tstate = 1; tstate &lt;= trans_model.NumTransitionStates(); tstate++) {</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">if</span> (std::binary_search(phones.begin(), phones.end(),</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;             trans_model.TransitionStateToPhone(tstate))) {</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      pdfs-&gt;push_back(trans_model.TransitionStateToForwardPdf(tstate));</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      pdfs-&gt;push_back(trans_model.TransitionStateToSelfLoopPdf(tstate));</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    }</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  }</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <a class="code" href="namespacekaldi.html#a3dd7a9cc33032bfb870b4b6c053822db">SortAndUniq</a>(pdfs);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="keywordflow">for</span> (int32 tstate = 1; tstate &lt;= trans_model.NumTransitionStates(); tstate++)</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordflow">if</span> ((std::binary_search(pdfs-&gt;begin(), pdfs-&gt;end(),</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                          trans_model.TransitionStateToForwardPdf(tstate)) ||</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;         std::binary_search(pdfs-&gt;begin(), pdfs-&gt;end(),</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                          trans_model.TransitionStateToSelfLoopPdf(tstate)))</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;       &amp;&amp; !std::binary_search(phones.begin(), phones.end(),</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                              trans_model.TransitionStateToPhone(tstate)))</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_a3dd7a9cc33032bfb870b4b6c053822db"><div class="ttname"><a href="namespacekaldi.html#a3dd7a9cc33032bfb870b4b6c053822db">kaldi::SortAndUniq</a></div><div class="ttdeci">void SortAndUniq(std::vector&lt; T &gt; *vec)</div><div class="ttdoc">Sorts and uniq&amp;#39;s (removes duplicates) from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00039">stl-utils.h:39</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="namespacekaldi_html_a81dfa76eeac63eba502e32ee58e37d57"><div class="ttname"><a href="namespacekaldi.html#a81dfa76eeac63eba502e32ee58e37d57">kaldi::IsSortedAndUniq</a></div><div class="ttdeci">bool IsSortedAndUniq(const std::vector&lt; T &gt; &amp;vec)</div><div class="ttdoc">Returns true if the vector is sorted and contains each element only once. </div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00063">stl-utils.h:63</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga4a78a689d7521569166e52cc1e19c2c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4a78a689d7521569166e52cc1e19c2c7">&#9670;&nbsp;</a></span>GetPhonesForPdfs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> GetPhonesForPdfs </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;&#160;</td>
          <td class="paramname"><em>trans_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>pdfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int32 &gt; *&#160;</td>
          <td class="paramname"><em>phones</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Works out which phones might correspond to the given pdfs. </p>
<p>Similar to the above GetPdfsForPhones(, ,) </p>

<p class="definition">Definition at line <a class="el" href="transition-model_8cc_source.html#l00869">869</a> of file <a class="el" href="transition-model_8cc_source.html">transition-model.cc</a>.</p>

<p class="reference">References <a class="el" href="stl-utils_8h_source.html#l00063">kaldi::IsSortedAndUniq()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="transition-model_8h_source.html#l00179">TransitionModel::NumTransitionStates()</a>, <a class="el" href="stl-utils_8h_source.html#l00039">kaldi::SortAndUniq()</a>, <a class="el" href="transition-model_8cc_source.html#l00279">TransitionModel::TransitionStateToForwardPdf()</a>, <a class="el" href="transition-model_8cc_source.html#l00274">TransitionModel::TransitionStateToPhone()</a>, and <a class="el" href="transition-model_8cc_source.html#l00304">TransitionModel::TransitionStateToSelfLoopPdf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="gmm-init-model_8cc_source.html#l00035">kaldi::InitAmGmm()</a>, and <a class="el" href="transition-model_8h_source.html#l00324">TransitionModel::TransitionIdToPdf()</a>.</p>
<div class="fragment"><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                                               {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="namespacekaldi.html#a81dfa76eeac63eba502e32ee58e37d57">IsSortedAndUniq</a>(pdfs));</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(phones != NULL);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  phones-&gt;clear();</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">for</span> (int32 tstate = 1; tstate &lt;= trans_model.NumTransitionStates(); tstate++) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span> (std::binary_search(pdfs.begin(), pdfs.end(),</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                           trans_model.TransitionStateToForwardPdf(tstate)) ||</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        std::binary_search(pdfs.begin(), pdfs.end(),</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                           trans_model.TransitionStateToSelfLoopPdf(tstate)))</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      phones-&gt;push_back(trans_model.TransitionStateToPhone(tstate));</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  }</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <a class="code" href="namespacekaldi.html#a3dd7a9cc33032bfb870b4b6c053822db">SortAndUniq</a>(phones);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordflow">for</span> (int32 tstate = 1; tstate &lt;= trans_model.NumTransitionStates(); tstate++)</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">if</span> (std::binary_search(phones-&gt;begin(), phones-&gt;end(),</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                           trans_model.TransitionStateToPhone(tstate))</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        &amp;&amp; !(std::binary_search(pdfs.begin(), pdfs.end(),</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                               trans_model.TransitionStateToForwardPdf(tstate)) &amp;&amp;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;             std::binary_search(pdfs.begin(), pdfs.end(),</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                               trans_model.TransitionStateToSelfLoopPdf(tstate))) )</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_a3dd7a9cc33032bfb870b4b6c053822db"><div class="ttname"><a href="namespacekaldi.html#a3dd7a9cc33032bfb870b4b6c053822db">kaldi::SortAndUniq</a></div><div class="ttdeci">void SortAndUniq(std::vector&lt; T &gt; *vec)</div><div class="ttdoc">Sorts and uniq&amp;#39;s (removes duplicates) from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00039">stl-utils.h:39</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="namespacekaldi_html_a81dfa76eeac63eba502e32ee58e37d57"><div class="ttname"><a href="namespacekaldi.html#a81dfa76eeac63eba502e32ee58e37d57">kaldi::IsSortedAndUniq</a></div><div class="ttdeci">bool IsSortedAndUniq(const std::vector&lt; T &gt; &amp;vec)</div><div class="ttdoc">Returns true if the vector is sorted and contains each element only once. </div><div class="ttdef"><b>Definition:</b> <a href="stl-utils_8h_source.html#l00063">stl-utils.h:63</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga6cae38047feceab4132a2c60dd8dfb8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6cae38047feceab4132a2c60dd8dfb8f">&#9670;&nbsp;</a></span>GetPhoneWindows()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> GetPhoneWindows </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;&#160;</td>
          <td class="paramname"><em>trans_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>context_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>central_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>per_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::vector&lt; int32 &gt; &gt; *&#160;</td>
          <td class="paramname"><em>phone_windows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int32 &gt; *&#160;</td>
          <td class="paramname"><em>phones</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GetPhoneWindows takes an alignment in terms of transition-ids and works out the phonetic context windows for a given context-width and central position. </p>
<p>It also returns the list of phones seen in the alignment if the 'phones' argument is not NULL. If the 'per_frame' option is true, then the phonetic context windows (and phones) are repeated for the number of frames they span. </p>

<p class="definition">Definition at line <a class="el" href="hmm-utils-idlak_8cc_source.html#l00030">30</a> of file <a class="el" href="hmm-utils-idlak_8cc_source.html">hmm-utils-idlak.cc</a>.</p>

<p class="reference">References <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="hmm-utils_8cc_source.html#l00723">kaldi::SplitToPhones()</a>, and <a class="el" href="transition-model_8cc_source.html#l00774">TransitionModel::TransitionIdToPhone()</a>.</p>

<p class="reference">Referenced by <a class="el" href="make-fullctx-ali-dnn_8cc_source.html#l00050">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                                               {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(phone_windows != NULL);</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  phone_windows-&gt;clear();</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  std::vector&lt; std::vector&lt;int32&gt; &gt; split;  <span class="comment">// split into phones</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="group__hmm__group.html#ga8de8a15a25238f4a7834e4b38ccf3a4b">SplitToPhones</a>(trans_model, alignment, &amp;split))</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  int32 num_phones = split.size();  <span class="comment">// Number of distinct phones in alignment</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  std::vector&lt;int32&gt; tmp_phones(num_phones);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_phones; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(!split[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].empty());</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    tmp_phones[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = trans_model.TransitionIdToPhone(split[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>][0]);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  }</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">for</span> (int32 win_start = -context_width;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      win_start &lt; static_cast&lt;int32&gt;(num_phones+context_width);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      win_start++) {  <span class="comment">// start of a context window.</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    int32 current_phone_pos = win_start + central_pos;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">if</span> (current_phone_pos &gt;= 0 &amp;&amp; current_phone_pos  &lt; num_phones) {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      std::vector&lt;int32&gt; phone_window(context_width, 0);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      <span class="keywordflow">for</span> (int32 offset = 0; offset &lt; context_width; offset++)</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keywordflow">if</span> ((win_start+offset) &gt;= 0 &amp;&amp; (win_start+offset) &lt; num_phones)</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;          phone_window[offset] = tmp_phones[win_start+offset];</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      <span class="keywordflow">if</span> (per_frame) {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        int32 num_frames = split[current_phone_pos].size();</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_frames; ++<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;          phone_windows-&gt;push_back(phone_window);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        phone_windows-&gt;push_back(phone_window);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      }</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  }</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordflow">if</span> (per_frame) {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(phone_windows-&gt;size() == alignment.size());</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(phone_windows-&gt;size() == num_phones);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">if</span> (phones != NULL) {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (per_frame) {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      phones-&gt;clear();</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_phones; ++<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        int32 num_frames = split[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].size();</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">for</span> (int32 f = 0; f &lt; num_frames; ++f)</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;          phones-&gt;push_back(tmp_phones[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(phones-&gt;size() == alignment.size());</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      (*phones) = tmp_phones;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div><div class="ttc" id="group__hmm__group_html_ga8de8a15a25238f4a7834e4b38ccf3a4b"><div class="ttname"><a href="group__hmm__group.html#ga8de8a15a25238f4a7834e4b38ccf3a4b">kaldi::SplitToPhones</a></div><div class="ttdeci">bool SplitToPhones(const TransitionModel &amp;trans_model, const std::vector&lt; int32 &gt; &amp;alignment, std::vector&lt; std::vector&lt; int32 &gt; &gt; *split_alignment)</div><div class="ttdoc">SplitToPhones splits up the TransitionIds in &quot;alignment&quot; into their individual phones (one vector per...</div><div class="ttdef"><b>Definition:</b> <a href="hmm-utils_8cc_source.html#l00723">hmm-utils.cc:723</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gafbe0662d074548f56f4507ff3030ffc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafbe0662d074548f56f4507ff3030ffc0">&#9670;&nbsp;</a></span>GetRandomAlignmentForPhone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GetRandomAlignmentForPhone </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1ContextDependencyInterface.html">ContextDependencyInterface</a> &amp;&#160;</td>
          <td class="paramname"><em>ctx_dep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;&#160;</td>
          <td class="paramname"><em>trans_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>phone_window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int32 &gt; *&#160;</td>
          <td class="paramname"><em>alignment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hmm-utils_8cc_source.html#l01207">1207</a> of file <a class="el" href="hmm-utils_8cc_source.html">hmm-utils.cc</a>.</p>

<p class="reference">References <a class="el" href="classkaldi_1_1ContextDependencyInterface.html#a63785b3c15a9e59679d01e91ec5deb32">ContextDependencyInterface::CentralPosition()</a>, <a class="el" href="hmm-utils_8cc_source.html#l00155">kaldi::GetHmmAsFsaSimple()</a>, <a class="el" href="fstext-utils-inl_8h_source.html#l00097">fst::GetInputSymbols()</a>, <a class="el" href="transition-model_8h_source.html#l00140">TransitionModel::GetTopo()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, and <a class="el" href="hmm-topology_8cc_source.html#l00349">HmmTopology::MinLength()</a>.</p>

<p class="reference">Referenced by <a class="el" href="hmm-utils_8cc_source.html#l00742">kaldi::ConvertAlignmentForPhone()</a>.</p>
<div class="fragment"><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                                                             {</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a> <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  int32 length = alignment-&gt;size();</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> prob_scale = 0.0;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  fst::VectorFst&lt;Arc&gt; *<a class="code" href="namespacefst.html">fst</a> = <a class="code" href="group__hmm__group__graph.html#gad4f0020c7b8d948bae982264abdc8f17">GetHmmAsFsaSimple</a>(phone_window, ctx_dep,</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                                               trans_model, prob_scale);</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  fst::RmEpsilon(fst);</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  fst::VectorFst&lt;Arc&gt; length_constraint_fst;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  {  <span class="comment">// set up length_constraint_fst.</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    std::vector&lt;int32&gt; symbols;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="keywordtype">bool</span> include_epsilon = <span class="keyword">false</span>;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="comment">// note: &#39;fst&#39; is an acceptor so ilabels == olabels.</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <a class="code" href="namespacefst.html#a497c657ffe831f50f0de2ce5c296beb6">GetInputSymbols</a>(*fst, include_epsilon, &amp;symbols);</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    int32 cur_state = length_constraint_fst.AddState();</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    length_constraint_fst.SetStart(cur_state);</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; length; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      int32 next_state = length_constraint_fst.AddState();</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; symbols.size(); <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        length_constraint_fst.AddArc(cur_state,</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                                     <a class="code" href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">Arc</a>(symbols[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>], symbols[j],</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                                         fst::TropicalWeight::One(),</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                                         next_state));</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      }</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      cur_state = next_state;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    }</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    length_constraint_fst.SetFinal(cur_state, fst::TropicalWeight::One());</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  }</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  fst::VectorFst&lt;Arc&gt; composed_fst;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  fst::Compose(*fst, length_constraint_fst, &amp;composed_fst);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  fst::VectorFst&lt;Arc&gt; single_path_fst;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  {  <span class="comment">// randomly generate a single path.</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    fst::UniformArcSelector&lt;Arc&gt; selector;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    fst::RandGenOptions&lt;fst::UniformArcSelector&lt;Arc&gt; &gt; randgen_opts(selector);</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    fst::RandGen(composed_fst, &amp;single_path_fst, randgen_opts);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  }</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="keywordflow">if</span> (single_path_fst.NumStates() == 0) {</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Error generating random alignment (wrong length?): &quot;</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;requested length is &quot;</span> &lt;&lt; length &lt;&lt; <span class="stringliteral">&quot; versus min-length &quot;</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;              &lt;&lt; trans_model.GetTopo().MinLength(</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                  phone_window[ctx_dep.CentralPosition()]);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  }</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  std::vector&lt;int32&gt; symbol_sequence;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="keywordtype">bool</span> ans = fst::GetLinearSymbolSequence&lt;Arc, int32&gt;(</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      single_path_fst, &amp;symbol_sequence, NULL, NULL);</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(ans &amp;&amp; symbol_sequence.size() == length);</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  symbol_sequence.swap(*alignment);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="keyword">delete</span> fst;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;}</div><div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacefst_html"><div class="ttname"><a href="namespacefst.html">fst</a></div><div class="ttdoc">For an extended explanation of the framework of which grammar-fsts are a part, please see Support for...</div><div class="ttdef"><b>Definition:</b> <a href="graph_8dox_source.html#l00021">graph.dox:21</a></div></div>
<div class="ttc" id="namespacefst_html_a70478eb2428a9406e4692d19a7a3a97f"><div class="ttname"><a href="namespacefst.html#a70478eb2428a9406e4692d19a7a3a97f">fst::StdArc</a></div><div class="ttdeci">fst::StdArc StdArc</div><div class="ttdef"><b>Definition:</b> <a href="deterministic-fst-test_8cc_source.html#l00053">deterministic-fst-test.cc:53</a></div></div>
<div class="ttc" id="namespacefst_html_a497c657ffe831f50f0de2ce5c296beb6"><div class="ttname"><a href="namespacefst.html#a497c657ffe831f50f0de2ce5c296beb6">fst::GetInputSymbols</a></div><div class="ttdeci">void GetInputSymbols(const Fst&lt; Arc &gt; &amp;fst, bool include_eps, vector&lt; I &gt; *symbols)</div><div class="ttdoc">GetInputSymbols gets the list of symbols on the input of fst (including epsilon, if include_eps == tr...</div><div class="ttdef"><b>Definition:</b> <a href="fstext-utils-inl_8h_source.html#l00097">fstext-utils-inl.h:97</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="namespacekaldi_html_a4ce48a4aa890590d2bbbeaa26cdac97b"><div class="ttname"><a href="namespacekaldi.html#a4ce48a4aa890590d2bbbeaa26cdac97b">kaldi::Arc</a></div><div class="ttdeci">Lattice::Arc Arc</div><div class="ttdef"><b>Definition:</b> <a href="lattice-determinize-non-compact_8cc_source.html#l00035">lattice-determinize-non-compact.cc:35</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="group__hmm__group__graph_html_gad4f0020c7b8d948bae982264abdc8f17"><div class="ttname"><a href="group__hmm__group__graph.html#gad4f0020c7b8d948bae982264abdc8f17">kaldi::GetHmmAsFsaSimple</a></div><div class="ttdeci">fst::VectorFst&lt; fst::StdArc &gt; * GetHmmAsFsaSimple(std::vector&lt; int32 &gt; phone_window, const ContextDependencyInterface &amp;ctx_dep, const TransitionModel &amp;trans_model, BaseFloat prob_scale)</div><div class="ttdoc">Included mainly as a form of documentation, not used in any other code currently. ...</div><div class="ttdef"><b>Definition:</b> <a href="hmm-utils_8cc_source.html#l00155">hmm-utils.cc:155</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga8de8a15a25238f4a7834e4b38ccf3a4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8de8a15a25238f4a7834e4b38ccf3a4b">&#9670;&nbsp;</a></span>SplitToPhones()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> SplitToPhones </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1TransitionModel.html">TransitionModel</a> &amp;&#160;</td>
          <td class="paramname"><em>trans_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; int32 &gt; &amp;&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::vector&lt; int32 &gt; &gt; *&#160;</td>
          <td class="paramname"><em>split_alignment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SplitToPhones splits up the TransitionIds in "alignment" into their individual phones (one vector per instance of a phone). </p>
<p>At output, the sum of the sizes of the vectors in split_alignment will be the same as the corresponding sum for "alignment". The function returns true on success. If the alignment appears to be incomplete, e.g. not ending at the end-state of a phone, it will still break it up into phones but it will return false. For more serious errors it will die or throw an exception. This function works out by itself whether the graph was created with "reordering", and just does the right thing. </p>

<p class="definition">Definition at line <a class="el" href="hmm-utils_8cc_source.html#l00723">723</a> of file <a class="el" href="hmm-utils_8cc_source.html">hmm-utils.cc</a>.</p>

<p class="reference">References <a class="el" href="hmm-utils_8cc_source.html#l00625">kaldi::IsReordered()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, and <a class="el" href="hmm-utils_8cc_source.html#l00659">kaldi::SplitToPhonesInternal()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tree-accu_8cc_source.html#l00036">kaldi::AccumulateTreeStats()</a>, <a class="el" href="lattice-functions_8cc_source.html#l01026">kaldi::CompactLatticeToWordProns()</a>, <a class="el" href="hmm-utils_8cc_source.html#l00926">kaldi::ConvertAlignmentInternal()</a>, <a class="el" href="hmm-utils-idlak_8cc_source.html#l00030">kaldi::GetPhoneWindows()</a>, <a class="el" href="word-align-lattice-lexicon_8cc_source.html#l00745">kaldi::IsPlausibleWord()</a>, <a class="el" href="ali-to-phones_8cc_source.html#l00028">main()</a>, <a class="el" href="hmm-utils-test_8cc_source.html#l00232">kaldi::TestConvertAlignment()</a>, and <a class="el" href="hmm-utils-test_8cc_source.html#l00203">kaldi::TestSplitToPhones()</a>.</p>
<div class="fragment"><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                                                                  {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(split_alignment != NULL);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  split_alignment-&gt;clear();</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="keywordtype">bool</span> is_reordered = <a class="code" href="namespacekaldi.html#aa155e453f2d41dbeec5658a2cccf79b2">IsReordered</a>(trans_model, alignment);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacekaldi.html#aa3d5c28d3187ac6a3bc3bba44821001e">SplitToPhonesInternal</a>(trans_model, alignment,</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                               is_reordered, split_alignment);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_aa155e453f2d41dbeec5658a2cccf79b2"><div class="ttname"><a href="namespacekaldi.html#aa155e453f2d41dbeec5658a2cccf79b2">kaldi::IsReordered</a></div><div class="ttdeci">static bool IsReordered(const TransitionModel &amp;trans_model, const std::vector&lt; int32 &gt; &amp;alignment)</div><div class="ttdef"><b>Definition:</b> <a href="hmm-utils_8cc_source.html#l00625">hmm-utils.cc:625</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa3d5c28d3187ac6a3bc3bba44821001e"><div class="ttname"><a href="namespacekaldi.html#aa3d5c28d3187ac6a3bc3bba44821001e">kaldi::SplitToPhonesInternal</a></div><div class="ttdeci">static bool SplitToPhonesInternal(const TransitionModel &amp;trans_model, const std::vector&lt; int32 &gt; &amp;alignment, bool reordered, std::vector&lt; std::vector&lt; int32 &gt; &gt; *split_output)</div><div class="ttdef"><b>Definition:</b> <a href="hmm-utils_8cc_source.html#l00659">hmm-utils.cc:659</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga53ec248f5bb23021e89d571c7063b108"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga53ec248f5bb23021e89d571c7063b108">&#9670;&nbsp;</a></span>TransitionIdToPdf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 TransitionIdToPdf </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>trans_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="transition-model_8h_source.html#l00324">324</a> of file <a class="el" href="transition-model_8h_source.html">transition-model.h</a>.</p>

<p class="reference">References <a class="el" href="transition-model_8cc_source.html#l00843">kaldi::GetPdfsForPhones()</a>, <a class="el" href="transition-model_8cc_source.html#l00869">kaldi::GetPhonesForPdfs()</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="sgmm2-est-spkvecs-gpost_8cc_source.html#l00033">kaldi::AccumulateForUtterance()</a>, <a class="el" href="nnet-example-functions_8cc_source.html#l00236">DiscriminativeExampleSplitter::CollapseTransitionIds()</a>, <a class="el" href="discriminative-supervision_8cc_source.html#l00169">DiscriminativeSupervisionSplitter::CollapseTransitionIds()</a>, <a class="el" href="fmpe_8cc_source.html#l00522">kaldi::ComputeAmGmmFeatureDeriv()</a>, <a class="el" href="nnet-example-functions_8cc_source.html#l00299">DiscriminativeExampleSplitter::ComputeFrameInfo()</a>, <a class="el" href="posterior_8cc_source.html#l00322">kaldi::ConvertPosteriorToPdfs()</a>, <a class="el" href="hmm-utils_8cc_source.html#l00407">kaldi::GetPdfToTransitionIdTransducer()</a>, <a class="el" href="lattice-rescore-mapped_8cc_source.html#l00031">kaldi::LatticeAcousticRescore()</a>, <a class="el" href="nnet-train-mmi-sequential_8cc_source.html#l00045">kaldi::nnet1::LatticeAcousticRescore()</a>, <a class="el" href="nnet-compute-discriminative_8cc_source.html#l00178">NnetDiscriminativeUpdater::LatticeComputations()</a>, <a class="el" href="lattice-functions_8cc_source.html#l00794">kaldi::LatticeForwardBackwardMpeVariants()</a>, <a class="el" href="decodable-am-diag-gmm-regtree_8h_source.html#l00052">DecodableAmDiagGmmRegtreeFmllr::LogLikelihood()</a>, <a class="el" href="decodable-am-sgmm2_8h_source.html#l00065">DecodableAmSgmm2::LogLikelihood()</a>, <a class="el" href="decodable-matrix_8h_source.html#l00068">DecodableMatrixScaledMapped::LogLikelihood()</a>, <a class="el" href="online-nnet2-decodable_8cc_source.html#l00049">DecodableNnet2Online::LogLikelihood()</a>, <a class="el" href="decodable-am-nnet_8h_source.html#l00077">DecodableAmNnet::LogLikelihood()</a>, <a class="el" href="decodable-am-diag-gmm-regtree_8h_source.html#l00095">DecodableAmDiagGmmRegtreeMllr::LogLikelihood()</a>, <a class="el" href="decodable-am-sgmm2_8h_source.html#l00126">DecodableAmSgmm2Scaled::LogLikelihood()</a>, <a class="el" href="decodable-am-nnet_8h_source.html#l00139">DecodableAmNnetParallel::LogLikelihood()</a>, <a class="el" href="decodable-matrix_8h_source.html#l00148">DecodableMatrixMappedOffset::LogLikelihood()</a>, <a class="el" href="nnet-am-decodable-simple_8cc_source.html#l00078">DecodableAmNnetSimple::LogLikelihood()</a>, <a class="el" href="decodable-simple-looped_8cc_source.html#l00258">DecodableAmNnetSimpleLooped::LogLikelihood()</a>, <a class="el" href="nnet-am-decodable-simple_8cc_source.html#l00358">DecodableAmNnetSimpleParallel::LogLikelihood()</a>, <a class="el" href="discriminative-training_8cc_source.html#l00206">DiscriminativeComputation::LookupNnetOutput()</a>, <a class="el" href="ali-to-pdf_8cc_source.html#l00029">main()</a>, <a class="el" href="posterior_8cc_source.html#l00304">ComparePosteriorByPdfs::operator()()</a>, <a class="el" href="posterior_8cc_source.html#l00501">kaldi::PosteriorToPdfMatrix()</a>, <a class="el" href="lattice-functions_8cc_source.html#l01217">kaldi::RescoreCompactLatticeInternal()</a>, <a class="el" href="nnet-train-transitions_8cc_source.html#l00028">kaldi::nnet2::SetPriors()</a>, and <a class="el" href="nnet3-am-train-transitions_8cc_source.html#l00028">kaldi::nnet3::SetPriors()</a>.</p>
<div class="fragment"><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                                                                    {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(static_cast&lt;size_t&gt;(trans_id) &lt; <a class="code" href="classkaldi_1_1TransitionModel.html#aaef7bb6a22c9a36feadcf3197594f424">id2pdf_id_</a>.size() &amp;&amp;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;               <span class="stringliteral">&quot;Likely graph/model mismatch (graph built from wrong model?)&quot;</span>);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1TransitionModel.html#aaef7bb6a22c9a36feadcf3197594f424">id2pdf_id_</a>[trans_id];</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div><div class="ttc" id="classkaldi_1_1TransitionModel_html_aaef7bb6a22c9a36feadcf3197594f424"><div class="ttname"><a href="classkaldi_1_1TransitionModel.html#aaef7bb6a22c9a36feadcf3197594f424">kaldi::TransitionModel::id2pdf_id_</a></div><div class="ttdeci">std::vector&lt; int32 &gt; id2pdf_id_</div><div class="ttdef"><b>Definition:</b> <a href="transition-model_8h_source.html#l00305">transition-model.h:305</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="gad94539d80f1ba0b8731c6692b624b7a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad94539d80f1ba0b8731c6692b624b7a3">&#9670;&nbsp;</a></span>kNoPdf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int32 kNoPdf = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A constant used in the <a class="el" href="classkaldi_1_1HmmTopology.html" title="A class for storing topology information for phones. ">HmmTopology</a> class as the <a class="el" href="hmm.html#pdf_class">pdf-class</a> kNoPdf, which is used when a HMM-state is nonemitting (has no associated PDF). </p>

<p class="definition">Definition at line <a class="el" href="hmm-topology_8h_source.html#l00087">87</a> of file <a class="el" href="hmm-topology_8h_source.html">hmm-topology.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="hmm-topology_8cc_source.html#l00231">HmmTopology::Check()</a>, <a class="el" href="transition-model_8cc_source.html#l00038">TransitionModel::ComputeTuplesIsHmm()</a>, <a class="el" href="transition-model_8cc_source.html#l00082">TransitionModel::ComputeTuplesNotHmm()</a>, <a class="el" href="hmm-utils_8cc_source.html#l00032">kaldi::GetHmmAsFsa()</a>, <a class="el" href="hmm-utils_8cc_source.html#l00155">kaldi::GetHmmAsFsaSimple()</a>, <a class="el" href="hmm-topology_8cc_source.html#l00039">HmmTopology::Read()</a>, <a class="el" href="hmm-utils_8cc_source.html#l00659">kaldi::SplitToPhonesInternal()</a>, and <a class="el" href="hmm-topology_8cc_source.html#l00164">HmmTopology::Write()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
