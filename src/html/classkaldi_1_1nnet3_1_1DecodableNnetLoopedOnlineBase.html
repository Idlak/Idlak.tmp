<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: DecodableNnetLoopedOnlineBase Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">DecodableNnetLoopedOnlineBase Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="decodable-online-looped_8h_source.html">decodable-online-looped.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for DecodableNnetLoopedOnlineBase:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase__inherit__graph.png" border="0" usemap="#DecodableNnetLoopedOnlineBase_inherit__map" alt="Inheritance graph"/></div>
<map name="DecodableNnetLoopedOnlineBase_inherit__map" id="DecodableNnetLoopedOnlineBase_inherit__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for DecodableNnetLoopedOnlineBase:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase__coll__graph.png" border="0" usemap="#DecodableNnetLoopedOnlineBase_coll__map" alt="Collaboration graph"/></div>
<map name="DecodableNnetLoopedOnlineBase_coll__map" id="DecodableNnetLoopedOnlineBase_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae74b9b86b9bc712f287fbb5c53cdf40b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ae74b9b86b9bc712f287fbb5c53cdf40b">DecodableNnetLoopedOnlineBase</a> (const <a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html">DecodableNnetSimpleLoopedInfo</a> &amp;info, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html">OnlineFeatureInterface</a> *input_features, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html">OnlineFeatureInterface</a> *ivector_features)</td></tr>
<tr class="separator:ae74b9b86b9bc712f287fbb5c53cdf40b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f4fd4567d1879cebfcce3e5a3065bb1"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a3f4fd4567d1879cebfcce3e5a3065bb1">IsLastFrame</a> (int32 subsampled_frame) const</td></tr>
<tr class="memdesc:a3f4fd4567d1879cebfcce3e5a3065bb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if this is the last frame.  <a href="#a3f4fd4567d1879cebfcce3e5a3065bb1">More...</a><br /></td></tr>
<tr class="separator:a3f4fd4567d1879cebfcce3e5a3065bb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a816b68dc299cc3ed745ba1f3036bc3cd"><td class="memItemLeft" align="right" valign="top">virtual int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a816b68dc299cc3ed745ba1f3036bc3cd">NumFramesReady</a> () const</td></tr>
<tr class="memdesc:a816b68dc299cc3ed745ba1f3036bc3cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">The call <a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a816b68dc299cc3ed745ba1f3036bc3cd" title="The call NumFramesReady() will return the number of frames currently available for this decodable obj...">NumFramesReady()</a> will return the number of frames currently available for this decodable object.  <a href="#a816b68dc299cc3ed745ba1f3036bc3cd">More...</a><br /></td></tr>
<tr class="separator:a816b68dc299cc3ed745ba1f3036bc3cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaccfdf54adc942ccd382393e1deb4aa"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#aeaccfdf54adc942ccd382393e1deb4aa">FrameSubsamplingFactor</a> () const</td></tr>
<tr class="separator:aeaccfdf54adc942ccd382393e1deb4aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classkaldi_1_1DecodableInterface"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classkaldi_1_1DecodableInterface')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classkaldi_1_1DecodableInterface.html">DecodableInterface</a></td></tr>
<tr class="memitem:a0fea536380fa24a5ffe6a7ca08633a03 inherit pub_methods_classkaldi_1_1DecodableInterface"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1DecodableInterface.html#a0fea536380fa24a5ffe6a7ca08633a03">LogLikelihood</a> (int32 frame, int32 index)=0</td></tr>
<tr class="memdesc:a0fea536380fa24a5ffe6a7ca08633a03 inherit pub_methods_classkaldi_1_1DecodableInterface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the log likelihood, which will be negated in the decoder.  <a href="classkaldi_1_1DecodableInterface.html#a0fea536380fa24a5ffe6a7ca08633a03">More...</a><br /></td></tr>
<tr class="separator:a0fea536380fa24a5ffe6a7ca08633a03 inherit pub_methods_classkaldi_1_1DecodableInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c8ec83e8237d8001cf79ac186f67faf inherit pub_methods_classkaldi_1_1DecodableInterface"><td class="memItemLeft" align="right" valign="top">virtual int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1DecodableInterface.html#a7c8ec83e8237d8001cf79ac186f67faf">NumIndices</a> () const =0</td></tr>
<tr class="memdesc:a7c8ec83e8237d8001cf79ac186f67faf inherit pub_methods_classkaldi_1_1DecodableInterface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of states in the acoustic model (they will be indexed one-based, i.e.  <a href="classkaldi_1_1DecodableInterface.html#a7c8ec83e8237d8001cf79ac186f67faf">More...</a><br /></td></tr>
<tr class="separator:a7c8ec83e8237d8001cf79ac186f67faf inherit pub_methods_classkaldi_1_1DecodableInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7972a28533e36ce496f37cfbc2b3dc00 inherit pub_methods_classkaldi_1_1DecodableInterface"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1DecodableInterface.html#a7972a28533e36ce496f37cfbc2b3dc00">~DecodableInterface</a> ()</td></tr>
<tr class="separator:a7972a28533e36ce496f37cfbc2b3dc00 inherit pub_methods_classkaldi_1_1DecodableInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a8f98538e5b1872d90bfa56d8f9455dd2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a8f98538e5b1872d90bfa56d8f9455dd2">EnsureFrameIsComputed</a> (int32 subsampled_frame)</td></tr>
<tr class="memdesc:a8f98538e5b1872d90bfa56d8f9455dd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the neural-network outputs for this frame are not cached, this function computes them (and possibly also some later frames).  <a href="#a8f98538e5b1872d90bfa56d8f9455dd2">More...</a><br /></td></tr>
<tr class="separator:a8f98538e5b1872d90bfa56d8f9455dd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ad22c360fe2eff04bdfdbdccef7855b02"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1Matrix.html">Matrix</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad22c360fe2eff04bdfdbdccef7855b02">current_log_post_</a></td></tr>
<tr class="separator:ad22c360fe2eff04bdfdbdccef7855b02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af582f85723f05f2346a251996c20146f"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#af582f85723f05f2346a251996c20146f">num_chunks_computed_</a></td></tr>
<tr class="separator:af582f85723f05f2346a251996c20146f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d11588884b1fc7c9117d8ad8c37d8ad"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a8d11588884b1fc7c9117d8ad8c37d8ad">current_log_post_subsampled_offset_</a></td></tr>
<tr class="separator:a8d11588884b1fc7c9117d8ad8c37d8ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17d6303bfb2bc56faf657ac37462412a"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html">DecodableNnetSimpleLoopedInfo</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a></td></tr>
<tr class="separator:a17d6303bfb2bc56faf657ac37462412a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ac4d45eceac74ac9f4c0a43a1455aa38a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ac4d45eceac74ac9f4c0a43a1455aa38a">AdvanceChunk</a> ()</td></tr>
<tr class="separator:ac4d45eceac74ac9f4c0a43a1455aa38a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42208fdf3ae414a94a3c6cf36d5759a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a42208fdf3ae414a94a3c6cf36d5759a8">KALDI_DISALLOW_COPY_AND_ASSIGN</a> (<a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html">DecodableNnetLoopedOnlineBase</a>)</td></tr>
<tr class="separator:a42208fdf3ae414a94a3c6cf36d5759a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a2ed17a8efa4a52758b1cc20d6081b38a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1OnlineFeatureInterface.html">OnlineFeatureInterface</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">input_features_</a></td></tr>
<tr class="separator:a2ed17a8efa4a52758b1cc20d6081b38a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f0381255bd47fc8bcb646541025e40b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1OnlineFeatureInterface.html">OnlineFeatureInterface</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a3f0381255bd47fc8bcb646541025e40b">ivector_features_</a></td></tr>
<tr class="separator:a3f0381255bd47fc8bcb646541025e40b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8ce439f59016d141a0f49c359d20048"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1nnet3_1_1NnetComputer.html">NnetComputer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad8ce439f59016d141a0f49c359d20048">computer_</a></td></tr>
<tr class="separator:ad8ce439f59016d141a0f49c359d20048"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="decodable-online-looped_8h_source.html#l00056">56</a> of file <a class="el" href="decodable-online-looped_8h_source.html">decodable-online-looped.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae74b9b86b9bc712f287fbb5c53cdf40b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae74b9b86b9bc712f287fbb5c53cdf40b">&#9670;&nbsp;</a></span>DecodableNnetLoopedOnlineBase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html">DecodableNnetLoopedOnlineBase</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html">DecodableNnetSimpleLoopedInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1OnlineFeatureInterface.html">OnlineFeatureInterface</a> *&#160;</td>
          <td class="paramname"><em>input_features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1OnlineFeatureInterface.html">OnlineFeatureInterface</a> *&#160;</td>
          <td class="paramname"><em>ivector_features</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="decodable-online-looped_8cc_source.html#l00026">26</a> of file <a class="el" href="decodable-online-looped_8cc_source.html">decodable-online-looped.cc</a>.</p>

<p class="reference">References <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a1e6abebbe836e85e2eac912470f2a9e8">OnlineFeatureInterface::Dim()</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00112">DecodableNnetLoopedOnlineBase::info_</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00121">DecodableNnetLoopedOnlineBase::input_features_</a>, <a class="el" href="_2nnet-nnet_8cc_source.html#l00669">Nnet::InputDim()</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00122">DecodableNnetLoopedOnlineBase::ivector_features_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, and <a class="el" href="decodable-simple-looped_8h_source.html#l00124">DecodableNnetSimpleLoopedInfo::nnet</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                                             :</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#af582f85723f05f2346a251996c20146f">num_chunks_computed_</a>(0),</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a8d11588884b1fc7c9117d8ad8c37d8ad">current_log_post_subsampled_offset_</a>(-1),</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>(info),</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">input_features_</a>(input_features),</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a3f0381255bd47fc8bcb646541025e40b">ivector_features_</a>(ivector_features),</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad8ce439f59016d141a0f49c359d20048">computer_</a>(<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a4d63349cc9b853175e06a3b0ce6dc592">opts</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions.html#a4493f40ffdbde20bcfbf81716ae74d01">compute_config</a>, <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#aa61e26346b51a1e697f3d00a6eb534a3">computation</a>,</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;              <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a427d029b136a803c4cd3afe570ab4221">nnet</a>, NULL) {   <span class="comment">// NULL is &#39;nnet_to_update&#39;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="comment">// Check that feature dimensions match.</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">input_features_</a> != NULL);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  int32 nnet_input_dim = <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a427d029b136a803c4cd3afe570ab4221">nnet</a>.<a class="code" href="classkaldi_1_1nnet3_1_1Nnet.html#aed4b9f82edbecf5629a61afe586838bf">InputDim</a>(<span class="stringliteral">&quot;input&quot;</span>),</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      nnet_ivector_dim = <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a427d029b136a803c4cd3afe570ab4221">nnet</a>.<a class="code" href="classkaldi_1_1nnet3_1_1Nnet.html#aed4b9f82edbecf5629a61afe586838bf">InputDim</a>(<span class="stringliteral">&quot;ivector&quot;</span>),</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        feat_input_dim = <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">input_features_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a1e6abebbe836e85e2eac912470f2a9e8">Dim</a>(),</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;      feat_ivector_dim = (<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a3f0381255bd47fc8bcb646541025e40b">ivector_features_</a> != NULL ?</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                          <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a3f0381255bd47fc8bcb646541025e40b">ivector_features_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a1e6abebbe836e85e2eac912470f2a9e8">Dim</a>() : -1);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keywordflow">if</span> (nnet_input_dim != feat_input_dim) {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Input feature dimension mismatch: got &quot;</span> &lt;&lt; feat_input_dim</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; but network expects &quot;</span> &lt;&lt; nnet_input_dim;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  }</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">if</span> (nnet_ivector_dim != feat_ivector_dim) {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Ivector feature dimension mismatch: got &quot;</span> &lt;&lt; feat_ivector_dim</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; but network expects &quot;</span> &lt;&lt; nnet_ivector_dim;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_aa61e26346b51a1e697f3d00a6eb534a3"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#aa61e26346b51a1e697f3d00a6eb534a3">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::computation</a></div><div class="ttdeci">NnetComputation computation</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00153">decodable-simple-looped.h:153</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1Nnet_html_aed4b9f82edbecf5629a61afe586838bf"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1Nnet.html#aed4b9f82edbecf5629a61afe586838bf">kaldi::nnet3::Nnet::InputDim</a></div><div class="ttdeci">int32 InputDim(const std::string &amp;input_name) const</div><div class="ttdef"><b>Definition:</b> <a href="_2nnet-nnet_8cc_source.html#l00669">nnet-nnet.cc:669</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_a427d029b136a803c4cd3afe570ab4221"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a427d029b136a803c4cd3afe570ab4221">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::nnet</a></div><div class="ttdeci">const Nnet &amp; nnet</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00124">decodable-simple-looped.h:124</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_a3f0381255bd47fc8bcb646541025e40b"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a3f0381255bd47fc8bcb646541025e40b">kaldi::nnet3::DecodableNnetLoopedOnlineBase::ivector_features_</a></div><div class="ttdeci">OnlineFeatureInterface * ivector_features_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00122">decodable-online-looped.h:122</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_ad8ce439f59016d141a0f49c359d20048"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad8ce439f59016d141a0f49c359d20048">kaldi::nnet3::DecodableNnetLoopedOnlineBase::computer_</a></div><div class="ttdeci">NnetComputer computer_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00124">decodable-online-looped.h:124</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_a4d63349cc9b853175e06a3b0ce6dc592"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a4d63349cc9b853175e06a3b0ce6dc592">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::opts</a></div><div class="ttdeci">const NnetSimpleLoopedComputationOptions &amp; opts</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00122">decodable-simple-looped.h:122</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_a17d6303bfb2bc56faf657ac37462412a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">kaldi::nnet3::DecodableNnetLoopedOnlineBase::info_</a></div><div class="ttdeci">const DecodableNnetSimpleLoopedInfo &amp; info_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00112">decodable-online-looped.h:112</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_a8d11588884b1fc7c9117d8ad8c37d8ad"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a8d11588884b1fc7c9117d8ad8c37d8ad">kaldi::nnet3::DecodableNnetLoopedOnlineBase::current_log_post_subsampled_offset_</a></div><div class="ttdeci">int32 current_log_post_subsampled_offset_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00110">decodable-online-looped.h:110</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions_html_a4493f40ffdbde20bcfbf81716ae74d01"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions.html#a4493f40ffdbde20bcfbf81716ae74d01">kaldi::nnet3::NnetSimpleLoopedComputationOptions::compute_config</a></div><div class="ttdeci">NnetComputeOptions compute_config</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00053">decodable-simple-looped.h:53</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_af582f85723f05f2346a251996c20146f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#af582f85723f05f2346a251996c20146f">kaldi::nnet3::DecodableNnetLoopedOnlineBase::num_chunks_computed_</a></div><div class="ttdeci">int32 num_chunks_computed_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00105">decodable-online-looped.h:105</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_a2ed17a8efa4a52758b1cc20d6081b38a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">kaldi::nnet3::DecodableNnetLoopedOnlineBase::input_features_</a></div><div class="ttdeci">OnlineFeatureInterface * input_features_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00121">decodable-online-looped.h:121</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a1e6abebbe836e85e2eac912470f2a9e8"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a1e6abebbe836e85e2eac912470f2a9e8">kaldi::OnlineFeatureInterface::Dim</a></div><div class="ttdeci">virtual int32 Dim() const =0</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac4d45eceac74ac9f4c0a43a1455aa38a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4d45eceac74ac9f4c0a43a1455aa38a">&#9670;&nbsp;</a></span>AdvanceChunk()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AdvanceChunk </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="decodable-online-looped_8cc_source.html#l00112">112</a> of file <a class="el" href="decodable-online-looped_8cc_source.html">decodable-online-looped.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet3_2nnet-compute_8cc_source.html#l00542">NnetComputer::AcceptInput()</a>, <a class="el" href="decodable-simple-looped_8h_source.html#l00050">NnetSimpleLoopedComputationOptions::acoustic_scale</a>, <a class="el" href="cu-matrix_8cc_source.html#l01248">CuMatrixBase&lt; Real &gt;::AddVecToRows()</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00124">DecodableNnetLoopedOnlineBase::computer_</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l00996">MatrixBase&lt; Real &gt;::CopyRowsFromVec()</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00102">DecodableNnetLoopedOnlineBase::current_log_post_</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00110">DecodableNnetLoopedOnlineBase::current_log_post_subsampled_offset_</a>, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a1e6abebbe836e85e2eac912470f2a9e8">OnlineFeatureInterface::Dim()</a>, <a class="el" href="decodable-simple-looped_8h_source.html#l00048">NnetSimpleLoopedComputationOptions::frame_subsampling_factor</a>, <a class="el" href="decodable-simple-looped_8h_source.html#l00132">DecodableNnetSimpleLoopedInfo::frames_left_context</a>, <a class="el" href="decodable-simple-looped_8h_source.html#l00138">DecodableNnetSimpleLoopedInfo::frames_per_chunk</a>, <a class="el" href="decodable-simple-looped_8h_source.html#l00134">DecodableNnetSimpleLoopedInfo::frames_right_context</a>, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">OnlineFeatureInterface::GetFrame()</a>, <a class="el" href="nnet3_2nnet-compute_8cc_source.html#l00582">NnetComputer::GetOutputDestructive()</a>, <a class="el" href="decodable-simple-looped_8h_source.html#l00145">DecodableNnetSimpleLoopedInfo::has_ivectors</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00112">DecodableNnetLoopedOnlineBase::info_</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00121">DecodableNnetLoopedOnlineBase::input_features_</a>, <a class="el" href="nnet-computation_8h_source.html#l00115">ComputationRequest::inputs</a>, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">OnlineFeatureInterface::IsLastFrame()</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00122">DecodableNnetLoopedOnlineBase::ivector_features_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="decodable-simple-looped_8h_source.html#l00127">DecodableNnetSimpleLoopedInfo::log_priors</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00105">DecodableNnetLoopedOnlineBase::num_chunks_computed_</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00064">MatrixBase&lt; Real &gt;::NumCols()</a>, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">OnlineFeatureInterface::NumFramesReady()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00061">MatrixBase&lt; Real &gt;::NumRows()</a>, <a class="el" href="decodable-simple-looped_8h_source.html#l00122">DecodableNnetSimpleLoopedInfo::opts</a>, <a class="el" href="decodable-simple-looped_8h_source.html#l00141">DecodableNnetSimpleLoopedInfo::output_dim</a>, <a class="el" href="decodable-simple-looped_8h_source.html#l00150">DecodableNnetSimpleLoopedInfo::request1</a>, <a class="el" href="decodable-simple-looped_8h_source.html#l00150">DecodableNnetSimpleLoopedInfo::request2</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l00818">Matrix&lt; Real &gt;::Resize()</a>, <a class="el" href="nnet3_2nnet-compute_8cc_source.html#l00508">NnetComputer::Run()</a>, <a class="el" href="cu-matrix_8cc_source.html#l00610">CuMatrixBase&lt; Real &gt;::Scale()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l02209">Matrix&lt; Real &gt;::Swap()</a>, and <a class="el" href="cu-matrix_8cc_source.html#l00122">CuMatrix&lt; Real &gt;::Swap()</a>.</p>

<p class="reference">Referenced by <a class="el" href="decodable-online-looped_8h_source.html#l00092">DecodableNnetLoopedOnlineBase::EnsureFrameIsComputed()</a>.</p>
<div class="fragment"><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                                 {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">// Prepare the input data for the next chunk of features.</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">// note: &#39;end&#39; means one past the last.</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  int32 begin_input_frame, end_input_frame;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#af582f85723f05f2346a251996c20146f">num_chunks_computed_</a> == 0) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    begin_input_frame = -<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a0d0d50028cddfd0bd5986343125035e5">frames_left_context</a>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">// note: end is last plus one.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    end_input_frame = <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#ab1d720abcb203912db2b8bdc8e7bf4d4">frames_per_chunk</a> + <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#adc399b464d3a17b50ab64f2cf897c91a">frames_right_context</a>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">// note: begin_input_frame will be the same as the previous end_input_frame.</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">// you can verify this directly if num_chunks_computed_ == 0, and then by</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// induction.</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    begin_input_frame = <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#af582f85723f05f2346a251996c20146f">num_chunks_computed_</a> * <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#ab1d720abcb203912db2b8bdc8e7bf4d4">frames_per_chunk</a> +</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#adc399b464d3a17b50ab64f2cf897c91a">frames_right_context</a>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    end_input_frame = begin_input_frame + <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#ab1d720abcb203912db2b8bdc8e7bf4d4">frames_per_chunk</a>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  int32 num_feature_frames_ready = <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">input_features_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">NumFramesReady</a>();</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordtype">bool</span> is_finished = <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">input_features_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">IsLastFrame</a>(num_feature_frames_ready - 1);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">if</span> (end_input_frame &gt; num_feature_frames_ready &amp;&amp; !is_finished) {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// we shouldn&#39;t be attempting to read past the end of the available features</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">// until we have reached the end of the input (i.e. the end-user called</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// InputFinished(), announcing that there is no more waveform; at this point</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// we pad as needed with copies of the last frame, to flush out the last of</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// the output.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// If the following error happens, it likely indicates a bug in this</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">// decodable code somewhere (although it could possibly indicate the</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// user asking for a frame that was not ready, which would be a misuse</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">// of this class.. it can be figured out from gdb as in either case it</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// would be a bug in the code.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Attempt to access frame past the end of the available input&quot;</span>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  CuMatrix&lt;BaseFloat&gt; feats_chunk;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  { <span class="comment">// this block sets &#39;feats_chunk&#39;.</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    Matrix&lt;BaseFloat&gt; this_feats(end_input_frame - begin_input_frame,</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                 <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">input_features_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a1e6abebbe836e85e2eac912470f2a9e8">Dim</a>());</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = begin_input_frame; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; end_input_frame; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      SubVector&lt;BaseFloat&gt; this_row(this_feats, <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> - begin_input_frame);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      int32 input_frame = <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">if</span> (input_frame &lt; 0) input_frame = 0;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="keywordflow">if</span> (input_frame &gt;= num_feature_frames_ready)</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        input_frame = num_feature_frames_ready - 1;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">input_features_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">GetFrame</a>(input_frame, &amp;this_row);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    feats_chunk.Swap(&amp;this_feats);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad8ce439f59016d141a0f49c359d20048">computer_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1NnetComputer.html#abbd759fdb068a3597fc69655e688c6ac">AcceptInput</a>(<span class="stringliteral">&quot;input&quot;</span>, &amp;feats_chunk);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a407e1f4904409551409d9c5711b426d8">has_ivectors</a>) {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a3f0381255bd47fc8bcb646541025e40b">ivector_features_</a> != NULL);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#ac057508fc12ac801ebdc2c3c73f5e94a">request1</a>.<a class="code" href="structkaldi_1_1nnet3_1_1ComputationRequest.html#a56ccdfeff2303e6dee20771d1a4fad78">inputs</a>.size() == 2);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">// all but the 1st chunk should have 1 iVector, but there is no need to</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// assume this.</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    int32 num_ivectors = (<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#af582f85723f05f2346a251996c20146f">num_chunks_computed_</a> == 0 ?</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                          <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#ac057508fc12ac801ebdc2c3c73f5e94a">request1</a>.<a class="code" href="structkaldi_1_1nnet3_1_1ComputationRequest.html#a56ccdfeff2303e6dee20771d1a4fad78">inputs</a>[1].indexes.size() :</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                          <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a9e82f06b0221ebaa6f687f7d9855cdf4">request2</a>.<a class="code" href="structkaldi_1_1nnet3_1_1ComputationRequest.html#a56ccdfeff2303e6dee20771d1a4fad78">inputs</a>[1].indexes.size());</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(num_ivectors &gt; 0);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    Vector&lt;BaseFloat&gt; ivector(<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a3f0381255bd47fc8bcb646541025e40b">ivector_features_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a1e6abebbe836e85e2eac912470f2a9e8">Dim</a>());</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">// we just get the iVector from the last input frame we needed,</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// reduced as necessary</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">// we don&#39;t bother trying to be &#39;accurate&#39; in getting the iVectors</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// for their &#39;correct&#39; frames, because in general using the</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">// iVector from as large &#39;t&#39; as possible will be better.</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    int32 most_recent_input_frame = num_feature_frames_ready - 1,</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      num_ivector_frames_ready = <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a3f0381255bd47fc8bcb646541025e40b">ivector_features_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">NumFramesReady</a>();</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span> (num_ivector_frames_ready &gt; 0) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      int32 ivector_frame_to_use = std::min&lt;int32&gt;(</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;          most_recent_input_frame, num_ivector_frames_ready - 1);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a3f0381255bd47fc8bcb646541025e40b">ivector_features_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">GetFrame</a>(ivector_frame_to_use,</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                                  &amp;ivector);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// else just leave the iVector zero (would only happen with very small</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment">// chunk-size, like a chunk size of 2 which would be very inefficient; and</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">// only at file begin.</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">// note: we expect num_ivectors to be 1 in practice.</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    Matrix&lt;BaseFloat&gt; ivectors(num_ivectors,</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                               ivector.Dim());</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    ivectors.CopyRowsFromVec(ivector);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    CuMatrix&lt;BaseFloat&gt; cu_ivectors;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    cu_ivectors.Swap(&amp;ivectors);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad8ce439f59016d141a0f49c359d20048">computer_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1NnetComputer.html#abbd759fdb068a3597fc69655e688c6ac">AcceptInput</a>(<span class="stringliteral">&quot;ivector&quot;</span>, &amp;cu_ivectors);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad8ce439f59016d141a0f49c359d20048">computer_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1NnetComputer.html#aa3eca255b6be227d7d901cc2a72017a5">Run</a>();</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">// Note: it&#39;s possible in theory that if you had weird recurrence that went</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">// directly from the output, the call to GetOutputDestructive() would cause</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// a crash on the next chunk.  If that happens, GetOutput() should be used</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// instead of GetOutputDestructive().  But we don&#39;t anticipate this will</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">// happen in practice.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    CuMatrix&lt;BaseFloat&gt; output;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad8ce439f59016d141a0f49c359d20048">computer_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1NnetComputer.html#ac566fbb7f5bd3fb658b22ccf6c0c4710">GetOutputDestructive</a>(<span class="stringliteral">&quot;output&quot;</span>, &amp;output);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#aa51b73591193f3357d8998d8302985f4">log_priors</a>.Dim() != 0) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="comment">// subtract log-prior (divide by prior)</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      output.AddVecToRows(-1.0, <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#aa51b73591193f3357d8998d8302985f4">log_priors</a>);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// apply the acoustic scale</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    output.Scale(<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a4d63349cc9b853175e06a3b0ce6dc592">opts</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions.html#adf28936259c04ff2a4c4d1af293ffea9">acoustic_scale</a>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad22c360fe2eff04bdfdbdccef7855b02">current_log_post_</a>.<a class="code" href="classkaldi_1_1Matrix.html#a70c095b28633f8874632a9d239a903d5">Resize</a>(0, 0);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad22c360fe2eff04bdfdbdccef7855b02">current_log_post_</a>.<a class="code" href="classkaldi_1_1Matrix.html#a70c651bf7df69064c1406a4cb1e061f4">Swap</a>(&amp;output);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad22c360fe2eff04bdfdbdccef7855b02">current_log_post_</a>.<a class="code" href="classkaldi_1_1MatrixBase.html#a01cf7fccddf8deddc75b34408144ded1">NumRows</a>() == <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#ab1d720abcb203912db2b8bdc8e7bf4d4">frames_per_chunk</a> /</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;               <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a4d63349cc9b853175e06a3b0ce6dc592">opts</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions.html#aad93df0dcdc32cf7ef176162619a9b47">frame_subsampling_factor</a> &amp;&amp;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;               <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad22c360fe2eff04bdfdbdccef7855b02">current_log_post_</a>.<a class="code" href="classkaldi_1_1MatrixBase.html#acd4c9f53536602585f5aff9e8005299a">NumCols</a>() == <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#ab158eb25445ca9f0bd470a95d72d8a0f">output_dim</a>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#af582f85723f05f2346a251996c20146f">num_chunks_computed_</a>++;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a8d11588884b1fc7c9117d8ad8c37d8ad">current_log_post_subsampled_offset_</a> =</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      (num_chunks_computed_ - 1) *</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      (<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#ab1d720abcb203912db2b8bdc8e7bf4d4">frames_per_chunk</a> / <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a4d63349cc9b853175e06a3b0ce6dc592">opts</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions.html#aad93df0dcdc32cf7ef176162619a9b47">frame_subsampling_factor</a>);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div><div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_ac057508fc12ac801ebdc2c3c73f5e94a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#ac057508fc12ac801ebdc2c3c73f5e94a">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::request1</a></div><div class="ttdeci">ComputationRequest request1</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00150">decodable-simple-looped.h:150</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions_html_aad93df0dcdc32cf7ef176162619a9b47"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions.html#aad93df0dcdc32cf7ef176162619a9b47">kaldi::nnet3::NnetSimpleLoopedComputationOptions::frame_subsampling_factor</a></div><div class="ttdeci">int32 frame_subsampling_factor</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00048">decodable-simple-looped.h:48</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_ab158eb25445ca9f0bd470a95d72d8a0f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#ab158eb25445ca9f0bd470a95d72d8a0f">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::output_dim</a></div><div class="ttdeci">int32 output_dim</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00141">decodable-simple-looped.h:141</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_acd4c9f53536602585f5aff9e8005299a"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#acd4c9f53536602585f5aff9e8005299a">kaldi::MatrixBase::NumCols</a></div><div class="ttdeci">MatrixIndexT NumCols() const</div><div class="ttdoc">Returns number of columns (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00064">kaldi-matrix.h:64</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_a9e82f06b0221ebaa6f687f7d9855cdf4"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a9e82f06b0221ebaa6f687f7d9855cdf4">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::request2</a></div><div class="ttdeci">ComputationRequest request2</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00150">decodable-simple-looped.h:150</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a7ee271dbb4707753e1ee4b0aa45eae37"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a7ee271dbb4707753e1ee4b0aa45eae37">kaldi::OnlineFeatureInterface::GetFrame</a></div><div class="ttdeci">virtual void GetFrame(int32 frame, VectorBase&lt; BaseFloat &gt; *feat)=0</div><div class="ttdoc">Gets the feature vector for this frame. </div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_adc399b464d3a17b50ab64f2cf897c91a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#adc399b464d3a17b50ab64f2cf897c91a">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::frames_right_context</a></div><div class="ttdeci">int32 frames_right_context</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00134">decodable-simple-looped.h:134</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationRequest_html_a56ccdfeff2303e6dee20771d1a4fad78"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationRequest.html#a56ccdfeff2303e6dee20771d1a4fad78">kaldi::nnet3::ComputationRequest::inputs</a></div><div class="ttdeci">std::vector&lt; IoSpecification &gt; inputs</div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation_8h_source.html#l00115">nnet-computation.h:115</a></div></div>
<div class="ttc" id="classkaldi_1_1Matrix_html_a70c651bf7df69064c1406a4cb1e061f4"><div class="ttname"><a href="classkaldi_1_1Matrix.html#a70c651bf7df69064c1406a4cb1e061f4">kaldi::Matrix::Swap</a></div><div class="ttdeci">void Swap(Matrix&lt; Real &gt; *other)</div><div class="ttdoc">Swaps the contents of *this and *other. Shallow swap. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l02209">kaldi-matrix.cc:2209</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_a3f0381255bd47fc8bcb646541025e40b"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a3f0381255bd47fc8bcb646541025e40b">kaldi::nnet3::DecodableNnetLoopedOnlineBase::ivector_features_</a></div><div class="ttdeci">OnlineFeatureInterface * ivector_features_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00122">decodable-online-looped.h:122</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_ad8ce439f59016d141a0f49c359d20048"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad8ce439f59016d141a0f49c359d20048">kaldi::nnet3::DecodableNnetLoopedOnlineBase::computer_</a></div><div class="ttdeci">NnetComputer computer_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00124">decodable-online-looped.h:124</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_a4d63349cc9b853175e06a3b0ce6dc592"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a4d63349cc9b853175e06a3b0ce6dc592">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::opts</a></div><div class="ttdeci">const NnetSimpleLoopedComputationOptions &amp; opts</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00122">decodable-simple-looped.h:122</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetComputer_html_abbd759fdb068a3597fc69655e688c6ac"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetComputer.html#abbd759fdb068a3597fc69655e688c6ac">kaldi::nnet3::NnetComputer::AcceptInput</a></div><div class="ttdeci">void AcceptInput(const std::string &amp;node_name, CuMatrix&lt; BaseFloat &gt; *input)</div><div class="ttdoc">e.g. </div><div class="ttdef"><b>Definition:</b> <a href="nnet3_2nnet-compute_8cc_source.html#l00542">nnet-compute.cc:542</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_ad22c360fe2eff04bdfdbdccef7855b02"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad22c360fe2eff04bdfdbdccef7855b02">kaldi::nnet3::DecodableNnetLoopedOnlineBase::current_log_post_</a></div><div class="ttdeci">Matrix&lt; BaseFloat &gt; current_log_post_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00102">decodable-online-looped.h:102</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_a0d0d50028cddfd0bd5986343125035e5"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a0d0d50028cddfd0bd5986343125035e5">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::frames_left_context</a></div><div class="ttdeci">int32 frames_left_context</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00132">decodable-simple-looped.h:132</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_a17d6303bfb2bc56faf657ac37462412a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">kaldi::nnet3::DecodableNnetLoopedOnlineBase::info_</a></div><div class="ttdeci">const DecodableNnetSimpleLoopedInfo &amp; info_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00112">decodable-online-looped.h:112</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a9e2dede1c20fce727f2666fe45a06ab3"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">kaldi::OnlineFeatureInterface::IsLastFrame</a></div><div class="ttdeci">virtual bool IsLastFrame(int32 frame) const =0</div><div class="ttdoc">Returns true if this is the last frame. </div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_a8d11588884b1fc7c9117d8ad8c37d8ad"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a8d11588884b1fc7c9117d8ad8c37d8ad">kaldi::nnet3::DecodableNnetLoopedOnlineBase::current_log_post_subsampled_offset_</a></div><div class="ttdeci">int32 current_log_post_subsampled_offset_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00110">decodable-online-looped.h:110</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_ab1d720abcb203912db2b8bdc8e7bf4d4"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#ab1d720abcb203912db2b8bdc8e7bf4d4">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::frames_per_chunk</a></div><div class="ttdeci">int32 frames_per_chunk</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00138">decodable-simple-looped.h:138</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_a01cf7fccddf8deddc75b34408144ded1"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#a01cf7fccddf8deddc75b34408144ded1">kaldi::MatrixBase::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const</div><div class="ttdoc">Returns number of rows (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00061">kaldi-matrix.h:61</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions_html_adf28936259c04ff2a4c4d1af293ffea9"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions.html#adf28936259c04ff2a4c4d1af293ffea9">kaldi::nnet3::NnetSimpleLoopedComputationOptions::acoustic_scale</a></div><div class="ttdeci">BaseFloat acoustic_scale</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00050">decodable-simple-looped.h:50</a></div></div>
<div class="ttc" id="classkaldi_1_1Matrix_html_a70c095b28633f8874632a9d239a903d5"><div class="ttname"><a href="classkaldi_1_1Matrix.html#a70c095b28633f8874632a9d239a903d5">kaldi::Matrix::Resize</a></div><div class="ttdeci">void Resize(const MatrixIndexT r, const MatrixIndexT c, MatrixResizeType resize_type=kSetZero, MatrixStrideType stride_type=kDefaultStride)</div><div class="ttdoc">Sets matrix to a specified size (zero is OK as long as both r and c are zero). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l00818">kaldi-matrix.cc:818</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetComputer_html_ac566fbb7f5bd3fb658b22ccf6c0c4710"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetComputer.html#ac566fbb7f5bd3fb658b22ccf6c0c4710">kaldi::nnet3::NnetComputer::GetOutputDestructive</a></div><div class="ttdeci">void GetOutputDestructive(const std::string &amp;output_name, CuMatrix&lt; BaseFloat &gt; *output)</div><div class="ttdef"><b>Definition:</b> <a href="nnet3_2nnet-compute_8cc_source.html#l00582">nnet-compute.cc:582</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_af582f85723f05f2346a251996c20146f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#af582f85723f05f2346a251996c20146f">kaldi::nnet3::DecodableNnetLoopedOnlineBase::num_chunks_computed_</a></div><div class="ttdeci">int32 num_chunks_computed_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00105">decodable-online-looped.h:105</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_aa51b73591193f3357d8998d8302985f4"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#aa51b73591193f3357d8998d8302985f4">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::log_priors</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; log_priors</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00127">decodable-simple-looped.h:127</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a6d4812ed73de799c457bea7f483f3593"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">kaldi::OnlineFeatureInterface::NumFramesReady</a></div><div class="ttdeci">virtual int32 NumFramesReady() const =0</div><div class="ttdoc">returns the feature dimension. </div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_a2ed17a8efa4a52758b1cc20d6081b38a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">kaldi::nnet3::DecodableNnetLoopedOnlineBase::input_features_</a></div><div class="ttdeci">OnlineFeatureInterface * input_features_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00121">decodable-online-looped.h:121</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_a407e1f4904409551409d9c5711b426d8"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a407e1f4904409551409d9c5711b426d8">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::has_ivectors</a></div><div class="ttdeci">bool has_ivectors</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00145">decodable-simple-looped.h:145</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a1e6abebbe836e85e2eac912470f2a9e8"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a1e6abebbe836e85e2eac912470f2a9e8">kaldi::OnlineFeatureInterface::Dim</a></div><div class="ttdeci">virtual int32 Dim() const =0</div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NnetComputer_html_aa3eca255b6be227d7d901cc2a72017a5"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NnetComputer.html#aa3eca255b6be227d7d901cc2a72017a5">kaldi::nnet3::NnetComputer::Run</a></div><div class="ttdeci">void Run()</div><div class="ttdoc">This does either the forward or backward computation, depending when it is called (in a typical compu...</div><div class="ttdef"><b>Definition:</b> <a href="nnet3_2nnet-compute_8cc_source.html#l00508">nnet-compute.cc:508</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f98538e5b1872d90bfa56d8f9455dd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f98538e5b1872d90bfa56d8f9455dd2">&#9670;&nbsp;</a></span>EnsureFrameIsComputed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void EnsureFrameIsComputed </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>subsampled_frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the neural-network outputs for this frame are not cached, this function computes them (and possibly also some later frames). </p>
<p>Note: the frame-index is called 'subsampled_frame' because if frame-subsampling-factor is not 1, it's an index that is "after subsampling", i.e. it changes more slowly than the input-feature index. </p>

<p class="definition">Definition at line <a class="el" href="decodable-online-looped_8h_source.html#l00092">92</a> of file <a class="el" href="decodable-online-looped_8h_source.html">decodable-online-looped.h</a>.</p>

<p class="reference">References <a class="el" href="decodable-online-looped_8cc_source.html#l00112">DecodableNnetLoopedOnlineBase::AdvanceChunk()</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00102">DecodableNnetLoopedOnlineBase::current_log_post_</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00110">DecodableNnetLoopedOnlineBase::current_log_post_subsampled_offset_</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, and <a class="el" href="kaldi-matrix_8h_source.html#l00061">MatrixBase&lt; Real &gt;::NumRows()</a>.</p>

<p class="reference">Referenced by <a class="el" href="decodable-online-looped_8cc_source.html#l00232">DecodableNnetLoopedOnline::LogLikelihood()</a>, and <a class="el" href="decodable-online-looped_8cc_source.html#l00242">DecodableAmNnetLoopedOnline::LogLikelihood()</a>.</p>
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                                                            {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(subsampled_frame &gt;= <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a8d11588884b1fc7c9117d8ad8c37d8ad">current_log_post_subsampled_offset_</a> &amp;&amp;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                 <span class="stringliteral">&quot;Frames must be accessed in order.&quot;</span>);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">while</span> (subsampled_frame &gt;= <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a8d11588884b1fc7c9117d8ad8c37d8ad">current_log_post_subsampled_offset_</a> +</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;           <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad22c360fe2eff04bdfdbdccef7855b02">current_log_post_</a>.<a class="code" href="classkaldi_1_1MatrixBase.html#a01cf7fccddf8deddc75b34408144ded1">NumRows</a>())</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ac4d45eceac74ac9f4c0a43a1455aa38a">AdvanceChunk</a>();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  }</div><div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_ad22c360fe2eff04bdfdbdccef7855b02"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ad22c360fe2eff04bdfdbdccef7855b02">kaldi::nnet3::DecodableNnetLoopedOnlineBase::current_log_post_</a></div><div class="ttdeci">Matrix&lt; BaseFloat &gt; current_log_post_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00102">decodable-online-looped.h:102</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_a8d11588884b1fc7c9117d8ad8c37d8ad"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a8d11588884b1fc7c9117d8ad8c37d8ad">kaldi::nnet3::DecodableNnetLoopedOnlineBase::current_log_post_subsampled_offset_</a></div><div class="ttdeci">int32 current_log_post_subsampled_offset_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00110">decodable-online-looped.h:110</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_a01cf7fccddf8deddc75b34408144ded1"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#a01cf7fccddf8deddc75b34408144ded1">kaldi::MatrixBase::NumRows</a></div><div class="ttdeci">MatrixIndexT NumRows() const</div><div class="ttdoc">Returns number of rows (or zero for emtpy matrix). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00061">kaldi-matrix.h:61</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_ac4d45eceac74ac9f4c0a43a1455aa38a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#ac4d45eceac74ac9f4c0a43a1455aa38a">kaldi::nnet3::DecodableNnetLoopedOnlineBase::AdvanceChunk</a></div><div class="ttdeci">void AdvanceChunk()</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8cc_source.html#l00112">decodable-online-looped.cc:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeaccfdf54adc942ccd382393e1deb4aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaccfdf54adc942ccd382393e1deb4aa">&#9670;&nbsp;</a></span>FrameSubsamplingFactor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 FrameSubsamplingFactor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="decodable-online-looped_8h_source.html#l00080">80</a> of file <a class="el" href="decodable-online-looped_8h_source.html">decodable-online-looped.h</a>.</p>

<p class="reference">References <a class="el" href="decodable-simple-looped_8h_source.html#l00048">NnetSimpleLoopedComputationOptions::frame_subsampling_factor</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00112">DecodableNnetLoopedOnlineBase::info_</a>, and <a class="el" href="decodable-simple-looped_8h_source.html#l00122">DecodableNnetSimpleLoopedInfo::opts</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                                       {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a4d63349cc9b853175e06a3b0ce6dc592">opts</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions.html#aad93df0dcdc32cf7ef176162619a9b47">frame_subsampling_factor</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  }</div><div class="ttc" id="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions_html_aad93df0dcdc32cf7ef176162619a9b47"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions.html#aad93df0dcdc32cf7ef176162619a9b47">kaldi::nnet3::NnetSimpleLoopedComputationOptions::frame_subsampling_factor</a></div><div class="ttdeci">int32 frame_subsampling_factor</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00048">decodable-simple-looped.h:48</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_a4d63349cc9b853175e06a3b0ce6dc592"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a4d63349cc9b853175e06a3b0ce6dc592">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::opts</a></div><div class="ttdeci">const NnetSimpleLoopedComputationOptions &amp; opts</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00122">decodable-simple-looped.h:122</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_a17d6303bfb2bc56faf657ac37462412a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">kaldi::nnet3::DecodableNnetLoopedOnlineBase::info_</a></div><div class="ttdeci">const DecodableNnetSimpleLoopedInfo &amp; info_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00112">decodable-online-looped.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3f4fd4567d1879cebfcce3e5a3065bb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f4fd4567d1879cebfcce3e5a3065bb1">&#9670;&nbsp;</a></span>IsLastFrame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> IsLastFrame </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if this is the last frame. </p>
<p>Frames are zero-based, so the first frame is zero. IsLastFrame(-1) will return false, unless the file is empty (which is a case that I'm not sure all the code will handle, so be careful). Caution: the behavior of this function in an online setting is being changed somewhat. In future it may return false in cases where we haven't yet decided to terminate decoding, but later true if we decide to terminate decoding. The plan in future is to rely more on <a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a816b68dc299cc3ed745ba1f3036bc3cd" title="The call NumFramesReady() will return the number of frames currently available for this decodable obj...">NumFramesReady()</a>, and in future, <a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a3f4fd4567d1879cebfcce3e5a3065bb1" title="Returns true if this is the last frame. ">IsLastFrame()</a> would always return false in an online-decoding setting, and would only return true in a decoding-from-matrix setting where we want to allow the last delta or LDA features to be flushed out for compatibility with the baseline setup. </p>

<p>Implements <a class="el" href="classkaldi_1_1DecodableInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">DecodableInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="decodable-online-looped_8cc_source.html#l00088">88</a> of file <a class="el" href="decodable-online-looped_8cc_source.html">decodable-online-looped.cc</a>.</p>

<p class="reference">References <a class="el" href="decodable-simple-looped_8h_source.html#l00048">NnetSimpleLoopedComputationOptions::frame_subsampling_factor</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00112">DecodableNnetLoopedOnlineBase::info_</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00121">DecodableNnetLoopedOnlineBase::input_features_</a>, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">OnlineFeatureInterface::IsLastFrame()</a>, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">OnlineFeatureInterface::NumFramesReady()</a>, and <a class="el" href="decodable-simple-looped_8h_source.html#l00122">DecodableNnetSimpleLoopedInfo::opts</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                                  {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// To understand this code, compare it with the code of NumFramesReady(),</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// it follows the same structure.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  int32 features_ready = <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">input_features_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">NumFramesReady</a>();</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordflow">if</span> (features_ready == 0) {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">if</span> (subsampled_frame == -1 &amp;&amp; <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">input_features_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">IsLastFrame</a>(-1)) {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="comment">// the attempt to handle this rather pathological case (input finished</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="comment">// but no frames ready) is a little quixotic as we have not properly</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="comment">// tested this and other parts of the code may die.</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  }</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordtype">bool</span> input_finished = <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">input_features_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">IsLastFrame</a>(features_ready - 1);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">if</span> (!input_finished)</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  int32 sf = <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a4d63349cc9b853175e06a3b0ce6dc592">opts</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions.html#aad93df0dcdc32cf7ef176162619a9b47">frame_subsampling_factor</a>,</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;     num_subsampled_frames_ready = (features_ready + sf - 1) / sf;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">return</span> (subsampled_frame == num_subsampled_frames_ready - 1);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div><div class="ttc" id="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions_html_aad93df0dcdc32cf7ef176162619a9b47"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions.html#aad93df0dcdc32cf7ef176162619a9b47">kaldi::nnet3::NnetSimpleLoopedComputationOptions::frame_subsampling_factor</a></div><div class="ttdeci">int32 frame_subsampling_factor</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00048">decodable-simple-looped.h:48</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_a4d63349cc9b853175e06a3b0ce6dc592"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a4d63349cc9b853175e06a3b0ce6dc592">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::opts</a></div><div class="ttdeci">const NnetSimpleLoopedComputationOptions &amp; opts</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00122">decodable-simple-looped.h:122</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_a17d6303bfb2bc56faf657ac37462412a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">kaldi::nnet3::DecodableNnetLoopedOnlineBase::info_</a></div><div class="ttdeci">const DecodableNnetSimpleLoopedInfo &amp; info_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00112">decodable-online-looped.h:112</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a9e2dede1c20fce727f2666fe45a06ab3"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">kaldi::OnlineFeatureInterface::IsLastFrame</a></div><div class="ttdeci">virtual bool IsLastFrame(int32 frame) const =0</div><div class="ttdoc">Returns true if this is the last frame. </div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a6d4812ed73de799c457bea7f483f3593"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">kaldi::OnlineFeatureInterface::NumFramesReady</a></div><div class="ttdeci">virtual int32 NumFramesReady() const =0</div><div class="ttdoc">returns the feature dimension. </div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_a2ed17a8efa4a52758b1cc20d6081b38a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">kaldi::nnet3::DecodableNnetLoopedOnlineBase::input_features_</a></div><div class="ttdeci">OnlineFeatureInterface * input_features_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00121">decodable-online-looped.h:121</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a42208fdf3ae414a94a3c6cf36d5759a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42208fdf3ae414a94a3c6cf36d5759a8">&#9670;&nbsp;</a></span>KALDI_DISALLOW_COPY_AND_ASSIGN()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">KALDI_DISALLOW_COPY_AND_ASSIGN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html">DecodableNnetLoopedOnlineBase</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="decodable-online-looped_8h_source.html#l00147">DecodableNnetLoopedOnline::NumIndices()</a>.</p>

</div>
</div>
<a id="a816b68dc299cc3ed745ba1f3036bc3cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a816b68dc299cc3ed745ba1f3036bc3cd">&#9670;&nbsp;</a></span>NumFramesReady()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 NumFramesReady </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The call <a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a816b68dc299cc3ed745ba1f3036bc3cd" title="The call NumFramesReady() will return the number of frames currently available for this decodable obj...">NumFramesReady()</a> will return the number of frames currently available for this decodable object. </p>
<p>This is for use in setups where you don't want the decoder to block while waiting for input. This is newly added as of Jan 2014, and I hope, going forward, to rely on this mechanism more than IsLastFrame to know when to stop decoding. </p>

<p>Reimplemented from <a class="el" href="classkaldi_1_1DecodableInterface.html#a60b0869d95fc438d1723671fef3e2c08">DecodableInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="decodable-online-looped_8cc_source.html#l00055">55</a> of file <a class="el" href="decodable-online-looped_8cc_source.html">decodable-online-looped.cc</a>.</p>

<p class="reference">References <a class="el" href="decodable-simple-looped_8h_source.html#l00048">NnetSimpleLoopedComputationOptions::frame_subsampling_factor</a>, <a class="el" href="decodable-simple-looped_8h_source.html#l00138">DecodableNnetSimpleLoopedInfo::frames_per_chunk</a>, <a class="el" href="decodable-simple-looped_8h_source.html#l00134">DecodableNnetSimpleLoopedInfo::frames_right_context</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00112">DecodableNnetLoopedOnlineBase::info_</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00121">DecodableNnetLoopedOnlineBase::input_features_</a>, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">OnlineFeatureInterface::IsLastFrame()</a>, <a class="el" href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">OnlineFeatureInterface::NumFramesReady()</a>, and <a class="el" href="decodable-simple-looped_8h_source.html#l00122">DecodableNnetSimpleLoopedInfo::opts</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                                                          {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// note: the ivector_features_ may have 2 or 3 fewer frames ready than</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="comment">// input_features_, but we don&#39;t wait for them; we just use the most recent</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="comment">// iVector we can.</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  int32 features_ready = <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">input_features_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">NumFramesReady</a>();</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">if</span> (features_ready == 0)</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordtype">bool</span> input_finished = <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">input_features_</a>-&gt;<a class="code" href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">IsLastFrame</a>(features_ready - 1);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  int32 sf = <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a4d63349cc9b853175e06a3b0ce6dc592">opts</a>.<a class="code" href="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions.html#aad93df0dcdc32cf7ef176162619a9b47">frame_subsampling_factor</a>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">if</span> (input_finished) {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// if the input has finished,... we&#39;ll pad with duplicates of the last frame</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// as needed to get the required right context.</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">return</span> (features_ready + sf - 1) / sf;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment">// note: info_.right_context_ includes both the model context and any</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// extra_right_context_ (but this</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    int32 non_subsampled_output_frames_ready =</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        std::max&lt;int32&gt;(0, features_ready - <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#adc399b464d3a17b50ab64f2cf897c91a">frames_right_context</a>);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    int32 num_chunks_ready = non_subsampled_output_frames_ready /</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                             <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#ab1d720abcb203912db2b8bdc8e7bf4d4">frames_per_chunk</a>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment">// note: the division by the frame subsampling factor &#39;sf&#39; below</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// doesn&#39;t need any attention to rounding because info_.frames_per_chunk</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// is always a multiple of &#39;sf&#39; (see &#39;frames_per_chunk = GetChunksize...&quot;</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// in decodable-simple-looped.cc).</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">return</span> num_chunks_ready * <a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">info_</a>.<a class="code" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#ab1d720abcb203912db2b8bdc8e7bf4d4">frames_per_chunk</a> / sf;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div><div class="ttc" id="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions_html_aad93df0dcdc32cf7ef176162619a9b47"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1NnetSimpleLoopedComputationOptions.html#aad93df0dcdc32cf7ef176162619a9b47">kaldi::nnet3::NnetSimpleLoopedComputationOptions::frame_subsampling_factor</a></div><div class="ttdeci">int32 frame_subsampling_factor</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00048">decodable-simple-looped.h:48</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_adc399b464d3a17b50ab64f2cf897c91a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#adc399b464d3a17b50ab64f2cf897c91a">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::frames_right_context</a></div><div class="ttdeci">int32 frames_right_context</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00134">decodable-simple-looped.h:134</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_a4d63349cc9b853175e06a3b0ce6dc592"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#a4d63349cc9b853175e06a3b0ce6dc592">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::opts</a></div><div class="ttdeci">const NnetSimpleLoopedComputationOptions &amp; opts</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00122">decodable-simple-looped.h:122</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_a17d6303bfb2bc56faf657ac37462412a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a17d6303bfb2bc56faf657ac37462412a">kaldi::nnet3::DecodableNnetLoopedOnlineBase::info_</a></div><div class="ttdeci">const DecodableNnetSimpleLoopedInfo &amp; info_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00112">decodable-online-looped.h:112</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a9e2dede1c20fce727f2666fe45a06ab3"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a9e2dede1c20fce727f2666fe45a06ab3">kaldi::OnlineFeatureInterface::IsLastFrame</a></div><div class="ttdeci">virtual bool IsLastFrame(int32 frame) const =0</div><div class="ttdoc">Returns true if this is the last frame. </div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo_html_ab1d720abcb203912db2b8bdc8e7bf4d4"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html#ab1d720abcb203912db2b8bdc8e7bf4d4">kaldi::nnet3::DecodableNnetSimpleLoopedInfo::frames_per_chunk</a></div><div class="ttdeci">int32 frames_per_chunk</div><div class="ttdef"><b>Definition:</b> <a href="decodable-simple-looped_8h_source.html#l00138">decodable-simple-looped.h:138</a></div></div>
<div class="ttc" id="classkaldi_1_1OnlineFeatureInterface_html_a6d4812ed73de799c457bea7f483f3593"><div class="ttname"><a href="classkaldi_1_1OnlineFeatureInterface.html#a6d4812ed73de799c457bea7f483f3593">kaldi::OnlineFeatureInterface::NumFramesReady</a></div><div class="ttdeci">virtual int32 NumFramesReady() const =0</div><div class="ttdoc">returns the feature dimension. </div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase_html_a2ed17a8efa4a52758b1cc20d6081b38a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html#a2ed17a8efa4a52758b1cc20d6081b38a">kaldi::nnet3::DecodableNnetLoopedOnlineBase::input_features_</a></div><div class="ttdeci">OnlineFeatureInterface * input_features_</div><div class="ttdef"><b>Definition:</b> <a href="decodable-online-looped_8h_source.html#l00121">decodable-online-looped.h:121</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ad8ce439f59016d141a0f49c359d20048"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8ce439f59016d141a0f49c359d20048">&#9670;&nbsp;</a></span>computer_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1nnet3_1_1NnetComputer.html">NnetComputer</a> computer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="decodable-online-looped_8h_source.html#l00124">124</a> of file <a class="el" href="decodable-online-looped_8h_source.html">decodable-online-looped.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="decodable-online-looped_8cc_source.html#l00112">DecodableNnetLoopedOnlineBase::AdvanceChunk()</a>.</p>

</div>
</div>
<a id="ad22c360fe2eff04bdfdbdccef7855b02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad22c360fe2eff04bdfdbdccef7855b02">&#9670;&nbsp;</a></span>current_log_post_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1Matrix.html">Matrix</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; current_log_post_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="decodable-online-looped_8h_source.html#l00102">102</a> of file <a class="el" href="decodable-online-looped_8h_source.html">decodable-online-looped.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="decodable-online-looped_8cc_source.html#l00112">DecodableNnetLoopedOnlineBase::AdvanceChunk()</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00092">DecodableNnetLoopedOnlineBase::EnsureFrameIsComputed()</a>, <a class="el" href="decodable-online-looped_8cc_source.html#l00232">DecodableNnetLoopedOnline::LogLikelihood()</a>, and <a class="el" href="decodable-online-looped_8cc_source.html#l00242">DecodableAmNnetLoopedOnline::LogLikelihood()</a>.</p>

</div>
</div>
<a id="a8d11588884b1fc7c9117d8ad8c37d8ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d11588884b1fc7c9117d8ad8c37d8ad">&#9670;&nbsp;</a></span>current_log_post_subsampled_offset_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 current_log_post_subsampled_offset_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="decodable-online-looped_8h_source.html#l00110">110</a> of file <a class="el" href="decodable-online-looped_8h_source.html">decodable-online-looped.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="decodable-online-looped_8cc_source.html#l00112">DecodableNnetLoopedOnlineBase::AdvanceChunk()</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00092">DecodableNnetLoopedOnlineBase::EnsureFrameIsComputed()</a>, <a class="el" href="decodable-online-looped_8cc_source.html#l00232">DecodableNnetLoopedOnline::LogLikelihood()</a>, and <a class="el" href="decodable-online-looped_8cc_source.html#l00242">DecodableAmNnetLoopedOnline::LogLikelihood()</a>.</p>

</div>
</div>
<a id="a17d6303bfb2bc56faf657ac37462412a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17d6303bfb2bc56faf657ac37462412a">&#9670;&nbsp;</a></span>info_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetSimpleLoopedInfo.html">DecodableNnetSimpleLoopedInfo</a>&amp; info_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="decodable-online-looped_8h_source.html#l00112">112</a> of file <a class="el" href="decodable-online-looped_8h_source.html">decodable-online-looped.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="decodable-online-looped_8cc_source.html#l00112">DecodableNnetLoopedOnlineBase::AdvanceChunk()</a>, <a class="el" href="decodable-online-looped_8cc_source.html#l00026">DecodableNnetLoopedOnlineBase::DecodableNnetLoopedOnlineBase()</a>, <a class="el" href="decodable-online-looped_8h_source.html#l00080">DecodableNnetLoopedOnlineBase::FrameSubsamplingFactor()</a>, <a class="el" href="decodable-online-looped_8cc_source.html#l00088">DecodableNnetLoopedOnlineBase::IsLastFrame()</a>, <a class="el" href="decodable-online-looped_8cc_source.html#l00055">DecodableNnetLoopedOnlineBase::NumFramesReady()</a>, and <a class="el" href="decodable-online-looped_8h_source.html#l00147">DecodableNnetLoopedOnline::NumIndices()</a>.</p>

</div>
</div>
<a id="a2ed17a8efa4a52758b1cc20d6081b38a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ed17a8efa4a52758b1cc20d6081b38a">&#9670;&nbsp;</a></span>input_features_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1OnlineFeatureInterface.html">OnlineFeatureInterface</a>* input_features_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="decodable-online-looped_8h_source.html#l00121">121</a> of file <a class="el" href="decodable-online-looped_8h_source.html">decodable-online-looped.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="decodable-online-looped_8cc_source.html#l00112">DecodableNnetLoopedOnlineBase::AdvanceChunk()</a>, <a class="el" href="decodable-online-looped_8cc_source.html#l00026">DecodableNnetLoopedOnlineBase::DecodableNnetLoopedOnlineBase()</a>, <a class="el" href="decodable-online-looped_8cc_source.html#l00088">DecodableNnetLoopedOnlineBase::IsLastFrame()</a>, and <a class="el" href="decodable-online-looped_8cc_source.html#l00055">DecodableNnetLoopedOnlineBase::NumFramesReady()</a>.</p>

</div>
</div>
<a id="a3f0381255bd47fc8bcb646541025e40b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f0381255bd47fc8bcb646541025e40b">&#9670;&nbsp;</a></span>ivector_features_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1OnlineFeatureInterface.html">OnlineFeatureInterface</a>* ivector_features_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="decodable-online-looped_8h_source.html#l00122">122</a> of file <a class="el" href="decodable-online-looped_8h_source.html">decodable-online-looped.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="decodable-online-looped_8cc_source.html#l00112">DecodableNnetLoopedOnlineBase::AdvanceChunk()</a>, and <a class="el" href="decodable-online-looped_8cc_source.html#l00026">DecodableNnetLoopedOnlineBase::DecodableNnetLoopedOnlineBase()</a>.</p>

</div>
</div>
<a id="af582f85723f05f2346a251996c20146f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af582f85723f05f2346a251996c20146f">&#9670;&nbsp;</a></span>num_chunks_computed_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 num_chunks_computed_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="decodable-online-looped_8h_source.html#l00105">105</a> of file <a class="el" href="decodable-online-looped_8h_source.html">decodable-online-looped.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="decodable-online-looped_8cc_source.html#l00112">DecodableNnetLoopedOnlineBase::AdvanceChunk()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>nnet3/<a class="el" href="decodable-online-looped_8h_source.html">decodable-online-looped.h</a></li>
<li>nnet3/<a class="el" href="decodable-online-looped_8cc_source.html">decodable-online-looped.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekaldi.html">kaldi</a></li><li class="navelem"><a class="el" href="namespacekaldi_1_1nnet3.html">nnet3</a></li><li class="navelem"><a class="el" href="classkaldi_1_1nnet3_1_1DecodableNnetLoopedOnlineBase.html">DecodableNnetLoopedOnlineBase</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
