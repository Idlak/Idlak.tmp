<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: nnet3/nnet-normalize-component.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nnet-normalize-component_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">nnet-normalize-component.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="nnet-normalize-component_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// nnet3/nnet-normalize-component.h</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Copyright 2011-2013  Karel Vesely</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//           2012-2015  Johns Hopkins University (author: Daniel Povey)</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//                2013  Xiaohui Zhang</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//           2014-2015  Vijayaditya Peddinti</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//           2014-2015  Guoguo Chen</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//                2015  Daniel Galvez</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//                2015  Tom Ko</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// See ../../COPYING for clarification regarding multiple authors</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// you may not use this file except in compliance with the License.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// You may obtain a copy of the License at</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//  http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// THIS CODE IS PROVIDED *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// MERCHANTABLITY OR NON-INFRINGEMENT.</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// See the Apache 2 License for the specific language governing permissions and</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// limitations under the License.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#ifndef KALDI_NNET3_NNET_NORMALIZE_COMPONENT_H_</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#define KALDI_NNET3_NNET_NORMALIZE_COMPONENT_H_</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="nnet-common_8h.html">nnet3/nnet-common.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="nnet-component-itf_8h.html">nnet3/nnet-component-itf.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="natural-gradient-online_8h.html">nnet3/natural-gradient-online.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacekaldi.html">kaldi</a> {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">namespace </span>nnet3 {</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">   NormalizeComponent implements the function:</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">         y = x * (sqrt(dim(x)) * target-rms) / |x|</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">   where |x| is the 2-norm of the vector x.  I.e. its output is its input</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">   scaled such that the root-mean-square values of its elements equals</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">   target-rms.  (As a special case, if the input is zero, it outputs zero).</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">   This is like Hinton&#39;s layer-norm, except not normalizing the mean, only</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">   the variance.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">    Note: if you specify add-log-stddev=true, it adds an extra element to</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">     y which equals log(|x| / sqrt(dim(x))).</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">   Configuration values accepted:</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">      dim, or input-dim    Input dimension of this component, e.g. 1024.</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">                           Will be the same as the output dimension if add-log-stddev=false.</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">      block-dim            Defaults to &#39;dim&#39; you may specify a divisor</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">                           of &#39;dim&#39;.  In this case the input dimension will</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">                           be interpreted as blocks of dimension &#39;block-dim&#39;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">                           to which the nonlinearity described above is applied</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">                           separately.</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">      add-log-stddev       You can set this to true to add an extra output</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">                           dimension which will equal |x| / sqrt(dim(x)).</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">                           If block-dim is specified, this is done per block.</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">      target-rms           This defaults to 1.0, but if set it to another</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">                           (nonzero) value, the output will be scaled by this</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">                           factor.</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html">   73</a></span>&#160;<span class="keyword">class </span><a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html">NormalizeComponent</a>: <span class="keyword">public</span> <a class="code" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#adc1d6d10a144d1a06fc669680828f5b0">NormalizeComponent</a>(<span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html">NormalizeComponent</a> &amp;other);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a4a16a6da3a5108ec53e759722a51fd47">   77</a></span>&#160;  <span class="keyword">virtual</span> int32 <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a4a16a6da3a5108ec53e759722a51fd47">Properties</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a5530b2f8f01fac9e6e73fd29a65d4127">kSimpleComponent</a>|<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3adac6588b2ef2e8b52936718cf97263e7">kBackpropNeedsInput</a>|<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3acda3bbc91bd09631b18fdc57376c2b90">kBackpropAdds</a>|</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        (<a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#ae57ffe302e7f0c009671a7783c5c991b">add_log_stddev_</a> ? 0 : <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2f52823d0c7fdc03b0be47662c66146d">kPropagateInPlace</a>|<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3abaa0f1d8521d4753ffae9f2cc22a15df">kBackpropInPlace</a>) |</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        (<a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a62ab993f430cb6dfa5c9dedca95791a4">block_dim_</a> != <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a34160584d82072ed039ec2b5672b99ab">input_dim_</a> ? <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2df016ee6a8dfbdac91f5e53f3662a94">kInputContiguous</a>|<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3ab8a5f348ba3b3b42e8943e20b1675dc9">kOutputContiguous</a> : 0);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  }</div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#adc1d6d10a144d1a06fc669680828f5b0">   82</a></span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#adc1d6d10a144d1a06fc669680828f5b0">NormalizeComponent</a>() { }</div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#af2d951f58073f362411ee482aa469975">   83</a></span>&#160;  <span class="keyword">virtual</span> std::string <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#af2d951f58073f362411ee482aa469975">Type</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;NormalizeComponent&quot;</span>; }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#ac4f5c35427c2657c50173313e99e3f01">InitFromConfig</a>(<a class="code" href="classkaldi_1_1nnet3_1_1ConfigLine.html">ConfigLine</a> *cfl);</div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a1de31388e6c4839d855713baedc4f44b">   85</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classkaldi_1_1nnet3_1_1Component.html">Component</a>* <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a1de31388e6c4839d855713baedc4f44b">Copy</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#adc1d6d10a144d1a06fc669680828f5b0">NormalizeComponent</a>(*<span class="keyword">this</span>); }</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span>* <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a8f1f1b05a170bd81a544caefe1acb040">Propagate</a>(<span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a> *indexes,</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                          <span class="keyword">const</span> <a class="code" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase&lt;BaseFloat&gt;</a> &amp;in,</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                          <a class="code" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase&lt;BaseFloat&gt;</a> *out) <span class="keyword">const</span>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a3e993d522e4e85b5dc5e331f2ff84023">Backprop</a>(<span class="keyword">const</span> std::string &amp;debug_info,</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a> *indexes,</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase&lt;BaseFloat&gt;</a> &amp;in_value,</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase&lt;BaseFloat&gt;</a> &amp;, <span class="comment">// out_value</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase&lt;BaseFloat&gt;</a> &amp;out_deriv,</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                        <span class="keywordtype">void</span> *memo,</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                        <a class="code" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *to_update,</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                        <a class="code" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase&lt;BaseFloat&gt;</a> *in_deriv) <span class="keyword">const</span>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a8e7d2790fc7e94fe9780ccc937de1270">Read</a>(std::istream &amp;is, <span class="keywordtype">bool</span> binary);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a68f354fd5f096134162f01719096e6fc">Write</a>(std::ostream &amp;os, <span class="keywordtype">bool</span> binary) <span class="keyword">const</span>;</div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#ad4cb6aed1f1980c2c36f34e09ceea0e0">  100</a></span>&#160;  <span class="keyword">virtual</span> int32 <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#ad4cb6aed1f1980c2c36f34e09ceea0e0">InputDim</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a34160584d82072ed039ec2b5672b99ab">input_dim_</a>; }</div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a323155ad8034c0b14762dd78ae4415b5">  101</a></span>&#160;  <span class="keyword">virtual</span> int32 <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a323155ad8034c0b14762dd78ae4415b5">OutputDim</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a34160584d82072ed039ec2b5672b99ab">input_dim_</a> + (<a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#ae57ffe302e7f0c009671a7783c5c991b">add_log_stddev_</a> ? (<a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a34160584d82072ed039ec2b5672b99ab">input_dim_</a> / <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a62ab993f430cb6dfa5c9dedca95791a4">block_dim_</a>) : 0));</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keyword">virtual</span> std::string <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a245d65d566725422b859c99bff7623f8">Info</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html">NormalizeComponent</a> &amp;<a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a85d9ab9fa2bbfa0d948ce086d3bea6b2">operator = </a>(<span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html">NormalizeComponent</a> &amp;other); <span class="comment">// Disallow.</span></div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#aba01db17f4a2bfbc3db60dc172972a25ac88a234e91ef34bb19367a7f683cdfb4">  107</a></span>&#160;  <span class="keyword">enum</span> { <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#aba01db17f4a2bfbc3db60dc172972a25ac88a234e91ef34bb19367a7f683cdfb4">kExpSquaredNormFloor</a> = -66 };</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="comment">// kSquaredNormFloor is about 0.7e-20.  We need a value that&#39;s exactly representable in</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// float and whose inverse square root is also exactly representable</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// in float (hence, an even power of two).</span></div><div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a2b116a902715ab82fbaff472a81b3aa7">  111</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classfloat.html">BaseFloat</a> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a2b116a902715ab82fbaff472a81b3aa7">kSquaredNormFloor</a>;</div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a34160584d82072ed039ec2b5672b99ab">  112</a></span>&#160;  int32 <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a34160584d82072ed039ec2b5672b99ab">input_dim_</a>;</div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a62ab993f430cb6dfa5c9dedca95791a4">  113</a></span>&#160;  int32 <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a62ab993f430cb6dfa5c9dedca95791a4">block_dim_</a>;</div><div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a259a07240d14958023962b3658d4cf78">  114</a></span>&#160;  <a class="code" href="classfloat.html">BaseFloat</a> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a259a07240d14958023962b3658d4cf78">target_rms_</a>; <span class="comment">// The target rms for outputs, default 1.0.</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#ae57ffe302e7f0c009671a7783c5c991b">  116</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#ae57ffe302e7f0c009671a7783c5c991b">add_log_stddev_</a>; <span class="comment">// If true, log(max(epsi, sqrt(row_in^T row_in / D)))</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                        <span class="comment">// is an extra dimension of the output.</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;};</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">  BatchNormComponent</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">  This implements batch normalization; for each dimension of the</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">  input it normalizes the data to be zero-mean, unit-variance.  You</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">  can set the block-dim configuration value to implement spatial</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">  batch normalization, see the comment for the variable.</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">  If you want to combine this with the trainable offset and scale that the</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">  original BatchNorm paper used, then follow this by the</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">  ScaleAndOffsetComponent.</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">  It&#39;s a simple component (uses the kSimpleComponent flag), but it is unusual in</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">  that it will give different results if you call it on half the matrix at a</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">  time.  Most of the time this would be pretty harmless, so we still return the</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">  kSimpleComponent flag.  We may have to modify the test code a little to</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">  account for this, or possibly remove the kSimpleComponent flag.  In some sense</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">  each output Index depends on every input Index, but putting those dependencies</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">  explicitly into the dependency-tracking framework as a GeneralComponent</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">  would be very impractical and might lead to a lot of unnecessary things being</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">  computed.  You have to be a bit careful where you put this component, and understand</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">  what you&#39;re doing e.g. putting it in the path of a recurrence is a bit problematic</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">  if the minibatch size is small.</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">    Accepted configuration values:</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">           dim          Dimension of the input and output</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">           block-dim    Defaults to &#39;dim&#39;, but may be set to a divisor</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">                        of &#39;dim&#39;.  In this case, each block of dimension &#39;block-dim&#39;</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">                        is treated like a separate row of the input matrix, which</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">                        means that the stats from n&#39;th element of each</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">                        block are pooled into one class, for each n.</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">           epsilon      Small term added to the variance that is used to prevent</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">                        division by zero</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">           target-rms   This defaults to 1.0, but if set, for instance, to 2.0,</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">                        it will normalize the standard deviation of the output to</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">                        2.0. &#39;target-stddev&#39; might be a more suitable name, but this</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">                        was chosen for consistency with NormalizeComponent.</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html">  159</a></span>&#160;<span class="keyword">class </span><a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html">BatchNormComponent</a>: <span class="keyword">public</span> <a class="code" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a20a3899b1059ddf29e8f9a96781ca506">  162</a></span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a20a3899b1059ddf29e8f9a96781ca506">BatchNormComponent</a>() { }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="comment">// call this with &#39;true&#39; to set &#39;test mode&#39; where the batch normalization is</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="comment">// done with stored stats.  There won&#39;t normally be any need to specially</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="comment">// accumulate these stats; they are stored as a matter of course on each</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="comment">// iteration of training, as for NonlinearComponents, and we&#39;ll use the stats</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// from the most recent [script-level] iteration.</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// (Note: it will refuse to actually set test-mode to true if there</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">// are no stats stored.)</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordtype">void</span> SetTestMode(<span class="keywordtype">bool</span> test_mode);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// constructor using another component</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html">BatchNormComponent</a>(<span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html">BatchNormComponent</a> &amp;other);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#ad4cb6aed1f1980c2c36f34e09ceea0e0">  176</a></span>&#160;  <span class="keyword">virtual</span> int32 <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#ad4cb6aed1f1980c2c36f34e09ceea0e0">InputDim</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> dim_; }</div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a323155ad8034c0b14762dd78ae4415b5">  177</a></span>&#160;  <span class="keyword">virtual</span> int32 <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a323155ad8034c0b14762dd78ae4415b5">OutputDim</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> dim_; }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keyword">virtual</span> std::string <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a245d65d566725422b859c99bff7623f8">Info</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#ac4f5c35427c2657c50173313e99e3f01">InitFromConfig</a>(<a class="code" href="classkaldi_1_1nnet3_1_1ConfigLine.html">ConfigLine</a> *cfl);</div><div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#af2d951f58073f362411ee482aa469975">  181</a></span>&#160;  <span class="keyword">virtual</span> std::string <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#af2d951f58073f362411ee482aa469975">Type</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;BatchNormComponent&quot;</span>; }</div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a4a16a6da3a5108ec53e759722a51fd47">  182</a></span>&#160;  <span class="keyword">virtual</span> int32 <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a4a16a6da3a5108ec53e759722a51fd47">Properties</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// If the block-dim is less than the dim, we need the input and output</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">// matrices to be contiguous (stride==num-cols), as we&#39;ll be reshaping</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">// internally.  This is not much of a cost, because this will be used</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">// in convnets where we have to do this anyway.</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a5530b2f8f01fac9e6e73fd29a65d4127">kSimpleComponent</a>|<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2a37e781d9be4e2cb09699a840dde841">kBackpropNeedsOutput</a>|<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2f52823d0c7fdc03b0be47662c66146d">kPropagateInPlace</a>|</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3abaa0f1d8521d4753ffae9f2cc22a15df">kBackpropInPlace</a>|</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        (<a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a62ab993f430cb6dfa5c9dedca95791a4">block_dim_</a> &lt; dim_ ? <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2df016ee6a8dfbdac91f5e53f3662a94">kInputContiguous</a>|<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3ab8a5f348ba3b3b42e8943e20b1675dc9">kOutputContiguous</a> : 0)|</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        (test_mode_ ? 0 : <a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a1713e609229066c956d4c7d544c69658">kUsesMemo</a>|<a class="code" href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3affff5abfeafd5643bee15f1daafe6827">kStoresStats</a>);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span>* <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a8f1f1b05a170bd81a544caefe1acb040">Propagate</a>(<span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a> *indexes,</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase&lt;BaseFloat&gt;</a> &amp;in,</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                         <a class="code" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase&lt;BaseFloat&gt;</a> *out) <span class="keyword">const</span>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a3e993d522e4e85b5dc5e331f2ff84023">Backprop</a>(<span class="keyword">const</span> std::string &amp;debug_info,</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">ComponentPrecomputedIndexes</a> *indexes,</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase&lt;BaseFloat&gt;</a> &amp;in_value,</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase&lt;BaseFloat&gt;</a> &amp;out_value,</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase&lt;BaseFloat&gt;</a> &amp;out_deriv,</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                        <span class="keywordtype">void</span> *memo,</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                        <a class="code" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> *, <span class="comment">// to_update,</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                        <a class="code" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase&lt;BaseFloat&gt;</a> *in_deriv) <span class="keyword">const</span>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a8e7d2790fc7e94fe9780ccc937de1270">Read</a>(std::istream &amp;is, <span class="keywordtype">bool</span> binary); <span class="comment">// This Read function</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="comment">// requires that the Component has the correct type.</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a68f354fd5f096134162f01719096e6fc">Write</a>(std::ostream &amp;os, <span class="keywordtype">bool</span> binary) <span class="keyword">const</span>;</div><div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a1de31388e6c4839d855713baedc4f44b">  209</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classkaldi_1_1nnet3_1_1Component.html">Component</a>* <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a1de31388e6c4839d855713baedc4f44b">Copy</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html">BatchNormComponent</a>(*<span class="keyword">this</span>); }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1Component.html#a750ca3e44a00898afea53b54697226ba">Scale</a>(<a class="code" href="classfloat.html">BaseFloat</a> scale);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1Component.html#aab16938236bd0978bad5de6d56fcf47f">Add</a>(<a class="code" href="classfloat.html">BaseFloat</a> alpha, <span class="keyword">const</span> <a class="code" href="classkaldi_1_1nnet3_1_1Component.html">Component</a> &amp;other);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1Component.html#ab162a2631e5335091d1f2bba1571e54d">ZeroStats</a>();</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a8eacf8174f9fa190732c320ee3cf1d62">  216</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a8eacf8174f9fa190732c320ee3cf1d62">DeleteMemo</a>(<span class="keywordtype">void</span> *memo)<span class="keyword"> const </span>{ <span class="keyword">delete</span> <span class="keyword">static_cast&lt;</span><a class="code" href="structkaldi_1_1nnet3_1_1BatchNormComponent_1_1Memo.html">Memo</a>*<span class="keyword">&gt;</span>(memo); }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classkaldi_1_1nnet3_1_1Component.html#a304cec15e1a696a5af5f2f5daae7bc4f">StoreStats</a>(<span class="keyword">const</span> <a class="code" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase&lt;BaseFloat&gt;</a> &amp;in_value,</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                          <span class="keyword">const</span> <a class="code" href="classkaldi_1_1CuMatrixBase.html">CuMatrixBase&lt;BaseFloat&gt;</a> &amp;out_value,</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                          <span class="keywordtype">void</span> *memo);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="comment">// Members specific to this component type.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="comment">// Note: the offset and scale will only be nonempty in &#39;test mode&#39;.</span></div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#aef07468f925ef361a4cc94dd52d51d12">  224</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classkaldi_1_1CuVector.html">CuVector&lt;BaseFloat&gt;</a> &amp;<a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#aef07468f925ef361a4cc94dd52d51d12">Offset</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> offset_; }</div><div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#ae8095f8ed3ae953b61987ef6a28dba83">  225</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classkaldi_1_1CuVector.html">CuVector&lt;BaseFloat&gt;</a> &amp;<a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#ae8095f8ed3ae953b61987ef6a28dba83">Scale</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> scale_; }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="structkaldi_1_1nnet3_1_1BatchNormComponent_1_1Memo.html">  229</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structkaldi_1_1nnet3_1_1BatchNormComponent_1_1Memo.html">Memo</a> {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">// number of frames (after any reshaping).</span></div><div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="structkaldi_1_1nnet3_1_1BatchNormComponent_1_1Memo.html#a32d4a33731fac2ac8d3bc0dd478ecdf4">  231</a></span>&#160;    int32 <a class="code" href="structkaldi_1_1nnet3_1_1BatchNormComponent_1_1Memo.html#a32d4a33731fac2ac8d3bc0dd478ecdf4">num_frames</a>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">// &#39;sum_sumsq_scale&#39; is of dimension 5 by block_dim_:</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">// Row 0 = mean = the mean of the rows of the input</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">// Row 1 = uvar = the uncentered variance of the input (= sumsq / num_frames).</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// Row 2 = scale = the scale of the renormalization.</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// Rows 3 and 4 are used as temporaries in Backprop.</span></div><div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="structkaldi_1_1nnet3_1_1BatchNormComponent_1_1Memo.html#a610dc0905fcc6ea9368ef1fdd22fce11">  237</a></span>&#160;    <a class="code" href="classkaldi_1_1CuMatrix.html">CuMatrix&lt;BaseFloat&gt;</a> <a class="code" href="structkaldi_1_1nnet3_1_1BatchNormComponent_1_1Memo.html#a610dc0905fcc6ea9368ef1fdd22fce11">mean_uvar_scale</a>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  };</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordtype">void</span> Check() <span class="keyword">const</span>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// this function is used in a couple of places; it turns the raw stats into</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// the offset/scale term of a normalizing transform.</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> ComputeOffsetAndScale(<span class="keywordtype">double</span> <a class="code" href="arpa-file-parser-test_8cc.html#a951345011b75d2e8d9bfc18ca63510d2">count</a>,</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                    <a class="code" href="classfloat.html">BaseFloat</a> epsilon,</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="classkaldi_1_1Vector.html">Vector&lt;double&gt;</a> &amp;stats_sum,</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="classkaldi_1_1Vector.html">Vector&lt;double&gt;</a> &amp;stats_sumsq,</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                    <a class="code" href="classkaldi_1_1Vector.html">Vector&lt;BaseFloat&gt;</a> *offset,</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                    <a class="code" href="classkaldi_1_1Vector.html">Vector&lt;BaseFloat&gt;</a> *scale);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// computes derived parameters offset_ and scale_.</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordtype">void</span> ComputeDerived();</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// Dimension of the input and output.</span></div><div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a08031ac0ce0b0973ed948e43ebd706be">  254</a></span>&#160;  int32 <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a08031ac0ce0b0973ed948e43ebd706be">dim_</a>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="comment">// This would normally be the same as dim_, but if it&#39;s less (and it must be &gt;</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="comment">// 0 and must divide dim_), then each separate block of the input of dimension</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="comment">// &#39;block_dim_&#39; is treated like a separate frame for the purposes of</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">// normalization.  This can be used to implement spatial batch normalization</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="comment">// for convolutional setups-- assuming the filter-dim has stride 1, which it</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">// always will in the new code in nnet-convolutional-component.h.</span></div><div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a62ab993f430cb6dfa5c9dedca95791a4">  261</a></span>&#160;  int32 <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a62ab993f430cb6dfa5c9dedca95791a4">block_dim_</a>;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">// Used to avoid exact-zero variances, epsilon has the dimension of a</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// covariance.</span></div><div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a008c4e6cc13410d1b983ad2b06fffeaf">  265</a></span>&#160;  <a class="code" href="classfloat.html">BaseFloat</a> <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a008c4e6cc13410d1b983ad2b06fffeaf">epsilon_</a>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="comment">// This value will normally be 1.0, which is the default, but you can set it</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">// to other values as a way to control how fast the following layer learns</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="comment">// (smaller -&gt; slower).  The same config exists in NormalizeComponent.</span></div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a259a07240d14958023962b3658d4cf78">  270</a></span>&#160;  <a class="code" href="classfloat.html">BaseFloat</a> <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a259a07240d14958023962b3658d4cf78">target_rms_</a>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">// This is true if we want the batch normalization to operate in &#39;test mode&#39;</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">// meaning the data mean and stddev used for the normalization are fixed</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="comment">// quantities based on previously accumulated stats.  Note: the stats we use</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">// for this are based on the same &#39;StoreStats&#39; mechanism as we use for</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// components like SigmoidComponent and ReluComponent; we&#39;ll be using</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">// the stats from the most recent [script-level] iteration of training.</span></div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a6e61791b6ff20c4e71142b700b0ad79a">  278</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a6e61791b6ff20c4e71142b700b0ad79a">test_mode_</a>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">// total count of stats stored by StoreStats().</span></div><div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a60c3546bdf95d749a23d421d3085b319">  282</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a60c3546bdf95d749a23d421d3085b319">count_</a>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="comment">// sum-of-data component of stats of input data.</span></div><div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a9451b4f793f5f31d986cfda6cc26adb6">  284</a></span>&#160;  <a class="code" href="classkaldi_1_1CuVector.html">CuVector&lt;double&gt;</a> <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a9451b4f793f5f31d986cfda6cc26adb6">stats_sum_</a>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="comment">// sum-of-squared component of stats of input data.</span></div><div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#acfe867fd15cc5ced623bf7775bef58a5">  286</a></span>&#160;  <a class="code" href="classkaldi_1_1CuVector.html">CuVector&lt;double&gt;</a> <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#acfe867fd15cc5ced623bf7775bef58a5">stats_sumsq_</a>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="comment">// offset_ and scale_ are derived from stats_sum_ and stats_sumsq_; they</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">// dictate the transform that is done in &#39;test mode&#39;.  They are set only when</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// reading the model from disk and when calling SetTestMode(true); they are</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">// resized to empty when the stats are updated, to ensure that out-of-date</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="comment">// values are not kept around.</span></div><div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a70e8fd7897b225d5495cfc20334f1832">  293</a></span>&#160;  <a class="code" href="classkaldi_1_1CuVector.html">CuVector&lt;BaseFloat&gt;</a> <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a70e8fd7897b225d5495cfc20334f1832">offset_</a>;</div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a0238fc78ea1750f010c1a9561ae16e09">  294</a></span>&#160;  <a class="code" href="classkaldi_1_1CuVector.html">CuVector&lt;BaseFloat&gt;</a> <a class="code" href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a0238fc78ea1750f010c1a9561ae16e09">scale_</a>;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;};</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;} <span class="comment">// namespace nnet3</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;} <span class="comment">// namespace kaldi</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_a1de31388e6c4839d855713baedc4f44b"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a1de31388e6c4839d855713baedc4f44b">kaldi::nnet3::NormalizeComponent::Copy</a></div><div class="ttdeci">virtual Component * Copy() const</div><div class="ttdoc">Copies component (deep copy). </div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00085">nnet-normalize-component.h:85</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3ab8a5f348ba3b3b42e8943e20b1675dc9"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3ab8a5f348ba3b3b42e8943e20b1675dc9">kaldi::nnet3::kOutputContiguous</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00077">nnet-component-itf.h:77</a></div></div>
<div class="ttc" id="namespacekaldi_html"><div class="ttname"><a href="namespacekaldi.html">kaldi</a></div><div class="ttdoc">Relabels neural network egs with the read pdf-id alignments. </div><div class="ttdef"><b>Definition:</b> <a href="chain_8dox_source.html#l00020">chain.dox:20</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html">kaldi::nnet3::BatchNormComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00159">nnet-normalize-component.h:159</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_a9451b4f793f5f31d986cfda6cc26adb6"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a9451b4f793f5f31d986cfda6cc26adb6">kaldi::nnet3::BatchNormComponent::stats_sum_</a></div><div class="ttdeci">CuVector&lt; double &gt; stats_sum_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00284">nnet-normalize-component.h:284</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_a70e8fd7897b225d5495cfc20334f1832"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a70e8fd7897b225d5495cfc20334f1832">kaldi::nnet3::BatchNormComponent::offset_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; offset_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00293">nnet-normalize-component.h:293</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_a4a16a6da3a5108ec53e759722a51fd47"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a4a16a6da3a5108ec53e759722a51fd47">kaldi::nnet3::NormalizeComponent::Properties</a></div><div class="ttdeci">virtual int32 Properties() const</div><div class="ttdoc">Return bitmask of the component&amp;#39;s properties. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00077">nnet-normalize-component.h:77</a></div></div>
<div class="ttc" id="classkaldi_1_1CuVector_html"><div class="ttname"><a href="classkaldi_1_1CuVector.html">kaldi::CuVector</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00074">matrix-common.h:74</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_a85d9ab9fa2bbfa0d948ce086d3bea6b2"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a85d9ab9fa2bbfa0d948ce086d3bea6b2">kaldi::nnet3::NormalizeComponent::operator=</a></div><div class="ttdeci">NormalizeComponent &amp; operator=(const NormalizeComponent &amp;other)</div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_a2b116a902715ab82fbaff472a81b3aa7"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a2b116a902715ab82fbaff472a81b3aa7">kaldi::nnet3::NormalizeComponent::kSquaredNormFloor</a></div><div class="ttdeci">static const BaseFloat kSquaredNormFloor</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00111">nnet-normalize-component.h:111</a></div></div>
<div class="ttc" id="nnet-component-itf_8h_html"><div class="ttname"><a href="nnet-component-itf_8h.html">nnet-component-itf.h</a></div></div>
<div class="ttc" id="nnet-common_8h_html"><div class="ttname"><a href="nnet-common_8h.html">nnet-common.h</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_aba01db17f4a2bfbc3db60dc172972a25ac88a234e91ef34bb19367a7f683cdfb4"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#aba01db17f4a2bfbc3db60dc172972a25ac88a234e91ef34bb19367a7f683cdfb4">kaldi::nnet3::NormalizeComponent::kExpSquaredNormFloor</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00107">nnet-normalize-component.h:107</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_a1de31388e6c4839d855713baedc4f44b"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a1de31388e6c4839d855713baedc4f44b">kaldi::nnet3::BatchNormComponent::Copy</a></div><div class="ttdeci">virtual Component * Copy() const</div><div class="ttdoc">Copies component (deep copy). </div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00209">nnet-normalize-component.h:209</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ConfigLine_html"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ConfigLine.html">kaldi::nnet3::ConfigLine</a></div><div class="ttdoc">This class is responsible for parsing input like hi-there xx=yyy a=b c empty= f-oo=Append(bar, sss) ba_z=123 bing=&amp;#39;a b c&amp;#39; baz=&quot;a b c d=&amp;#39;a b&amp;#39; e&quot; and giving you access to the fields, in this case. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-parse_8h_source.html#l00048">nnet-parse.h:48</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1Component_html"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1Component.html">kaldi::nnet3::Component</a></div><div class="ttdoc">Abstract base-class for neural-net components. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00114">nnet-component-itf.h:114</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_ac4f5c35427c2657c50173313e99e3f01"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#ac4f5c35427c2657c50173313e99e3f01">kaldi::nnet3::NormalizeComponent::InitFromConfig</a></div><div class="ttdeci">virtual void InitFromConfig(ConfigLine *cfl)</div><div class="ttdoc">Initialize, from a ConfigLine object. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8cc_source.html#l00041">nnet-normalize-component.cc:41</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a1713e609229066c956d4c7d544c69658"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a1713e609229066c956d4c7d544c69658">kaldi::nnet3::kUsesMemo</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00079">nnet-component-itf.h:79</a></div></div>
<div class="ttc" id="classkaldi_1_1CuMatrix_html"><div class="ttname"><a href="classkaldi_1_1CuMatrix.html">kaldi::CuMatrix</a></div><div class="ttdoc">This class represents a matrix that&amp;#39;s stored on the GPU if we have one, and in memory if not...</div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00071">matrix-common.h:71</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_a68f354fd5f096134162f01719096e6fc"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a68f354fd5f096134162f01719096e6fc">kaldi::nnet3::NormalizeComponent::Write</a></div><div class="ttdeci">virtual void Write(std::ostream &amp;os, bool binary) const</div><div class="ttdoc">Write component to stream. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8cc_source.html#l00098">nnet-normalize-component.cc:98</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_adc1d6d10a144d1a06fc669680828f5b0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#adc1d6d10a144d1a06fc669680828f5b0">kaldi::nnet3::NormalizeComponent::NormalizeComponent</a></div><div class="ttdeci">NormalizeComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00082">nnet-normalize-component.h:82</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_a3e993d522e4e85b5dc5e331f2ff84023"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a3e993d522e4e85b5dc5e331f2ff84023">kaldi::nnet3::NormalizeComponent::Backprop</a></div><div class="ttdeci">virtual void Backprop(const std::string &amp;debug_info, const ComponentPrecomputedIndexes *indexes, const CuMatrixBase&lt; BaseFloat &gt; &amp;in_value, const CuMatrixBase&lt; BaseFloat &gt; &amp;, const CuMatrixBase&lt; BaseFloat &gt; &amp;out_deriv, void *memo, Component *to_update, CuMatrixBase&lt; BaseFloat &gt; *in_deriv) const</div><div class="ttdoc">Backprop function; depending on which of the arguments &amp;#39;to_update&amp;#39; and &amp;#39;in_deriv&amp;#39; are non-NULL...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8cc_source.html#l00177">nnet-normalize-component.cc:177</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_a62ab993f430cb6dfa5c9dedca95791a4"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a62ab993f430cb6dfa5c9dedca95791a4">kaldi::nnet3::BatchNormComponent::block_dim_</a></div><div class="ttdeci">int32 block_dim_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00261">nnet-normalize-component.h:261</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_a245d65d566725422b859c99bff7623f8"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a245d65d566725422b859c99bff7623f8">kaldi::nnet3::NormalizeComponent::Info</a></div><div class="ttdeci">virtual std::string Info() const</div><div class="ttdoc">Returns some text-form information about this component, for diagnostics. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8cc_source.html#l00113">nnet-normalize-component.cc:113</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_a4a16a6da3a5108ec53e759722a51fd47"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a4a16a6da3a5108ec53e759722a51fd47">kaldi::nnet3::BatchNormComponent::Properties</a></div><div class="ttdeci">virtual int32 Properties() const</div><div class="ttdoc">Return bitmask of the component&amp;#39;s properties. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00182">nnet-normalize-component.h:182</a></div></div>
<div class="ttc" id="arpa-file-parser-test_8cc_html_a951345011b75d2e8d9bfc18ca63510d2"><div class="ttname"><a href="arpa-file-parser-test_8cc.html#a951345011b75d2e8d9bfc18ca63510d2">count</a></div><div class="ttdeci">const size_t count</div><div class="ttdef"><b>Definition:</b> <a href="arpa-file-parser-test_8cc_source.html#l00066">arpa-file-parser-test.cc:66</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1Component_html_a750ca3e44a00898afea53b54697226ba"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1Component.html#a750ca3e44a00898afea53b54697226ba">kaldi::nnet3::Component::Scale</a></div><div class="ttdeci">virtual void Scale(BaseFloat scale)</div><div class="ttdoc">This virtual function when called on – an UpdatableComponent scales the parameters by &quot;scale&quot; when c...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00360">nnet-component-itf.h:360</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html">kaldi::nnet3::NormalizeComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00073">nnet-normalize-component.h:73</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_a259a07240d14958023962b3658d4cf78"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a259a07240d14958023962b3658d4cf78">kaldi::nnet3::NormalizeComponent::target_rms_</a></div><div class="ttdeci">BaseFloat target_rms_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00114">nnet-normalize-component.h:114</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_a0238fc78ea1750f010c1a9561ae16e09"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a0238fc78ea1750f010c1a9561ae16e09">kaldi::nnet3::BatchNormComponent::scale_</a></div><div class="ttdeci">CuVector&lt; BaseFloat &gt; scale_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00294">nnet-normalize-component.h:294</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1Component_html_ab162a2631e5335091d1f2bba1571e54d"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1Component.html#ab162a2631e5335091d1f2bba1571e54d">kaldi::nnet3::Component::ZeroStats</a></div><div class="ttdeci">virtual void ZeroStats()</div><div class="ttdoc">Components that provide an implementation of StoreStats should also provide an implementation of Zero...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00195">nnet-component-itf.h:195</a></div></div>
<div class="ttc" id="classfloat_html"><div class="ttname"><a href="classfloat.html">float</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1BatchNormComponent_1_1Memo_html"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1BatchNormComponent_1_1Memo.html">kaldi::nnet3::BatchNormComponent::Memo</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00229">nnet-normalize-component.h:229</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a2a37e781d9be4e2cb09699a840dde841"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2a37e781d9be4e2cb09699a840dde841">kaldi::nnet3::kBackpropNeedsOutput</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00067">nnet-component-itf.h:67</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_af2d951f58073f362411ee482aa469975"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#af2d951f58073f362411ee482aa469975">kaldi::nnet3::BatchNormComponent::Type</a></div><div class="ttdeci">virtual std::string Type() const</div><div class="ttdoc">Returns a string such as &quot;SigmoidComponent&quot;, describing the type of the object. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00181">nnet-normalize-component.h:181</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1Component_html_a304cec15e1a696a5af5f2f5daae7bc4f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1Component.html#a304cec15e1a696a5af5f2f5daae7bc4f">kaldi::nnet3::Component::StoreStats</a></div><div class="ttdeci">virtual void StoreStats(const CuMatrixBase&lt; BaseFloat &gt; &amp;in_value, const CuMatrixBase&lt; BaseFloat &gt; &amp;out_value, void *memo)</div><div class="ttdoc">This function may store stats on average activation values, and for some component types...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00186">nnet-component-itf.h:186</a></div></div>
<div class="ttc" id="natural-gradient-online_8h_html"><div class="ttname"><a href="natural-gradient-online_8h.html">natural-gradient-online.h</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a2f52823d0c7fdc03b0be47662c66146d"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2f52823d0c7fdc03b0be47662c66146d">kaldi::nnet3::kPropagateInPlace</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00049">nnet-component-itf.h:49</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_acfe867fd15cc5ced623bf7775bef58a5"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#acfe867fd15cc5ced623bf7775bef58a5">kaldi::nnet3::BatchNormComponent::stats_sumsq_</a></div><div class="ttdeci">CuVector&lt; double &gt; stats_sumsq_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00286">nnet-normalize-component.h:286</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_ad4cb6aed1f1980c2c36f34e09ceea0e0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#ad4cb6aed1f1980c2c36f34e09ceea0e0">kaldi::nnet3::BatchNormComponent::InputDim</a></div><div class="ttdeci">virtual int32 InputDim() const</div><div class="ttdoc">Returns input-dimension of this component. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00176">nnet-normalize-component.h:176</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a5530b2f8f01fac9e6e73fd29a65d4127"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a5530b2f8f01fac9e6e73fd29a65d4127">kaldi::nnet3::kSimpleComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00038">nnet-component-itf.h:38</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_a323155ad8034c0b14762dd78ae4415b5"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a323155ad8034c0b14762dd78ae4415b5">kaldi::nnet3::BatchNormComponent::OutputDim</a></div><div class="ttdeci">virtual int32 OutputDim() const</div><div class="ttdoc">Returns output-dimension of this component. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00177">nnet-normalize-component.h:177</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3affff5abfeafd5643bee15f1daafe6827"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3affff5abfeafd5643bee15f1daafe6827">kaldi::nnet3::kStoresStats</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00071">nnet-component-itf.h:71</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1BatchNormComponent_1_1Memo_html_a610dc0905fcc6ea9368ef1fdd22fce11"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1BatchNormComponent_1_1Memo.html#a610dc0905fcc6ea9368ef1fdd22fce11">kaldi::nnet3::BatchNormComponent::Memo::mean_uvar_scale</a></div><div class="ttdeci">CuMatrix&lt; BaseFloat &gt; mean_uvar_scale</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00237">nnet-normalize-component.h:237</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3adac6588b2ef2e8b52936718cf97263e7"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3adac6588b2ef2e8b52936718cf97263e7">kaldi::nnet3::kBackpropNeedsInput</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00065">nnet-component-itf.h:65</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_a008c4e6cc13410d1b983ad2b06fffeaf"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a008c4e6cc13410d1b983ad2b06fffeaf">kaldi::nnet3::BatchNormComponent::epsilon_</a></div><div class="ttdeci">BaseFloat epsilon_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00265">nnet-normalize-component.h:265</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3abaa0f1d8521d4753ffae9f2cc22a15df"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3abaa0f1d8521d4753ffae9f2cc22a15df">kaldi::nnet3::kBackpropInPlace</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00069">nnet-component-itf.h:69</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3a2df016ee6a8dfbdac91f5e53f3662a94"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3a2df016ee6a8dfbdac91f5e53f3662a94">kaldi::nnet3::kInputContiguous</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00075">nnet-component-itf.h:75</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_af2d951f58073f362411ee482aa469975"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#af2d951f58073f362411ee482aa469975">kaldi::nnet3::NormalizeComponent::Type</a></div><div class="ttdeci">virtual std::string Type() const</div><div class="ttdoc">Returns a string such as &quot;SigmoidComponent&quot;, describing the type of the object. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00083">nnet-normalize-component.h:83</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_a62ab993f430cb6dfa5c9dedca95791a4"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a62ab993f430cb6dfa5c9dedca95791a4">kaldi::nnet3::NormalizeComponent::block_dim_</a></div><div class="ttdeci">int32 block_dim_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00113">nnet-normalize-component.h:113</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_aef07468f925ef361a4cc94dd52d51d12"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#aef07468f925ef361a4cc94dd52d51d12">kaldi::nnet3::BatchNormComponent::Offset</a></div><div class="ttdeci">const CuVector&lt; BaseFloat &gt; &amp; Offset() const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00224">nnet-normalize-component.h:224</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_a259a07240d14958023962b3658d4cf78"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a259a07240d14958023962b3658d4cf78">kaldi::nnet3::BatchNormComponent::target_rms_</a></div><div class="ttdeci">BaseFloat target_rms_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00270">nnet-normalize-component.h:270</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1BatchNormComponent_1_1Memo_html_a32d4a33731fac2ac8d3bc0dd478ecdf4"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1BatchNormComponent_1_1Memo.html#a32d4a33731fac2ac8d3bc0dd478ecdf4">kaldi::nnet3::BatchNormComponent::Memo::num_frames</a></div><div class="ttdeci">int32 num_frames</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00231">nnet-normalize-component.h:231</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_a08031ac0ce0b0973ed948e43ebd706be"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a08031ac0ce0b0973ed948e43ebd706be">kaldi::nnet3::BatchNormComponent::dim_</a></div><div class="ttdeci">int32 dim_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00254">nnet-normalize-component.h:254</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_a34160584d82072ed039ec2b5672b99ab"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a34160584d82072ed039ec2b5672b99ab">kaldi::nnet3::NormalizeComponent::input_dim_</a></div><div class="ttdeci">int32 input_dim_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00112">nnet-normalize-component.h:112</a></div></div>
<div class="ttc" id="classkaldi_1_1CuMatrixBase_html"><div class="ttname"><a href="classkaldi_1_1CuMatrixBase.html">kaldi::CuMatrixBase</a></div><div class="ttdoc">Matrix for CUDA computing. </div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00069">matrix-common.h:69</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_a36da016976f88292c0d31653a20cbfe3acda3bbc91bd09631b18fdc57376c2b90"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#a36da016976f88292c0d31653a20cbfe3acda3bbc91bd09631b18fdc57376c2b90">kaldi::nnet3::kBackpropAdds</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00061">nnet-component-itf.h:61</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes_html"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1ComponentPrecomputedIndexes.html">kaldi::nnet3::ComponentPrecomputedIndexes</a></div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00097">nnet-component-itf.h:97</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_ae8095f8ed3ae953b61987ef6a28dba83"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#ae8095f8ed3ae953b61987ef6a28dba83">kaldi::nnet3::BatchNormComponent::Scale</a></div><div class="ttdeci">const CuVector&lt; BaseFloat &gt; &amp; Scale() const</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00225">nnet-normalize-component.h:225</a></div></div>
<div class="ttc" id="classkaldi_1_1Vector_html"><div class="ttname"><a href="classkaldi_1_1Vector.html">kaldi::Vector&lt; double &gt;</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_a8eacf8174f9fa190732c320ee3cf1d62"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a8eacf8174f9fa190732c320ee3cf1d62">kaldi::nnet3::BatchNormComponent::DeleteMemo</a></div><div class="ttdeci">virtual void DeleteMemo(void *memo) const</div><div class="ttdoc">This virtual function only needs to be overwritten by Components that return a non-NULL memo from the...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00216">nnet-normalize-component.h:216</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_a323155ad8034c0b14762dd78ae4415b5"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a323155ad8034c0b14762dd78ae4415b5">kaldi::nnet3::NormalizeComponent::OutputDim</a></div><div class="ttdeci">virtual int32 OutputDim() const</div><div class="ttdoc">Returns output-dimension of this component. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00101">nnet-normalize-component.h:101</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_a8e7d2790fc7e94fe9780ccc937de1270"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a8e7d2790fc7e94fe9780ccc937de1270">kaldi::nnet3::NormalizeComponent::Read</a></div><div class="ttdeci">virtual void Read(std::istream &amp;is, bool binary)</div><div class="ttdoc">Read function (used after we know the type of the Component); accepts input that is missing the token...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8cc_source.html#l00057">nnet-normalize-component.cc:57</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_ae57ffe302e7f0c009671a7783c5c991b"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#ae57ffe302e7f0c009671a7783c5c991b">kaldi::nnet3::NormalizeComponent::add_log_stddev_</a></div><div class="ttdeci">bool add_log_stddev_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00116">nnet-normalize-component.h:116</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_ad4cb6aed1f1980c2c36f34e09ceea0e0"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#ad4cb6aed1f1980c2c36f34e09ceea0e0">kaldi::nnet3::NormalizeComponent::InputDim</a></div><div class="ttdeci">virtual int32 InputDim() const</div><div class="ttdoc">Returns input-dimension of this component. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00100">nnet-normalize-component.h:100</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_a6e61791b6ff20c4e71142b700b0ad79a"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a6e61791b6ff20c4e71142b700b0ad79a">kaldi::nnet3::BatchNormComponent::test_mode_</a></div><div class="ttdeci">bool test_mode_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00278">nnet-normalize-component.h:278</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_a60c3546bdf95d749a23d421d3085b319"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a60c3546bdf95d749a23d421d3085b319">kaldi::nnet3::BatchNormComponent::count_</a></div><div class="ttdeci">double count_</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00282">nnet-normalize-component.h:282</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1Component_html_aab16938236bd0978bad5de6d56fcf47f"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1Component.html#aab16938236bd0978bad5de6d56fcf47f">kaldi::nnet3::Component::Add</a></div><div class="ttdeci">virtual void Add(BaseFloat alpha, const Component &amp;other)</div><div class="ttdoc">This virtual function when called by – an UpdatableComponent adds the parameters of another updatabl...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-component-itf_8h_source.html#l00370">nnet-component-itf.h:370</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1NormalizeComponent_html_a8f1f1b05a170bd81a544caefe1acb040"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1NormalizeComponent.html#a8f1f1b05a170bd81a544caefe1acb040">kaldi::nnet3::NormalizeComponent::Propagate</a></div><div class="ttdeci">virtual void * Propagate(const ComponentPrecomputedIndexes *indexes, const CuMatrixBase&lt; BaseFloat &gt; &amp;in, CuMatrixBase&lt; BaseFloat &gt; *out) const</div><div class="ttdoc">Propagate function. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8cc_source.html#l00132">nnet-normalize-component.cc:132</a></div></div>
<div class="ttc" id="classkaldi_1_1nnet3_1_1BatchNormComponent_html_a20a3899b1059ddf29e8f9a96781ca506"><div class="ttname"><a href="classkaldi_1_1nnet3_1_1BatchNormComponent.html#a20a3899b1059ddf29e8f9a96781ca506">kaldi::nnet3::BatchNormComponent::BatchNormComponent</a></div><div class="ttdeci">BatchNormComponent()</div><div class="ttdef"><b>Definition:</b> <a href="nnet-normalize-component_8h_source.html#l00162">nnet-normalize-component.h:162</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_67a0a17020b8eedc08ffa5626b1d53a1.html">nnet3</a></li><li class="navelem"><a class="el" href="nnet-normalize-component_8h.html">nnet-normalize-component.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
