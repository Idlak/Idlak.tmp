<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: ComputationGraph Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structkaldi_1_1nnet3_1_1ComputationGraph.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="structkaldi_1_1nnet3_1_1ComputationGraph-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ComputationGraph Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The first step in compilation is to turn the ComputationSpecification into a <a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html" title="The first step in compilation is to turn the ComputationSpecification into a ComputationGraph, where for each Cindex we have a list of other Cindexes that it depends on. ">ComputationGraph</a>, where for each Cindex we have a list of other Cindexes that it depends on.  
 <a href="structkaldi_1_1nnet3_1_1ComputationGraph.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="nnet-computation-graph_8h_source.html">nnet-computation-graph.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for ComputationGraph:</div>
<div class="dyncontent">
<div class="center"><img src="structkaldi_1_1nnet3_1_1ComputationGraph__coll__graph.png" border="0" usemap="#ComputationGraph_coll__map" alt="Collaboration graph"/></div>
<map name="ComputationGraph_coll__map" id="ComputationGraph_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5e1647c5b37c6759f88249b823cc90f5"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a5e1647c5b37c6759f88249b823cc90f5">GetCindexId</a> (const <a class="el" href="namespacekaldi_1_1nnet3.html#ac8344e7587df9247d6cc492874901d4d">Cindex</a> &amp;cindex, <a class="el" href="classbool.html">bool</a> <a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a7038fa9813a5d2c15c5c8a33dcc2ca9b">is_input</a>, <a class="el" href="classbool.html">bool</a> *is_new)</td></tr>
<tr class="memdesc:a5e1647c5b37c6759f88249b823cc90f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps a Cindex to an integer cindex_id.  <a href="#a5e1647c5b37c6759f88249b823cc90f5">More...</a><br /></td></tr>
<tr class="separator:a5e1647c5b37c6759f88249b823cc90f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fcd2024e02803f01f07b09fe579c300"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a2fcd2024e02803f01f07b09fe579c300">GetCindexId</a> (const <a class="el" href="namespacekaldi_1_1nnet3.html#ac8344e7587df9247d6cc492874901d4d">Cindex</a> &amp;cindex) const</td></tr>
<tr class="memdesc:a2fcd2024e02803f01f07b09fe579c300"><td class="mdescLeft">&#160;</td><td class="mdescRight">Const version of GetCindexId that does not add CindexIds.  <a href="#a2fcd2024e02803f01f07b09fe579c300">More...</a><br /></td></tr>
<tr class="separator:a2fcd2024e02803f01f07b09fe579c300"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa2b46f3168fa50abe2cd1a96ec0ce79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#aaa2b46f3168fa50abe2cd1a96ec0ce79">Renumber</a> (int32 start_cindex_id, const std::vector&lt; <a class="el" href="classbool.html">bool</a> &gt; &amp;keep)</td></tr>
<tr class="memdesc:aaa2b46f3168fa50abe2cd1a96ec0ce79"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function renumbers the cindex-ids (but only those with index c &gt;= start_cindex_id,.  <a href="#aaa2b46f3168fa50abe2cd1a96ec0ce79">More...</a><br /></td></tr>
<tr class="separator:aaa2b46f3168fa50abe2cd1a96ec0ce79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac24d420fb21ea0d5da971d2bb6dfaf85"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#ac24d420fb21ea0d5da971d2bb6dfaf85">Print</a> (std::ostream &amp;os, const std::vector&lt; std::string &gt; &amp;node_names)</td></tr>
<tr class="memdesc:ac24d420fb21ea0d5da971d2bb6dfaf85"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function, useful for debugging/visualization purposes, prints out a summary of the computation graph (which will take up multiple lines).  <a href="#ac24d420fb21ea0d5da971d2bb6dfaf85">More...</a><br /></td></tr>
<tr class="separator:ac24d420fb21ea0d5da971d2bb6dfaf85"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a297d5616d3920cb01d699e7a0e4d2a67"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespacekaldi_1_1nnet3.html#ac8344e7587df9247d6cc492874901d4d">Cindex</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a297d5616d3920cb01d699e7a0e4d2a67">cindexes</a></td></tr>
<tr class="memdesc:a297d5616d3920cb01d699e7a0e4d2a67"><td class="mdescLeft">&#160;</td><td class="mdescRight">The mapping of cindex_id to Cindex.  <a href="#a297d5616d3920cb01d699e7a0e4d2a67">More...</a><br /></td></tr>
<tr class="separator:a297d5616d3920cb01d699e7a0e4d2a67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7038fa9813a5d2c15c5c8a33dcc2ca9b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classbool.html">bool</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a7038fa9813a5d2c15c5c8a33dcc2ca9b">is_input</a></td></tr>
<tr class="memdesc:a7038fa9813a5d2c15c5c8a33dcc2ca9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">For each Cindex this tells us whether it was provided as an input to the network.  <a href="#a7038fa9813a5d2c15c5c8a33dcc2ca9b">More...</a><br /></td></tr>
<tr class="separator:a7038fa9813a5d2c15c5c8a33dcc2ca9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5de41a87e16d0cb72ab76d026525216"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; int32 &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#ac5de41a87e16d0cb72ab76d026525216">dependencies</a></td></tr>
<tr class="memdesc:ac5de41a87e16d0cb72ab76d026525216"><td class="mdescLeft">&#160;</td><td class="mdescRight">dependencies[cindex_id] gives you the list of other cindex_ids that this particular cindex_id directly depends on to compute it.  <a href="#ac5de41a87e16d0cb72ab76d026525216">More...</a><br /></td></tr>
<tr class="separator:ac5de41a87e16d0cb72ab76d026525216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10afcf8365749371ae8bdd273869a38a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int32 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a10afcf8365749371ae8bdd273869a38a">segment_ends</a></td></tr>
<tr class="memdesc:a10afcf8365749371ae8bdd273869a38a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This variable is only of particular interest in a 'multi-segment' computation, which is used while creating computations for 'online' operation (for the kind of situation where you provide some input; run the computation; get some output, provide some more input for larger 't' values, etc.).  <a href="#a10afcf8365749371ae8bdd273869a38a">More...</a><br /></td></tr>
<tr class="separator:a10afcf8365749371ae8bdd273869a38a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:af44b01a2dc35afbba4a17407f97c824d"><td class="memItemLeft" align="right" valign="top">unordered_map&lt; <a class="el" href="namespacekaldi_1_1nnet3.html#ac8344e7587df9247d6cc492874901d4d">Cindex</a>, int32, <a class="el" href="structkaldi_1_1nnet3_1_1CindexHasher.html">CindexHasher</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#af44b01a2dc35afbba4a17407f97c824d">cindex_to_cindex_id_</a></td></tr>
<tr class="memdesc:af44b01a2dc35afbba4a17407f97c824d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps each Cindex to an integer cindex_id: reverse mapping of "cindexes".  <a href="#af44b01a2dc35afbba4a17407f97c824d">More...</a><br /></td></tr>
<tr class="separator:af44b01a2dc35afbba4a17407f97c824d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The first step in compilation is to turn the ComputationSpecification into a <a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html" title="The first step in compilation is to turn the ComputationSpecification into a ComputationGraph, where for each Cindex we have a list of other Cindexes that it depends on. ">ComputationGraph</a>, where for each Cindex we have a list of other Cindexes that it depends on. </p>
<p>All the stages of compilation use the <a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html" title="The first step in compilation is to turn the ComputationSpecification into a ComputationGraph, where for each Cindex we have a list of other Cindexes that it depends on. ">ComputationGraph</a> representation; they are mostly manipulations of it.</p>
<p>For efficiency, we give each Cindex its own integer identifier, called a "cindex_id". A cindex_id is only interpretable relative to a <a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html" title="The first step in compilation is to turn the ComputationSpecification into a ComputationGraph, where for each Cindex we have a list of other Cindexes that it depends on. ">ComputationGraph</a>; it's an index into the "cindexes" array of the <a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html" title="The first step in compilation is to turn the ComputationSpecification into a ComputationGraph, where for each Cindex we have a list of other Cindexes that it depends on. ">ComputationGraph</a>. The <a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a5e1647c5b37c6759f88249b823cc90f5" title="Maps a Cindex to an integer cindex_id. ">GetCindexId()</a> functions perform the reverse mapping. </p>

<p class="definition">Definition at line <a class="el" href="nnet-computation-graph_8h_source.html#l00043">43</a> of file <a class="el" href="nnet-computation-graph_8h_source.html">nnet-computation-graph.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a5e1647c5b37c6759f88249b823cc90f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e1647c5b37c6759f88249b823cc90f5">&#9670;&nbsp;</a></span>GetCindexId() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 GetCindexId </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacekaldi_1_1nnet3.html#ac8344e7587df9247d6cc492874901d4d">Cindex</a> &amp;&#160;</td>
          <td class="paramname"><em>cindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>is_input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a> *&#160;</td>
          <td class="paramname"><em>is_new</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps a Cindex to an integer cindex_id. </p>
<p>If not present, then add it (with the corresponding "is_input" flag set to the value "input") and set *is_new to true. If present, set is_new to false and return the existing cindex_id. </p>

<p class="definition">Definition at line <a class="el" href="nnet-computation-graph_8cc_source.html#l00028">28</a> of file <a class="el" href="nnet-computation-graph_8cc_source.html">nnet-computation-graph.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-computation-graph_8h_source.html#l00111">ComputationGraph::cindex_to_cindex_id_</a>, <a class="el" href="nnet-computation-graph_8h_source.html#l00046">ComputationGraph::cindexes</a>, <a class="el" href="nnet-computation-graph_8h_source.html#l00063">ComputationGraph::dependencies</a>, <a class="el" href="nnet-computation-graph_8h_source.html#l00055">ComputationGraph::is_input</a>, and <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-computation-graph_8cc_source.html#l00635">ComputationGraphBuilder::AddDependencies()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01013">kaldi::nnet3::computation_graph::AddInputToGraph()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00990">kaldi::nnet3::computation_graph::AddOutputToGraph()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01607">ComputationStepsComputer::AddStep()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00736">ComputationGraphBuilder::ComputeComputableInfo()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01171">kaldi::nnet3::ComputeComputationGraph()</a>, <a class="el" href="nnet-compile_8cc_source.html#l00457">Compiler::ComputeInputLocationsList()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01695">ComputationStepsComputer::ConvertToCindexIds()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00801">ComputationGraphBuilder::GetComputableInfo()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01495">CindexSet::operator()()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01522">IndexSet::operator()()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00175">ComputationGraph::Print()</a>, and <a class="el" href="nnet-computation-graph_8cc_source.html#l01567">ComputationStepsComputer::ProcessInputOrOutputStep()</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                                                              {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keyword">typedef</span> unordered_map&lt;Cindex, int32, CindexHasher&gt; map_type;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  int32 new_index = <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a297d5616d3920cb01d699e7a0e4d2a67">cindexes</a>.size();  <span class="comment">// we&#39;ll add this if we don&#39;t find it.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  std::pair&lt;map_type::iterator, bool&gt; p = <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#af44b01a2dc35afbba4a17407f97c824d">cindex_to_cindex_id_</a>.insert(</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;      std::pair&lt;Cindex, int32&gt;(cindex, new_index));</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordflow">if</span> (p.second == <span class="keyword">true</span>) {  <span class="comment">// We added something to the hash.</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    *is_new = <span class="keyword">true</span>;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(is_input.size() == <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a297d5616d3920cb01d699e7a0e4d2a67">cindexes</a>.size());</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a297d5616d3920cb01d699e7a0e4d2a67">cindexes</a>.push_back(cindex);</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    is_input.push_back(input);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="comment">// make room for this &quot;dependencies&quot; entry.</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#ac5de41a87e16d0cb72ab76d026525216">dependencies</a>.resize(new_index + 1);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">return</span> new_index;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  } <span class="keywordflow">else</span> { <span class="comment">// We did not add anything.</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    *is_new = <span class="keyword">false</span>;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">return</span> p.first-&gt;second;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  }</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;}</div><div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationGraph_html_a297d5616d3920cb01d699e7a0e4d2a67"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a297d5616d3920cb01d699e7a0e4d2a67">kaldi::nnet3::ComputationGraph::cindexes</a></div><div class="ttdeci">std::vector&lt; Cindex &gt; cindexes</div><div class="ttdoc">The mapping of cindex_id to Cindex. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation-graph_8h_source.html#l00046">nnet-computation-graph.h:46</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationGraph_html_ac5de41a87e16d0cb72ab76d026525216"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationGraph.html#ac5de41a87e16d0cb72ab76d026525216">kaldi::nnet3::ComputationGraph::dependencies</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int32 &gt; &gt; dependencies</div><div class="ttdoc">dependencies[cindex_id] gives you the list of other cindex_ids that this particular cindex_id directl...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation-graph_8h_source.html#l00063">nnet-computation-graph.h:63</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationGraph_html_af44b01a2dc35afbba4a17407f97c824d"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationGraph.html#af44b01a2dc35afbba4a17407f97c824d">kaldi::nnet3::ComputationGraph::cindex_to_cindex_id_</a></div><div class="ttdeci">unordered_map&lt; Cindex, int32, CindexHasher &gt; cindex_to_cindex_id_</div><div class="ttdoc">Maps each Cindex to an integer cindex_id: reverse mapping of &quot;cindexes&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation-graph_8h_source.html#l00111">nnet-computation-graph.h:111</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2fcd2024e02803f01f07b09fe579c300"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fcd2024e02803f01f07b09fe579c300">&#9670;&nbsp;</a></span>GetCindexId() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 GetCindexId </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacekaldi_1_1nnet3.html#ac8344e7587df9247d6cc492874901d4d">Cindex</a> &amp;&#160;</td>
          <td class="paramname"><em>cindex</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Const version of GetCindexId that does not add CindexIds. </p>
<p>It will return -1 if the Cindex is not present, and the user should check for this. </p>

<p class="definition">Definition at line <a class="el" href="nnet-computation-graph_8cc_source.html#l00047">47</a> of file <a class="el" href="nnet-computation-graph_8cc_source.html">nnet-computation-graph.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-computation-graph_8h_source.html#l00111">ComputationGraph::cindex_to_cindex_id_</a>.</p>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                                                              {</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keyword">typedef</span> unordered_map&lt;Cindex, int32, CindexHasher&gt; map_type;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  map_type::const_iterator iter = <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#af44b01a2dc35afbba4a17407f97c824d">cindex_to_cindex_id_</a>.find(cindex);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keywordflow">if</span> (iter == <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#af44b01a2dc35afbba4a17407f97c824d">cindex_to_cindex_id_</a>.end())</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">return</span> iter-&gt;second;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div><div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationGraph_html_af44b01a2dc35afbba4a17407f97c824d"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationGraph.html#af44b01a2dc35afbba4a17407f97c824d">kaldi::nnet3::ComputationGraph::cindex_to_cindex_id_</a></div><div class="ttdeci">unordered_map&lt; Cindex, int32, CindexHasher &gt; cindex_to_cindex_id_</div><div class="ttdoc">Maps each Cindex to an integer cindex_id: reverse mapping of &quot;cindexes&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation-graph_8h_source.html#l00111">nnet-computation-graph.h:111</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac24d420fb21ea0d5da971d2bb6dfaf85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac24d420fb21ea0d5da971d2bb6dfaf85">&#9670;&nbsp;</a></span>Print()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Print </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>node_names</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function, useful for debugging/visualization purposes, prints out a summary of the computation graph (which will take up multiple lines). </p>
<p>Format is: [ cindex1 -&gt; dep-cindex1 dep-cindex2 ] [ cindex2 -&gt; dep-cindex3 dep-cindex4 ] showing each Cindex and the Cindexes it depends on. cindexes from different network nodes are shown on different lines. </p>

<p class="definition">Definition at line <a class="el" href="nnet-computation-graph_8cc_source.html#l00175">175</a> of file <a class="el" href="nnet-computation-graph_8cc_source.html">nnet-computation-graph.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-computation-graph_8h_source.html#l00046">ComputationGraph::cindexes</a>, <a class="el" href="nnet-computation-graph_8h_source.html#l00063">ComputationGraph::dependencies</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00028">ComputationGraph::GetCindexId()</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="nnet-computation-graph_8h_source.html#l00055">ComputationGraph::is_input</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, and <a class="el" href="nnet-common_8cc_source.html#l00432">kaldi::nnet3::PrintCindex()</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-utils_8cc_source.html#l00071">kaldi::nnet3::EvaluateComputationRequest()</a>.</p>
<div class="fragment"><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                                                                     {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  int32 max_cindexes_per_line = 50, max_dependencies = 5,</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      num_cindexes = <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a297d5616d3920cb01d699e7a0e4d2a67">cindexes</a>.size();</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  std::vector&lt;std::pair&lt;Cindex, std::vector&lt;Cindex&gt; &gt; &gt; pairs;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  pairs.reserve(num_cindexes);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordflow">for</span> (int32 cindex_id = 0; cindex_id &lt; num_cindexes; cindex_id++) {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    int32 size = <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#ac5de41a87e16d0cb72ab76d026525216">dependencies</a>[cindex_id].size();</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    std::vector&lt;Cindex&gt; deps(size);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; size; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      deps[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a297d5616d3920cb01d699e7a0e4d2a67">cindexes</a>[<a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#ac5de41a87e16d0cb72ab76d026525216">dependencies</a>[cindex_id][<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>]];</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    std::sort(deps.begin(), deps.end());</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    pairs.push_back(std::pair&lt;<a class="code" href="namespacekaldi_1_1nnet3.html#ac8344e7587df9247d6cc492874901d4d">Cindex</a>, std::vector&lt;Cindex&gt; &gt;(<a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a297d5616d3920cb01d699e7a0e4d2a67">cindexes</a>[cindex_id],</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                                                            deps));</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  std::sort(pairs.begin(), pairs.end());</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  int32 cur_start = 0;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_cindexes; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span> (pairs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].first.first != pairs[cur_start].first.first) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      cur_start = <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      os &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> - cur_start &lt; max_cindexes_per_line) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      os &lt;&lt; <span class="stringliteral">&quot;[ &quot;</span>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <a class="code" href="namespacekaldi_1_1nnet3.html#ab5b506b12f6ee61fbe53115f474df376">PrintCindex</a>(os, pairs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].first, node_names);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keywordflow">if</span> (! <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a7038fa9813a5d2c15c5c8a33dcc2ca9b">is_input</a>[<a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a5e1647c5b37c6759f88249b823cc90f5">GetCindexId</a>(pairs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].first)]) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="comment">// only print out dependences for cindexes that</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="comment">// were not provided as inputs.</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        os &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; pairs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].second.size(); <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; max_dependencies) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <a class="code" href="namespacekaldi_1_1nnet3.html#ab5b506b12f6ee61fbe53115f474df376">PrintCindex</a>(os, pairs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].second[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>], node_names);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> + 1 &lt; pairs[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>].second.size())</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;              os &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> == max_dependencies) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            os &lt;&lt; <span class="stringliteral">&quot;...&quot;</span>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;          }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      os &lt;&lt; <span class="stringliteral">&quot; ] &quot;</span>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> - cur_start == max_cindexes_per_line) {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      os &lt;&lt; <span class="stringliteral">&quot;...&quot;</span>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  os &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div><div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_ab5b506b12f6ee61fbe53115f474df376"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#ab5b506b12f6ee61fbe53115f474df376">kaldi::nnet3::PrintCindex</a></div><div class="ttdeci">void PrintCindex(std::ostream &amp;os, const Cindex &amp;cindex, const std::vector&lt; std::string &gt; &amp;node_names)</div><div class="ttdef"><b>Definition:</b> <a href="nnet-common_8cc_source.html#l00432">nnet-common.cc:432</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_ac8344e7587df9247d6cc492874901d4d"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#ac8344e7587df9247d6cc492874901d4d">kaldi::nnet3::Cindex</a></div><div class="ttdeci">std::pair&lt; int32, Index &gt; Cindex</div><div class="ttdef"><b>Definition:</b> <a href="nnet-common_8h_source.html#l00115">nnet-common.h:115</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationGraph_html_a297d5616d3920cb01d699e7a0e4d2a67"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a297d5616d3920cb01d699e7a0e4d2a67">kaldi::nnet3::ComputationGraph::cindexes</a></div><div class="ttdeci">std::vector&lt; Cindex &gt; cindexes</div><div class="ttdoc">The mapping of cindex_id to Cindex. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation-graph_8h_source.html#l00046">nnet-computation-graph.h:46</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationGraph_html_ac5de41a87e16d0cb72ab76d026525216"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationGraph.html#ac5de41a87e16d0cb72ab76d026525216">kaldi::nnet3::ComputationGraph::dependencies</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int32 &gt; &gt; dependencies</div><div class="ttdoc">dependencies[cindex_id] gives you the list of other cindex_ids that this particular cindex_id directl...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation-graph_8h_source.html#l00063">nnet-computation-graph.h:63</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationGraph_html_a5e1647c5b37c6759f88249b823cc90f5"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a5e1647c5b37c6759f88249b823cc90f5">kaldi::nnet3::ComputationGraph::GetCindexId</a></div><div class="ttdeci">int32 GetCindexId(const Cindex &amp;cindex, bool is_input, bool *is_new)</div><div class="ttdoc">Maps a Cindex to an integer cindex_id. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation-graph_8cc_source.html#l00028">nnet-computation-graph.cc:28</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationGraph_html_a7038fa9813a5d2c15c5c8a33dcc2ca9b"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a7038fa9813a5d2c15c5c8a33dcc2ca9b">kaldi::nnet3::ComputationGraph::is_input</a></div><div class="ttdeci">std::vector&lt; bool &gt; is_input</div><div class="ttdoc">For each Cindex this tells us whether it was provided as an input to the network. ...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation-graph_8h_source.html#l00055">nnet-computation-graph.h:55</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa2b46f3168fa50abe2cd1a96ec0ce79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa2b46f3168fa50abe2cd1a96ec0ce79">&#9670;&nbsp;</a></span>Renumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Renumber </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>start_cindex_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classbool.html">bool</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>keep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function renumbers the cindex-ids (but only those with index c &gt;= start_cindex_id,. </p>
<p>true. The "keep" array must be the same size as this-&gt;cindexes.size() - start_cindex_id. </p>

<p class="definition">Definition at line <a class="el" href="nnet-computation-graph_8cc_source.html#l00057">57</a> of file <a class="el" href="nnet-computation-graph_8cc_source.html">nnet-computation-graph.cc</a>.</p>

<p class="reference">References <a class="el" href="nnet-computation-graph_8h_source.html#l00111">ComputationGraph::cindex_to_cindex_id_</a>, <a class="el" href="nnet-computation-graph_8h_source.html#l00046">ComputationGraph::cindexes</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00064">rnnlm::d</a>, <a class="el" href="nnet-computation-graph_8h_source.html#l00063">ComputationGraph::dependencies</a>, <a class="el" href="nnet-computation-graph_8h_source.html#l00055">ComputationGraph::is_input</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, and <a class="el" href="kaldi-error_8h_source.html#l00181">KALDI_PARANOID_ASSERT</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-computation-graph_8cc_source.html#l00575">ComputationGraphBuilder::Prune()</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                                                             {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  int32 old_num_cindex_ids = <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a297d5616d3920cb01d699e7a0e4d2a67">cindexes</a>.size();</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(keep.size() == old_num_cindex_ids - start_cindex_id);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// count_before_renumbering is the number of cindex_ids &gt;= start_cindex_id,</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// before renumbering.</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  int32 count_before_renumbering = old_num_cindex_ids - start_cindex_id;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  std::vector&lt;int32&gt; old2new(count_before_renumbering, -1), new2old;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  new2old.reserve(old_num_cindex_ids);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; count_before_renumbering; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (keep[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>]) {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      old2new[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>] = new2old.size() + start_cindex_id;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      new2old.push_back(j + start_cindex_id);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">// count_after_renumbering is the number of cindex_ids &gt;= start_cindex_id,</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">// after renumbering.</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  int32 count_after_renumbering = new2old.size(),</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      new_num_cindex_ids = start_cindex_id + count_after_renumbering;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">if</span> (count_after_renumbering == count_before_renumbering) {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment">// this is an optimization for when we are not deleting any</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// cindex-ids.</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  }</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">for</span> (int32 old_cindex_id = start_cindex_id;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;       old_cindex_id &lt; old_num_cindex_ids; old_cindex_id++) {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    int32 new_cindex_id = old2new[old_cindex_id - start_cindex_id];</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="namespacekaldi_1_1nnet3.html#ac8344e7587df9247d6cc492874901d4d">Cindex</a> &amp;cindex = <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a297d5616d3920cb01d699e7a0e4d2a67">cindexes</a>[old_cindex_id];</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">if</span> (new_cindex_id == -1) {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#af44b01a2dc35afbba4a17407f97c824d">cindex_to_cindex_id_</a>.erase(cindex);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (new_cindex_id != old_cindex_id) {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#af44b01a2dc35afbba4a17407f97c824d">cindex_to_cindex_id_</a>[cindex] = new_cindex_id;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  std::vector&lt;int32&gt; temp;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordflow">for</span> (int32 c = start_cindex_id; c &lt; new_num_cindex_ids; c++) {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    int32 <a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a> = new2old[c - start_cindex_id];</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// note: d &gt;= c, which is why we do not overwrite data here.</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="group__error__group.html#ga2c852c1a15c7f195ec8021de2ab119a0">KALDI_PARANOID_ASSERT</a>(d &gt;= c);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a297d5616d3920cb01d699e7a0e4d2a67">cindexes</a>[c] = <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a297d5616d3920cb01d699e7a0e4d2a67">cindexes</a>[<a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>];</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a7038fa9813a5d2c15c5c8a33dcc2ca9b">is_input</a>[c] = <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a7038fa9813a5d2c15c5c8a33dcc2ca9b">is_input</a>[<a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>];</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// if c == d, we need to create a temporary copy.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keyword">const</span> std::vector&lt;int32&gt; &amp;src_dependencies =</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        (c == d ? (temp = <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#ac5de41a87e16d0cb72ab76d026525216">dependencies</a>[<a class="code" href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>]) : <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#ac5de41a87e16d0cb72ab76d026525216">dependencies</a>[d]);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    std::vector&lt;int32&gt;::const_iterator</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        iter = src_dependencies.begin(), end = src_dependencies.end();</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#ac5de41a87e16d0cb72ab76d026525216">dependencies</a>[c].clear();</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">for</span> (; iter != end; ++iter) {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      int32 old_dep = *iter;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="keywordflow">if</span> (old_dep &lt; start_cindex_id) {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#ac5de41a87e16d0cb72ab76d026525216">dependencies</a>[c].push_back(old_dep);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        int32 new_dep = old2new[old_dep - start_cindex_id];</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordflow">if</span> (new_dep != -1)</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;          <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#ac5de41a87e16d0cb72ab76d026525216">dependencies</a>[c].push_back(new_dep);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;          <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Dependency on nonexistent cindex-id&quot;</span>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a297d5616d3920cb01d699e7a0e4d2a67">cindexes</a>.resize(new_num_cindex_ids);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a7038fa9813a5d2c15c5c8a33dcc2ca9b">is_input</a>.resize(new_num_cindex_ids);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <a class="code" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#ac5de41a87e16d0cb72ab76d026525216">dependencies</a>.resize(new_num_cindex_ids);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div><div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacekaldi_1_1nnet3_html_ac8344e7587df9247d6cc492874901d4d"><div class="ttname"><a href="namespacekaldi_1_1nnet3.html#ac8344e7587df9247d6cc492874901d4d">kaldi::nnet3::Cindex</a></div><div class="ttdeci">std::pair&lt; int32, Index &gt; Cindex</div><div class="ttdef"><b>Definition:</b> <a href="nnet-common_8h_source.html#l00115">nnet-common.h:115</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationGraph_html_a297d5616d3920cb01d699e7a0e4d2a67"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a297d5616d3920cb01d699e7a0e4d2a67">kaldi::nnet3::ComputationGraph::cindexes</a></div><div class="ttdeci">std::vector&lt; Cindex &gt; cindexes</div><div class="ttdoc">The mapping of cindex_id to Cindex. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation-graph_8h_source.html#l00046">nnet-computation-graph.h:46</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationGraph_html_ac5de41a87e16d0cb72ab76d026525216"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationGraph.html#ac5de41a87e16d0cb72ab76d026525216">kaldi::nnet3::ComputationGraph::dependencies</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int32 &gt; &gt; dependencies</div><div class="ttdoc">dependencies[cindex_id] gives you the list of other cindex_ids that this particular cindex_id directl...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation-graph_8h_source.html#l00063">nnet-computation-graph.h:63</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationGraph_html_af44b01a2dc35afbba4a17407f97c824d"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationGraph.html#af44b01a2dc35afbba4a17407f97c824d">kaldi::nnet3::ComputationGraph::cindex_to_cindex_id_</a></div><div class="ttdeci">unordered_map&lt; Cindex, int32, CindexHasher &gt; cindex_to_cindex_id_</div><div class="ttdoc">Maps each Cindex to an integer cindex_id: reverse mapping of &quot;cindexes&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation-graph_8h_source.html#l00111">nnet-computation-graph.h:111</a></div></div>
<div class="ttc" id="structkaldi_1_1nnet3_1_1ComputationGraph_html_a7038fa9813a5d2c15c5c8a33dcc2ca9b"><div class="ttname"><a href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a7038fa9813a5d2c15c5c8a33dcc2ca9b">kaldi::nnet3::ComputationGraph::is_input</a></div><div class="ttdeci">std::vector&lt; bool &gt; is_input</div><div class="ttdoc">For each Cindex this tells us whether it was provided as an input to the network. ...</div><div class="ttdef"><b>Definition:</b> <a href="nnet-computation-graph_8h_source.html#l00055">nnet-computation-graph.h:55</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="group__error__group_html_ga2c852c1a15c7f195ec8021de2ab119a0"><div class="ttname"><a href="group__error__group.html#ga2c852c1a15c7f195ec8021de2ab119a0">KALDI_PARANOID_ASSERT</a></div><div class="ttdeci">#define KALDI_PARANOID_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00181">kaldi-error.h:181</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="namespacernnlm_html_a873684cefeb665f3d5e6b495de57fc0d"><div class="ttname"><a href="namespacernnlm.html#a873684cefeb665f3d5e6b495de57fc0d">rnnlm::d</a></div><div class="ttdeci">double d</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00064">mikolov-rnnlm-lib.cc:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af44b01a2dc35afbba4a17407f97c824d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af44b01a2dc35afbba4a17407f97c824d">&#9670;&nbsp;</a></span>cindex_to_cindex_id_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unordered_map&lt;<a class="el" href="namespacekaldi_1_1nnet3.html#ac8344e7587df9247d6cc492874901d4d">Cindex</a>, int32, <a class="el" href="structkaldi_1_1nnet3_1_1CindexHasher.html">CindexHasher</a>&gt; cindex_to_cindex_id_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Maps each Cindex to an integer cindex_id: reverse mapping of "cindexes". </p>
<p>Must be accessed via the <a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html#a5e1647c5b37c6759f88249b823cc90f5" title="Maps a Cindex to an integer cindex_id. ">GetCindexId()</a> functions. </p>

<p class="definition">Definition at line <a class="el" href="nnet-computation-graph_8h_source.html#l00111">111</a> of file <a class="el" href="nnet-computation-graph_8h_source.html">nnet-computation-graph.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-computation-graph_8cc_source.html#l00028">ComputationGraph::GetCindexId()</a>, and <a class="el" href="nnet-computation-graph_8cc_source.html#l00057">ComputationGraph::Renumber()</a>.</p>

</div>
</div>
<a id="a297d5616d3920cb01d699e7a0e4d2a67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a297d5616d3920cb01d699e7a0e4d2a67">&#9670;&nbsp;</a></span>cindexes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="namespacekaldi_1_1nnet3.html#ac8344e7587df9247d6cc492874901d4d">Cindex</a>&gt; cindexes</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The mapping of cindex_id to Cindex. </p>

<p class="definition">Definition at line <a class="el" href="nnet-computation-graph_8h_source.html#l00046">46</a> of file <a class="el" href="nnet-computation-graph_8h_source.html">nnet-computation-graph.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-computation-graph_8cc_source.html#l00635">ComputationGraphBuilder::AddDependencies()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01660">ComputationStepsComputer::AddStep()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00494">ComputationGraphBuilder::Check()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01946">ComputationStepsComputer::Check()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00452">ComputationGraphBuilder::ComputationGraphBuilder()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01539">ComputationStepsComputer::ComputationStepsComputer()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00462">ComputationGraphBuilder::Compute()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00736">ComputationGraphBuilder::ComputeComputableInfo()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01171">kaldi::nnet3::ComputeComputationGraph()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01425">kaldi::nnet3::ComputeComputationPhases()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01047">kaldi::nnet3::computation_graph::ComputeDependenciesSubset()</a>, <a class="el" href="nnet-compile_8cc_source.html#l00176">Compiler::ComputeDerivNeeded()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01101">kaldi::nnet3::computation_graph::ComputeEpochInfo()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00937">ComputationGraphBuilder::ComputeRequiredArray()</a>, <a class="el" href="nnet-compile_8cc_source.html#l00142">Compiler::ComputeStepDependencies()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01679">ComputationStepsComputer::ConvertToCindexes()</a>, <a class="el" href="nnet-compile_8cc_source.html#l00279">Compiler::CreateStepInfo()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00028">ComputationGraph::GetCindexId()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00801">ComputationGraphBuilder::GetComputableInfo()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00175">ComputationGraph::Print()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01741">ComputationStepsComputer::ProcessComponentStep()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00575">ComputationGraphBuilder::Prune()</a>, and <a class="el" href="nnet-computation-graph_8cc_source.html#l00057">ComputationGraph::Renumber()</a>.</p>

</div>
</div>
<a id="ac5de41a87e16d0cb72ab76d026525216"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5de41a87e16d0cb72ab76d026525216">&#9670;&nbsp;</a></span>dependencies</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::vector&lt;int32&gt; &gt; dependencies</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>dependencies[cindex_id] gives you the list of other cindex_ids that this particular cindex_id directly depends on to compute it. </p>
<p>No repeats will be present. Note, some of these dependencies may be optional dependencies; in early stages of compilation this will contain all "desired" inputs and later we will prune the dependencies contain just those that are used (which will vary depending on availability). </p>

<p class="definition">Definition at line <a class="el" href="nnet-computation-graph_8h_source.html#l00063">63</a> of file <a class="el" href="nnet-computation-graph_8h_source.html">nnet-computation-graph.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-computation-graph_8cc_source.html#l00635">ComputationGraphBuilder::AddDependencies()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00494">ComputationGraphBuilder::Check()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01171">kaldi::nnet3::ComputeComputationGraph()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01047">kaldi::nnet3::computation_graph::ComputeDependenciesSubset()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00937">ComputationGraphBuilder::ComputeRequiredArray()</a>, <a class="el" href="nnet-compile_8cc_source.html#l00142">Compiler::ComputeStepDependencies()</a>, <a class="el" href="nnet-compile_8cc_source.html#l00279">Compiler::CreateStepInfo()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00907">ComputationGraphBuilder::DecrementUsableCount()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00134">ComputationGraphBuilder::ExplainWhyNotComputable()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00028">ComputationGraph::GetCindexId()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00891">ComputationGraphBuilder::IncrementUsableCount()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00175">ComputationGraph::Print()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01741">ComputationStepsComputer::ProcessComponentStep()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00364">ComputationGraphBuilder::PruneDependencies()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00057">ComputationGraph::Renumber()</a>, and <a class="el" href="nnet-computation-graph_8cc_source.html#l00826">ComputationGraphBuilder::UpdateComputableInfo()</a>.</p>

</div>
</div>
<a id="a7038fa9813a5d2c15c5c8a33dcc2ca9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7038fa9813a5d2c15c5c8a33dcc2ca9b">&#9670;&nbsp;</a></span>is_input</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classbool.html">bool</a>&gt; is_input</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For each Cindex this tells us whether it was provided as an input to the network. </p>
<p>This is necessary for a couple of reasons: firstly, the framework allows users to provide values for nodes of type kComponent (e.g. for RNN context). Also, Cindexes for input nodes that were not provided by the user may be created during computation graph creation (although they will not be computable), and we need to distinguish these from the provided Cindexes. </p>

<p class="definition">Definition at line <a class="el" href="nnet-computation-graph_8h_source.html#l00055">55</a> of file <a class="el" href="nnet-computation-graph_8h_source.html">nnet-computation-graph.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-computation-graph_8cc_source.html#l00250">ComputationGraphBuilder::AddInputs()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00273">ComputationGraphBuilder::AddOutputs()</a>, <a class="el" href="nnet-compile_8cc_source.html#l01189">Compiler::AllocateMatrices()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00736">ComputationGraphBuilder::ComputeComputableInfo()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01171">kaldi::nnet3::ComputeComputationGraph()</a>, <a class="el" href="nnet-compile_8cc_source.html#l00176">Compiler::ComputeDerivNeeded()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01101">kaldi::nnet3::computation_graph::ComputeEpochInfo()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00028">ComputationGraph::GetCindexId()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00175">ComputationGraph::Print()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l00575">ComputationGraphBuilder::Prune()</a>, and <a class="el" href="nnet-computation-graph_8cc_source.html#l00057">ComputationGraph::Renumber()</a>.</p>

</div>
</div>
<a id="a10afcf8365749371ae8bdd273869a38a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10afcf8365749371ae8bdd273869a38a">&#9670;&nbsp;</a></span>segment_ends</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int32&gt; segment_ends</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This variable is only of particular interest in a 'multi-segment' computation, which is used while creating computations for 'online' operation (for the kind of situation where you provide some input; run the computation; get some output, provide some more input for larger 't' values, etc.). </p>
<p>In this context, a 'segment' is a continuous range of cindex_ids, and a segment_end is one past the end of each segment, which is the same as the beginning of the next segment, if there is one. In the case of a fully-created computation graph with only one segment, this will contain just one value which equals the number of cindex_ids. This information is needed to correctly order the computation, because</p>
<p>the computation graph itself does not contain dependencies that encode the ordering of segments (and even if it did contain those dependencies, it's not really compatible with the way we use the scc's in the graph structure of the network to order the computation). </p>

<p class="definition">Definition at line <a class="el" href="nnet-computation-graph_8h_source.html#l00080">80</a> of file <a class="el" href="nnet-computation-graph_8h_source.html">nnet-computation-graph.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="nnet-computation-graph_8cc_source.html#l00462">ComputationGraphBuilder::Compute()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01425">kaldi::nnet3::ComputeComputationPhases()</a>, <a class="el" href="nnet-computation-graph_8cc_source.html#l01101">kaldi::nnet3::computation_graph::ComputeEpochInfo()</a>, and <a class="el" href="nnet-computation-graph_8cc_source.html#l00575">ComputationGraphBuilder::Prune()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>nnet3/<a class="el" href="nnet-computation-graph_8h_source.html">nnet-computation-graph.h</a></li>
<li>nnet3/<a class="el" href="nnet-computation-graph_8cc_source.html">nnet-computation-graph.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekaldi.html">kaldi</a></li><li class="navelem"><a class="el" href="namespacekaldi_1_1nnet3.html">nnet3</a></li><li class="navelem"><a class="el" href="structkaldi_1_1nnet3_1_1ComputationGraph.html">ComputationGraph</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
