<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Kaldi: AperiodicEnergy Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" /> 
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
 <td id="projectlogo"><a href="http://kaldi-asr.org/"><img alt="Logo" src="KaldiTextAndLogoSmall.png"/ style="padding: 3px 5px 1px 5px"></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname" style="display:none">Kaldi
   </div>
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief" style="display:none"></div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classkaldi_1_1AperiodicEnergy.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classkaldi_1_1AperiodicEnergy-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AperiodicEnergy Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class for computing aperiodic energy features.  
 <a href="classkaldi_1_1AperiodicEnergy.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for AperiodicEnergy:</div>
<div class="dyncontent">
<div class="center"><img src="classkaldi_1_1AperiodicEnergy__coll__graph.png" border="0" usemap="#AperiodicEnergy_coll__map" alt="Collaboration graph"/></div>
<map name="AperiodicEnergy_coll__map" id="AperiodicEnergy_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a88496f2593538ee23000cd3cb06f3947"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#a88496f2593538ee23000cd3cb06f3947">AperiodicEnergy</a> (const <a class="el" href="structkaldi_1_1AperiodicEnergyOptions.html">AperiodicEnergyOptions</a> &amp;opts)</td></tr>
<tr class="separator:a88496f2593538ee23000cd3cb06f3947"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0bf012f09af697310a09d1210921b3c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#ac0bf012f09af697310a09d1210921b3c">~AperiodicEnergy</a> ()</td></tr>
<tr class="separator:ac0bf012f09af697310a09d1210921b3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e94894f6e6829f6096284fe9f7e328a"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#a6e94894f6e6829f6096284fe9f7e328a">Dim</a> ()</td></tr>
<tr class="separator:a6e94894f6e6829f6096284fe9f7e328a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e77c02bd3fcc60829774d30bd67f99b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#a2e77c02bd3fcc60829774d30bd67f99b">CenterFreqs</a> ()</td></tr>
<tr class="separator:a2e77c02bd3fcc60829774d30bd67f99b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeed1a1b9e78a51cceb780a5170cfda69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#aeed1a1b9e78a51cceb780a5170cfda69">Compute</a> (const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;wave, const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;voicing_prob, const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;f0, <a class="el" href="classkaldi_1_1Matrix.html">Matrix</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *output)</td></tr>
<tr class="memdesc:aeed1a1b9e78a51cceb780a5170cfda69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute aperiodic energy coefficients, obtained by estimating the noise / aperiodicity spectrogram by sampling the frequencies that minimise the periodic spectrogram (a.k.a.  <a href="#aeed1a1b9e78a51cceb780a5170cfda69">More...</a><br /></td></tr>
<tr class="separator:aeed1a1b9e78a51cceb780a5170cfda69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdceae833c57c19dcac9aca8cb7ff947"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#afdceae833c57c19dcac9aca8cb7ff947">GetBandStarts</a> () const</td></tr>
<tr class="separator:afdceae833c57c19dcac9aca8cb7ff947"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adda5d6fac479a6b00e20b03b83cc8b8c"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#adda5d6fac479a6b00e20b03b83cc8b8c">GetBandCenters</a> () const</td></tr>
<tr class="separator:adda5d6fac479a6b00e20b03b83cc8b8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67ee6bda4587aef2d77caa1b03d8fbf6"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#a67ee6bda4587aef2d77caa1b03d8fbf6">GetBandEnds</a> () const</td></tr>
<tr class="separator:a67ee6bda4587aef2d77caa1b03d8fbf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aa6d0cb642f87ae582161c8eac4153ecb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#aa6d0cb642f87ae582161c8eac4153ecb">FindBandLocations</a> ()</td></tr>
<tr class="separator:aa6d0cb642f87ae582161c8eac4153ecb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66ef22339f7e77d45f28742bde485e80"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#a66ef22339f7e77d45f28742bde485e80">IdentifyNoiseRegions</a> (const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;power_spectrum, <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> f0, std::vector&lt; <a class="el" href="classbool.html">bool</a> &gt; *noise_indices)</td></tr>
<tr class="separator:a66ef22339f7e77d45f28742bde485e80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ed30d81f7adbc8540d7553a838028d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#a6ed30d81f7adbc8540d7553a838028d8">ObtainNoiseSpectrum</a> (const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;power_spectrum, const std::vector&lt; <a class="el" href="classbool.html">bool</a> &gt; &amp;noise_indices, <a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *noise_spectrum)</td></tr>
<tr class="memdesc:a6ed30d81f7adbc8540d7553a838028d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate the noise spectrum from a set of frequencies where noise should dominate in the signal.  <a href="#a6ed30d81f7adbc8540d7553a838028d8">More...</a><br /></td></tr>
<tr class="separator:a6ed30d81f7adbc8540d7553a838028d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afea4c4aadb33036e9fe91cbd12ba7339"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#afea4c4aadb33036e9fe91cbd12ba7339">ComputeHtsBands</a> (const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;power_spectrum, <a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *output)</td></tr>
<tr class="memdesc:afea4c4aadb33036e9fe91cbd12ba7339"><td class="mdescLeft">&#160;</td><td class="mdescRight">Average the energy of a power spectrum accross a set of predefined bands, the bands are designed to be somewhat compatible with what is commonly used in the HTS community, e.g.  <a href="#afea4c4aadb33036e9fe91cbd12ba7339">More...</a><br /></td></tr>
<tr class="separator:afea4c4aadb33036e9fe91cbd12ba7339"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bf7025ff138ad26f6076ed75da7c062"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#a9bf7025ff138ad26f6076ed75da7c062">KALDI_DISALLOW_COPY_AND_ASSIGN</a> (<a class="el" href="classkaldi_1_1AperiodicEnergy.html">AperiodicEnergy</a>)</td></tr>
<tr class="separator:a9bf7025ff138ad26f6076ed75da7c062"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a44420fdea0ac8ffd2da85ebc043a74a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structkaldi_1_1AperiodicEnergyOptions.html">AperiodicEnergyOptions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a></td></tr>
<tr class="separator:a44420fdea0ac8ffd2da85ebc043a74a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b54833fee05a1bb032731e032097929"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structkaldi_1_1FeatureWindowFunction.html">FeatureWindowFunction</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#a8b54833fee05a1bb032731e032097929">feature_window_function_</a></td></tr>
<tr class="separator:a8b54833fee05a1bb032731e032097929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac34fa979a1bf951c3462b1abaf1fa9a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1SplitRadixRealFft.html">SplitRadixRealFft</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#ac34fa979a1bf951c3462b1abaf1fa9a9">srfft_</a></td></tr>
<tr class="separator:ac34fa979a1bf951c3462b1abaf1fa9a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31dd6c1fd254910fc3d6c22e1fb066d8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1FrequencyBanks.html">FrequencyBanks</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a></td></tr>
<tr class="separator:a31dd6c1fd254910fc3d6c22e1fb066d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5963def33c959a8a61d1e6d88824d63"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a></td></tr>
<tr class="separator:ad5963def33c959a8a61d1e6d88824d63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bccc2c5ce8bb5bf3791746b106edee1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#a3bccc2c5ce8bb5bf3791746b106edee1">band_starts_</a></td></tr>
<tr class="separator:a3bccc2c5ce8bb5bf3791746b106edee1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c33c4063c3a52620541356775ecc4d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#a6c33c4063c3a52620541356775ecc4d4">band_centers_</a></td></tr>
<tr class="separator:a6c33c4063c3a52620541356775ecc4d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f1ee07b4444f4800a3f756f538a0914"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkaldi_1_1AperiodicEnergy.html#a7f1ee07b4444f4800a3f756f538a0914">band_ends_</a></td></tr>
<tr class="separator:a7f1ee07b4444f4800a3f756f538a0914"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class for computing aperiodic energy features. </p>
<p>This class is inspired by the algorithm described in B. Yegnanarayana, C. d'Alessandro, and V. Darsinos, "An iterative algorithm for decomposition of speech signals into periodic and aperiodic components," IEEE Trans. Speech &amp; Audio Process., vol. 6(1), pp 1-11, 1998. The differences from the algorithm of the paper is that we operate on the spectrum of the waveform itself, and not that of its LP residual. Also, we are not explicitly doing F0 estimation as in the paper, but obtaining it from a separate piece of code. Finally, we model the noise spectrum more conservatively by sampling a restricted set of "safe" points and linearly interpolating between them, while the paper use more potentially unsafe points and does a slow interpolation based on alternating FFT and IFFT. </p>

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8h_source.html#l00099">99</a> of file <a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a88496f2593538ee23000cd3cb06f3947"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88496f2593538ee23000cd3cb06f3947">&#9670;&nbsp;</a></span>AperiodicEnergy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1AperiodicEnergy.html">AperiodicEnergy</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structkaldi_1_1AperiodicEnergyOptions.html">AperiodicEnergyOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>opts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8cc_source.html#l00029">29</a> of file <a class="el" href="feature-aperiodic_8cc_source.html">feature-aperiodic.cc</a>.</p>

<p class="reference">References <a class="el" href="feature-aperiodic_8h_source.html#l00036">AperiodicEnergyOptions::banks_opts</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00038">AperiodicEnergyOptions::f0_min</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00072">AperiodicEnergy::FindBandLocations()</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00035">AperiodicEnergyOptions::frame_opts</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00131">AperiodicEnergy::freq_banks_</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00128">AperiodicEnergy::opts_</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00132">AperiodicEnergy::padded_window_size_</a>, <a class="el" href="feature-window_8h_source.html#l00100">FrameExtractionOptions::PaddedWindowSize()</a>, <a class="el" href="kaldi-math_8cc_source.html#l00031">kaldi::RoundUpToNearestPowerOfTwo()</a>, <a class="el" href="feature-window_8h_source.html#l00036">FrameExtractionOptions::samp_freq</a>, <a class="el" href="banks-computations_8h_source.html#l00058">FrequencyBanksOptions::scale_type</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00130">AperiodicEnergy::srfft_</a>, and <a class="el" href="feature-aperiodic_8h_source.html#l00042">AperiodicEnergyOptions::use_hts_bands</a>.</p>
<div class="fragment"><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    : <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>(opts), <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a8b54833fee05a1bb032731e032097929">feature_window_function_</a>(opts.frame_opts),</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;      <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ac34fa979a1bf951c3462b1abaf1fa9a9">srfft_</a>(NULL), <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a>(NULL) {</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  int32 window_size = opts.frame_opts.PaddedWindowSize();</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="comment">// If the signal window size is N, then the number of points in the FFT</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="comment">// computation is the smallest power of 2 that is greater than or equal to 2N</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a> = <a class="code" href="namespacekaldi.html#ad9dde1e7eeb07e83cab92b2a9c7fa54c">RoundUpToNearestPowerOfTwo</a>(window_size);</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a> &lt;=</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;      static_cast&lt;int32&gt;(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a188abb2e21a2d6b63458d470a3ccbf10">frame_opts</a>.<a class="code" href="structkaldi_1_1FrameExtractionOptions.html#a814c23fceef9259caed333e631974807">samp_freq</a>/<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a52399b9222e8bd34e06fd417e60cff7c">f0_min</a>)) {</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;Padded window size (&quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a> &lt;&lt; <span class="stringliteral">&quot;) too small &quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; to capture F0 range.&quot;</span>;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  }</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ac34fa979a1bf951c3462b1abaf1fa9a9">srfft_</a> = <span class="keyword">new</span> SplitRadixRealFft&lt;BaseFloat&gt;(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  FrameExtractionOptions freq_frame_opts = <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a188abb2e21a2d6b63458d470a3ccbf10">frame_opts</a>;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  freq_frame_opts.<a class="code" href="structkaldi_1_1FrameExtractionOptions.html#a0f6dc259acd4bea15701362ad6caf5e1">frame_length_ms</a> =</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      (<span class="keyword">static_cast&lt;</span><a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a><span class="keyword">&gt;</span>(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>)</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;          * 1000.0) / freq_frame_opts.samp_freq;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="comment">// If using HTS bands, we force the bark scale options on the MelBanks</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a5f19d13329b4e5365706eb533c70fc0f">use_hts_bands</a>)</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#adfbd65de997903d4fd500a3b694c84fb">banks_opts</a>.<a class="code" href="structkaldi_1_1FrequencyBanksOptions.html#a0a64d3a251458c268d89a352ddf67752">scale_type</a> = <span class="stringliteral">&quot;bark&quot;</span>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a> = <span class="keyword">new</span> FrequencyBanks(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#adfbd65de997903d4fd500a3b694c84fb">banks_opts</a>, freq_frame_opts, 1.0);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <a class="code" href="classkaldi_1_1AperiodicEnergy.html#aa6d0cb642f87ae582161c8eac4153ecb">FindBandLocations</a>(); <span class="comment">// Set the internal vectors for faster access</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div><div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_aa6d0cb642f87ae582161c8eac4153ecb"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#aa6d0cb642f87ae582161c8eac4153ecb">kaldi::AperiodicEnergy::FindBandLocations</a></div><div class="ttdeci">void FindBandLocations()</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8cc_source.html#l00072">feature-aperiodic.cc:72</a></div></div>
<div class="ttc" id="namespacekaldi_html_ad9dde1e7eeb07e83cab92b2a9c7fa54c"><div class="ttname"><a href="namespacekaldi.html#ad9dde1e7eeb07e83cab92b2a9c7fa54c">kaldi::RoundUpToNearestPowerOfTwo</a></div><div class="ttdeci">int32 RoundUpToNearestPowerOfTwo(int32 n)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8cc_source.html#l00031">kaldi-math.cc:31</a></div></div>
<div class="ttc" id="structkaldi_1_1FrameExtractionOptions_html_a0f6dc259acd4bea15701362ad6caf5e1"><div class="ttname"><a href="structkaldi_1_1FrameExtractionOptions.html#a0f6dc259acd4bea15701362ad6caf5e1">kaldi::FrameExtractionOptions::frame_length_ms</a></div><div class="ttdeci">BaseFloat frame_length_ms</div><div class="ttdef"><b>Definition:</b> <a href="feature-window_8h_source.html#l00038">feature-window.h:38</a></div></div>
<div class="ttc" id="structkaldi_1_1FrameExtractionOptions_html_a814c23fceef9259caed333e631974807"><div class="ttname"><a href="structkaldi_1_1FrameExtractionOptions.html#a814c23fceef9259caed333e631974807">kaldi::FrameExtractionOptions::samp_freq</a></div><div class="ttdeci">BaseFloat samp_freq</div><div class="ttdef"><b>Definition:</b> <a href="feature-window_8h_source.html#l00036">feature-window.h:36</a></div></div>
<div class="ttc" id="structkaldi_1_1FrequencyBanksOptions_html_a0a64d3a251458c268d89a352ddf67752"><div class="ttname"><a href="structkaldi_1_1FrequencyBanksOptions.html#a0a64d3a251458c268d89a352ddf67752">kaldi::FrequencyBanksOptions::scale_type</a></div><div class="ttdeci">std::string scale_type</div><div class="ttdef"><b>Definition:</b> <a href="banks-computations_8h_source.html#l00058">banks-computations.h:58</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_ac34fa979a1bf951c3462b1abaf1fa9a9"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#ac34fa979a1bf951c3462b1abaf1fa9a9">kaldi::AperiodicEnergy::srfft_</a></div><div class="ttdeci">SplitRadixRealFft&lt; BaseFloat &gt; * srfft_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00130">feature-aperiodic.h:130</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_adfbd65de997903d4fd500a3b694c84fb"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#adfbd65de997903d4fd500a3b694c84fb">kaldi::AperiodicEnergyOptions::banks_opts</a></div><div class="ttdeci">FrequencyBanksOptions banks_opts</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00036">feature-aperiodic.h:36</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_ad5963def33c959a8a61d1e6d88824d63"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">kaldi::AperiodicEnergy::padded_window_size_</a></div><div class="ttdeci">int32 padded_window_size_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00132">feature-aperiodic.h:132</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a44420fdea0ac8ffd2da85ebc043a74a6"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">kaldi::AperiodicEnergy::opts_</a></div><div class="ttdeci">AperiodicEnergyOptions opts_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00128">feature-aperiodic.h:128</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_a188abb2e21a2d6b63458d470a3ccbf10"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#a188abb2e21a2d6b63458d470a3ccbf10">kaldi::AperiodicEnergyOptions::frame_opts</a></div><div class="ttdeci">FrameExtractionOptions frame_opts</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00035">feature-aperiodic.h:35</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_a5f19d13329b4e5365706eb533c70fc0f"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#a5f19d13329b4e5365706eb533c70fc0f">kaldi::AperiodicEnergyOptions::use_hts_bands</a></div><div class="ttdeci">bool use_hts_bands</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00042">feature-aperiodic.h:42</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a8b54833fee05a1bb032731e032097929"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a8b54833fee05a1bb032731e032097929">kaldi::AperiodicEnergy::feature_window_function_</a></div><div class="ttdeci">FeatureWindowFunction feature_window_function_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00129">feature-aperiodic.h:129</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_a52399b9222e8bd34e06fd417e60cff7c"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#a52399b9222e8bd34e06fd417e60cff7c">kaldi::AperiodicEnergyOptions::f0_min</a></div><div class="ttdeci">BaseFloat f0_min</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00038">feature-aperiodic.h:38</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a31dd6c1fd254910fc3d6c22e1fb066d8"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">kaldi::AperiodicEnergy::freq_banks_</a></div><div class="ttdeci">FrequencyBanks * freq_banks_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00131">feature-aperiodic.h:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0bf012f09af697310a09d1210921b3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0bf012f09af697310a09d1210921b3c">&#9670;&nbsp;</a></span>~AperiodicEnergy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classkaldi_1_1AperiodicEnergy.html">AperiodicEnergy</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8cc_source.html#l00055">55</a> of file <a class="el" href="feature-aperiodic_8cc_source.html">feature-aperiodic.cc</a>.</p>

<p class="reference">References <a class="el" href="feature-aperiodic_8h_source.html#l00131">AperiodicEnergy::freq_banks_</a>, <a class="el" href="kaldi-error_8h_source.html#l00129">KALDI_WARN</a>, and <a class="el" href="feature-aperiodic_8h_source.html#l00130">AperiodicEnergy::srfft_</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                                  {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ac34fa979a1bf951c3462b1abaf1fa9a9">srfft_</a> == NULL) {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;NULL srfft_ pointer: This should not happen if the class &quot;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;was used properly&quot;</span>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  }</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keyword">delete</span> <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ac34fa979a1bf951c3462b1abaf1fa9a9">srfft_</a>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a> == NULL) {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a> &lt;&lt; <span class="stringliteral">&quot;NULL freq_banks_ pointer: This should not happen if the &quot;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;class was used properly&quot;</span>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  }</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keyword">delete</span> <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div><div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_ac34fa979a1bf951c3462b1abaf1fa9a9"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#ac34fa979a1bf951c3462b1abaf1fa9a9">kaldi::AperiodicEnergy::srfft_</a></div><div class="ttdeci">SplitRadixRealFft&lt; BaseFloat &gt; * srfft_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00130">feature-aperiodic.h:130</a></div></div>
<div class="ttc" id="group__error__group_html_ga994be213ddf127b5d6f20a43a02b513a"><div class="ttname"><a href="group__error__group.html#ga994be213ddf127b5d6f20a43a02b513a">KALDI_WARN</a></div><div class="ttdeci">#define KALDI_WARN</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00129">kaldi-error.h:129</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a31dd6c1fd254910fc3d6c22e1fb066d8"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">kaldi::AperiodicEnergy::freq_banks_</a></div><div class="ttdeci">FrequencyBanks * freq_banks_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00131">feature-aperiodic.h:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2e77c02bd3fcc60829774d30bd67f99b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e77c02bd3fcc60829774d30bd67f99b">&#9670;&nbsp;</a></span>CenterFreqs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; CenterFreqs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8h_source.html#l00106">106</a> of file <a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a>-&gt;<a class="code" href="classkaldi_1_1FrequencyBanks.html#a2977ef4bf409ec9accc5d8990690e685">GetCenterFreqs</a>(); }</div><div class="ttc" id="classkaldi_1_1FrequencyBanks_html_a2977ef4bf409ec9accc5d8990690e685"><div class="ttname"><a href="classkaldi_1_1FrequencyBanks.html#a2977ef4bf409ec9accc5d8990690e685">kaldi::FrequencyBanks::GetCenterFreqs</a></div><div class="ttdeci">const Vector&lt; BaseFloat &gt; &amp; GetCenterFreqs() const</div><div class="ttdef"><b>Definition:</b> <a href="banks-computations_8h_source.html#l00144">banks-computations.h:144</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a31dd6c1fd254910fc3d6c22e1fb066d8"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">kaldi::AperiodicEnergy::freq_banks_</a></div><div class="ttdeci">FrequencyBanks * freq_banks_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00131">feature-aperiodic.h:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeed1a1b9e78a51cceb780a5170cfda69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeed1a1b9e78a51cceb780a5170cfda69">&#9670;&nbsp;</a></span>Compute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Compute </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>wave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>voicing_prob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>f0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1Matrix.html">Matrix</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute aperiodic energy coefficients, obtained by estimating the noise / aperiodicity spectrogram by sampling the frequencies that minimise the periodic spectrogram (a.k.a. </p>
<p>pitch spectrogram). This function takes a wave file, and synchronised F0 / voicing probability sequences of features. Any suitable F0 extractor may be used, but we recommend using kaldi pitch extractor. </p>

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8cc_source.html#l00199">199</a> of file <a class="el" href="feature-aperiodic_8cc_source.html">feature-aperiodic.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-vector_8cc_source.html#l00788">VectorBase&lt; Real &gt;::ApplyLog()</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00135">AperiodicEnergy::band_centers_</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00136">AperiodicEnergy::band_ends_</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00134">AperiodicEnergy::band_starts_</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00036">AperiodicEnergyOptions::banks_opts</a>, <a class="el" href="banks-computations_8cc_source.html#l00236">FrequencyBanks::Compute()</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00166">AperiodicEnergy::ComputeHtsBands()</a>, <a class="el" href="feature-functions_8cc_source.html#l00029">kaldi::ComputePowerSpectrum()</a>, <a class="el" href="kaldi-vector_8cc_source.html#l00228">VectorBase&lt; Real &gt;::CopyFromVec()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00069">VectorBase&lt; Real &gt;::Data()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00063">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="feature-window_8cc_source.html#l00162">kaldi::ExtractWindow()</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00129">AperiodicEnergy::feature_window_function_</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00039">AperiodicEnergyOptions::frame_diff_tolerance</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00035">AperiodicEnergyOptions::frame_opts</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00131">AperiodicEnergy::freq_banks_</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00303">AperiodicEnergy::IdentifyNoiseRegions()</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00126">KALDI_ERR</a>, <a class="el" href="kaldi-error_8h_source.html#l00132">KALDI_LOG</a>, <a class="el" href="kaldi-error_8h_source.html#l00135">KALDI_VLOG</a>, <a class="el" href="matrix-common_8h_source.html#l00039">kaldi::kUndefined</a>, <a class="el" href="banks-computations_8h_source.html#l00046">FrequencyBanksOptions::num_bins</a>, <a class="el" href="feature-window_8cc_source.html#l00042">kaldi::NumFrames()</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00448">AperiodicEnergy::ObtainNoiseSpectrum()</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00128">AperiodicEnergy::opts_</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00132">AperiodicEnergy::padded_window_size_</a>, <a class="el" href="kaldi-vector_8h_source.html#l00093">VectorBase&lt; Real &gt;::Range()</a>, <a class="el" href="kaldi-matrix_8cc_source.html#l00818">Matrix&lt; Real &gt;::Resize()</a>, <a class="el" href="kaldi-matrix_8h_source.html#l00185">MatrixBase&lt; Real &gt;::Row()</a>, <a class="el" href="kaldi-vector_8cc_source.html#l00288">VectorBase&lt; Real &gt;::SetZero()</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00130">AperiodicEnergy::srfft_</a>, and <a class="el" href="feature-aperiodic_8h_source.html#l00042">AperiodicEnergyOptions::use_hts_bands</a>.</p>

<p class="reference">Referenced by <a class="el" href="compute-aperiodic-feats_8cc_source.html#l00024">main()</a>, and <a class="el" href="feature-aperiodic-test_8cc_source.html#l00030">kaldi::UnitTestAperiodic()</a>.</p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                                                         {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(output != NULL);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ac34fa979a1bf951c3462b1abaf1fa9a9">srfft_</a> != NULL &amp;&amp;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;              <span class="stringliteral">&quot;srfft_ must not be NULL if class is initialized properly.&quot;</span>);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a> != NULL &amp;&amp;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;              <span class="stringliteral">&quot;freq_banks_ must not be NULL if class is initialized properly.&quot;</span>);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  int32 frames_out = <a class="code" href="group__feat.html#ga3a4394e7a321cb172a34f001e7dc3eb5">NumFrames</a>(wave.Dim(), <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a188abb2e21a2d6b63458d470a3ccbf10">frame_opts</a>),</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      dim_out = <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#adfbd65de997903d4fd500a3b694c84fb">banks_opts</a>.<a class="code" href="structkaldi_1_1FrequencyBanksOptions.html#afd806ad582bbd61bebc5e3e7da26f891">num_bins</a>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  if (frames_out == 0)</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;No frames fit in file (#samples is &quot;</span> &lt;&lt; wave.Dim() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">if</span> (std::abs(voicing_prob.Dim() - frames_out) &gt; <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#ab40dd16d96fe9265687325cd0a998505">frame_diff_tolerance</a>) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;#frames in probability of voicing vector (&quot;</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;              &lt;&lt; voicing_prob.Dim() &lt;&lt; <span class="stringliteral">&quot;) doesn&#39;t match #frames in data (&quot;</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;              &lt;&lt; frames_out &lt;&lt; <span class="stringliteral">&quot;).&quot;</span>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">if</span> (std::abs(f0.Dim() - frames_out) &gt; <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#ab40dd16d96fe9265687325cd0a998505">frame_diff_tolerance</a>) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a> &lt;&lt; <span class="stringliteral">&quot;#frames in F0 vector (&quot;</span> &lt;&lt; f0.Dim() &lt;&lt; <span class="stringliteral">&quot;) doesn&#39;t match &quot;</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;#frames in data (&quot;</span> &lt;&lt; frames_out &lt;&lt; <span class="stringliteral">&quot;).&quot;</span>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  frames_out = std::min(frames_out, f0.Dim());  <span class="comment">// will be removed eventually</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  output-&gt;<a class="code" href="classkaldi_1_1Matrix.html#a70c095b28633f8874632a9d239a903d5">Resize</a>(frames_out, dim_out);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  Vector&lt;BaseFloat&gt; wave_window;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  Vector&lt;BaseFloat&gt; padded_window(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>, <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kUndefined</a>);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  Vector&lt;BaseFloat&gt; binned_energies(dim_out);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  Vector&lt;BaseFloat&gt; noise_binned_energies(dim_out);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="comment">// Print out band frequency information</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; dim_out; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a> &lt;&lt; <span class="stringliteral">&quot;Band &quot;</span> &lt;&lt; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; <span class="stringliteral">&quot;: [ &quot;</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;               &lt;&lt; <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a3bccc2c5ce8bb5bf3791746b106edee1">band_starts_</a>(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) &lt;&lt; <span class="stringliteral">&quot; ; &quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a6c33c4063c3a52620541356775ecc4d4">band_centers_</a>(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) &lt;&lt; <span class="stringliteral">&quot; ; &quot;</span> &lt;&lt; <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a7f1ee07b4444f4800a3f756f538a0914">band_ends_</a>(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) &lt;&lt; <span class="stringliteral">&quot; ]&quot;</span>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">for</span> (int32 r = 0; r &lt; frames_out; r++) {  <span class="comment">// r is frame index</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    SubVector&lt;BaseFloat&gt; this_ap_energy(output-&gt;<a class="code" href="classkaldi_1_1MatrixBase.html#afb93e5db62adee40ee68bbec3751443f">Row</a>(r));</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="group__feat.html#gad01ceb098de388af5167a6b50918e9b8">ExtractWindow</a>(0, wave, r, <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a188abb2e21a2d6b63458d470a3ccbf10">frame_opts</a>, <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a8b54833fee05a1bb032731e032097929">feature_window_function_</a>,</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                  &amp;wave_window, NULL);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    int32 window_size = wave_window.Dim();</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    padded_window.SetZero();</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    padded_window.Range(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2 - window_size/2, window_size).</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      CopyFromVec(wave_window);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ac34fa979a1bf951c3462b1abaf1fa9a9">srfft_</a>-&gt;Compute(padded_window.Data(), <span class="keyword">true</span>);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    Vector&lt;BaseFloat&gt; tmp_spectrum(padded_window);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="group__feat.html#gafd6748dd9dba539209f6126561ce8474">ComputePowerSpectrum</a>(&amp;tmp_spectrum);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    SubVector&lt;BaseFloat&gt; power_spectrum(tmp_spectrum, 0,</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                        <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2 + 1);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(2) &lt;&lt; <span class="stringliteral">&quot;Computing frame &quot;</span> &lt;&lt; r &lt;&lt; <span class="stringliteral">&quot; with F0 &quot;</span> &lt;&lt; f0(r);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">// BP: this code allows us to speed things up a bit for unvoiced regions</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span> (voicing_prob(r) &lt;= 0.0) {  <span class="comment">// unvoiced region</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="comment">// While the aperiodic energy will not be used during synthesis of the</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="comment">// unvoiced regions, it is still modeled as a separate stream in the HMM</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="comment">// and so we set it to the log-filterbank values.</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; dim_out; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) binned_energies(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) = 0.0;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      this_ap_energy.CopyFromVec(binned_energies);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">// Compute energy bands of signal power spectrum; the aperiodic energy</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// will be the ratio of noise over signal.</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// NB: we use ComputeHtsBands only for legacy support</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a5f19d13329b4e5365706eb533c70fc0f">use_hts_bands</a> &amp;&amp; dim_out == 5)</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <a class="code" href="classkaldi_1_1AperiodicEnergy.html#afea4c4aadb33036e9fe91cbd12ba7339">ComputeHtsBands</a>(power_spectrum, &amp;binned_energies);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a>-&gt;<a class="code" href="classkaldi_1_1FrequencyBanks.html#af7edf59bba383a17bbfa1cc29ca0a855">Compute</a>(power_spectrum, &amp;binned_energies);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">// Identify the area of spectrum where the noise dominates</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    std::vector&lt;bool&gt; noise_indices;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a66ef22339f7e77d45f28742bde485e80">IdentifyNoiseRegions</a>(power_spectrum, f0(r), &amp;noise_indices);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// Recreate a noise spectrum by interpolating from the noise</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// regions obtained previously.</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// padded_window contains the FFT coefficients</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a6ed30d81f7adbc8540d7553a838028d8">ObtainNoiseSpectrum</a>(padded_window, noise_indices, &amp;tmp_spectrum);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="group__feat.html#gafd6748dd9dba539209f6126561ce8474">ComputePowerSpectrum</a>(&amp;tmp_spectrum);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    SubVector&lt;BaseFloat&gt; noise_spectrum(tmp_spectrum, 0,</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                                        <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2 + 1);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// Compute energy bands of noise power spectrum.</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a5f19d13329b4e5365706eb533c70fc0f">use_hts_bands</a> || dim_out == 5)</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <a class="code" href="classkaldi_1_1AperiodicEnergy.html#afea4c4aadb33036e9fe91cbd12ba7339">ComputeHtsBands</a>(noise_spectrum, &amp;noise_binned_energies);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a>-&gt;<a class="code" href="classkaldi_1_1FrequencyBanks.html#af7edf59bba383a17bbfa1cc29ca0a855">Compute</a>(noise_spectrum, &amp;noise_binned_energies);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">// Normalise noise energy by the total energy in the band</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; noise_binned_energies.Dim(); <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      noise_binned_energies(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) /= binned_energies(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="comment">// Prevent overflows</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordflow">if</span> (noise_binned_energies(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) &gt;= 1.0) noise_binned_energies(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) = 1.0;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <span class="keywordflow">if</span> (noise_binned_energies(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) &lt;= 1e-15) noise_binned_energies(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) = 1e-15;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    noise_binned_energies.ApplyLog();  <span class="comment">// take the log</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    this_ap_energy.CopyFromVec(noise_binned_energies);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div><div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80baf2cd3231820315500697550960956126">kaldi::kUndefined</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00039">matrix-common.h:39</a></div></div>
<div class="ttc" id="classkaldi_1_1FrequencyBanks_html_af7edf59bba383a17bbfa1cc29ca0a855"><div class="ttname"><a href="classkaldi_1_1FrequencyBanks.html#af7edf59bba383a17bbfa1cc29ca0a855">kaldi::FrequencyBanks::Compute</a></div><div class="ttdeci">void Compute(const VectorBase&lt; BaseFloat &gt; &amp;fft_energies, VectorBase&lt; BaseFloat &gt; *banks_energies_out) const</div><div class="ttdoc">Compute Banks energies (note: not log energies). </div><div class="ttdef"><b>Definition:</b> <a href="banks-computations_8cc_source.html#l00236">banks-computations.cc:236</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_ab40dd16d96fe9265687325cd0a998505"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#ab40dd16d96fe9265687325cd0a998505">kaldi::AperiodicEnergyOptions::frame_diff_tolerance</a></div><div class="ttdeci">int32 frame_diff_tolerance</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00039">feature-aperiodic.h:39</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a66ef22339f7e77d45f28742bde485e80"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a66ef22339f7e77d45f28742bde485e80">kaldi::AperiodicEnergy::IdentifyNoiseRegions</a></div><div class="ttdeci">void IdentifyNoiseRegions(const VectorBase&lt; BaseFloat &gt; &amp;power_spectrum, BaseFloat f0, std::vector&lt; bool &gt; *noise_indices)</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8cc_source.html#l00303">feature-aperiodic.cc:303</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a6c33c4063c3a52620541356775ecc4d4"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a6c33c4063c3a52620541356775ecc4d4">kaldi::AperiodicEnergy::band_centers_</a></div><div class="ttdeci">Vector&lt; BaseFloat &gt; band_centers_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00135">feature-aperiodic.h:135</a></div></div>
<div class="ttc" id="group__feat_html_gad01ceb098de388af5167a6b50918e9b8"><div class="ttname"><a href="group__feat.html#gad01ceb098de388af5167a6b50918e9b8">kaldi::ExtractWindow</a></div><div class="ttdeci">void ExtractWindow(int64 sample_offset, const VectorBase&lt; BaseFloat &gt; &amp;wave, int32 f, const FrameExtractionOptions &amp;opts, const FeatureWindowFunction &amp;window_function, Vector&lt; BaseFloat &gt; *window, BaseFloat *log_energy_pre_window)</div><div class="ttdef"><b>Definition:</b> <a href="feature-window_8cc_source.html#l00162">feature-window.cc:162</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a3bccc2c5ce8bb5bf3791746b106edee1"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a3bccc2c5ce8bb5bf3791746b106edee1">kaldi::AperiodicEnergy::band_starts_</a></div><div class="ttdeci">Vector&lt; BaseFloat &gt; band_starts_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00134">feature-aperiodic.h:134</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_ac34fa979a1bf951c3462b1abaf1fa9a9"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#ac34fa979a1bf951c3462b1abaf1fa9a9">kaldi::AperiodicEnergy::srfft_</a></div><div class="ttdeci">SplitRadixRealFft&lt; BaseFloat &gt; * srfft_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00130">feature-aperiodic.h:130</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_adfbd65de997903d4fd500a3b694c84fb"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#adfbd65de997903d4fd500a3b694c84fb">kaldi::AperiodicEnergyOptions::banks_opts</a></div><div class="ttdeci">FrequencyBanksOptions banks_opts</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00036">feature-aperiodic.h:36</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_ad5963def33c959a8a61d1e6d88824d63"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">kaldi::AperiodicEnergy::padded_window_size_</a></div><div class="ttdeci">int32 padded_window_size_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00132">feature-aperiodic.h:132</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a7f1ee07b4444f4800a3f756f538a0914"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a7f1ee07b4444f4800a3f756f538a0914">kaldi::AperiodicEnergy::band_ends_</a></div><div class="ttdeci">Vector&lt; BaseFloat &gt; band_ends_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00136">feature-aperiodic.h:136</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a44420fdea0ac8ffd2da85ebc043a74a6"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">kaldi::AperiodicEnergy::opts_</a></div><div class="ttdeci">AperiodicEnergyOptions opts_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00128">feature-aperiodic.h:128</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a6ed30d81f7adbc8540d7553a838028d8"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a6ed30d81f7adbc8540d7553a838028d8">kaldi::AperiodicEnergy::ObtainNoiseSpectrum</a></div><div class="ttdeci">void ObtainNoiseSpectrum(const VectorBase&lt; BaseFloat &gt; &amp;power_spectrum, const std::vector&lt; bool &gt; &amp;noise_indices, Vector&lt; BaseFloat &gt; *noise_spectrum)</div><div class="ttdoc">Generate the noise spectrum from a set of frequencies where noise should dominate in the signal...</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8cc_source.html#l00448">feature-aperiodic.cc:448</a></div></div>
<div class="ttc" id="classkaldi_1_1MatrixBase_html_afb93e5db62adee40ee68bbec3751443f"><div class="ttname"><a href="classkaldi_1_1MatrixBase.html#afb93e5db62adee40ee68bbec3751443f">kaldi::MatrixBase::Row</a></div><div class="ttdeci">const SubVector&lt; Real &gt; Row(MatrixIndexT i) const</div><div class="ttdoc">Return specific row of matrix [const]. </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8h_source.html#l00185">kaldi-matrix.h:185</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_a188abb2e21a2d6b63458d470a3ccbf10"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#a188abb2e21a2d6b63458d470a3ccbf10">kaldi::AperiodicEnergyOptions::frame_opts</a></div><div class="ttdeci">FrameExtractionOptions frame_opts</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00035">feature-aperiodic.h:35</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_a5f19d13329b4e5365706eb533c70fc0f"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#a5f19d13329b4e5365706eb533c70fc0f">kaldi::AperiodicEnergyOptions::use_hts_bands</a></div><div class="ttdeci">bool use_hts_bands</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00042">feature-aperiodic.h:42</a></div></div>
<div class="ttc" id="group__error__group_html_ga0251fa005e2fdb1dcc6e24f06afe3b1f"><div class="ttname"><a href="group__error__group.html#ga0251fa005e2fdb1dcc6e24f06afe3b1f">KALDI_ERR</a></div><div class="ttdeci">#define KALDI_ERR</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00126">kaldi-error.h:126</a></div></div>
<div class="ttc" id="group__feat_html_ga3a4394e7a321cb172a34f001e7dc3eb5"><div class="ttname"><a href="group__feat.html#ga3a4394e7a321cb172a34f001e7dc3eb5">kaldi::NumFrames</a></div><div class="ttdeci">int32 NumFrames(int64 num_samples, const FrameExtractionOptions &amp;opts, bool flush)</div><div class="ttdoc">This function returns the number of frames that we can extract from a wave file with the given number...</div><div class="ttdef"><b>Definition:</b> <a href="feature-window_8cc_source.html#l00042">feature-window.cc:42</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a8b54833fee05a1bb032731e032097929"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a8b54833fee05a1bb032731e032097929">kaldi::AperiodicEnergy::feature_window_function_</a></div><div class="ttdeci">FeatureWindowFunction feature_window_function_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00129">feature-aperiodic.h:129</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a31dd6c1fd254910fc3d6c22e1fb066d8"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">kaldi::AperiodicEnergy::freq_banks_</a></div><div class="ttdeci">FrequencyBanks * freq_banks_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00131">feature-aperiodic.h:131</a></div></div>
<div class="ttc" id="group__feat_html_gafd6748dd9dba539209f6126561ce8474"><div class="ttname"><a href="group__feat.html#gafd6748dd9dba539209f6126561ce8474">kaldi::ComputePowerSpectrum</a></div><div class="ttdeci">void ComputePowerSpectrum(VectorBase&lt; BaseFloat &gt; *waveform)</div><div class="ttdef"><b>Definition:</b> <a href="feature-functions_8cc_source.html#l00029">feature-functions.cc:29</a></div></div>
<div class="ttc" id="group__error__group_html_ga16c81ec6ff3ba04c6ff96fdaed9d854e"><div class="ttname"><a href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a></div><div class="ttdeci">#define KALDI_VLOG(v)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00135">kaldi-error.h:135</a></div></div>
<div class="ttc" id="classkaldi_1_1Matrix_html_a70c095b28633f8874632a9d239a903d5"><div class="ttname"><a href="classkaldi_1_1Matrix.html#a70c095b28633f8874632a9d239a903d5">kaldi::Matrix::Resize</a></div><div class="ttdeci">void Resize(const MatrixIndexT r, const MatrixIndexT c, MatrixResizeType resize_type=kSetZero, MatrixStrideType stride_type=kDefaultStride)</div><div class="ttdoc">Sets matrix to a specified size (zero is OK as long as both r and c are zero). </div><div class="ttdef"><b>Definition:</b> <a href="kaldi-matrix_8cc_source.html#l00818">kaldi-matrix.cc:818</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_afea4c4aadb33036e9fe91cbd12ba7339"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#afea4c4aadb33036e9fe91cbd12ba7339">kaldi::AperiodicEnergy::ComputeHtsBands</a></div><div class="ttdeci">void ComputeHtsBands(const VectorBase&lt; BaseFloat &gt; &amp;power_spectrum, Vector&lt; BaseFloat &gt; *output)</div><div class="ttdoc">Average the energy of a power spectrum accross a set of predefined bands, the bands are designed to b...</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8cc_source.html#l00166">feature-aperiodic.cc:166</a></div></div>
<div class="ttc" id="group__error__group_html_gaf8fb55454306b60c9c1e07a6ef9d341a"><div class="ttname"><a href="group__error__group.html#gaf8fb55454306b60c9c1e07a6ef9d341a">KALDI_LOG</a></div><div class="ttdeci">#define KALDI_LOG</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00132">kaldi-error.h:132</a></div></div>
<div class="ttc" id="structkaldi_1_1FrequencyBanksOptions_html_afd806ad582bbd61bebc5e3e7da26f891"><div class="ttname"><a href="structkaldi_1_1FrequencyBanksOptions.html#afd806ad582bbd61bebc5e3e7da26f891">kaldi::FrequencyBanksOptions::num_bins</a></div><div class="ttdeci">int32 num_bins</div><div class="ttdef"><b>Definition:</b> <a href="banks-computations_8h_source.html#l00046">banks-computations.h:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afea4c4aadb33036e9fe91cbd12ba7339"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afea4c4aadb33036e9fe91cbd12ba7339">&#9670;&nbsp;</a></span>ComputeHtsBands()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ComputeHtsBands </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>power_spectrum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Average the energy of a power spectrum accross a set of predefined bands, the bands are designed to be somewhat compatible with what is commonly used in the HTS community, e.g. </p>
<p>in the "Emime" EU project. </p>

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8cc_source.html#l00166">166</a> of file <a class="el" href="feature-aperiodic_8cc_source.html">feature-aperiodic.cc</a>.</p>

<p class="reference">References <a class="el" href="feature-aperiodic_8h_source.html#l00136">AperiodicEnergy::band_ends_</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00134">AperiodicEnergy::band_starts_</a>, <a class="el" href="kaldi-vector_8h_source.html#l00063">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00035">AperiodicEnergyOptions::frame_opts</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00128">AperiodicEnergy::opts_</a>, <a class="el" href="feature-window_8h_source.html#l00036">FrameExtractionOptions::samp_freq</a>, and <a class="el" href="kaldi-vector_8cc_source.html#l00288">VectorBase&lt; Real &gt;::SetZero()</a>.</p>

<p class="reference">Referenced by <a class="el" href="feature-aperiodic_8cc_source.html#l00199">AperiodicEnergy::Compute()</a>.</p>
<div class="fragment"><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                               {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  output-&gt;SetZero();</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> sample_frequency = <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a188abb2e21a2d6b63458d470a3ccbf10">frame_opts</a>.<a class="code" href="structkaldi_1_1FrameExtractionOptions.html#a814c23fceef9259caed333e631974807">samp_freq</a>;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  int32 number_bands = output-&gt;Dim();</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  int32 fftlen = 2 * (power_spectrum.Dim() - 1), band_start, band_end = 0;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordflow">for</span> (int32 band = 0; band &lt; number_bands; band++) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    band_start = round(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a3bccc2c5ce8bb5bf3791746b106edee1">band_starts_</a>(band) * fftlen / sample_frequency);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    band_end  = round(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a7f1ee07b4444f4800a3f756f538a0914">band_ends_</a>(band) * fftlen / sample_frequency);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// Empty band; that should never happen, but just in case...</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">if</span> (band_end &lt;= band_start) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordtype">float</span> sum = 0.0;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">// NB: in HTS, they normally do geometric mean instead of</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// arithmetic mean; this create risks of underflow (and is</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// probably idiotic anyway) so we do not reproduce that behaviour</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = band_start; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; band_end; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      sum += power_spectrum(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    (*output)(band) = sum / (band_end - band_start);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">// Above Nyqist? We are done.</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (band_end &gt;= fftlen / 2 + 1) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div><div class="ttc" id="structkaldi_1_1FrameExtractionOptions_html_a814c23fceef9259caed333e631974807"><div class="ttname"><a href="structkaldi_1_1FrameExtractionOptions.html#a814c23fceef9259caed333e631974807">kaldi::FrameExtractionOptions::samp_freq</a></div><div class="ttdeci">BaseFloat samp_freq</div><div class="ttdef"><b>Definition:</b> <a href="feature-window_8h_source.html#l00036">feature-window.h:36</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a3bccc2c5ce8bb5bf3791746b106edee1"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a3bccc2c5ce8bb5bf3791746b106edee1">kaldi::AperiodicEnergy::band_starts_</a></div><div class="ttdeci">Vector&lt; BaseFloat &gt; band_starts_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00134">feature-aperiodic.h:134</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a7f1ee07b4444f4800a3f756f538a0914"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a7f1ee07b4444f4800a3f756f538a0914">kaldi::AperiodicEnergy::band_ends_</a></div><div class="ttdeci">Vector&lt; BaseFloat &gt; band_ends_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00136">feature-aperiodic.h:136</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a44420fdea0ac8ffd2da85ebc043a74a6"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">kaldi::AperiodicEnergy::opts_</a></div><div class="ttdeci">AperiodicEnergyOptions opts_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00128">feature-aperiodic.h:128</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_a188abb2e21a2d6b63458d470a3ccbf10"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#a188abb2e21a2d6b63458d470a3ccbf10">kaldi::AperiodicEnergyOptions::frame_opts</a></div><div class="ttdeci">FrameExtractionOptions frame_opts</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00035">feature-aperiodic.h:35</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6e94894f6e6829f6096284fe9f7e328a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e94894f6e6829f6096284fe9f7e328a">&#9670;&nbsp;</a></span>Dim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 Dim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8h_source.html#l00104">104</a> of file <a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#adfbd65de997903d4fd500a3b694c84fb">banks_opts</a>.<a class="code" href="structkaldi_1_1FrequencyBanksOptions.html#afd806ad582bbd61bebc5e3e7da26f891">num_bins</a>; }</div><div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_adfbd65de997903d4fd500a3b694c84fb"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#adfbd65de997903d4fd500a3b694c84fb">kaldi::AperiodicEnergyOptions::banks_opts</a></div><div class="ttdeci">FrequencyBanksOptions banks_opts</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00036">feature-aperiodic.h:36</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a44420fdea0ac8ffd2da85ebc043a74a6"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">kaldi::AperiodicEnergy::opts_</a></div><div class="ttdeci">AperiodicEnergyOptions opts_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00128">feature-aperiodic.h:128</a></div></div>
<div class="ttc" id="structkaldi_1_1FrequencyBanksOptions_html_afd806ad582bbd61bebc5e3e7da26f891"><div class="ttname"><a href="structkaldi_1_1FrequencyBanksOptions.html#afd806ad582bbd61bebc5e3e7da26f891">kaldi::FrequencyBanksOptions::num_bins</a></div><div class="ttdeci">int32 num_bins</div><div class="ttdef"><b>Definition:</b> <a href="banks-computations_8h_source.html#l00046">banks-computations.h:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6d0cb642f87ae582161c8eac4153ecb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6d0cb642f87ae582161c8eac4153ecb">&#9670;&nbsp;</a></span>FindBandLocations()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FindBandLocations </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8cc_source.html#l00072">72</a> of file <a class="el" href="feature-aperiodic_8cc_source.html">feature-aperiodic.cc</a>.</p>

<p class="reference">References <a class="el" href="feature-aperiodic_8h_source.html#l00135">AperiodicEnergy::band_centers_</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00136">AperiodicEnergy::band_ends_</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00134">AperiodicEnergy::band_starts_</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00036">AperiodicEnergyOptions::banks_opts</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00070">bark</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00035">AperiodicEnergyOptions::frame_opts</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00131">AperiodicEnergy::freq_banks_</a>, <a class="el" href="banks-computations_8h_source.html#l00144">FrequencyBanks::GetCenterFreqs()</a>, <a class="el" href="banks-computations_8h_source.html#l00102">FrequencyBanks::InverseScale()</a>, <a class="el" href="banks-computations_8h_source.html#l00046">FrequencyBanksOptions::num_bins</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00128">AperiodicEnergy::opts_</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00132">AperiodicEnergy::padded_window_size_</a>, <a class="el" href="feature-window_8h_source.html#l00036">FrameExtractionOptions::samp_freq</a>, <a class="el" href="banks-computations_8h_source.html#l00089">FrequencyBanks::Scale()</a>, <a class="el" href="banks-computations_8h_source.html#l00058">FrequencyBanksOptions::scale_type</a>, and <a class="el" href="feature-aperiodic_8h_source.html#l00042">AperiodicEnergyOptions::use_hts_bands</a>.</p>

<p class="reference">Referenced by <a class="el" href="feature-aperiodic_8cc_source.html#l00029">AperiodicEnergy::AperiodicEnergy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                                        {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  int32 number_bands = <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#adfbd65de997903d4fd500a3b694c84fb">banks_opts</a>.<a class="code" href="structkaldi_1_1FrequencyBanksOptions.html#afd806ad582bbd61bebc5e3e7da26f891">num_bins</a>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> sample_frequency = <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a188abb2e21a2d6b63458d470a3ccbf10">frame_opts</a>.<a class="code" href="structkaldi_1_1FrameExtractionOptions.html#a814c23fceef9259caed333e631974807">samp_freq</a>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a3bccc2c5ce8bb5bf3791746b106edee1">band_starts_</a>.Resize(number_bands);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a6c33c4063c3a52620541356775ecc4d4">band_centers_</a>.Resize(number_bands);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a7f1ee07b4444f4800a3f756f538a0914">band_ends_</a>.Resize(number_bands);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  </div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a5f19d13329b4e5365706eb533c70fc0f">use_hts_bands</a>) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// The start and end of the bands depend on the scaling</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a6c33c4063c3a52620541356775ecc4d4">band_centers_</a>.CopyFromVec(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a>-&gt;<a class="code" href="classkaldi_1_1FrequencyBanks.html#a2977ef4bf409ec9accc5d8990690e685">GetCenterFreqs</a>());</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    </div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> freq_delta;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// The center frequencies are equally spaced in the mel / bark domain</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    freq_delta = <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a>-&gt;<a class="code" href="classkaldi_1_1FrequencyBanks.html#a6fe849de034624783ef37e8abea259c3">Scale</a>(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a6c33c4063c3a52620541356775ecc4d4">band_centers_</a>(1), <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#adfbd65de997903d4fd500a3b694c84fb">banks_opts</a>.<a class="code" href="structkaldi_1_1FrequencyBanksOptions.html#a0a64d3a251458c268d89a352ddf67752">scale_type</a>) -</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                  <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a>-&gt;<a class="code" href="classkaldi_1_1FrequencyBanks.html#a6fe849de034624783ef37e8abea259c3">Scale</a>(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a6c33c4063c3a52620541356775ecc4d4">band_centers_</a>(0), <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#adfbd65de997903d4fd500a3b694c84fb">banks_opts</a>.<a class="code" href="structkaldi_1_1FrequencyBanksOptions.html#a0a64d3a251458c268d89a352ddf67752">scale_type</a>);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">for</span> (int32 band = 0; band &lt; number_bands; band++) {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="comment">// simulating rectangular window</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> start_frequency, end_frequency;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        start_frequency = <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a>-&gt;<a class="code" href="classkaldi_1_1FrequencyBanks.html#a0b00317e124515760de941c62fe05995">InverseScale</a>(</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a>-&gt;<a class="code" href="classkaldi_1_1FrequencyBanks.html#a6fe849de034624783ef37e8abea259c3">Scale</a>(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a6c33c4063c3a52620541356775ecc4d4">band_centers_</a>(band), <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#adfbd65de997903d4fd500a3b694c84fb">banks_opts</a>.<a class="code" href="structkaldi_1_1FrequencyBanksOptions.html#a0a64d3a251458c268d89a352ddf67752">scale_type</a>) -</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            0.5 * freq_delta, <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#adfbd65de997903d4fd500a3b694c84fb">banks_opts</a>.<a class="code" href="structkaldi_1_1FrequencyBanksOptions.html#a0a64d3a251458c268d89a352ddf67752">scale_type</a>);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        end_frequency = <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a>-&gt;<a class="code" href="classkaldi_1_1FrequencyBanks.html#a0b00317e124515760de941c62fe05995">InverseScale</a>(</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">freq_banks_</a>-&gt;<a class="code" href="classkaldi_1_1FrequencyBanks.html#a6fe849de034624783ef37e8abea259c3">Scale</a>(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a6c33c4063c3a52620541356775ecc4d4">band_centers_</a>(band), <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#adfbd65de997903d4fd500a3b694c84fb">banks_opts</a>.<a class="code" href="structkaldi_1_1FrequencyBanksOptions.html#a0a64d3a251458c268d89a352ddf67752">scale_type</a>) +</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            0.5 * freq_delta, <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#adfbd65de997903d4fd500a3b694c84fb">banks_opts</a>.<a class="code" href="structkaldi_1_1FrequencyBanksOptions.html#a0a64d3a251458c268d89a352ddf67752">scale_type</a>);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a3bccc2c5ce8bb5bf3791746b106edee1">band_starts_</a>(band) = start_frequency;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a7f1ee07b4444f4800a3f756f538a0914">band_ends_</a>(band) = end_frequency;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// Compatability for HTS</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    int32 fftlen = <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    int32 band_start, band_end = 0;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> start_frequency, end_frequency;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">for</span> (int32 band = 0; band &lt; number_bands; band++) {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      band_start = band_end;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="keywordflow">if</span> (number_bands == 5) {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="comment">// Legacy hard-coded 5 bands from straight</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">switch</span> (band) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;          <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            band_end = fftlen / 16;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;          <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            band_end = fftlen / 8;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;          <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            band_end = fftlen / 4;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;          <span class="keywordflow">case</span> 3:</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            band_end = fftlen * 3 / 8;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;          <span class="keywordflow">case</span> 4:</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            band_end = fftlen / 2 + 1;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        start_frequency = band_start * sample_frequency / fftlen;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        end_frequency = band_end * sample_frequency / fftlen;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="comment">// Use buggy hardcoded Bark-inspired bands from J. Yamagishi</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="comment">// in Emime.  Note that we use bands that are less buggy,</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="comment">// i.e. their size is strictly increasing.</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="comment">// Compared to J. Yamagishi&#39;s implementation we fixed other bugs:</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="comment">// - if bands higher than Nyqist are requested, their energy is set to 0</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="comment">// - last band end always set to Nyqist frequency</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="comment">// Frequency in Hertz...</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        start_frequency = <a class="code" href="feature-aperiodic_8cc.html#a68f73112f28c8ba344c8c1bd1a083146">bark</a>(band);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        end_frequency = <a class="code" href="feature-aperiodic_8cc.html#a68f73112f28c8ba344c8c1bd1a083146">bark</a>(band+1);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">if</span> (band == 0)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;          start_frequency = 0.0;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="comment">// Above nyqist frequency or last band?</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">if</span> (end_frequency &gt;= sample_frequency / 2 ||  <span class="comment">// over Nyqist</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;          band &gt;= 25 ||  <span class="comment">// highest possible Bark band</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;          band == number_bands - 1) {  <span class="comment">// last requested band</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;          end_frequency = sample_frequency / 2;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a3bccc2c5ce8bb5bf3791746b106edee1">band_starts_</a>(band) = start_frequency;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a6c33c4063c3a52620541356775ecc4d4">band_centers_</a>(band) = (start_frequency + end_frequency) / 2.0;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a7f1ee07b4444f4800a3f756f538a0914">band_ends_</a>(band) = end_frequency;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;}</div><div class="ttc" id="classkaldi_1_1FrequencyBanks_html_a0b00317e124515760de941c62fe05995"><div class="ttname"><a href="classkaldi_1_1FrequencyBanks.html#a0b00317e124515760de941c62fe05995">kaldi::FrequencyBanks::InverseScale</a></div><div class="ttdeci">static BaseFloat InverseScale(BaseFloat freq, std::string scale_type)</div><div class="ttdef"><b>Definition:</b> <a href="banks-computations_8h_source.html#l00102">banks-computations.h:102</a></div></div>
<div class="ttc" id="classkaldi_1_1FrequencyBanks_html_a6fe849de034624783ef37e8abea259c3"><div class="ttname"><a href="classkaldi_1_1FrequencyBanks.html#a6fe849de034624783ef37e8abea259c3">kaldi::FrequencyBanks::Scale</a></div><div class="ttdeci">static BaseFloat Scale(BaseFloat freq, std::string scale_type)</div><div class="ttdef"><b>Definition:</b> <a href="banks-computations_8h_source.html#l00089">banks-computations.h:89</a></div></div>
<div class="ttc" id="classkaldi_1_1FrequencyBanks_html_a2977ef4bf409ec9accc5d8990690e685"><div class="ttname"><a href="classkaldi_1_1FrequencyBanks.html#a2977ef4bf409ec9accc5d8990690e685">kaldi::FrequencyBanks::GetCenterFreqs</a></div><div class="ttdeci">const Vector&lt; BaseFloat &gt; &amp; GetCenterFreqs() const</div><div class="ttdef"><b>Definition:</b> <a href="banks-computations_8h_source.html#l00144">banks-computations.h:144</a></div></div>
<div class="ttc" id="structkaldi_1_1FrameExtractionOptions_html_a814c23fceef9259caed333e631974807"><div class="ttname"><a href="structkaldi_1_1FrameExtractionOptions.html#a814c23fceef9259caed333e631974807">kaldi::FrameExtractionOptions::samp_freq</a></div><div class="ttdeci">BaseFloat samp_freq</div><div class="ttdef"><b>Definition:</b> <a href="feature-window_8h_source.html#l00036">feature-window.h:36</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a6c33c4063c3a52620541356775ecc4d4"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a6c33c4063c3a52620541356775ecc4d4">kaldi::AperiodicEnergy::band_centers_</a></div><div class="ttdeci">Vector&lt; BaseFloat &gt; band_centers_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00135">feature-aperiodic.h:135</a></div></div>
<div class="ttc" id="structkaldi_1_1FrequencyBanksOptions_html_a0a64d3a251458c268d89a352ddf67752"><div class="ttname"><a href="structkaldi_1_1FrequencyBanksOptions.html#a0a64d3a251458c268d89a352ddf67752">kaldi::FrequencyBanksOptions::scale_type</a></div><div class="ttdeci">std::string scale_type</div><div class="ttdef"><b>Definition:</b> <a href="banks-computations_8h_source.html#l00058">banks-computations.h:58</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a3bccc2c5ce8bb5bf3791746b106edee1"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a3bccc2c5ce8bb5bf3791746b106edee1">kaldi::AperiodicEnergy::band_starts_</a></div><div class="ttdeci">Vector&lt; BaseFloat &gt; band_starts_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00134">feature-aperiodic.h:134</a></div></div>
<div class="ttc" id="feature-aperiodic_8cc_html_a68f73112f28c8ba344c8c1bd1a083146"><div class="ttname"><a href="feature-aperiodic_8cc.html#a68f73112f28c8ba344c8c1bd1a083146">bark</a></div><div class="ttdeci">#define bark(x)</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8cc_source.html#l00070">feature-aperiodic.cc:70</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_adfbd65de997903d4fd500a3b694c84fb"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#adfbd65de997903d4fd500a3b694c84fb">kaldi::AperiodicEnergyOptions::banks_opts</a></div><div class="ttdeci">FrequencyBanksOptions banks_opts</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00036">feature-aperiodic.h:36</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_ad5963def33c959a8a61d1e6d88824d63"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">kaldi::AperiodicEnergy::padded_window_size_</a></div><div class="ttdeci">int32 padded_window_size_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00132">feature-aperiodic.h:132</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a7f1ee07b4444f4800a3f756f538a0914"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a7f1ee07b4444f4800a3f756f538a0914">kaldi::AperiodicEnergy::band_ends_</a></div><div class="ttdeci">Vector&lt; BaseFloat &gt; band_ends_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00136">feature-aperiodic.h:136</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a44420fdea0ac8ffd2da85ebc043a74a6"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">kaldi::AperiodicEnergy::opts_</a></div><div class="ttdeci">AperiodicEnergyOptions opts_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00128">feature-aperiodic.h:128</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_a188abb2e21a2d6b63458d470a3ccbf10"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#a188abb2e21a2d6b63458d470a3ccbf10">kaldi::AperiodicEnergyOptions::frame_opts</a></div><div class="ttdeci">FrameExtractionOptions frame_opts</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00035">feature-aperiodic.h:35</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_a5f19d13329b4e5365706eb533c70fc0f"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#a5f19d13329b4e5365706eb533c70fc0f">kaldi::AperiodicEnergyOptions::use_hts_bands</a></div><div class="ttdeci">bool use_hts_bands</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00042">feature-aperiodic.h:42</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a31dd6c1fd254910fc3d6c22e1fb066d8"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a31dd6c1fd254910fc3d6c22e1fb066d8">kaldi::AperiodicEnergy::freq_banks_</a></div><div class="ttdeci">FrequencyBanks * freq_banks_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00131">feature-aperiodic.h:131</a></div></div>
<div class="ttc" id="structkaldi_1_1FrequencyBanksOptions_html_afd806ad582bbd61bebc5e3e7da26f891"><div class="ttname"><a href="structkaldi_1_1FrequencyBanksOptions.html#afd806ad582bbd61bebc5e3e7da26f891">kaldi::FrequencyBanksOptions::num_bins</a></div><div class="ttdeci">int32 num_bins</div><div class="ttdef"><b>Definition:</b> <a href="banks-computations_8h_source.html#l00046">banks-computations.h:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adda5d6fac479a6b00e20b03b83cc8b8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adda5d6fac479a6b00e20b03b83cc8b8c">&#9670;&nbsp;</a></span>GetBandCenters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt;&amp; GetBandCenters </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8h_source.html#l00114">114</a> of file <a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a6c33c4063c3a52620541356775ecc4d4">band_centers_</a>; }</div><div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a6c33c4063c3a52620541356775ecc4d4"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a6c33c4063c3a52620541356775ecc4d4">kaldi::AperiodicEnergy::band_centers_</a></div><div class="ttdeci">Vector&lt; BaseFloat &gt; band_centers_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00135">feature-aperiodic.h:135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a67ee6bda4587aef2d77caa1b03d8fbf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67ee6bda4587aef2d77caa1b03d8fbf6">&#9670;&nbsp;</a></span>GetBandEnds()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt;&amp; GetBandEnds </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8h_source.html#l00115">115</a> of file <a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a7f1ee07b4444f4800a3f756f538a0914">band_ends_</a>; }</div><div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a7f1ee07b4444f4800a3f756f538a0914"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a7f1ee07b4444f4800a3f756f538a0914">kaldi::AperiodicEnergy::band_ends_</a></div><div class="ttdeci">Vector&lt; BaseFloat &gt; band_ends_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00136">feature-aperiodic.h:136</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afdceae833c57c19dcac9aca8cb7ff947"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdceae833c57c19dcac9aca8cb7ff947">&#9670;&nbsp;</a></span>GetBandStarts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt;&amp; GetBandStarts </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8h_source.html#l00113">113</a> of file <a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a3bccc2c5ce8bb5bf3791746b106edee1">band_starts_</a>; }</div><div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a3bccc2c5ce8bb5bf3791746b106edee1"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a3bccc2c5ce8bb5bf3791746b106edee1">kaldi::AperiodicEnergy::band_starts_</a></div><div class="ttdeci">Vector&lt; BaseFloat &gt; band_starts_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00134">feature-aperiodic.h:134</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a66ef22339f7e77d45f28742bde485e80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66ef22339f7e77d45f28742bde485e80">&#9670;&nbsp;</a></span>IdentifyNoiseRegions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void IdentifyNoiseRegions </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>power_spectrum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&#160;</td>
          <td class="paramname"><em>f0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classbool.html">bool</a> &gt; *&#160;</td>
          <td class="paramname"><em>noise_indices</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8cc_source.html#l00303">303</a> of file <a class="el" href="feature-aperiodic_8cc_source.html">feature-aperiodic.cc</a>.</p>

<p class="reference">References <a class="el" href="feature-aperiodic_8cc.html#a30598cd62b582c10ceacc0a19917bd5e">_is_neg_peak</a>, <a class="el" href="kaldi-vector_8cc_source.html#l00228">VectorBase&lt; Real &gt;::CopyFromVec()</a>, <a class="el" href="kaldi-vector_8h_source.html#l00063">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00038">AperiodicEnergyOptions::f0_max</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00038">AperiodicEnergyOptions::f0_width</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00035">AperiodicEnergyOptions::frame_opts</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::i</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="kaldi-error_8h_source.html#l00135">KALDI_VLOG</a>, <a class="el" href="matrix-common_8h_source.html#l00038">kaldi::kSetZero</a>, <a class="el" href="kaldi-math_8h_source.html#l00044">M_PI</a>, <a class="el" href="kaldi-vector_8cc_source.html#l00579">VectorBase&lt; Real &gt;::Max()</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00128">AperiodicEnergy::opts_</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00132">AperiodicEnergy::padded_window_size_</a>, <a class="el" href="feature-mcep_8cc_source.html#l00052">kaldi::PowerSpectrumToRealCepstrum()</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00038">AperiodicEnergyOptions::quality_threshold</a>, <a class="el" href="kaldi-vector_8h_source.html#l00093">VectorBase&lt; Real &gt;::Range()</a>, <a class="el" href="feature-mcep_8cc_source.html#l00074">kaldi::RealCepstrumToMagnitudeSpectrum()</a>, and <a class="el" href="feature-window_8h_source.html#l00036">FrameExtractionOptions::samp_freq</a>.</p>

<p class="reference">Referenced by <a class="el" href="feature-aperiodic_8cc_source.html#l00199">AperiodicEnergy::Compute()</a>.</p>
<div class="fragment"><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                                    {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(noise_indices != NULL);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(power_spectrum.Dim() == <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2+1 &amp;&amp; <span class="stringliteral">&quot;Power &quot;</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;               <span class="stringliteral">&quot;spectrum size expected to be half of padded window plus 1.&quot;</span>);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> sampling_freq = <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a188abb2e21a2d6b63458d470a3ccbf10">frame_opts</a>.<a class="code" href="structkaldi_1_1FrameExtractionOptions.html#a814c23fceef9259caed333e631974807">samp_freq</a>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  int32 f0_index = <span class="keyword">static_cast&lt;</span>int32<span class="keyword">&gt;</span>(round(sampling_freq/f0)),</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      max_f0_index = static_cast&lt;int32&gt;(round(sampling_freq/<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a1e3f4a2ae311c976115246cbdf06d261">f0_max</a>)),</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      cepstrum_peak_index, test_index;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="comment">// Width of F0-induced cepstral peak</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  int32 f0_peak_width = <span class="keyword">static_cast&lt;</span>int32<span class="keyword">&gt;</span>(round(f0_index *</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                                                 <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a17f5a66dd84ba097b57ee580302965ad">f0_width</a> * 0.5));</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  int32 transition_width = <span class="keyword">static_cast&lt;</span>int32<span class="keyword">&gt;</span>(round(max_f0_index * 0.1));</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  int32 cepstrum_peak_width;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  noise_indices-&gt;resize(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2+1, <span class="keyword">false</span>);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  Vector&lt;BaseFloat&gt; noise_spectrum(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>, <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a>);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  Vector&lt;BaseFloat&gt; test_cepstrum(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>, <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a>);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  Vector&lt;BaseFloat&gt; abs_cepstrum(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>, <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a>);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  noise_spectrum.Range(0, <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2+1).CopyFromVec(power_spectrum);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="comment">// Hacky: to avoid high frequency noise in cepstrum, we do a</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="comment">// low-pass filter on power spectrum, only keeping up to 4kHz</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  int32 k4_idx =  <span class="keyword">static_cast&lt;</span>int32<span class="keyword">&gt;</span>(round(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                                           * 4000.0 / sampling_freq));</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2 - k4_idx; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; transition_width * 3) {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="comment">// Gradual decrease over transition window</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      noise_spectrum(k4_idx + <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) *= 0.501 +</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        0.499 * cos(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="kaldi-math_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>/(transition_width * 3));</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      noise_spectrum(k4_idx + <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) *= 0.01;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="comment">// Compute Real Cepstrum</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <a class="code" href="group__feat.html#gac1fea791f2b9de64e3a66d1cf1155e06">PowerSpectrumToRealCepstrum</a>(&amp;noise_spectrum);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="comment">// All cepstral coefficients below the one corresponding to maximum F0 are</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="comment">// considered to correspond to vocal tract characteristics and ignored from</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="comment">// the initial harmonic to noise ratio calculation.</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  noise_spectrum.Range(0, max_f0_index - transition_width- 1).SetZero();</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// Cos lifter for smoother spectrum</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = -transition_width; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      noise_spectrum(max_f0_index + <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) *= 0.5 +</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        0.5 * cos(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="kaldi-math_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / transition_width);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// Find peak in absolute cepstrum</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;=  <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      abs_cepstrum(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) = fabs(noise_spectrum(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  abs_cepstrum.Max(&amp;cepstrum_peak_index);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  cepstrum_peak_width = <span class="keyword">static_cast&lt;</span>int32<span class="keyword">&gt;</span>(round(cepstrum_peak_index *</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                                                 <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a17f5a66dd84ba097b57ee580302965ad">f0_width</a> * 0.5));</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="comment">// Estimate quality of peak by zeroing peak area and getting max of</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="comment">// left-over absolute cepstrum</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  test_cepstrum.CopyFromVec(abs_cepstrum);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="comment">//   1. Set to 0 from peak_index-npeak_width to peak_index+npeak_width.</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="comment">// (But maybe we should actually set everything above</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">// peak_index-npeak_width to 0?)</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  test_cepstrum.Range(cepstrum_peak_index - cepstrum_peak_width,</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                      cepstrum_peak_width * 2).SetZero();</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">//   2. Find vestigial peak</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  test_cepstrum.Max(&amp;test_index);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// Estimate peak quality from ratio of peak amplitudes.</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">// Quality between 0.0 (very bad) and 1.0 (perfect). In unvoiced</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// region the peak should be less than 0.1, in well voiced region</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">// above 0.5</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> cepstrum_peak_quality = (1.0 - test_cepstrum(test_index) /</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                                     noise_spectrum(cepstrum_peak_index));</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordflow">if</span> (cepstrum_peak_index &lt; f0_index - f0_peak_width ||</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      cepstrum_peak_index &gt; f0_index + f0_peak_width) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(2)</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Actual cepstral peak (index=&quot;</span> &lt;&lt; cepstrum_peak_index &lt;&lt; <span class="stringliteral">&quot;; value = &quot;</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      &lt;&lt; abs_cepstrum(cepstrum_peak_index) &lt;&lt; <span class="stringliteral">&quot;; quality = &quot;</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      &lt;&lt; cepstrum_peak_quality &lt;&lt; <span class="stringliteral">&quot;) occurs too far from F0 (index=&quot;</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      &lt;&lt; f0_index &lt;&lt; <span class="stringliteral">&quot;; value = &quot;</span> &lt;&lt; noise_spectrum(f0_index) &lt;&lt; <span class="stringliteral">&quot;).&quot;</span>;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// Slightly hacky: a good quality peak will replace a bad F0 peak</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordflow">if</span> (f0 == 0 || (</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        (cepstrum_peak_quality &gt;= <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a9761fe88882160987d0b913999338e62">quality_threshold</a>) &amp;&amp;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        (f0_index != cepstrum_peak_index))) {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a>(2) &lt;&lt; <span class="stringliteral">&quot;Actual cepstral peak has quality &quot;</span>&lt;&lt; cepstrum_peak_quality</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot;, moving f0 from &quot;</span>&lt;&lt; f0_index</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; cepstrum_peak_index;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    f0_index = cepstrum_peak_index;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    f0_peak_width = cepstrum_peak_width;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// Generating harmonic spectrum from cepstral coefficients located</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// around cepstral / f0 peak</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  Vector&lt;BaseFloat&gt; harmonic_spectrum(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>, <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a>);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="comment">// Note that at this point noise_spectrum contains cepstral coeffs</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="comment">// energy</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">// In the range of interest, we copy the ceps to harmonic_spectrum</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// Note that to have the &quot;real&quot; noise spectrum, we should zero out these</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// same quefrencies.</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="comment">// The harmonic &quot;peaks&quot; are actually present for every multiple of F0,</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="comment">// we take only the first 2</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">for</span> (int32 k = 1; k &lt;= 4; k++) {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span> (k * f0_index + f0_peak_width &gt;= <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    int32 offset = k * f0_index;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// copy within the peak</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = - f0_peak_width; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= f0_peak_width; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> m = (0.5 + 0.5 * cos(<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="kaldi-math_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> / (f0_peak_width + 1) ));</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      harmonic_spectrum(offset + <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) = m * noise_spectrum(offset + <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="comment">/*noise_spectrum(offset + i) *= (1 - m);*/</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="comment">// Get log spectrum of harmonic cepstrum</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <a class="code" href="group__feat.html#ga001696a46b519fbf1634d24e897bd3e7">RealCepstrumToMagnitudeSpectrum</a>(&amp;harmonic_spectrum, <span class="keyword">false</span>);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// We find the &quot;negative peaks&quot; of the harmonic spectrum, we</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">// consider these will always correspond to pure noise spectrum</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// frequencies. We will then interpolate between these samples to</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="comment">// build the full &quot;noise spectrogram&quot;.</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="comment">// This will work well in voiced regions if the F0 has been</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="comment">// estimated correctly.  This will work pretty well in noise regions</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="comment">// as well, unless somehow the &quot;noise&quot; has strong harmonics :-)</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="comment">// Our peak picking is a disgrace, but it works well enough!</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="preprocessor">#define _is_neg_peak(s, i) ((s(i) &lt; s(i-1)) &amp;&amp; (s(i) &lt; s(i+1)) &amp;&amp; (s(i) &lt; 0.0))</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">// Instead of just taking the min peaks, we could use segments, e.g.</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// the lowest 10% between two peaks.</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2; ++<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment">// NB: - to behave like STRAIGHT, it seems you should just use</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">//       &quot;if ( harmonic_spectrum(i) &lt; 0)&quot;</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">//     - in 0, the aperiodic energy should always be 0.0!</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0 &amp;&amp; <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2 &amp;&amp;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <a class="code" href="feature-aperiodic_8cc.html#a30598cd62b582c10ceacc0a19917bd5e">_is_neg_peak</a>(harmonic_spectrum, <a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>)) {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      (*noise_indices)[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      (*noise_indices)[<a class="code" href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <span class="keyword">false</span>;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div><div class="ttc" id="group__feat_html_gac1fea791f2b9de64e3a66d1cf1155e06"><div class="ttname"><a href="group__feat.html#gac1fea791f2b9de64e3a66d1cf1155e06">kaldi::PowerSpectrumToRealCepstrum</a></div><div class="ttdeci">void PowerSpectrumToRealCepstrum(VectorBase&lt; Real &gt; *power_spectrum)</div><div class="ttdoc">PowerSpecToRealCeps takes the output of ComputePowerSpectrum (which is a squared magnitude spectrum) ...</div><div class="ttdef"><b>Definition:</b> <a href="feature-mcep_8cc_source.html#l00052">feature-mcep.cc:52</a></div></div>
<div class="ttc" id="feature-aperiodic_8cc_html_a30598cd62b582c10ceacc0a19917bd5e"><div class="ttname"><a href="feature-aperiodic_8cc.html#a30598cd62b582c10ceacc0a19917bd5e">_is_neg_peak</a></div><div class="ttdeci">#define _is_neg_peak(s, i)</div></div>
<div class="ttc" id="kaldi-math_8h_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="kaldi-math_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-math_8h_source.html#l00044">kaldi-math.h:44</a></div></div>
<div class="ttc" id="structkaldi_1_1FrameExtractionOptions_html_a814c23fceef9259caed333e631974807"><div class="ttname"><a href="structkaldi_1_1FrameExtractionOptions.html#a814c23fceef9259caed333e631974807">kaldi::FrameExtractionOptions::samp_freq</a></div><div class="ttdeci">BaseFloat samp_freq</div><div class="ttdef"><b>Definition:</b> <a href="feature-window_8h_source.html#l00036">feature-window.h:36</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_a1e3f4a2ae311c976115246cbdf06d261"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#a1e3f4a2ae311c976115246cbdf06d261">kaldi::AperiodicEnergyOptions::f0_max</a></div><div class="ttdeci">BaseFloat f0_max</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00038">feature-aperiodic.h:38</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_ad5963def33c959a8a61d1e6d88824d63"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">kaldi::AperiodicEnergy::padded_window_size_</a></div><div class="ttdeci">int32 padded_window_size_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00132">feature-aperiodic.h:132</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_a9761fe88882160987d0b913999338e62"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#a9761fe88882160987d0b913999338e62">kaldi::AperiodicEnergyOptions::quality_threshold</a></div><div class="ttdeci">BaseFloat quality_threshold</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00038">feature-aperiodic.h:38</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a44420fdea0ac8ffd2da85ebc043a74a6"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">kaldi::AperiodicEnergy::opts_</a></div><div class="ttdeci">AperiodicEnergyOptions opts_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00128">feature-aperiodic.h:128</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_a17f5a66dd84ba097b57ee580302965ad"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#a17f5a66dd84ba097b57ee580302965ad">kaldi::AperiodicEnergyOptions::f0_width</a></div><div class="ttdeci">BaseFloat f0_width</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00038">feature-aperiodic.h:38</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_a188abb2e21a2d6b63458d470a3ccbf10"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#a188abb2e21a2d6b63458d470a3ccbf10">kaldi::AperiodicEnergyOptions::frame_opts</a></div><div class="ttdeci">FrameExtractionOptions frame_opts</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00035">feature-aperiodic.h:35</a></div></div>
<div class="ttc" id="namespacernnlm_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="namespacernnlm.html#acb559820d9ca11295b4500f179ef6392">rnnlm::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kaldi::kSetZero</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00038">matrix-common.h:38</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
<div class="ttc" id="group__error__group_html_ga16c81ec6ff3ba04c6ff96fdaed9d854e"><div class="ttname"><a href="group__error__group.html#ga16c81ec6ff3ba04c6ff96fdaed9d854e">KALDI_VLOG</a></div><div class="ttdeci">#define KALDI_VLOG(v)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00135">kaldi-error.h:135</a></div></div>
<div class="ttc" id="group__feat_html_ga001696a46b519fbf1634d24e897bd3e7"><div class="ttname"><a href="group__feat.html#ga001696a46b519fbf1634d24e897bd3e7">kaldi::RealCepstrumToMagnitudeSpectrum</a></div><div class="ttdeci">void RealCepstrumToMagnitudeSpectrum(VectorBase&lt; Real &gt; *real_cepstrum, bool apply_exp)</div><div class="ttdoc">RealCepsToMagnitudeSpec takes the output of PowerSpecToRealCeps and computes an N-point FFT...</div><div class="ttdef"><b>Definition:</b> <a href="feature-mcep_8cc_source.html#l00074">feature-mcep.cc:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9bf7025ff138ad26f6076ed75da7c062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bf7025ff138ad26f6076ed75da7c062">&#9670;&nbsp;</a></span>KALDI_DISALLOW_COPY_AND_ASSIGN()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">KALDI_DISALLOW_COPY_AND_ASSIGN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1AperiodicEnergy.html">AperiodicEnergy</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6ed30d81f7adbc8540d7553a838028d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ed30d81f7adbc8540d7553a838028d8">&#9670;&nbsp;</a></span>ObtainNoiseSpectrum()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ObtainNoiseSpectrum </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkaldi_1_1VectorBase.html">VectorBase</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fft_coeffs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classbool.html">bool</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>noise_indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt; <a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> &gt; *&#160;</td>
          <td class="paramname"><em>noise_spectrum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate the noise spectrum from a set of frequencies where noise should dominate in the signal. </p>
<p>We simply interpolate linearly between these frequencies </p>

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8cc_source.html#l00448">448</a> of file <a class="el" href="feature-aperiodic_8cc_source.html">feature-aperiodic.cc</a>.</p>

<p class="reference">References <a class="el" href="kaldi-vector_8h_source.html#l00063">VectorBase&lt; Real &gt;::Dim()</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00129">AperiodicEnergy::feature_window_function_</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00035">AperiodicEnergyOptions::frame_opts</a>, <a class="el" href="mikolov-rnnlm-lib_8cc_source.html#l00066">rnnlm::j</a>, <a class="el" href="kaldi-error_8h_source.html#l00168">KALDI_ASSERT</a>, <a class="el" href="matrix-common_8h_source.html#l00038">kaldi::kSetZero</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00128">AperiodicEnergy::opts_</a>, <a class="el" href="feature-aperiodic_8h_source.html#l00132">AperiodicEnergy::padded_window_size_</a>, <a class="el" href="kaldi-vector_8h_source.html#l00093">VectorBase&lt; Real &gt;::Range()</a>, <a class="el" href="kaldi-vector_8cc_source.html#l00288">VectorBase&lt; Real &gt;::SetZero()</a>, <a class="el" href="feature-window_8h_source.html#l00112">FeatureWindowFunction::window</a>, and <a class="el" href="feature-window_8h_source.html#l00097">FrameExtractionOptions::WindowSize()</a>.</p>

<p class="reference">Referenced by <a class="el" href="feature-aperiodic_8cc_source.html#l00199">AperiodicEnergy::Compute()</a>.</p>
<div class="fragment"><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                                     {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(noise_spectrum != NULL);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <a class="code" href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a>(noise_spectrum-&gt;Dim() == <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  noise_spectrum-&gt;SetZero();</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  Vector&lt;BaseFloat&gt; prev_estimate(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>, <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a>);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  Vector&lt;BaseFloat&gt; debug_spectrum(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>, <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a>);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  Vector&lt;BaseFloat&gt; window_array(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>, <a class="code" href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kSetZero</a>);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  int32 window_size = <a class="code" href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">opts_</a>.<a class="code" href="structkaldi_1_1AperiodicEnergyOptions.html#a188abb2e21a2d6b63458d470a3ccbf10">frame_opts</a>.<a class="code" href="structkaldi_1_1FrameExtractionOptions.html#ad05c4821f98e2190b5c9e20dfdffc26c">WindowSize</a>();</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  int32 last_index = -1;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  window_array.Range(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2 - window_size/2, window_size).</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    CopyFromVec(<a class="code" href="classkaldi_1_1AperiodicEnergy.html#a8b54833fee05a1bb032731e032097929">feature_window_function_</a>.<a class="code" href="structkaldi_1_1FeatureWindowFunction.html#a6e53270444d862f46fadf3406a52ca11">window</a>);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// Build Noise FFT by copying frequencies marked as noise and</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">// interpolating between them.</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="keywordflow">for</span> (int32 <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt;= <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2; ++<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>) {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a> == <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2) || noise_indices[<a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>]) {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="comment">// NB: frequency 0 should never be noise.</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keywordflow">if</span> (j != 0 &amp;&amp; j != <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2) {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        (*noise_spectrum)(j*2) = fft_coeffs(j*2);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        (*noise_spectrum)(j*2 + 1) = fft_coeffs(j*2 + 1);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="comment">// Some gaps have to be filled in</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keywordflow">if</span> (last_index != j - 1) {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="comment">// interpolate linearly between last_index and j-1</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordflow">if</span> (last_index == -1) last_index = 0;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <a class="code" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a> init_re, init_im, end_re, end_im;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="comment">// Handles Kaldi exotic FFT structure: 0 and nyqist frequencies real</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="comment">// together, all the rest as complex.</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="comment">// Interpolate between last_index and j:</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="comment">//  - Load start and end values</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">if</span> (last_index == 0) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;          <span class="comment">// Start from 0</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;          <span class="comment">// NB: for now the value will always be 0</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;          init_re = (*noise_spectrum)(0);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;          init_im = 0.0;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;          init_re = fft_coeffs(last_index*2);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;          init_im = fft_coeffs(last_index*2 + 1);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        }</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">if</span> (j == <a class="code" href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">padded_window_size_</a>/2) {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;          <span class="comment">// End at Nyqist, always pure noise</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;          end_re = fft_coeffs(1);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;          end_im = 0.0;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;          end_re = fft_coeffs(j*2);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;          end_im = fft_coeffs(j*2 + 1);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        }</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="comment">// - Interpolate linearly in complex domain</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        std::complex&lt;double&gt; init_cplx(init_re, init_im);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        std::complex&lt;double&gt; end_cplx(end_re, end_im);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordtype">double</span> init_abs = std::abs(init_cplx), end_abs = std::abs(end_cplx);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordtype">double</span> init_arg = std::arg(init_cplx), end_arg = std::arg(end_cplx);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = last_index + 1; k &lt; <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>; k++) {</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;          <span class="keywordtype">double</span> m = (<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(k) - last_index) / (j - last_index);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;          <span class="comment">// New complex value from linearly interpolated polar representation</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;          std::complex&lt;double&gt; z = std::polar(</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            init_abs * (1.0 - m) + end_abs * m,</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            init_arg * (1.0 - m) + end_arg * m);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;          (*noise_spectrum)(k*2) = static_cast&lt;BaseFloat&gt;(z.real());</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;          (*noise_spectrum)(k*2 + 1) = static_cast&lt;BaseFloat&gt;(z.imag());</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      last_index = <a class="code" href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">j</a>;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">//ComputePowerSpectrum(noise_spectrum);</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div><div class="ttc" id="namespacernnlm_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="namespacernnlm.html#a37d972ae0b47b9099e30983131d31916">rnnlm::j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="mikolov-rnnlm-lib_8cc_source.html#l00066">mikolov-rnnlm-lib.cc:66</a></div></div>
<div class="ttc" id="structkaldi_1_1FeatureWindowFunction_html_a6e53270444d862f46fadf3406a52ca11"><div class="ttname"><a href="structkaldi_1_1FeatureWindowFunction.html#a6e53270444d862f46fadf3406a52ca11">kaldi::FeatureWindowFunction::window</a></div><div class="ttdeci">Vector&lt; BaseFloat &gt; window</div><div class="ttdef"><b>Definition:</b> <a href="feature-window_8h_source.html#l00112">feature-window.h:112</a></div></div>
<div class="ttc" id="structkaldi_1_1FrameExtractionOptions_html_ad05c4821f98e2190b5c9e20dfdffc26c"><div class="ttname"><a href="structkaldi_1_1FrameExtractionOptions.html#ad05c4821f98e2190b5c9e20dfdffc26c">kaldi::FrameExtractionOptions::WindowSize</a></div><div class="ttdeci">int32 WindowSize() const</div><div class="ttdef"><b>Definition:</b> <a href="feature-window_8h_source.html#l00097">feature-window.h:97</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_ad5963def33c959a8a61d1e6d88824d63"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#ad5963def33c959a8a61d1e6d88824d63">kaldi::AperiodicEnergy::padded_window_size_</a></div><div class="ttdeci">int32 padded_window_size_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00132">feature-aperiodic.h:132</a></div></div>
<div class="ttc" id="namespacekaldi_html_aa66ff8367094543664b3b6a13d77c139"><div class="ttname"><a href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">kaldi::BaseFloat</a></div><div class="ttdeci">float BaseFloat</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-types_8h_source.html#l00029">kaldi-types.h:29</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a44420fdea0ac8ffd2da85ebc043a74a6"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a44420fdea0ac8ffd2da85ebc043a74a6">kaldi::AperiodicEnergy::opts_</a></div><div class="ttdeci">AperiodicEnergyOptions opts_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00128">feature-aperiodic.h:128</a></div></div>
<div class="ttc" id="structkaldi_1_1AperiodicEnergyOptions_html_a188abb2e21a2d6b63458d470a3ccbf10"><div class="ttname"><a href="structkaldi_1_1AperiodicEnergyOptions.html#a188abb2e21a2d6b63458d470a3ccbf10">kaldi::AperiodicEnergyOptions::frame_opts</a></div><div class="ttdeci">FrameExtractionOptions frame_opts</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00035">feature-aperiodic.h:35</a></div></div>
<div class="ttc" id="classkaldi_1_1AperiodicEnergy_html_a8b54833fee05a1bb032731e032097929"><div class="ttname"><a href="classkaldi_1_1AperiodicEnergy.html#a8b54833fee05a1bb032731e032097929">kaldi::AperiodicEnergy::feature_window_function_</a></div><div class="ttdeci">FeatureWindowFunction feature_window_function_</div><div class="ttdef"><b>Definition:</b> <a href="feature-aperiodic_8h_source.html#l00129">feature-aperiodic.h:129</a></div></div>
<div class="ttc" id="namespacekaldi_html_ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112"><div class="ttname"><a href="namespacekaldi.html#ab4ace1fea44c7724ab9a76d70abad80bae9d0df3a51f0394dd8e041960265c112">kaldi::kSetZero</a></div><div class="ttdef"><b>Definition:</b> <a href="matrix-common_8h_source.html#l00038">matrix-common.h:38</a></div></div>
<div class="ttc" id="group__error__group_html_gad5710173d69cddcda4fa21ded3c77f16"><div class="ttname"><a href="group__error__group.html#gad5710173d69cddcda4fa21ded3c77f16">KALDI_ASSERT</a></div><div class="ttdeci">#define KALDI_ASSERT(cond)</div><div class="ttdef"><b>Definition:</b> <a href="kaldi-error_8h_source.html#l00168">kaldi-error.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6c33c4063c3a52620541356775ecc4d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c33c4063c3a52620541356775ecc4d4">&#9670;&nbsp;</a></span>band_centers_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; band_centers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8h_source.html#l00135">135</a> of file <a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="feature-aperiodic_8cc_source.html#l00199">AperiodicEnergy::Compute()</a>, and <a class="el" href="feature-aperiodic_8cc_source.html#l00072">AperiodicEnergy::FindBandLocations()</a>.</p>

</div>
</div>
<a id="a7f1ee07b4444f4800a3f756f538a0914"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f1ee07b4444f4800a3f756f538a0914">&#9670;&nbsp;</a></span>band_ends_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; band_ends_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8h_source.html#l00136">136</a> of file <a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="feature-aperiodic_8cc_source.html#l00199">AperiodicEnergy::Compute()</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00166">AperiodicEnergy::ComputeHtsBands()</a>, and <a class="el" href="feature-aperiodic_8cc_source.html#l00072">AperiodicEnergy::FindBandLocations()</a>.</p>

</div>
</div>
<a id="a3bccc2c5ce8bb5bf3791746b106edee1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bccc2c5ce8bb5bf3791746b106edee1">&#9670;&nbsp;</a></span>band_starts_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1Vector.html">Vector</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt; band_starts_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8h_source.html#l00134">134</a> of file <a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="feature-aperiodic_8cc_source.html#l00199">AperiodicEnergy::Compute()</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00166">AperiodicEnergy::ComputeHtsBands()</a>, and <a class="el" href="feature-aperiodic_8cc_source.html#l00072">AperiodicEnergy::FindBandLocations()</a>.</p>

</div>
</div>
<a id="a8b54833fee05a1bb032731e032097929"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b54833fee05a1bb032731e032097929">&#9670;&nbsp;</a></span>feature_window_function_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structkaldi_1_1FeatureWindowFunction.html">FeatureWindowFunction</a> feature_window_function_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8h_source.html#l00129">129</a> of file <a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="feature-aperiodic_8cc_source.html#l00199">AperiodicEnergy::Compute()</a>, and <a class="el" href="feature-aperiodic_8cc_source.html#l00448">AperiodicEnergy::ObtainNoiseSpectrum()</a>.</p>

</div>
</div>
<a id="a31dd6c1fd254910fc3d6c22e1fb066d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31dd6c1fd254910fc3d6c22e1fb066d8">&#9670;&nbsp;</a></span>freq_banks_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1FrequencyBanks.html">FrequencyBanks</a>* freq_banks_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8h_source.html#l00131">131</a> of file <a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="feature-aperiodic_8cc_source.html#l00029">AperiodicEnergy::AperiodicEnergy()</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00199">AperiodicEnergy::Compute()</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00072">AperiodicEnergy::FindBandLocations()</a>, and <a class="el" href="feature-aperiodic_8cc_source.html#l00055">AperiodicEnergy::~AperiodicEnergy()</a>.</p>

</div>
</div>
<a id="a44420fdea0ac8ffd2da85ebc043a74a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44420fdea0ac8ffd2da85ebc043a74a6">&#9670;&nbsp;</a></span>opts_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structkaldi_1_1AperiodicEnergyOptions.html">AperiodicEnergyOptions</a> opts_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8h_source.html#l00128">128</a> of file <a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="feature-aperiodic_8cc_source.html#l00029">AperiodicEnergy::AperiodicEnergy()</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00199">AperiodicEnergy::Compute()</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00166">AperiodicEnergy::ComputeHtsBands()</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00072">AperiodicEnergy::FindBandLocations()</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00303">AperiodicEnergy::IdentifyNoiseRegions()</a>, and <a class="el" href="feature-aperiodic_8cc_source.html#l00448">AperiodicEnergy::ObtainNoiseSpectrum()</a>.</p>

</div>
</div>
<a id="ad5963def33c959a8a61d1e6d88824d63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5963def33c959a8a61d1e6d88824d63">&#9670;&nbsp;</a></span>padded_window_size_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 padded_window_size_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8h_source.html#l00132">132</a> of file <a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="feature-aperiodic_8cc_source.html#l00029">AperiodicEnergy::AperiodicEnergy()</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00199">AperiodicEnergy::Compute()</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00072">AperiodicEnergy::FindBandLocations()</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00303">AperiodicEnergy::IdentifyNoiseRegions()</a>, and <a class="el" href="feature-aperiodic_8cc_source.html#l00448">AperiodicEnergy::ObtainNoiseSpectrum()</a>.</p>

</div>
</div>
<a id="ac34fa979a1bf951c3462b1abaf1fa9a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac34fa979a1bf951c3462b1abaf1fa9a9">&#9670;&nbsp;</a></span>srfft_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkaldi_1_1SplitRadixRealFft.html">SplitRadixRealFft</a>&lt;<a class="el" href="namespacekaldi.html#aa66ff8367094543664b3b6a13d77c139">BaseFloat</a>&gt;* srfft_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="feature-aperiodic_8h_source.html#l00130">130</a> of file <a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="feature-aperiodic_8cc_source.html#l00029">AperiodicEnergy::AperiodicEnergy()</a>, <a class="el" href="feature-aperiodic_8cc_source.html#l00199">AperiodicEnergy::Compute()</a>, and <a class="el" href="feature-aperiodic_8cc_source.html#l00055">AperiodicEnergy::~AperiodicEnergy()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>idlakfeat/<a class="el" href="feature-aperiodic_8h_source.html">feature-aperiodic.h</a></li>
<li>idlakfeat/<a class="el" href="feature-aperiodic_8cc_source.html">feature-aperiodic.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacekaldi.html">kaldi</a></li><li class="navelem"><a class="el" href="classkaldi_1_1AperiodicEnergy.html">AperiodicEnergy</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
